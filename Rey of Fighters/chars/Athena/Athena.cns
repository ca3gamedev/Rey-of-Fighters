;---------------------------------------------------------------------------
; 基本データ
;---------------------------------------------------------------------------
[Data]
life              = 1000   ;ライフ（体力ゲージ）最大値
power             = 5000   ;パワーゲージ最大値（オプション・デフォルトは3000=Lv.3）
attack            = 100    ;攻撃力（デフォルトは１００％）
defence           = 100    ;防御力（デフォルトは１００％）
fall.defence_up   = 50     ;横に倒れている時に一時的に加える防御力（％）
liedown.time      = 60     ;横に倒れている時間（フレーム）
airjuggle         = 15     ;ジャグルポイント限界値（「小ネタ.txt」参照）
sparkno           = 2      ;デフォルトのヒットスパーク（fightfxから）
guard.sparkno     = 40     ;デフォルトのガードスパーク（fightfxから）
KO.echo           = 0      ;ＫＯ時の音声（11,0）にエコーを掛けるか否か（0=掛けない,1=掛ける）
volume            = 0      ;キャラの標準の音量（最小-255・最大255）
IntPersistIndex   = 54     ;次のラウンドへ持ち越せる「Var」のアドレスの範囲を決める（※１）
FloatPersistIndex = 40     ;次のラウンドへ持ち越せる「FVar」のアドレスの範囲を決める（※１）

;---------------------------------------------------------------------------
; サイズ
;---------------------------------------------------------------------------
[Size]
xscale           = 1       ;キャラの横の大きさ（絶対値・float）
yscale           = 1       ;キャラの縦の大きさ（絶対値・float）
ground.back      = 19      ;地上にいる時の「後方の物理的な幅」
ground.front     = 18      ;地上にいる時の「前方の物理的な幅」
air.back         = 12      ;空中にいる時の「後方の物理的な幅」
air.front        = 15      ;空中にいる時の「前方の物理的な幅」
height           = 60      ;キャラの物理的な高さ（高いほど相手は飛び越しにくくなる）
attack.dist      = 160     ;相手がガード態勢に入る最低の距離
proj.attack.dist = 90      ;自分の「Projectile」に対して相手がガード態勢に入る最低の距離
proj.doscale     = 0       ;xscaleとyscaleを「Projectile」にも影響させるか否か（0=させない・1=させる）
head.pos         = 2,-84   ;キャラの標準の頭の座標（Bind系で適用される）
mid.pos          = 0,-60   ;キャラの標準の体中心の座標（Bind系で適用される）
shadowoffset     = 0       ;影のＹ軸方向の位置座標
draw.offset      = 0,0     ;キャラの表示座標（Ｘ軸,Ｙ軸）

;---------------------------------------------------------------------------
; 移動速度
;---------------------------------------------------------------------------
[Velocity]
walk.fwd     = 2.6         ;前進速度（Ｘ軸・[Statedef 20]に適用される）
walk.back    = -2.6        ;後退速度（Ｘ軸・[Statedef 20]に適用される）
run.fwd      = 6.0,0       ;前方に走る速度（Ｘ軸,Ｙ軸・[Statedef 100]に適用される）
run.back     = -7.0,-4.5   ;後方に走る速度（Ｘ軸,Ｙ軸・[Statedef 105]に適用される）
jump.neu     = 0,-10      ;垂直ジャンプの速度（Ｘ軸,Ｙ軸・[Statedef 40]に適用される）
jump.back    = -3.1       ;後方ジャンプの速度（Ｘ軸・[Statedef 40]に適用される）
jump.fwd     = 3.1         ;前方ジャンプの速度（Ｘ軸・[Statedef 40]に適用される）
runjump.back = -2.55,-8.1  ;後方に走ってからのジャンプ速度（Ｘ軸,Ｙ軸・[Statedef 40]に適用される）
runjump.fwd  = 4,-8.1      ;前方に走ってからのジャンプ速度（Ｘ軸,Ｙ軸・[Statedef 40]に適用される）
airjump.neu  = 0,-8.1      ;空中垂直ジャンプ速度（Ｘ軸,Ｙ軸・[Statedef 45]に適用される）
airjump.back = -2.55       ;空中後方ジャンプ速度（Ｘ軸・[Statedef 45]に適用される）
airjump.fwd  = 2.5         ;空中前方ジャンプ速度（Ｘ軸・[Statedef 45]に適用される）

;---------------------------------------------------------------------------
; 運動関係
;---------------------------------------------------------------------------
[Movement]
airjump.num     = 0        ;空中ジャンプが出来る回数
airjump.height  = 35       ;空中ジャンプが出来る最低の高度（Ｙ軸）
yaccel          = .57      ;Ｙ軸加速度（重力）
stand.friction  = .85      ;立っている時の摩擦係数（ステートのPhysicsが「S」の時）
crouch.friction = .82      ;しゃがんでいる時の摩擦係数（ステートのPhysicsが「C」の時）

;===========================================================================
; ステート
;===========================================================================
;---------------------------------------------------------------------------
; Stand
[Statedef 0]
type = S
physics = S
sprpriority = 0

[State 0, 1]
type = ChangeAnim
trigger1 = Anim != 0 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0 ;Turn anim over
value = 0

[State 0, 2]
type = VelSet
trigger1 = Time = 0
y = 0

[State 0, 3] ;Stop moving if low velocity or 4 ticks pass
type = VelSet
trigger1 = time = 0
;trigger1 = abs(vel x) < 2
;trigger2 = Time = 4
x = 0

[State 0, PosSet];浮遊バグ対策
type = PosSet
trigger1 = alive && Life>0
trigger1 = abs(Pos Y) > 5
y = 0

[State 0, 4] ;Are you dead?
type = ChangeState
trigger1 = !alive
value = 5050

[State 0, 4]
type = DestroySelf
trigger1 = ishelper

;---------------------------------------------------------------------------
; Stand to Crouch
[Statedef 10]
type    = C
physics = C
anim = 10

[State 10, 1]
type = VelSet
trigger1 = Time = 0
x = 0

[State 10, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 11

;---------------------------------------------------------------------------
; Crouching
[Statedef 11]
type    = C
physics = C
anim = 11
sprpriority = 0

[State 11, 0]
type = VelSet
trigger1 = Time = 0
x = 0

[State 11, 1] ;Change from turning animation
type = ChangeAnim
trigger1 = Anim = 6 && AnimTime = 0
value = 11

;---------------------------------------------------------------------------
; Crouch to Stand
[Statedef 12]
type    = S
physics = S
anim = 12

[State 11, 0]
type = VelSet
trigger1 = Time = 0
x = 0

[State 12, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; Walk
[Statedef 20]
type    = S
physics = S
sprpriority = 0

[State -1, AI]
Type = ChangeState
TriggerAll = var(59) >0
Trigger1 = !Time
Value = 19
IgnoreHitPause = 1

[State 20, 1]
type = VelSet
trigger1 = var(59)=0
trigger1 = command = "holdfwd"
x = const(velocity.walk.fwd.x)

[State 20, 2]
type = VelSet
trigger1 = var(59)=0
trigger1 = command = "holdback"
x = const(velocity.walk.back.x)

[State 20, 3]
type = ChangeAnim
triggerall = vel x > 0
trigger1 = Anim != 20 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 20

[State 20, 4]
type = ChangeAnim
triggerall = vel x < 0
trigger1 = Anim != 21 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 21

;---------------------------------------------------------------------------
; Walk(FWD) AI
[Statedef 19]
type    = S
physics = S
sprpriority = 0
ctrl = 0

[State 19, 1]
type = VelSet
trigger1 = 1
x = const(velocity.walk.fwd.x)

[State 19, 3]
type = ChangeAnim
trigger1 = Anim != 20
value = 20

[State 20, 1]
type = Turn
trigger1 = P2dist X < 0

[State 19, Ctrl]
type = ChangeState
trigger1 = roundstate!=2
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Walk(BACK) AI
[Statedef 21]
type    = S
physics = S
sprpriority = 0
ctrl = 0

[State 21, 2]
type = VelSet
trigger1 = 1
x = const(velocity.walk.back.x)

[State 21, 4]
type = ChangeAnim
trigger1 = Anim != 21
value = 21

[State 20, 1]
type = Turn
trigger1 = P2dist X < 0

[State 21, Ctrl]
type = ChangeState
trigger1 = roundstate!=2
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Walk Stop AI
[State -1, AI]
Type = ChangeState
triggerall = (stateno=19||stateno=21)
trigger1 = var(59)<0
trigger2 = roundstate!=2
Value = 0
Ctrl = 1

[State -1, AI]
Type = ChangeState
triggerall = (stateno=19||stateno=21)&&(var(59)>0)
trigger1 = time > 12 || (time > 3 && var(59)>8)
trigger1 = P2bodydist x < 30
Trigger1 = anim = 20
trigger1 = fvar(38)=0
trigger2 = time > 24 || (time > 3 && var(59)>8)
trigger2 = P2bodydist x >= 90
Trigger2 = anim = 21
trigger3 = inguarddist
Trigger3 = Anim = 21 || Random < 60*(var(59)-1)||var(59) >8
trigger4 = roundstate != 2
Value = 0
Ctrl = 1

;---------------------------------------------------------------------------
; Jump Start
[Statedef 40]
type    = S
physics = S
anim = 40
ctrl = 0
sprpriority = 1

[State 40, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 40, 6]
type = ChangeState
trigger1 = var(59) > 0
trigger1 = Time = 0
value = 19

[State 40, 2]
type = VarSet
trigger1 = var(59)=0
trigger1 = command = "holdfwd"
sysvar(1) = 1

[State 40, 3]
type = VarSet
trigger1 = var(59)=0
trigger1 = command = "holdback"
sysvar(1) = -1

[State 40, 4]
type = VelSet
trigger1 = AnimTime = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 40, 5]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = prevstateno = 100 || prevstateno = 99; || (var(59)>0&&fvar(39)=3);RUN_FWD
trigger1 = sysvar(1) = 1
x = const(velocity.runjump.fwd.x)

[State 40, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
; Jump Start(AI)
[Statedef 41]
type    = S
physics = S
anim = 40
ctrl = 0
sprpriority = 1

[State 40, 1]
type = VarSet
trigger1 = Time = 0
trigger2 = var(59)>0
trigger2 = enemynear(var(58)),statetype=A
trigger2 = enemynear(var(58)),statetype!=L
trigger2 = enemynear(var(58)),movetype!=H
trigger2 = enemynear(var(58)),vel x > 0
trigger2 = p2bodydist x = [60,100]
trigger2 = random<100
trigger3 = var(59)=[1,5]
trigger3 = random<50
trigger4 = var(59)>0
trigger4 = fvar(39)!=3
trigger5 = var(59)>0
trigger5 = prevstateno!=[99,100]
trigger5 = p2bodydist x = [-2,50]
trigger5 = random<=250
trigger6 = var(59)>0
trigger6 = fvar(39)=3.1
sysvar(1) = 0

[State 40, 2]
type = VarSet
trigger1 = var(59)=0
trigger1 = command = "holdfwd"
trigger2 = (var(59)>0&&enemynear(var(58)),statetype!=A)
trigger3 = var(59)>0
trigger3 = EnemyNear(var(58)),StateType != L || P2BodyDist X >= 40
trigger3 = EnemyNear(var(58)),MoveType = H || Random <= 333 || EnemyNear(var(58)),StateType = L
trigger4 = var(59)>0
trigger4 = fvar(39)!=[3.0,3.1]
sysvar(1) = 1

[State 40, 3]
type = VarSet
trigger1 = var(59)=0
trigger1 = command = "holdback"
trigger2 = var(59)>0&&enemynear(var(58)),statetype=A&&enemynear(var(58)),vel x>0
trigger2 = enemynear(var(58)),stateno!=[105,106]
trigger2 = backedgebodydist >60
trigger2 = sysvar(1)!=1&&random<=250
trigger3 = var(59)>0
trigger3 = fvar(39)=3
trigger4 = var(59)>0
trigger4 = enemynear(var(58)),statetype!=A
trigger4 = p2bodydist x = [50-enemynear(var(58)),vel x*5,80+enemynear(var(58)),vel x*5]
trigger4 = backedgebodydist>60
trigger4 = random<=250
sysvar(1) = -1

[State 40, 4]
type = VelSet
trigger1 = AnimTime = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 40, 5]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = prevstateno = 100 || prevstateno = 99;RUN_FWD
trigger1 = sysvar(1) = 1
x = const(velocity.runjump.fwd.x)

[State 40, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
; Jump Land
[Statedef 52]
type    = S
physics = S
ctrl = 0
anim = 47

[State 52, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, 3]
type = CtrlSet
trigger1 = Time = 3
value = 1

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; RUN_FWD
[Statedef 100]
type    = S
physics = S
anim = 100
sprpriority = 1

[State 100, 0]
type = PlaySnd
trigger1 = Time = 3
value = 100, 0
loop = 1
channel = 1

[State 100, 1]
type = VelSet
trigger1 = AnimElemtime(2) >= 0
x = const(velocity.run.fwd.x)

[State 100, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 100, 4]
type = ChangeState
trigger1 = command != "holdfwd"
value = 0

;---------------------------------------------------------------------------
; RUN_FWD (AI)
[Statedef 99]
type    = S
physics = S
anim = 100
ctrl = 0
sprpriority = 1

[State 100, 0]
type = PlaySnd
trigger1 = Time = 3
value = 100, 0
loop = 1
channel = 1

[State 100, 1]
type = VelSet
trigger1 = AnimElemtime(2) >= 0
x = const(velocity.run.fwd.x)

[State 100, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 100, 4]
type = ChangeState
triggerall = var(59) = 0
trigger1 = command != "holdfwd"
value = 0
ctrl = 1

[State -1, AI]
type = ChangeState
triggerall = var(59)>0
triggerall = stateno = 99 && time>=10
triggerall = fvar(38)=0
Trigger1 = inguarddist
Trigger2 = EnemyNear,MoveType!=H
Trigger2 = P2BodyDist X<=30
Trigger2 = P2BodyDist Y>=-120
trigger2 = random<=var(59)*15
Trigger3 = P2BodyDist X=[10,30]
trigger3 = random<=var(59)*15
trigger4 = RoundState != 2 
trigger5 = p2bodydist x <= 5
trigger6 = p2bodydist x = [31,60]
trigger6 = random<=var(59)*20
trigger7 = P2BodyDist X = [61,90]
trigger7 = random <= var(59)*5
trigger8 = time = 60
value = 0
ctrl = 1

[State -1, AI run stop];強制ストップ
type = ChangeState
triggerall = stateno = 99
trigger1 = RoundState = 4 ;ラウンド終了
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; RUN_BACK
[Statedef 105]
type    = A
physics = A
ctrl = 0
anim = 105
sprpriority = 1

[State 105, 1]
type = VelSet
trigger1 = animelemtime(2) <0
y = 0

[State 105, 1]
type = VelSet
trigger1 = animelem = 2
x = const(velocity.run.back.x)
y = const(velocity.run.back.y)

[State 105, 1]
type = VelSet
trigger1 = vel x>=0
x = 0

[State 105, 1]
type = VelAdd
trigger1 = vel y>0
trigger1 = vel x<0
x = .7

;[State 105, 2]
;type = CtrlSet
;trigger1 = Time = 2
;value = 1

[State 105, 3]
type = ChangeState
trigger1 = animelemtime(2)>=0
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 106

;---------------------------------------------------------------------------
; RUN_BACK2 (land)
[Statedef 106]
type    = S
physics = S
ctrl = 0
anim = 106

[State 106, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 106, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 106, 3]
type = MakeDust
trigger1 = Time = 2
pos = -5,-2
spacing = 1

[State 106, 4]
type = ChangeState
trigger1 = animtime=0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; GUARD (start)
[Statedef 120]
type = U    ;Leave state type unchanged
physics = U ;Leave physics unchanged

[State 120, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 120 + (statetype = C) + (statetype = A)*2

[State 120, 2]
type = StateTypeSet
trigger1 = Time = 0 && statetype = S
physics = S

[State 120, 3]
type = StateTypeSet
trigger1 = Time = 0 && statetype = C
physics = C

[State 120, 4]
type = StateTypeSet
trigger1 = Time = 0 && statetype = A
physics = A

[State 120, Hi to Lo]
type = StateTypeSet
TriggerAll=Statetype = S
Trigger1 = var(59) = 0
Trigger1 = command = "holddown"
Trigger2 = var(59) >= 1
Trigger2 = EnemyNear,StateType!=A
Trigger2 = Random <= var(59)*20||var(59)>9
trigger2 = statetype != A
trigger2 = enemynear(var(58)),stateno!=var(55) && enemynear(var(58)),stateno!=var(54)
statetype = C
physics = C

[State 120, Lo to Hi]
type = StateTypeSet
TriggerAll=Statetype = C
Trigger1 = var(59)=0
Trigger1 = command != "holddown"
Trigger2 = var(59)>=1
Trigger2 = EnemyNear,StateType=A || enemynear(var(58)),stateno=var(55) || enemynear(var(58)),stateno=var(54)
Trigger2 = Random <= var(59)*20||var(59)>9
trigger2 = statetype != A
statetype = S
physics = S

[State 120, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 130 + (statetype = C) + (statetype = A)*2

[State 120, Stop Guarding]
type = ChangeState
Trigger1 = var(59) = 0
trigger1 = command != "holdback"
trigger2 = !inguarddist
Trigger3 = var(59)=[1,9]
Trigger3 = P2BodyDist X<0
Trigger3 = Random <= (10-var(59))*40
value = 140

;---------------------------------------------------------------------------
; STAND GUARD (guarding)
[Statedef 130]
type    = S
physics = S

[State 130, 1]
type = ChangeAnim
trigger1 = Anim != 130
value = 130

[State 130, Hi to Lo]
type = ChangeState
Trigger1 = var(59)=0
Trigger1 = command = "holddown"
Trigger2 = var(59)>=1
Trigger2 = EnemyNear,StateType!=A
Trigger2 = Random <= var(59)*20||var(59)>9
trigger2 = enemynear(var(58)),stateno!=var(55) && enemynear(var(58)),stateno!=var(54)
value = 131

[State 130, Stop Guarding]
type = ChangeState
Trigger1 = var(59) = 0
trigger1 = command != "holdback"
trigger2 = !inguarddist
Trigger3 = var(59)=[1,9]
Trigger3 = P2BodyDist X<0
Trigger3 = Random <= (10-var(59))*40
value = 140

;---------------------------------------------------------------------------
; CROUCH GUARD (guarding)
[Statedef 131]
type    = C
physics = C

[State 131, 1]
type = ChangeAnim
trigger1 = Anim != 131
value = 131

[State 131, Lo to Hi]
type = ChangeState
Trigger1 = var(59)=0
Trigger1 = command != "holddown"
Trigger2 = var(59)>=1
Trigger2 = EnemyNear,StateType=A || enemynear(var(58)),stateno=var(55) || enemynear(var(58)),stateno=var(54)
Trigger2 = Random <= var(59)*20||var(59)>9
value = 130

[State 131, Stop Guarding]
type = ChangeState
Trigger1 = var(59) = 0
trigger1 = command != "holdback"
trigger2 = !inguarddist
Trigger3 = var(59)=[1,9]
Trigger3 = P2BodyDist X<0
Trigger3 = Random <= (10-var(59))*40
value = 140

;---------------------------------------------------------------------------
; AIR GUARD (guarding)
[Statedef 132]
type    = A
physics = N

[State 132, 1]
type = ChangeAnim
trigger1 = Anim != 132
value = 132

[State 132, 2]
type = VelAdd
trigger1 = 1
y = Const(movement.yaccel)

[State 132, 3]
type = VarSet
trigger1 = 1
sysvar(0) = (pos y >= 0) && (vel y > 0)

[State 132, 4]
type = VelSet
trigger1 = sysvar(0)
y = 0

[State 132, 5]
type = PosSet
trigger1 = sysvar(0)
y = 0

[State 132, 6]
type = ChangeState
trigger1 = sysvar(0)
trigger1 = command = "holdback"
trigger1 = inguarddist
value = 130

[State 132, 7]
type = ChangeState
trigger1 = sysvar(0)
value = 52

[State 132, Stop Guarding]
type = ChangeState
trigger1 = command != "holdback"
Trigger1 = var(59) = 0
trigger2 = !inguarddist
Trigger3 = var(59)=[1,9]
Trigger3 = P2BodyDist X<0
Trigger3 = Random <= (10-var(59))*40
value = 140

;---------------------------------------------------------------------------
; GUARD (end)
[Statedef 140]
type = U    ;Leave state type unchanged
physics = U ;Leave physics unchanged
ctrl = 1

[State 140, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 140 + (statetype = C) + (statetype = A)*2

[State 140, 2]
type = StateTypeSet
trigger1 = Time = 0 && statetype = S
physics = S

[State 140, 3]
type = StateTypeSet
trigger1 = Time = 0 && statetype = C
physics = C

[State 140, 4]
type = StateTypeSet
trigger1 = Time = 0 && statetype = A
physics = A

[State 120, Hi to Lo]
type = StateTypeSet
TriggerAll=Statetype = S
Trigger1 = var(59) = 0
Trigger1 = command = "holddown"
Trigger2 = var(59) >= 1
Trigger2 = EnemyNear,StateType!=A
Trigger2 = Random <= var(59)*20||var(59)>9
trigger2 = statetype != A
trigger2 = enemynear(var(58)),stateno!=var(55) && enemynear(var(58)),stateno!=var(54)
statetype = C
physics = C

[State 120, Lo to Hi]
type = StateTypeSet
TriggerAll=Statetype = C
Trigger1 = var(59)=0
Trigger1 = command != "holddown"
Trigger2 = var(59)>=1
Trigger2 = EnemyNear,StateType=A || enemynear(var(58)),stateno=var(55) || enemynear(var(58)),stateno=var(54)
Trigger2 = Random <= var(59)*20||var(59)>9
trigger2 = statetype != A
statetype = S
physics = S

;[State 140, 5] ;Implemented within engine
;type = ChangeState
;trigger1 = AnimTime = 0
;value = (statetype = C)*11 + (statetype = A)*51

;---------------------------------------------------------------------------
; SGUARDHIT (shaking)
[Statedef 150]
type    = S
movetype= H
physics = N
velset = 0,0

[State 150, 1]
type = ChangeAnim
trigger1 = 1
value = 150

[State 150, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 151 + 2*ifelse(var(59)=0,(command = "holddown"),(enemynear,statetype=C))

[State 120, Hi to Lo]
type = StateTypeSet
TriggerAll=Statetype = S
Trigger1 = var(59) = 0
Trigger1 = command = "holddown"
Trigger2 = var(59) >= 1
Trigger2 = EnemyNear,StateType!=A
Trigger2 = Random <= var(59)*20||var(59)>9
trigger2 = statetype != A
trigger2 = enemynear(var(58)),stateno!=var(55) && enemynear(var(58)),stateno!=var(54)
statetype = C
physics = C

[State 120, Lo to Hi]
type = StateTypeSet
TriggerAll=Statetype = C
Trigger1 = var(59)=0
Trigger1 = command != "holddown"
Trigger2 = var(59)>=1
Trigger2 = EnemyNear,StateType=A || enemynear(var(58)),stateno=var(55) || enemynear(var(58)),stateno=var(54)
Trigger2 = Random <= var(59)*20||var(59)>9
trigger2 = statetype != A
statetype = S
physics = S

[State 150, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 3

;---------------------------------------------------------------------------
; SGUARDHIT2 (knocked back)
[Statedef 151]
type    = S
movetype= H
physics = S
anim = 150

[State 151, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 151, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = HitOver
x = 0

[State 151, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 120, Hi to Lo]
type = StateTypeSet
TriggerAll=Statetype = S
Trigger1 = var(59) = 0
Trigger1 = command = "holddown"
Trigger2 = var(59) >= 1
Trigger2 = EnemyNear,StateType!=A
Trigger2 = Random <= var(59)*20||var(59)>9
trigger2 = statetype != A
trigger2 = enemynear(var(58)),stateno!=var(55) && enemynear(var(58)),stateno!=var(54)
statetype = C
physics = C

[State 120, Lo to Hi]
type = StateTypeSet
TriggerAll=Statetype = C
Trigger1 = var(59)=0
Trigger1 = command != "holddown"
Trigger2 = var(59)>=1
Trigger2 = EnemyNear,StateType=A || enemynear(var(58)),stateno=var(55) || enemynear(var(58)),stateno=var(54)
Trigger2 = Random <= var(59)*20||var(59)>9
trigger2 = statetype != A
statetype = S
physics = S

[State 151, 4]
type = ChangeState
trigger1 = HitOver
value = 130
ctrl = 1

;---------------------------------------------------------------------------
; CGUARDHIT (shaking)
[Statedef 152]
type    = C
movetype= H
physics = N
velset = 0,0

[State 152, 1]
type = ChangeAnim
trigger1 = 1
value = 151

[State 152, 3]
type = ChangeState
trigger1 = HitShakeOver
value = 151 + 2*ifelse(var(59)=0,(command = "holddown"),(enemynear,statetype=C))

[State 120, Hi to Lo]
type = StateTypeSet
TriggerAll=Statetype = S
Trigger1 = var(59) = 0
Trigger1 = command = "holddown"
Trigger2 = var(59) >= 1
Trigger2 = EnemyNear,StateType!=A
Trigger2 = Random <= var(59)*20||var(59)>9
trigger2 = statetype != A
trigger2 = enemynear(var(58)),stateno!=var(55) && enemynear(var(58)),stateno!=var(54)
statetype = C
physics = C

[State 120, Lo to Hi]
type = StateTypeSet
TriggerAll=Statetype = C
Trigger1 = var(59)=0
Trigger1 = command != "holddown"
Trigger2 = var(59)>=1
Trigger2 = EnemyNear,StateType=A || enemynear(var(58)),stateno=var(55) || enemynear(var(58)),stateno=var(54)
Trigger2 = Random <= var(59)*20||var(59)>9
trigger2 = statetype != A
statetype = S
physics = S

[State 152, 4]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4

;---------------------------------------------------------------------------
; CGUARDHIT2 (knocked back)
[Statedef 153]
type    = C
movetype= H
physics = C
anim = 151

[State 153, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 153, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = HitOver
x = 0

[State 153, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 120, Hi to Lo]
type = StateTypeSet
TriggerAll=Statetype = S
Trigger1 = var(59) = 0
Trigger1 = command = "holddown"
Trigger2 = var(59) >= 1
Trigger2 = EnemyNear,StateType!=A
Trigger2 = Random <= var(59)*20||var(59)>9
trigger2 = statetype != A
trigger2 = enemynear(var(58)),stateno!=var(55) && enemynear(var(58)),stateno!=var(54)
statetype = C
physics = C

[State 120, Lo to Hi]
type = StateTypeSet
TriggerAll=Statetype = C
Trigger1 = var(59)=0
Trigger1 = command != "holddown"
Trigger2 = var(59)>=1
Trigger2 = EnemyNear,StateType=A || enemynear(var(58)),stateno=var(55) || enemynear(var(58)),stateno=var(54)
Trigger2 = Random <= var(59)*20||var(59)>9
trigger2 = statetype != A
statetype = S
physics = S

[State 153, 4]
type = ChangeState
trigger1 = HitOver
value = 131
ctrl = 1

;---------------------------------------------------------------------------
; AGUARDHIT (shaking)
[Statedef 154]
type    = A
movetype= H
physics = N
velset = 0,0

[State 154, 1]
type = ChangeAnim
trigger1 = 1
value = 152

[State 154, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 155 ;AGUARDHIT2

[State 154, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4

;---------------------------------------------------------------------------
; AGUARDHIT2 (knocked away)
[Statedef 155]
type    = A
movetype= H
physics = N
anim = 152

[State 155, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 155, 2]
type = VelAdd
trigger1 = 1
y = Const(movement.yaccel)

[State 155, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 155, 4]
type = VarSet
trigger1 = 1
sysvar(0) = (pos y >= 0) && (vel y > 0)

[State 155, 5]
type = VelSet
trigger1 = sysvar(0)
y = 0

[State 155, 6]
type = PosSet
trigger1 = sysvar(0)
y = 0

[State 155, 6]
type = ChangeState
trigger1 = sysvar(0)
trigger1 = command = "holdback"
trigger1 = inguarddist
value = 130

[State 155, 7]
type = ChangeState
trigger1 = sysvar(0)
value = 52

;===========================================================================
; 基本行動
;===========================================================================
;---------------------------------------------------------------------------
;タイムオーバー（負けた時）
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 2
value = 170, 0
;channel = 0
volume = 150

[State 170, 無敵]
type = NotHitBy
trigger1 = 1 ;トリガーを何も書かず「1」にする事により、『無条件で常に実行させる命令』になる。
value = SCA
time = 1

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;勝利ポーズ分岐（common1.cnsには無いけど、これもコモンステート）
[Statedef 180]
type = S

[State 180]
type = VarRandom
trigger1 = 1
v = 2
range = 1,4

[State 180]
type = ChangeState
trigger1 = var(2)!=0
value = 180 + var(2)

;---------------------------------------------------------------------------
;勝利ポーズ
;完璧でしょ？
[Statedef 181]
type = S
ctrl = 0
anim = 180
velset = 0,0

[State 180, 音];完璧
type = PlaySnd
trigger1 = animelemtime(2)=0
value = 180, 0
volume = 100

[State 180, 音];でしょ？
type = PlaySnd
trigger1 = animelemtime(13)=0
value = 180, 1
volume = 100

[State 1];カメラ固定
type = screenbound
trigger1 = 1
value = 1
movecamera = 1

[State 181, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 181, 4]
type = AssertSpecial
trigger1 = time = [0,120]
flag = roundnotover

;---------------------------------------------------------------------------
;勝利ポーズ
;Good fight!!
[Statedef 182]
type = S
ctrl = 0
anim = 181
velset = 0,0

[State 180, 音]
type = PlaySnd
trigger1 = animelemtime(2)=0
value = 180, 2
volume = 100

[State 1];カメラ固定
type = screenbound
trigger1 = 1
value = 1
movecamera = 1

[State 181, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 181, 4]
type = AssertSpecial
trigger1 = time = [0,80]
flag = roundnotover

;---------------------------------------------------------------------------
;勝利ポーズ
[Statedef 183]
type = S
ctrl = 0
anim = 182
velset = 0,0

[State 180, 音]
type = null;PlaySnd
trigger1 = animelemtime(2)=0
value = 180, 0
volume = 100

[State 180, 音]
type = null;PlaySnd
trigger1 = animelemtime(13)=0
value = 180, 1
volume = 100

[State 1];カメラ固定
type = screenbound
trigger1 = 1
value = 1
movecamera = 1

[State 181, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 181, 4]
type = AssertSpecial
trigger1 = time = [0,122]
flag = roundnotover

;---------------------------------------------------------------------------
;勝利ポーズ
;もぎたてのプルプルよ
[Statedef 184]
type = S
ctrl = 0
anim = 183
velset = 0,0

[State 180, 音];もぎたての
type = PlaySnd
trigger1 = animelemtime(2)=0
value = 180, 3
volume = 130

[State 180, 音];プルプルよ
type = PlaySnd
trigger1 = animelemtime(13)=0
value = 180, 4
volume = 130

[State 1];カメラ固定
type = screenbound
trigger1 = 1
value = 1
movecamera = 1

[State 181, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 181, 4]
type = AssertSpecial
trigger1 = time = [0,125]
flag = roundnotover

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;イントロ（試合開始前の登場演出アクション）
[Statedef 190]
type = S
ctrl = 0
anim = 0
velset = 0,0

[State 190, ChangeState];対包
type = ChangeState
triggerall = time = 0
trigger1 = p2name = "bao" || p4name = "bao"
value = 193

[State 190, ChangeState];対拳崇
type = ChangeState
triggerall = time = 0
trigger1 = p2name = "Kensou"     || p4name = "Kensou"
trigger2 = p2name = "Sie Kensou" || p4name = "Sie Kensou"
value = 194

[State 190, ChangeState];対鎮
type = ChangeState
triggerall = time = 0
trigger1 = p2name = "Chin"   || p4name = "Chin"
trigger2 = p2name = "M_Chin" || p4name = "M_Chin"
value = 196

[State 180]
type = VarRandom
trigger1 = 1
v = 2
range = 1,2

[State 191, 特殊効果];試合が開始するまではこのコントローラを使おう（※２）
type = AssertSpecial
trigger1 = 1
flag = Intro ;イントロの状態

[State 191, ステート変更]
type = ChangeState
trigger1 = time = 1
trigger1 = var(2)!=0
value = 190 + var(2)

;---------------------------------------------------------------------------
;イントロ
;がんばって！いきまっしょい！！
[Statedef 191]
type = S
ctrl = 0
anim = 190
velset = 0,0
sprpriority = 4

[State 190, 音];がんばって
type = PlaySnd
trigger1 = animelemtime(2)=0
value = 190,0
volume = 150

[State 190, 音];いきまっしょい
type = PlaySnd
trigger1 = animelemtime(8)=0
value = 190,1
volume = 150

[State 1000, 音を鳴らす];ワープ効果音
type = PlaySnd
trigger1 = AnimElem = 8
value = 1500, 1

[State 191, 特殊効果];試合が開始するまではこのコントローラを使おう（※２）
type = AssertSpecial
trigger1 = 1
flag = Intro ;イントロの状態

[State 801, Explod];パーツ1
type = Explod
trigger1 = time = 0
anim = 10190
ID = 10190
pos = 0, 0
postype = p1
facing = 1
sprpriority = 4
bindtime = -1     ;永久に固定
shadow = -1
ownpal = 1
removeongethit = 1

[State 801, Explod];パーツ2
type = Explod
trigger1 = time = 0
anim = 10191
ID = 10191
pos = 0, 0
postype = p1
facing = 1
sprpriority = 4
bindtime = -1     ;永久に固定
shadow = -1
ownpal = 1
removeongethit = 1

[State 801, Explod];パーツ3
type = Explod
trigger1 = animelemtime(7)=6
anim = 10192
ID = 10192
pos = 0, 0
postype = p1
facing = 1
sprpriority = 4
bindtime = -1     ;永久に固定
shadow = -1
ownpal = 1
removeongethit = 1

;--------------------------------Helper
[State 1000, Helper]
type = helper
trigger1 = NumHelper(10193)=0
trigger1 = animelem = 12
id = 10193
persistent = 0
name = "Clothes"
pos = 33,-108
postype = p1
stateno = 10193
helpertype = normal
keyctrl = 0
ownpal = 1
;--------------------------------

[State 191, ステート変更]
type = ChangeState
trigger1 = animtime = 0
value = 0
;---------------------------------------------------------------------------
;イントロ
;(HELPER)投げ捨てた服
[Statedef 10193]
type    = A
movetype= A
physics = N
ctrl = 0
anim = 10193
velset = -4,-3
sprpriority = 3

[State 10193, VelSet]
type = VelSet
trigger1 = Pos Y <= -140
x = 0
y = 0

[State 801, Explod];投げ捨てた服B
type = Explod
trigger1 = time = 0
anim = 10194
ID = 10194
pos = 0, 0
postype = p1
facing = 1
sprpriority = 3
bindtime = -1     ;永久に固定
shadow = -1
ownpal = 1
removetime = -1
removeongethit = 1

[State 801, Explod];投げ捨てた服C
type = Explod
trigger1 = time = 0
anim = 10195
ID = 10194
pos = 0, 0
postype = p1
facing = 1
sprpriority = 3
bindtime = -1     ;永久に固定
shadow = -1
ownpal = 1
removetime = -1
removeongethit = 1

[State 1000, RemoveExplod]
Type = RemoveExplod
trigger1 = time>30
ID = 10194

[State 10193, DestroySelf]
type = DestroySelf
trigger1 = time>30

;---------------------------------------------------------------------------
;イントロ
;アテナ、いっきまーす！
[Statedef 192]
type = S
ctrl = 0
anim = 191
velset = 0,0
sprpriority = 2

[State 190, 音];いきまーす
type = PlaySnd
trigger1 = animelemtime(2)=0
value = 190,2
volume = 150

[State 190, 音];いきまーす
type = PlaySnd
trigger1 = animelemtime(3)=35
value = 190,3
volume = 150

[State 191, 特殊効果];試合が開始するまではこのコントローラを使おう（※２）
type = AssertSpecial
trigger1 = 1
flag = Intro ;イントロの状態

[State 191, ステート変更]
type = ChangeState
trigger1 = animtime = 0
value = 0

;---------------------------------------------------------------------------
;イントロ
;対包
[Statedef 193]
type = S
ctrl = 0
anim = 192
velset = 0,0

[State 191, 特殊効果];試合が開始するまではこのコントローラを使おう（※２）
type = AssertSpecial
trigger1 = 1
flag = Intro ;イントロの状態

[State 191, ステート変更]
type = ChangeState
trigger1 = animtime = 0
value = 0

;---------------------------------------------------------------------------
;イントロ
;対拳崇
[Statedef 194]
type = S
ctrl = 0
anim = 193
velset = 0,0

[State 190, 音];
type = PlaySnd
trigger1 = animelemtime(1)=10
value = 190,4
volume = 150

[State 190, 音];
type = PlaySnd
trigger1 = animelemtime(2)=0
value = 190,5
volume = 150

[State 191, 特殊効果];試合が開始するまではこのコントローラを使おう（※２）
type = AssertSpecial
trigger1 = 1
flag = Intro ;イントロの状態

[State 191, ステート変更]
type = ChangeState
trigger1 = animtime = 0
value = 0

;---------------------------------------------------------------------------
;イントロ
;対鎮
[Statedef 196]
type = S
ctrl = 0
anim = 194
velset = 0,0

[State 191, 特殊効果];試合が開始するまではこのコントローラを使おう（※２）
type = AssertSpecial
trigger1 = 1
flag = Intro ;イントロの状態

[State 191, ステート変更]
type = ChangeState
trigger1 = animtime = 0
value = 0

;---------------------------------------------------------------------------
;挑発
[Statedef 195]
type = S
movetype = I
physics = S
ctrl = 0
anim = 195
velset = 0,0
sprpriority = 2
poweradd = 100
facep2 = 1 ;はじめに相手のほうを向くかどうか。省略時0

[State 190, 音];
type = PlaySnd
trigger1 = animelemtime(1)=2
value = 195,0
volume = 150

[State 195, コントロール]
type = CtrlSet
trigger1 = Time = 40 ;このステートが４０フレームになったら
value = 1            ;キーコントロールが可能になる。

[State 195, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;===========================================================================
; 通常攻撃技
;===========================================================================
;---------------------------------------------------------------------------
;遠距離立ち弱パンチ
[Statedef 200]
type    = S
movetype= A
physics = S
juggle  = 8
velset = 0,0
ctrl = 0
anim = 200
poweradd = 0
sprpriority = 2

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
trigger1 = random<500
value = 200, 0
channel = 0
volume = 100

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 2
value = 300, 0

[State 200, 攻撃設定]
type = HitDef
trigger1 = animelem = 3
attr = S, NA
damage = 25, 0
getpower = 45,45
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 9, 10
sparkno = s4000
guard.sparkno = s4010
sparkxy = -15, -73
hitsound = s1, 1
guardsound = s120, 0
ground.type = High
ground.slidetime = 9
ground.hittime  = 10
ground.velocity = -4.5,0
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -1.4,-3
air.hittime = 12

[State 200, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;近距離立ち弱パンチ
[Statedef 205]
type    = S
movetype= A
physics = S
juggle  = 8
velset = 0,0
ctrl = 0
anim = 205
poweradd = 0
sprpriority = 2

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
trigger1 = random<500
value = 200, 0
channel = 0
volume = 100

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 2
value = 300, 0

[State 200, 攻撃設定]
type = HitDef
trigger1 = animelem = 5
attr = S, NA
damage = 25, 0
getpower = 45,45
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 9, 10
sparkno = s4000
guard.sparkno = s4010
sparkxy = -15, -73
hitsound = s1, 1
guardsound = s120, 0
ground.type = High
ground.slidetime = 9
ground.hittime  = 10
ground.velocity = -4.5,0
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -1.4,-3
air.hittime = 12

[State 200, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;遠距離強パンチ
[Statedef 210]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 0
ctrl = 0
velset = 0,0
anim = 210
sprpriority = 2

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
trigger1 = random<500
value = 240, 0
channel = 0
volume = 100

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 3
value = 300, 1

[State 210, ヒット定義]
type = HitDef
trigger1 = animelem = 3
attr = S, NA
animtype  = Hard
damage    = 91, 0
guardflag = MA
priority = 4, Hit
getpower = 91,91
pausetime = 11,12
sparkno = s4001
guard.sparkno = s4011
sparkxy = -10,-57
hitsound   = s1,5
guardsound = s120,0
ground.type = High
ground.slidetime = 16
ground.hittime  = 19
ground.velocity = -8
airguard.velocity = -2.3,-1.8
air.type = High
air.velocity = -2.5,-3
air.hittime = 20

[State 210, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;近距離強パンチ
[Statedef 215]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 0
ctrl = 0
velset = 0,0
anim = 215
sprpriority = 2

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
trigger1 = random<500
value = 240, 0
channel = 0
volume = 100

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 3
value = 300, 1

[State 210, ヒット定義]
type = HitDef
trigger1 = animelem = 3
attr = S, NA
animtype  = Hard
damage    = 83, 0
guardflag = MA
priority = 4, Hit
getpower = 91,91
pausetime = 11,12
sparkno = s4001
guard.sparkno = s4011
sparkxy = -15,-70
hitsound   = s1,5
guardsound = s120,0
ground.type = High
ground.slidetime = 18
ground.hittime  = 20
ground.velocity = -8
airguard.velocity = -2.3,-1.8
air.type = High
air.velocity = -2.5,-3
air.hittime = 20

[State 210, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;遠距離弱キック
[Statedef 230]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 0
ctrl = 0
velset = 0,0
anim = 230
sprpriority = 2

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 300, 0

[State 230, ヒット定義]
type = HitDef
trigger1 = animelem = 2
attr = S, NA
animtype  = light
damage    = 33, 0
priority = 3, Hit
getpower = 45,45
guardflag = MA
pausetime = 9,10
sparkno = s4000
guard.sparkno = s4010
sparkxy = -15,-70
hitsound   = s1,0
guardsound = s120,0
ground.type = High
ground.slidetime = 9
ground.hittime  = 10
ground.velocity = -5
air.velocity = -2.5,-3.5

[State 230, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;近距離弱キック
[Statedef 235]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 0
ctrl = 0
velset = 0,0
anim = 230
sprpriority = 2

[State 230, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 1
trigger1 = random<500
value = 200, 0
channel = 0
volume = 100

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 300, 0

[State 230, ヒット定義]
type = HitDef
trigger1 = animelem = 2
attr = S, NA
animtype  = light
damage    = 25, 0
priority = 3, Hit
getpower = 45,45
guardflag = MA
pausetime = 9,10
sparkno = s4000
guard.sparkno = s4010
sparkxy = -15,-70
hitsound   = s1,0
guardsound = s120,0
ground.type = High
ground.slidetime = 9
ground.hittime  = 10
ground.velocity = -5
air.velocity = -2.5,-3.5

[State 230, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;遠距離強キック
[Statedef 240]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 0
ctrl = 0
velset = 0,0
anim = 240
sprpriority = 2

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
trigger1 = random<500
value = 240, 0
channel = 0
volume = 100

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 3
value = 300, 1

[State 200, PosAdd]
type = Posadd
trigger1 = AnimElem = 3
x = 6

[State 200, PosAdd]
type = Posadd
trigger1 = AnimElem = 8
trigger1 = 0
x = -6

[State 210, ヒット定義]
type = HitDef
trigger1 = animelem = 4
attr = S, NA
animtype  = Hard
damage    = 107, 0
guardflag = MA
priority = 4, Hit
getpower = 91,91
pausetime = 11,12
sparkno = s4001
guard.sparkno = s4011
sparkxy = -10,-70
hitsound   = s1,5
guardsound = s120,0
ground.type = High
ground.slidetime = 18
ground.hittime  = 20
ground.velocity = -9
airguard.velocity = -2.3,-1.8
air.type = High
air.velocity = -2.5,-3
air.hittime = 20

[State 240, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;近距離強キック
[Statedef 245]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 0
ctrl = 0
velset = 0,0
anim = 245
sprpriority = 2

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = animelemtime(1)=0
trigger1 = random<500
value = 210, 0
channel = 0
volume = 150

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 1
value = 300, 1

[State 210, ヒット定義]
type = HitDef
trigger1 = animelem = 3
attr = S, NA
animtype  = Hard
damage    = 83, 0
guardflag = MA
priority = 4, Hit
getpower = 91,91
pausetime = 11,10
sparkno = s4001
guard.sparkno = s4011
sparkxy = -20,-63
hitsound   = s1,5
guardsound = s120,0
ground.type = High
ground.slidetime = 13
ground.hittime  = 20
ground.velocity = -8
airguard.velocity = -2.6,-2
air.type = High
air.velocity = -2.7,-3
air.hittime = 22

[State 240, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;連環腿
[Statedef 250]
type    = S
movetype= A
physics = S
juggle  = 6
poweradd= 0
ctrl = 0
velset = 0,0
anim = 250
sprpriority = 2

[State 1000, VarSet];VarSet
type = VarSet
trigger1 = Time = 0
var(1) = 0

[State 1000, VarSet];VarSet
type = VarSet
trigger1 = animelemtime(6)=0
var(1) = 1

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = animelemtime(1)=0
trigger1 = random<500
value = 210, 0
channel = 0
volume = 150

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 1
value = 300, 1

[State 250, VelSet]
type = VelSet
trigger1 = animelem = 3
x = 4
y = -5

[State 250, VelAdd]
type = VelAdd
trigger1 = animelemtime(3)>=0
y = 0.47

[state 250, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 3
statetype = A
physics = N

[State 210, ヒット定義]
type = HitDef
trigger1 = animelem = 3
attr = A, NA
animtype  = Hard
damage    = 50, 0
guardflag = M
hitflag = MAF
priority = 4, Hit
getpower = 60, 60
pausetime = 12, 11
sparkno = s4001
guard.sparkno = s4011
sparkxy = -20,-55
hitsound   = s1,5
guardsound = s120,0
ground.type = High
ground.slidetime = 17
ground.hittime  = 30
ground.velocity = -2.2
airguard.velocity = -2.6,-2
air.type = High
air.velocity = -3,-3
air.hittime = 99
air.fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
id = 250
nochainid = 251,290

[State 210, ヒット定義]
type = HitDef
trigger1 = animelem = 6
attr = A, NA
animtype  = Hard
damage    = 50, 0
guardflag = M
hitflag = MAF
priority = 4, Hit
getpower = 60, 60
pausetime = 12, 11
sparkno = s4001
guard.sparkno = s4011
sparkxy = -20,-63
hitsound   = s1,5
guardsound = s120,0
ground.type = High
ground.slidetime = 17
ground.hittime  = 19
ground.velocity = -5.5
guard.velocity = -10.5
airguard.velocity = -2.6,-10
air.type = High
air.velocity = -1.5,-10
air.hittime = 99
air.fall = 1
fall.recover = 0
yaccel = .45
id = 251
nochainid = 251,290

[State 240, ステート変更]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
trigger1 = animelemtime(8)>=0
value = 251

;---------------------------------------------------------------------------
;連環腿（着地）
[Statedef 251]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
ctrl = 0
velset = 0,0
anim = 251
sprpriority = 2

[State 250, PosSet]
type = PosSet
trigger1 = time = 0
y = 0

[State 240, ステート変更]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; ふっ飛ばし攻撃
[Statedef 290]
type    = S                      
movetype= A                      
physics = S                      
juggle  = 8                      
;Commonly-used controllers:
velset = 0,0                     ;このステートが始まった時に移動するか（0,0で動かない）
ctrl = 0                         ;このステート中に他のコマンドを受け付けるか(1で受け付ける)
anim = 290                       ;このステートで表示するスプライトステート番号(0で変化無し)
sprpriority = 2                  ;表示した絵の重なり具合(2一番前　0通常　-1奥)

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 2
trigger1 = random<500
value = 290, 0
channel = 0
volume = 100

[State 640, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 2
value = 300, 1

[state 290, posadd]
type = Posadd
trigger1 = AnimElem = 3
x = 15

[State 290, 1]
type = HitDef
trigger1 = animelem = 3
attr = S, NA                     ;立ち状態で、通常の攻撃(ｓは立ち、ｎは通常、aは攻撃を表す)
damage = 115, 0                  ;ダメージ量（左が当たった時、右はガードした時）
getpower = 121,121
animtype = back                  ;当てた時の相手のポーズ（light/midium/hard/back）から選択
guardflag = M                   ;ガードできる状態（ｍaは全ての状態でガード可能）
hitflag = MAF                    ;当てる事のできる条件
priority = 4, Hit                ;攻撃の優先権（0弱い　4通常　7強い
pausetime = 12, 13               ;攻撃が当たった時の硬直時間（左が自分、右が相手）
sparkno = s4002
guard.sparkno = s4011            ;ヒットエフェクトのスプライトステート（無ければ0）
sparkxy = -20, -65               ;ヒットエフェクトを表示する場所（相手の座標で）
hitsound = s1, 16                 ;ヒットした時の音（ｓ*,*にすると自分の音を使う）
guardsound = s121, 0             ;ガードした時の音（同上）
ground.type = high               ;相手のくらった場所（High：頭、体, Low：足, Trip：足払い）
ground.slidetime = 18            ;相手が後にすべる時間
ground.hittime  = 20             ;コンボが繋がる時間（高くしすぎない事）
ground.velocity = -6,-5.5        ;地上で攻撃をくらった場合の相手の移動状況（ｘとｙで小数点可）
guard.velocity = -9
air.type = High                  ;空中で相手がくらった場所（上と同じ）
air.velocity = -6,-5.5           ;空中で攻撃をくらった場合の相手の移動状況（ｘとｙで小数点可）
fall = 1
fall.recover = 0
yaccel = .48
id = 290

[State 290, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; GCふっ飛ばし攻撃
[Statedef 291]
type    = S                      
movetype= A                      
physics = S                      
juggle  = 8                      
;Commonly-used controllers:
poweradd = -1000
velset = 0,0                     ;このステートが始まった時に移動するか（0,0で動かない）
ctrl = 0                         ;このステート中に他のコマンドを受け付けるか(1で受け付ける)
anim = 291                       ;このステートで表示するスプライトステート番号(0で変化無し)
sprpriority = 2                  ;表示した絵の重なり具合(2一番前　0通常　-1奥)

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 2
trigger1 = random<500
value = 290, 0
channel = 0
volume = 100

[State 640, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 2
value = 300, 1

[State 290, nothitby]
type = NotHitBy
trigger1 = 1
value = SCA

[state 290, posadd]
type = Posadd
trigger1 = AnimElem = 3
x = 15

[State 291, 4];フラッシュ
type = EnvColor
trigger1 = movehit = 1
time = 2
value = 255,255,255
under = 1
persistent = 0
ignorehitpause = 1

[State 290, 1]
type = HitDef
trigger1 = time = 0
attr = S, NA                     ;立ち状態で、通常の攻撃(ｓは立ち、ｎは通常、aは攻撃を表す)
damage = 33, 0                   ;ダメージ量（左が当たった時、右はガードした時）
getpower = 0, 0
animtype = back                  ;当てた時の相手のポーズ（light/midium/hard/back）から選択
guardflag = M                    ;ガードできる状態（ｍaは全ての状態でガード可能）
hitflag = MAF                    ;当てる事のできる条件
priority = 4, Hit                ;攻撃の優先権（0弱い　4通常　7強い
pausetime = 12, 13               ;攻撃が当たった時の硬直時間（左が自分、右が相手）
sparkno = s4002
guard.sparkno = s4011            ;ヒットエフェクトのスプライトステート（無ければ0）
sparkxy = -15, -65               ;ヒットエフェクトを表示する場所（相手の座標で）
hitsound = s1, 16                ;ヒットした時の音（ｓ*,*にすると自分の音を使う）
guardsound = s121, 0             ;ガードした時の音（同上）
ground.type = high               ;相手のくらった場所（High：頭、体, Low：足, Trip：足払い）
ground.slidetime = 18            ;相手が後にすべる時間
ground.hittime  = 20             ;コンボが繋がる時間（高くしすぎない事）
ground.velocity = -6,-5.5        ;地上で攻撃をくらった場合の相手の移動状況（ｘとｙで小数点可）
guard.velocity = -9
air.type = High                  ;空中で相手がくらった場所（上と同じ）
air.velocity = -6,-5.5           ;空中で攻撃をくらった場合の相手の移動状況（ｘとｙで小数点可）
fall = 1
fall.recover = 0
yaccel = .48
id = 290

[State 290, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;===========================================================================
;---------------------------------------------------------------------------
;しゃがみ弱パンチ
[Statedef 400]
type    = C
movetype= A
physics = C
juggle  = 8
poweradd= 0
velset = 0,0
ctrl = 0
anim = 400
sprpriority = 2

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
trigger1 = random<500
value = 200, 0
channel = 0
volume = 100

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 300, 0

[State 400, ヒット定義]
type = HitDef
trigger1 = animelem = 2
attr = C, NA ;しゃがみ通常打撃（Crouching, Normal Attack）
damage    = 25, 0
getpower = 45,45
priority  = 3
animtype  = Light
hitflag = MAF
guardflag = M
pausetime = 9,10
sparkno = s4000
guard.sparkno = s4010
sparkxy = -15,-35
hitsound   = s1,0
guardsound = s120,0
ground.type = Low
ground.slidetime = 8
ground.hittime  = 11
ground.velocity = -4.5
air.velocity = -1.5,-3

[State 400, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 11 ;しゃがむステートへ（コモンステート）
ctrl = 1

;---------------------------------------------------------------------------
;しゃがみ強パンチ
[Statedef 410]
type    = C
movetype= A
physics = C
juggle  = 8
poweradd= 0
velset = 0,0
ctrl = 0
anim = 410
sprpriority = 2

[State 400, 音を鳴らす]
type = PlaySnd
trigger1 = time = 1
trigger1 = random<500
value = 240, 0
channel = 0
volume = 100

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 2
value = 300, 1

[State 200,]
type = Posadd
trigger1 = AnimElem = 2
x = 4

[State 200,]
type = Posadd
trigger1 = AnimTime = 0
x = -5

[State 410, 一発目のヒット定義]
type = HitDef
trigger1 = animelem = 3
attr = C, NA
damage    = 99, 0
getpower = 91,91
priority  = 4
animtype  = hard
hitflag = MAF
guardflag = M
pausetime = 11,12
sparkno = s4001
guard.sparkno = s4011
sparkxy = -20,-37
hitsound   = s1,5
guardsound = s120,0
ground.type = Low
ground.slidetime = 19
ground.hittime  = 20
ground.velocity = -8
air.velocity = -3,-4
air.fall = 1

[State 410, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;しゃがみ弱キック
[Statedef 430]
type    = C
movetype= A
physics = C
juggle  = 8
poweradd= 0
velset = 0,0
ctrl = 0
anim = 430
sprpriority = 2

[State 400, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
trigger1 = random<500
value = 200, 0
channel = 0
volume = 100

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 300, 0

[State 430, ヒット定義]
type = HitDef
trigger1 = animelem = 2
attr = C, NA
damage    = 33, 0
getpower = 45,45
priority  = 3
animtype  = Light
hitflag = MAF
guardflag = L
pausetime = 9,10
sparkno = s4000
guard.sparkno = s4010
sparkxy = -20,-8
hitsound   = s1,0
guardsound = s120,0
ground.type = Low
ground.slidetime = 8
ground.hittime  = 10
ground.velocity = -4.5
air.velocity = -2,-3

[State 430, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;しゃがみ強キック（足払い攻撃）
[Statedef 440]
type    = C
movetype= A
physics = C
juggle  = 8
poweradd= 0
velset = 0,0
ctrl = 0
anim = 440
sprpriority = 2

[State 400, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 3
trigger1 = random<500
value = 240, 0
channel = 0
volume = 100

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 3
value = 300, 1

[State 200,]
type = Posadd
trigger1 = AnimElem = 5
x = 10

[State 440, ヒット定義]
type = HitDef
trigger1 = animelem = 7
attr = C, NA
damage    = 116, 0
getpower  = 91,91
priority  = 4
hitflag = MAF
guardflag = L
pausetime = 12,13
sparkno = s4001
guard.sparkno = s4011
sparkxy = -20,-25
hitsound   = s1,3
guardsound = s120,0
ground.type = Trip          ;この攻撃を食らうと相手は吹っ飛べば「コケるアニメ」になる
ground.slidetime = 18
ground.hittime  = 20
ground.velocity = -3,-5
air.velocity = -4,-4
guard.velocity = -7
fall = 1
fall.recover = 0

[State 440, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;===========================================================================
;---------------------------------------------------------------------------
;ジャンプ弱パンチ
[Statedef 600]
type    = A
movetype= A
physics = A
juggle  = 8
poweradd= 0
ctrl = 0
anim = ifelse(vel x, 605, 600)
sprpriority = 2

[State 600, 音を鳴らす];02um
type = PlaySnd
trigger1 = time = 1
value = 200, 0
channel = 0
volume = 150

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 300, 0

[State 600, ヒット定義]
type = HitDef
trigger1 = anim = 600
trigger1 = animelem = 4
attr = A, NA            ;空中通常打撃（Air, Normal Attack）
damage    = 50, 0
getpower = 45, 45
guardflag = HA          ;相手はしゃがみガードが出来ない
priority = 3,hit
pausetime = 10,9
sparkno = s4000
guard.sparkno = s4010
sparkxy = -15,-58
hitsound   = s1,6
guardsound = s120,0
animtype = light
ground.type = high
ground.slidetime = 9
ground.hittime  = 10
ground.velocity = -4
air.velocity = -4,-3

[State 600, ヒット定義]
type = HitDef
trigger1 = anim = 605
trigger1 = animelem = 3
attr = A, NA            ;空中通常打撃（Air, Normal Attack）
damage    = 50, 0
getpower = 45, 45
guardflag = HA          ;相手はしゃがみガードが出来ない
priority = 3,hit
pausetime = 10,9
sparkno = s4000
guard.sparkno = s4010
sparkxy = -15,-58
hitsound   = s1,6
guardsound = s120,0
animtype = light
ground.type = high
ground.slidetime = 9
ground.hittime  = 10
ground.velocity = -4
air.velocity = -4,-3

;---------------------------------------------------------------------------
;ジャンプ強パンチ
[Statedef 610]
type    = A
movetype= A
physics = A
juggle  = 8
poweradd= 0
ctrl = 0
anim = ifelse(vel x, 615, 610)
sprpriority = 2

[State 600, 音を鳴らす];02um
type = PlaySnd
trigger1 = time = 1
trigger1 = random<500
value = 210, 0
channel = 0
volume = 150

[State 640, 音を鳴らす]
type = PlaySnd
trigger1 = anim = 610
trigger1 = animelem = 3
trigger2 = anim = 615
trigger2 = time = 3
value = 300, 1

[State 610, ヒット定義];垂直
type = HitDef
trigger1 = anim = 610
trigger1 = animelem = 3
attr = A, NA
damage = 100, 0
getpower = 91,91
guardflag = HA
priority = 4,hit
pausetime = 12,11
sparkno = s4001
guard.sparkno = s4011
sparkxy = -13,-55
hitsound   = s1,4
guardsound = s120,0
animtype = hard
ground.type = high
ground.slidetime = 17
ground.hittime  = 19
ground.velocity = -5
air.velocity = -4,-4

[State 610, ヒット定義];斜め
type = HitDef
trigger1 = anim = 615
trigger1 = animelem = 5
attr = A, NA
damage = 91, 0
getpower = 91,91
guardflag = HA
priority = 4,hit
pausetime = 12,11
sparkno = s4001
guard.sparkno = s4011
sparkxy = -13,-55
hitsound   = s1,4
guardsound = s120,0
animtype = hard
ground.type = high
ground.slidetime = 17
ground.hittime  = 19
ground.velocity = -5
air.velocity = -4.5,-4

;---------------------------------------------------------------------------
;ジャンプ弱キック
[Statedef 630]
type    = A
movetype= A
physics = A
juggle  = 8
poweradd= 0
ctrl = 0
anim = ifelse(vel x, 635, 630)
sprpriority = 2

[State 600, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 1
trigger1 = random<500
value = 200, 0
channel = 0
volume = 150

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = time = 1
value = 300, 0

[State 630, ヒット定義]
type = HitDef
trigger1 = animelem = 2
attr = A, NA
damage = 58, 0
getpower = 76,76
guardflag = HA
priority = 3,hit
pausetime = 10,9
sparkno = s4000
guard.sparkno = s4010
sparkxy = -5,-50
hitsound   = s1,1
guardsound = s120,0
animtype = light
ground.type = high
ground.slidetime = 9
ground.hittime  = 10
ground.velocity = -4.5
air.velocity = -4,-3.2

;---------------------------------------------------------------------------
;ジャンプ強キック
[Statedef 640]
type    = A
movetype= A
physics = A
juggle  = 8
poweradd= 0
ctrl = 0
anim = ifelse(vel x, 645, 640)
sprpriority = 2

[State 200, 音を鳴らす];02um
type = PlaySnd
trigger1 = Time = 1
trigger1 = random<500
value = 210, 0
channel = 0
volume = 150

[State 640, 音を鳴らす]
type = PlaySnd
trigger1 = time = 4
value = 300, 1

[State 640, ヒット定義]
type = HitDef
trigger1 = anim = 640
trigger1 = animelem = 3
attr = A, NA
damage    = 99, 0
getpower = 91, 91
guardflag = HA
priority = 4, Hit
pausetime = 12,11
sparkno = s4001
guard.sparkno = s4011
sparkxy = -10,-50
hitsound   = s1,3
guardsound = s120,0
animtype = hard
ground.type = High
ground.slidetime = 17
ground.hittime  = 19
ground.velocity = -5.5
air.velocity = -5,-5

[State 640, ヒット定義]
type = HitDef
trigger1 = anim = 645
trigger1 = animelem = 3
attr = A, NA
damage    = 91,0
getpower = 91, 91
guardflag = HA
priority = 4, Hit
pausetime = 12,11
sparkno = s4001
guard.sparkno = s4011
sparkxy = -10,-50
hitsound   = s1,3
guardsound = s120,0
animtype = hard
ground.type = High
ground.slidetime = 17
ground.hittime  = 19
ground.velocity = -5.5
air.velocity = -5,-5

;---------------------------------------------------------------------------
;フェニックスボム
[Statedef 650]
type    = A
movetype= A
physics = A
juggle  = 4
poweradd= 61
ctrl = 0
anim = 650
sprpriority = 2

[State 600, 音を鳴らす];02um
type = PlaySnd
trigger1 = time = 1
;trigger1 = random<500
value = 650, 0
channel = 0
volume = 150

[State 610, ヒット定義]
type = HitDef
trigger1 = animelem = 3
attr = A, NA
damage = 83, 0
getpower = 104, 104
guardflag = HA
hitflag = MAF
priority = 4,hit
pausetime = 12,11
sparkno = s4001
guard.sparkno = s4011
sparkxy = -13,-55
hitsound   = s1,4
guardsound = s120,0
animtype = hard
ground.type = high
ground.slidetime = 18
ground.hittime  = 20
ground.velocity = -2,9
air.hittime = 99
air.velocity = -2,-9.5
yaccel = .48
fall = 1
fall.recover = 0
nochainid = 290

[state 650, ChangeState]
type = ChangeState
trigger1 = movecontact
value = 651

;---------------------------------------------------------------------------
;フェニックスボム（跳ね返り）
[Statedef 651]
type    = A
movetype= A
physics = N
juggle  = 0
poweradd= 0
ctrl = 0
anim = 651
velset = -2.8,-9
sprpriority = 2

[State 1000, Gravity]
Type = Gravity
Trigger1 = 1

[state 650, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52

;---------------------------------------------------------------------------
;三角跳び
[Statedef 660]
type    = A
movetype= I
physics = N
juggle  = 0
poweradd= 0
ctrl = 0
anim = 660
velset = 0,0
sprpriority = 2

[State 1000, 0]
Type = StateTypeSet
Trigger1 = animelem = 3
physics = A

[State 107,VelSet]
type = VelSet
trigger1 = AnimElemTime(2)=0
x = Const(velocity.jump.fwd.x)
y = Const(velocity.jump.y)

[State 660, ScreenBound];画面固定
type = ScreenBound
trigger1 = animelem = 1
value = 0
movecamera = 1,1

[State 660, Turn]
type = Turn
trigger1 = animelem = 1
trigger1 = frontedgebodydist<=3

[State 660, PlayerPush];相手押さない
type = PlayerPush
trigger1 = animelem = 1
value = 0

[State 660, CtrlSet]
Type = CtrlSet
Trigger1 = animelem = 3
Value = 1

;---------------------------------------------------------------------------
;空中ふっとばし
[Statedef 690]
type    = A
movetype= A
physics = A
juggle  = 8
poweradd= 0
ctrl = 0
anim = 690
sprpriority = 2

[State 200, 音を鳴らす];02um
type = PlaySnd
trigger1 = Time = 1
trigger1 = random<500
value = 290, 0
channel = 0
volume = 150

[State 690, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 7
value = 300, 1

[State 690, ヒット定義]
type = HitDef
trigger1 = animelem = 4
attr = A, NA
damage    = 74, 0
getpower = 121,121
guardflag = HA
priority = 4, Hit
pausetime = 12,11
sparkno = s4002
guard.sparkno = s4011
sparkxy = -13,-60
hitsound   = s1,16
guardsound = s120,0
animtype = back
ground.type = high
ground.slidetime = 17
ground.hittime  = 19
ground.velocity = -6,-6.5         ;地上で攻撃をくらった場合の相手の移動状況（ｘとｙで小数点可）
air.type = High                   ;空中で相手がくらった場所（上と同じ）
air.velocity = -6,-5              ;空中で攻撃をくらった場合の相手の移動状況（ｘとｙで小数点可）
fall = 1
fall.recover = 0
id = 290
yaccel = .48

;===========================================================================
;回避
;===========================================================================
;回避前
[Statedef 700]
type = S      ;S/C/A/L  Ｓ：立ち/Ｃ：屈み/Ａ：空中/Ｌ：ダウン
movetype = I  ;Ｉ：通常状態/Ａ：攻撃状態/Ｈ：ダメージをくらってる状態
physics = N   ;S/C/A/N  Ｓ：立ち/Ｃ：屈み/Ａ：空中/Ｎ：無し
poweradd= 0
ctrl = 0
anim = 700
velset = 0,0
sprpriority = -2

[State 700, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 2
value = 700, 0
channel = 0
volume = 50

[State 700, 無敵]
type = HitBy
trigger1 = AnimElemtime(1) >= 0 && AnimElemtime(10) < 0
value = SC, NT, ST, HT

[State 700, 移動量];移動
type = VelSet
trigger1 = anim = 700
trigger1 = AnimElemtime(3) >= 0 && AnimElemtime(10) < 0
x = 4.4

[State 700, 移動量];停止
type = VelSet
trigger1 = anim = 700
trigger1 = AnimElem = 10
x = 0

[State 700, PlayerPush];回避中は相手を押さない
type = PlayerPush
trigger1 = animelemtime(1)>=0
value = 0

[State 291, 4];
type = PowerAdd
triggerall = Time = 0
trigger1 = prevstateno = 150 || prevstateno = 152
trigger2 = prevstateno = [200,499]
;trigger2 = movecontact
value = -1000

[State 2100, 残像];GC
type = AfterImage
triggerall = AnimElem = 2
trigger1 = prevstateno = 150 || prevstateno = 152
trigger2 = prevstateno = [200,499]
time = 26
length = 6      ;残像の表示時間
timegap = 2     ;時間差
framegap = 2    ;フレーム差
palbright = 1, 1, 1
palcontrast = 128, 128, 128
paladd = 0, 0, 0
palmul = 1, 1, 1
trans = Add1

[State 291, 4];フラッシュ
type = EnvColor
trigger1 = time = 0
trigger1 = prevstateno = [200,499]
time = 2
value = 255,255,255
under = 1
persistent = 0
ignorehitpause = 1

[State 700]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;回避後ろ
[Statedef 701]
type = S      ;S/C/A/L  Ｓ：立ち/Ｃ：屈み/Ａ：空中/Ｌ：ダウン
movetype = I  ;Ｉ：通常状態/Ａ：攻撃状態/Ｈ：ダメージをくらってる状態
physics = N   ;S/C/A/N  Ｓ：立ち/Ｃ：屈み/Ａ：空中/Ｎ：無し
poweradd= 0
ctrl = 0
anim = 701
velset = 0,0
sprpriority = -2

[State 700, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 2
value = 700, 0
channel = 0
volume = 50

[State 701, 無敵]
type = HitBy
trigger1 = AnimElemtime(1) >= 0 && AnimElemtime(10) < 0
value = SC, NT, ST, HT

[State 701, 移動量];移動
type = VelSet
trigger1 = anim = 701
trigger1 = AnimElemtime(3) >= 0 && AnimElemtime(10) < 0
x = -4.4

[State 701, 移動量];停止
type = VelSet
trigger1 = anim = 701
trigger1 = AnimElem = 10
x = 0

[State 701, PlayerPush];回避中は相手を押さない
type = PlayerPush
trigger1 = animelemtime(1)>=0
value = 0

[State 291, 4];
type = PowerAdd
trigger1 = prevstateno = 150 || prevstateno = 152
trigger1 = Time = 0
value = -1000

[State 2100, 残像];GC
type = AfterImage
trigger1 = AnimElem = 2
trigger1 = prevstateno = 150 || prevstateno = 152
time = 29
length = 6      ;残像の表示時間
timegap = 2     ;時間差
framegap = 2    ;フレーム差
palbright = 1, 1, 1
palcontrast = 128, 128, 128
paladd = 0, 0, 0
palmul = 1, 1, 1
trans = Add1

[State 701]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;===========================================================================
; 投げ技
;===========================================================================
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;P投げ
;ビットスルー
[Statedef 800]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 800
sprpriority = 2

[State 800, ヒット定義（投げ用）]
type = HitDef
trigger1 = Time = 0
attr = S, NT             ;立ち通常投げ（Standing, Normal Throw）
hitflag = M-             ;マイナスが付加されてるので相手が食らい中の時は掴めない
priority = 1, Miss
sparkxy = -15,-80
sparkno = -1             ;-をつければスパークエフェクトは無い
p1sprpriority = 1        ;攻撃が当たった時に自分の画像表示優先度を1にします
p2sprpriority = 0        ;攻撃が当たった時に相手の画像表示優先度を0にします
p1facing = 1
p2facing = 1
p1stateno = 801
p2stateno = 810
guard.dist = 0           ;相手のガード態勢に入る距離を０にしてるので、ガード不可
fall = 1
id = 800

[State 800, ステート変更]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;ビットスルー（成功）
[Statedef 801]
type    = S
movetype= A
physics = N
anim = 801
juggle  = 10
sprpriority = 2

[State 801, 音を鳴らす];声02um
type = PlaySnd
trigger1 = AnimElem = 13
value = 801, 1
channel = 0
;volume = 150

[State 801, 音を鳴らす];掴み用
type = PlaySnd
trigger1 = AnimElem = 1
value = 800, 1

[State 801, 音を鳴らす];ヒット音
type = PlaySnd
trigger1 = AnimElem = 13
value = 801, 0

[state 1000, TargetState];再ロック
type = TargetState
trigger1 = time = 0
trigger1 = NumTarget(800)
trigger1 = Target(800),stateno!=810
value = 810

;------------------------------------------
[State 801, Explod];掴みスパーク
type = Explod
trigger1 = animelem = 2
anim = 4020
ID = 4020
pos = 25, -63
postype = p1
facing = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 801, Explod];キラキラエフェクト
type = Explod
trigger1 = AnimElemTime(3)=0
anim = 832
ID = 832
pos = 25, -71
postype = p1
facing = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 801, Explod];キラキラエフェクト
type = Explod
trigger1 = AnimElemTime(4)=0
anim = 832
ID = 832
pos = 16, -67
postype = p1
facing = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 801, Explod];キラキラエフェクト
type = Explod
trigger1 = AnimElemTime(5)=0
anim = 832
ID = 832
pos = 4, -78
postype = p1
facing = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 801, Explod];キラキラエフェクト
type = Explod
trigger1 = AnimElemTime(6)=0
anim = 832
ID = 832
pos = -6, -96
postype = p1
facing = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 801, Explod];キラキラエフェクト
type = Explod
trigger1 = AnimElemTime(7)=0
anim = 832
ID = 832
pos = 16, -106
postype = p1
facing = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 801, Explod];キラキラエフェクト
type = Explod
trigger1 = AnimElemTime(8)=0
anim = 832
ID = 832
pos = 30, -91
postype = p1
facing = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 801, Explod];キラキラエフェクト
type = Explod
trigger1 = AnimElemTime(9)=0
anim = 832
ID = 832
pos = -8, -62
postype = p1
facing = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 801, Explod];キラキラエフェクト
type = Explod
trigger1 = AnimElemTime(10)=0
anim = 832
ID = 832
pos = -30, -70
postype = p1
facing = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 801, Explod];キラキラエフェクト
type = Explod
trigger1 = AnimElemTime(11)=0
anim = 832
ID = 832
pos = -32, -61
postype = p1
facing = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 801, Explod];発光エフェクト
type = Explod
trigger1 = AnimElemTime(13)=0
anim = 830
ID = 830
pos = 47, -73
postype = p1
facing = 1
sprpriority = 4
ownpal = 1
removetime = 8
removeongethit = 1

;------------------------------------------
[State 11101, NotHitBy];無敵
type = NotHitBy
trigger1 = 1
value = SCA

[State 801, 物理的なキャラの幅]
type = Width
trigger1 = time = 0
edge = 80,0   ;画面端を押す幅を変える（オレンジの線）

[State 801, 掴んだ相手の位置];TargetBindで相手を一時的に拘束
type = TargetBind
trigger1 = AnimElemTime(2) < 0
pos = 30, 0

[State 801, 掴んだ相手の位置];TargetBindで相手を一時的に拘束
type = TargetBind
trigger1 = AnimElemTime(2) >=0
trigger1 = AnimElemTime(4) < 0
pos = 30, -60

[State 801, 掴んだ相手の位置];TargetBindで相手を一時的に拘束
type = TargetBind
trigger1 = AnimElemTime(4) >=0
trigger1 = AnimElemTime(5) < 0
pos = 28, -68

[State 801, 掴んだ相手の位置];TargetBindで相手を一時的に拘束
type = TargetBind
trigger1 = AnimElemTime(5) >=0
trigger1 = AnimElemTime(6) < 0
pos = 3, -69

[State 801, 掴んだ相手の位置];TargetBindで相手を一時的に拘束
type = TargetBind
trigger1 = AnimElemTime(6) >=0
trigger1 = AnimElemTime(7) < 0
pos = -6, -86

[State 801, 掴んだ相手の位置];TargetBindで相手を一時的に拘束
type = TargetBind
trigger1 = AnimElemTime(7) >=0
trigger1 = AnimElemTime(8) < 0
pos = 4, -105

[State 801, 掴んだ相手の位置];TargetBindで相手を一時的に拘束
type = TargetBind
trigger1 = AnimElemTime(8) >=0
trigger1 = AnimElemTime(9) < 0
pos = 20, -98

[State 801, 掴んだ相手の位置];TargetBindで相手を一時的に拘束
type = TargetBind
trigger1 = AnimElemTime(9) >=0
trigger1 = AnimElemTime(10)< 0
pos = 6, -68

[State 801, 掴んだ相手の位置];TargetBindで相手を一時的に拘束
type = TargetBind
trigger1 = AnimElemTime(10)>=0
trigger1 = AnimElemTime(11)< 0
pos = -18, -84

[State 801, 掴んだ相手の位置];TargetBindで相手を一時的に拘束
type = TargetBind
trigger1 = AnimElemTime(11)>=0
trigger1 = AnimElemTime(12)< 0
pos = -24, -64

[State 801, 掴んだ相手の位置];TargetBindで相手を一時的に拘束
type = TargetBind
trigger1 = AnimElemTime(12)>=0
trigger1 = AnimElemTime(13)< 0
pos = 12, -64

[State 801, 掴んだ相手の位置];TargetBindで相手を一時的に拘束
type = TargetBind
trigger1 = AnimElemTime(13)=0   ;発射！
;trigger1 = AnimElemTime(14)< 0
pos = 45, -73

[State 801, ダメージ]
type = TargetLifeAdd
trigger1 = AnimElemTime(13)=0
absolute = 1        ;攻撃／防御無視
value = -100

[State 801, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;ビットスルー
;相手投げられ
[Statedef 810]
type    = A
movetype= H
physics = N
velset = 0,0

;---------------------------------------------
[state 1050, SelfState];Helperは返却
type = SelfState
trigger1 = ishelper
value = PrevStateNo
;---------------------------------------------

[State 810, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 810

[State 810, vel]
type = Velset
Trigger1 = animelem = 13
x = -6
y = -5

[State 810, vel]
type = VelAdd
Trigger1 = animelemtime(13)>=0
y = .45

[State 1905, ScreenBound];画面固定
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 801, SprPriority]
type = SprPriority
trigger1 = AnimElemTime(12) = 0
value = 3

[State 11101, NotHitBy];無敵
type = NotHitBy
trigger1 = anim = 810
value = SCA

[State 820, 1]
type = SelfState
Trigger1 = Pos Y >= -10 && Vel Y > 0
trigger1 = animelemtime(11)>=0
value = 5100

;---------------------------------------------------------------------------
;K投げ
;サイキックスルー
[Statedef 802]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 800
sprpriority = 2

[State 800, ヒット定義（投げ用）]
type = HitDef
trigger1 = Time = 0
attr = S, NT             ;立ち通常投げ（Standing, Normal Throw）
hitflag = M-             ;マイナスが付加されてるので相手が食らい中の時は掴めない
priority = 1, Miss
sparkxy = -15,-80
sparkno = -1             ;-をつければスパークエフェクトは無い
p1sprpriority = 1        ;攻撃が当たった時に自分の画像表示優先度を1にします
p2sprpriority = 0        ;攻撃が当たった時に相手の画像表示優先度を0にします
p1facing = 1
p2facing = 1
p1stateno = 803
p2stateno = 820
guard.dist = 0           ;相手のガード態勢に入る距離を０にしてるので、ガード不可
fall = 1
id = 802

[State 800, ステート変更]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;サイキックスルー（成功）
[Statedef 803]
type    = S
movetype= A
physics = N
anim = 803
juggle  = 10
sprpriority = 2

[State 801, 音を鳴らす];掴み用
type = PlaySnd
trigger1 = AnimElem = 1
value = 800, 1

[State 801, 音を鳴らす];ヒット音
type = PlaySnd
trigger1 = AnimElem = 6
value = 801, 0

[state 1000, TargetState];再ロック
type = TargetState
trigger1 = time = 0
trigger1 = NumTarget(802)
trigger1 = Target(802),stateno!=820
value = 820
;------------------------------------------
[State 801, Explod];掴みスパーク
type = Explod
trigger1 = animelem = 2
anim = 4020
ID = 4020
pos = 61, -71
postype = p1
facing = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 801, Explod];発行エフェクト
type = Explod
trigger1 = AnimElem = 2
anim = 830
ID = 830
pos = 63, -71
postype = p1
facing = 1
sprpriority = 4
ownpal = 1
removetime = 17
removeongethit = 1

[State 801, Explod];発行エフェクト
type = Explod
trigger1 = AnimElem = 3
anim = 830
ID = 830
pos = 29, -85
postype = p1
facing = 1
sprpriority = 4
ownpal = 1
removetime = 4
removeongethit = 1

[State 801, Explod];発行エフェクト
type = Explod
trigger1 = AnimElem = 4
anim = 830
ID = 830
pos = 18, -98
postype = p1
facing = 1
sprpriority = 4
ownpal = 1
removetime = 4
removeongethit = 1

[State 801, Explod];発行エフェクト
type = Explod
trigger1 = AnimElem = 5
anim = 830
ID = 830
pos = -12, -111
postype = p1
facing = 1
sprpriority = 4
ownpal = 1
removetime = 4
removeongethit = 1

[State 801, Explod];キラキラエフェクト
type = Explod
trigger1 = AnimElemTime(6)=0
anim = 831
ID = 831
pos = -30, -111
postype = p1
facing = 1
sprpriority = 4
ownpal = 1
removeongethit = 0

[State 801, Explod];キラキラエフェクト
type = Explod
trigger1 = AnimElemTime(6)=2
anim = 831
ID = 831
pos = -43, -114
postype = p1
facing = 1
sprpriority = 4
ownpal = 1
removeongethit = 0

[State 801, Explod];キラキラエフェクト
type = Explod
trigger1 = AnimElemTime(6)=4
anim = 831
ID = 831
pos = -55, -114
postype = p1
facing = 1
sprpriority = 4
ownpal = 1
removeongethit = 0

[State 801, Explod];キラキラエフェクト
type = Explod
trigger1 = AnimElemTime(6)=6
anim = 831
ID = 831
pos = -68, -114
postype = p1
facing = 1
sprpriority = 4
ownpal = 1
removeongethit = 0

[State 801, Explod];キラキラエフェクト
type = Explod
trigger1 = AnimElemTime(6)=8
anim = 831
ID = 831
pos = -85, -112
postype = p1
facing = 1
sprpriority = 4
ownpal = 1
removeongethit = 0
;------------------------------------------

[State 11101, NotHitBy];無敵
type = NotHitBy
trigger1 = 1
value = SCA

[State 801, 物理的なキャラの幅]
type = Width
trigger1 = time = 0
edge = 70,70   ;画面端を押す幅を変える（オレンジの線）

[State 801, 掴んだ相手の位置];TargetBindで相手を一時的に拘束
type = TargetBind
trigger1 = AnimElemTime(2) < 0
pos = 50, 0

[State 801, 掴んだ相手の位置];TargetBindで相手を一時的に拘束
type = TargetBind
trigger1 = AnimElemTime(2) >=0
trigger1 = AnimElemTime(3) < 0
pos = 72, -72

[State 801, 掴んだ相手の位置];TargetBindで相手を一時的に拘束
type = TargetBind
trigger1 = AnimElemTime(3) >=0
trigger1 = AnimElemTime(4) < 0
pos = 30, -94

[State 801, 掴んだ相手の位置];TargetBindで相手を一時的に拘束
type = TargetBind
trigger1 = AnimElemTime(4) >=0
trigger1 = AnimElemTime(5) < 0
pos = 16, -110

[State 801, 掴んだ相手の位置];TargetBindで相手を一時的に拘束
type = TargetBind
trigger1 = AnimElemTime(5) >=0
trigger1 = AnimElemTime(6) < 0
pos = -11, -119

[State 801, 掴んだ相手の位置];TargetBindで相手を一時的に拘束
type = TargetBind
trigger1 = AnimElemTime(6) =0   ;発射！
;trigger1 = AnimElemTime(7) < 0
pos = -60, -95

[State 801, ダメージ]
type = TargetLifeAdd
trigger1 = AnimElemTime(6)=0
absolute = 1        ;攻撃／防御無視
value = -100

[State 801, Turn]
type = Turn
trigger1 = AnimTime = 0

[State 801, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;サイキックスルー
;相手投げられ
[Statedef 820]
type    = A
movetype= H
physics = N
velset = 0,0

;---------------------------------------------
[state 1050, SelfState];Helperは返却
type = SelfState
trigger1 = ishelper
value = PrevStateNo
;---------------------------------------------

[State 810, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 820

[State 810, vel]
type = Velset
Trigger1 = animelem = 6
x = 6
y = -6

[State 810, vel]
type = VelAdd
Trigger1 = animelemtime(6)>=0
y = .45

[State 1905, ScreenBound];画面固定
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 11101, NotHitBy];無敵
type = NotHitBy
trigger1 = anim = 820
value = SCA

[State 820, 1]
type = SelfState
Trigger1 = Pos Y >= -10 && Vel Y > 0
trigger1 = animelemtime(6)>=0
value = 5100

;---------------------------------------------------------------------------
;空投げ
;サイキックシュート
[Statedef 850]
type    = A
movetype= A
physics = A
juggle  = 0
ctrl = 0
anim = 850
sprpriority = 2

[State 900, ヒット定義（投げ用）]
type = HitDef
trigger1 = Time = 0
attr = A, NT             ;空中通常投げ（Standing, Normal Throw）
hitflag = A-             ;マイナスが付加されてるので相手が食らい中の時は掴めない
priority = 1, Miss
sparkxy = -15,-80
sparkno = -1             ;-をつければスパークエフェクトは無い
p1sprpriority = 1        ;攻撃が当たった時に自分の画像表示優先度を1にします
p2sprpriority = 0        ;攻撃が当たった時に相手の画像表示優先度を0にします
p1facing = 1
p2facing = 1
p1stateno = 851
p2stateno = 860
guard.dist = 0           ;相手のガード態勢に入る距離を０にしてるので、ガード不可
fall = 1
id = 900

;---------------------------------------------------------------------------
;サイキックシュート（成功）
[Statedef 851]
type    = A
movetype= A
physics = N
anim = 851
juggle  = 8
velset = 0,0
sprpriority = 2

[State 801, 音を鳴らす];声02um
type = null;PlaySnd
trigger1 = AnimElem = 7
value = 801, 0
channel = 0
volume = 150

[State 801, 音を鳴らす];掴み用
type = PlaySnd
trigger1 = AnimElem = 1
value = 800, 1

[State 801, 音を鳴らす];ヒット音
type = null;PlaySnd
trigger1 = AnimElem = 8
value = 1, 16

[state 1000, TargetState];再ロック
type = TargetState
trigger1 = time = 0
trigger1 = NumTarget(900)
trigger1 = Target(900),stateno!=860
value = 860

[State 801, Explod];掴みスパーク
type = Explod
trigger1 = animelem = 1
anim = 4020
ID = 4020
pos = 0, -41
postype = p1
facing = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[state 900, VelSet]
type = VelSet
trigger1 = animelem = 9
x = -3
y = -5

[state 900, VelAdd]
type = VelAdd
trigger1 = animelemtime(9)>=0
y = 0.44

[State 910, NotHitBy];無敵
type = NotHitBy
trigger1 = 1
value = SCA

[State 801, 物理的なキャラの幅]
type = Width
trigger1 = time = 0
edge = 70,70   ;画面端を押す幅を変える（オレンジの線）

[State 801, 掴んだ相手の位置];TargetBindで相手を一時的に拘束
type = TargetBind
trigger1 = AnimElemTime(2) < 0
pos = 0, -43

[State 801, 2]
type = TargetBind
trigger1 = AnimElemTime(2)>= 0
trigger1 = AnimElemTime(3) < 0
pos = -13,-64

[State 801, 2]
type = TargetBind
trigger1 = AnimElemTime(3)>= 0
trigger1 = AnimElemTime(4) < 0
pos = -9,-71

[State 801, 2]
type = TargetBind
trigger1 = AnimElemTime(4)>= 0
trigger1 = AnimElemTime(5) < 0
pos = 0,-81

[State 801, 2]
type = TargetBind
trigger1 = AnimElemTime(5)>= 0
trigger1 = AnimElemTime(6) < 0
pos = 5,-83

[State 801, 2]
type = TargetBind
trigger1 = AnimElemTime(6)>= 0
trigger1 = AnimElemTime(7) < 0
pos = 19,-66

[State 801, 2]
type = TargetBind
trigger1 = AnimElemTime(7)>= 0
trigger1 = AnimElemTime(8) < 0
pos = 13,-58

[State 801, 2]
type = TargetBind
trigger1 = AnimElemTime(8) = 0
;trigger1 = AnimElemTime(9) < 0
pos = 26,-8

[state 900, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = AnimElemTime(8) = 0
value = -100

[state 900, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel y > 0
value = 52

;---------------------------------------------------------------------------
;サイキックシュート（相手）
[Statedef 860]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = 1

[State 910, NotHitBy];無敵
type = NotHitBy
trigger1 = 1
value = SCA

;---------------------------------------------
[state 1050, SelfState];Helperは返却
type = SelfState
trigger1 = ishelper
value = PrevStateNo
;---------------------------------------------

[State 910, ChangeAnim2]
type = ChangeAnim2
Trigger1 = Time = 0
value = 860

[state 910, VelSet]
type = VelSet
trigger1 = animelem = 8
x = -6
y = 8

[State 910, VelAdd]
type = VelAdd
Trigger1 = animelemtime(8)>=0
y = .4

[State 1905, ScreenBound];画面固定
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[state 910, Turn]
type = Turn
trigger1 = animelem = 8

[state 900, SelfState]
type = SelfState
trigger1 = Pos Y >= -10 && Vel y > 0
value = 5100

;===========================================================================
; 必殺技
;===========================================================================
;---------------------------------------------------------------------------
;サイコボールアタック弱
[Statedef 1000]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 45
velset = 0,0
anim = 1000
ctrl = 0
sprpriority = 2

;----------------------------------
; どこでもキャンセル
; var(8)
;----------------------------------
;MAXゲージ消費
[State 1000, VarAdd]
type = VarAdd
triggerall = var(8) > 0
triggerall = Time = 0
trigger1 = prevstateno = 205
trigger2 = prevstateno = 210
trigger3 = prevstateno = 240
trigger4 = prevstateno = 440
trigger5 = prevstateno = 250
trigger5 = var(1) = 0
trigger6 = prevstateno = 1211 ;フェニックスアロー強
trigger7 = prevstateno = 1400 ;サイコソード弱
trigger8 = prevstateno = 1410 ;サイコソード強
var(8) = -150
ignorehitpause = 1

[State 1000, PalFx];点滅
type = PalFx
triggerall = var(8) > 0
triggerall = Time < 5
trigger1 = prevstateno = 205
trigger2 = prevstateno = 210
trigger3 = prevstateno = 240
trigger4 = prevstateno = 440
trigger5 = prevstateno = 250
trigger5 = var(1) = 0
trigger6 = prevstateno = 1211 ;フェニックスアロー強
trigger7 = prevstateno = 1400 ;サイコソード弱
trigger8 = prevstateno = 1410 ;サイコソード強
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1
;----------------------------------
[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1420

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1422

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1220

[State 1000, 音を鳴らす];声
type = PlaySnd
trigger1 = AnimElem = 4
value = 1000, 0
channel = 0
volume = 255

[State 1000, 音を鳴らす];効果音
type = PlaySnd
trigger1 = AnimElem = 6
value = 1000, 1

[State 1000, Proj]
type = Projectile
trigger1 = animelemtime(6)=1
projID = 1000
projanim = 1050
projhitanim = 1051
projscale = 1, 1
projremove = 1
projhits = 1
projpriority = 1
projsprpriority = 4
air.juggle = 4
;projremovetime = 25
offset = 30,-63					;出現位置
velocity = 4.5					;初速度
ownpal = 1						;独自パレ
postype = p1
attr = S, SP
damage = 99, 10
getpower = 104, 104
animtype = hard
guardflag = M
hitflag = MAF
priority = 3, Hit
pausetime = 13, 12
sparkno = s4002
guard.sparkno = s4012
sparkxy = 12, 0
hitsound = s1, 5
guardsound = s121, 0
ground.type = High
ground.slidetime = 15
ground.hittime  = 18
ground.velocity = -7
guard.velocity = -9.5
air.type = High
air.hittime  = 99
air.velocity = -5,-4
air.fall = 1
fall.recovertime = 30
nochainID = 290

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;サイコボールアタック強
[Statedef 1010]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 45
velset = 0,0
anim = 1010
ctrl = 0
sprpriority = 2

;----------------------------------
; どこでもキャンセル
; var(8)
;----------------------------------
;MAXゲージ消費
[State 1000, VarAdd]
type = VarAdd
triggerall = var(8) > 0
triggerall = Time = 0
trigger1 = prevstateno = 205
trigger2 = prevstateno = 210
trigger3 = prevstateno = 240
trigger4 = prevstateno = 440
trigger5 = prevstateno = 250
trigger5 = var(1) = 0
trigger6 = prevstateno = 1211 ;フェニックスアロー強
trigger7 = prevstateno = 1400 ;サイコソード弱
trigger8 = prevstateno = 1410 ;サイコソード強
var(8) = -150
ignorehitpause = 1

[State 1000, PalFx];点滅
type = PalFx
triggerall = var(8) > 0
triggerall = Time < 5
trigger1 = prevstateno = 205
trigger2 = prevstateno = 210
trigger3 = prevstateno = 240
trigger4 = prevstateno = 440
trigger5 = prevstateno = 250
trigger5 = var(1) = 0
trigger6 = prevstateno = 1211 ;フェニックスアロー強
trigger7 = prevstateno = 1400 ;サイコソード弱
trigger8 = prevstateno = 1410 ;サイコソード強
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1
;----------------------------------
[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1420

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1422

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1220

[State 1000, 音を鳴らす];声
type = PlaySnd
trigger1 = AnimElem = 4
value = 1000, 0
channel = 0
volume = 255

[State 1000, 音を鳴らす];効果音
type = PlaySnd
trigger1 = AnimElem = 6
value = 1000, 1

[State 1000, Proj]
type = Projectile
trigger1 = animelemtime(6)=1
projID = 1000
projanim = 1050
projhitanim = 1051
projscale = 1, 1
projremove = 1
projhits = 1
projpriority = 1
projsprpriority = 4
air.juggle = 4
;projremovetime = 25
offset = 32,-63					;出現位置
velocity = 7					;初速度
ownpal = 1						;独自パレ
postype = p1
attr = S, SP
damage = 99, 10
getpower = 104, 104
animtype = hard
guardflag = M
hitflag = MAF
priority = 3, Hit
pausetime = 13, 12
sparkno = s4002
guard.sparkno = s4012
sparkxy = 12, 0
hitsound = s1, 5
guardsound = s121, 0
ground.type = High
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = -8
guard.velocity = -10
air.type = High
air.hittime  = 99
air.velocity = -5,-4
air.fall = 1
fall.recovertime = 30
nochainID = 290

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;サイコシュート弱
[Statedef 1100]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 61
velset = 0,0
anim = 1100
ctrl = 0
sprpriority = 2

;----------------------------------
; どこでもキャンセル
; var(8)
;----------------------------------
;MAXゲージ消費
[State 1000, VarAdd]
type = VarAdd
triggerall = var(8) > 0
triggerall = Time = 0
trigger1 = prevstateno = 205
trigger2 = prevstateno = 210
trigger3 = prevstateno = 240
trigger4 = prevstateno = 440
trigger5 = prevstateno = 250
trigger5 = var(1) = 0
trigger6 = prevstateno = 1211 ;フェニックスアロー強
trigger7 = prevstateno = 1400 ;サイコソード弱
trigger8 = prevstateno = 1410 ;サイコソード強
var(8) = -150
ignorehitpause = 1

[State 1000, PalFx];点滅
type = PalFx
triggerall = var(8) > 0
triggerall = Time < 5
trigger1 = prevstateno = 205
trigger2 = prevstateno = 210
trigger3 = prevstateno = 240
trigger4 = prevstateno = 440
trigger5 = prevstateno = 250
trigger5 = var(1) = 0
trigger6 = prevstateno = 1211 ;フェニックスアロー強
trigger7 = prevstateno = 1400 ;サイコソード弱
trigger8 = prevstateno = 1410 ;サイコソード強
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1
;----------------------------------
[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1420

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1422

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1220

[State 1000, 音を鳴らす];声
type = PlaySnd
trigger1 = AnimElem = 4
value = 1100, 0
channel = 0
volume = 255

[State 1000, 音を鳴らす];効果音
type = PlaySnd
trigger1 = AnimElem = 6
value = 1100, 1

[State 1000, Proj]
type = Projectile
trigger1 = animelemtime(6)=1
projID = 1100
projanim = 1150
projhitanim = 1151
projscale = 1, 1
projremove = 1
projhits = 1
projpriority = 1
projsprpriority = 4
air.juggle = 3
;projremovetime = 25
offset = 28,-63					;出現位置
velocity = 4.3					;初速度
ownpal = 1						;独自パレ
postype = p1
attr = S, SP
damage = 99, 15
getpower = 81, 81
animtype = hard
guardflag = M
hitflag = MAF
priority = 3, Hit
pausetime = 14, 14
sparkno = s4002
guard.sparkno = s4012
sparkxy = 12, 0
hitsound = s1, 16
guardsound = s121, 0
ground.type = High
ground.slidetime = 14
ground.hittime  = 25
ground.velocity = -4
guard.velocity = -10.5
air.type = High
air.hittime  = 99
air.velocity = -5,-4
fall = 1
fall.recover = 0
p2stateno = 1120
nochainID = 290

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;サイコシュート強
[Statedef 1110]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 61
velset = 0,0
anim = 1110
ctrl = 0
sprpriority = 2

;----------------------------------
; どこでもキャンセル
; var(8)
;----------------------------------
;MAXゲージ消費
[State 1000, VarAdd]
type = VarAdd
triggerall = var(8) > 0
triggerall = Time = 0
trigger1 = prevstateno = 205
trigger2 = prevstateno = 210
trigger3 = prevstateno = 240
trigger4 = prevstateno = 440
trigger5 = prevstateno = 250
trigger5 = var(1) = 0
trigger6 = prevstateno = 1211 ;フェニックスアロー強
trigger7 = prevstateno = 1400 ;サイコソード弱
trigger8 = prevstateno = 1410 ;サイコソード強
var(8) = -150
ignorehitpause = 1

[State 1000, PalFx];点滅
type = PalFx
triggerall = var(8) > 0
triggerall = Time < 5
trigger1 = prevstateno = 205
trigger2 = prevstateno = 210
trigger3 = prevstateno = 240
trigger4 = prevstateno = 440
trigger5 = prevstateno = 250
trigger5 = var(1) = 0
trigger6 = prevstateno = 1211 ;フェニックスアロー強
trigger7 = prevstateno = 1400 ;サイコソード弱
trigger8 = prevstateno = 1410 ;サイコソード強
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1
;----------------------------------
[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1420

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1422

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1220

[State 1000, 音を鳴らす];声
type = PlaySnd
trigger1 = AnimElem = 4
value = 1100, 0
channel = 0
volume = 255

[State 1000, 音を鳴らす];効果音
type = PlaySnd
trigger1 = AnimElem = 6
value = 1100, 1

[State 1000, Proj]
type = Projectile
trigger1 = animelemtime(6)=1
projID = 1100
projanim = 1150
projhitanim = 1151
projscale = 1, 1
projremove = 1
projhits = 1
projpriority = 1
projsprpriority = 4
air.juggle = 3
;projremovetime = 25
offset = 28,-63					;出現位置
velocity = 7					;初速度
ownpal = 1						;独自パレ
postype = p1
attr = S, SP
damage = 99, 15
getpower = 81, 81
animtype = hard
guardflag = M
hitflag = MAF
priority = 3, Hit
pausetime = 14, 14
sparkno = s4002
guard.sparkno = s4012
sparkxy = 12, 0
hitsound = s1, 16
guardsound = s121, 0
ground.type = High
ground.slidetime = 14
ground.hittime  = 25
ground.velocity = -4
guard.velocity = -10.5
air.type = High
air.hittime  = 99
air.velocity = -5,-4
fall = 1
fall.recover = 0
p2stateno = 1120
nochainID = 290

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;サイコシュート
;相手やられ
[Statedef 1120]
type    = U
movetype= H
physics = N
velset = 0,0

[State 810, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 1120

[State 865, 5]
type = ChangeState
trigger1 = animtime = 0
value = 1121

;---------------------------------------------------------------------------
;サイコシュート
;相手やられ2
[Statedef 1121]
type    = U
movetype= H
physics = N
velset = -.5,ifelse(StateType = S,-15,-14)

[State 1905, StateTypeSet]
type = StateTypeSet
Trigger1 = Time = 0
trigger1 = StateType = S
StateType = A

[State 810, 1]
type = ChangeAnim
Trigger1 = Time = 0
value = 5050

[State 810, vel]
type = VelAdd
Trigger1 = time>=0
y = .54

[State 865, 5]
type = SelfState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 5100

;---------------------------------------------------------------------------
;フェニックスアロー弱
[Statedef 1200]
type    = A
movetype= A
physics = N
juggle  = 8
poweradd= 61
velset = 0,0
anim = 1200
ctrl = 0
sprpriority = 2

;----------------------------------
; どこでもキャンセル
; var(8)
;----------------------------------
;MAXゲージ消費
[State 1000, VarAdd]
type = VarAdd
triggerall = var(8) > 0
triggerall = Time = 0
trigger1 = prevstateno = 630
trigger2 = prevstateno = 640
trigger3 = prevstateno = 1400 ;サイコソード弱
trigger4 = prevstateno = 1410 ;サイコソード強
trigger5 = prevstateno = 1450 ;空中サイコソード弱
trigger6 = prevstateno = 1460 ;空中サイコソード強
var(8) = -150
ignorehitpause = 1

[State 1000, PalFx];点滅
type = PalFx
triggerall = var(8) > 0
triggerall = Time < 5
trigger1 = prevstateno = 630
trigger2 = prevstateno = 640
trigger3 = prevstateno = 1400 ;サイコソード弱
trigger4 = prevstateno = 1410 ;サイコソード強
trigger5 = prevstateno = 1450 ;空中サイコソード弱
trigger6 = prevstateno = 1460 ;空中サイコソード強
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1
;----------------------------------
;SCゲージ消費用
[State 1000, varset]
type = varset
trigger1 = time = 0
var(11) = 1
;----------------------------------
[State 1000, 音を鳴らす];声
type = PlaySnd
trigger1 = AnimElem = 2
value = 1200, 0
channel = 0
volume = 100

[State 1000, 音を鳴らす];効果音
type = PlaySnd
trigger1 = AnimElem = 2
value = 1200, 1

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1420

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1422

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1220

[state 1200, PosAdd]
type = PosAdd
trigger1 = animelemtime(3)=0
y = -25

[state 1200, VelSet]
type = VelSet
trigger1 = animelem = 3
x = 4.2
y = 8.4

[State 801, Explod];火球エフェクト
type = Explod
trigger1 = NumExplod(1220)=0
trigger1 = AnimElemTime(3)=0
anim = 1220
ID = 1220
pos = 0, 0
postype = p1
facing = 1
sprpriority = 1
ownpal = 1
bindtime = -1
removetime = -1
removeongethit = 1

[State 1000, 0]
Type = RemoveExplod
trigger1 = Pos Y >= 0
ID = 1220

[State 1905, ScreenBound];画面固定
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 1000, ヒット定義]
type = HitDef
trigger1 = time = 0
trigger2 = movecontact = 3
attr = A, SA
animtype  = hard
damage    = ifelse(hitcount=0,58,25), 8
getpower  = 30, 30
priority  = 5, hit
hitflag = MAF
guardflag = MA
pausetime = 3,2
sparkxy = -15,-25
sparkno = s4002
guard.sparkno = s4012
hitsound = s1, 4
guardsound = s121,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 17
ground.velocity = -2
guard.slidetime = 15
guard.ctrltime = 15
guard.velocity = -2
air.velocity = -2.5,-4
yaccel = .45
;ground.cornerpush.veloff = 0
;air.cornerpush.veloff = 0
air.fall = 1
fall.recover = 0
id = 1200
nochainid = 290

[State 1200, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0
value = 1201

;---------------------------------------------------------------------------
;フェニックスアロー弱（着地）
[Statedef 1201]
type    = S
movetype= A
physics = N
juggle  = 8
poweradd= 0
velset = 1,0
anim = 1201
ctrl = 0
sprpriority = 2

[state 1200, PosSet]
type = PosSet
trigger1 = time = 0
y = 0

[state 1200, VelSet]
type = VelSet
trigger1 = animelem = 2
x = 0

;----------------------------------
;SCゲージ消費用
[State 1000, varset]
type = varset
trigger1 = time = 0
var(11) = 0
;----------------------------------

[State 1200, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;フェニックスアロー強
[Statedef 1210]
type    = A
movetype= A
physics = N
juggle  = 8
poweradd= 61
velset = 0,0
anim = 1210
ctrl = 0
sprpriority = 2

;----------------------------------
; どこでもキャンセル
; var(8)
;----------------------------------
;MAXゲージ消費
[State 1000, VarAdd]
type = VarAdd
triggerall = var(8) > 0
triggerall = Time = 0
trigger1 = prevstateno = 630
trigger2 = prevstateno = 640
trigger3 = prevstateno = 1400 ;サイコソード弱
trigger4 = prevstateno = 1410 ;サイコソード強
trigger5 = prevstateno = 1450 ;空中サイコソード弱
trigger6 = prevstateno = 1460 ;空中サイコソード強
var(8) = -150
ignorehitpause = 1

[State 1000, PalFx];点滅
type = PalFx
triggerall = var(8) > 0
triggerall = Time < 5
trigger1 = prevstateno = 630
trigger2 = prevstateno = 640
trigger3 = prevstateno = 1400 ;サイコソード弱
trigger4 = prevstateno = 1410 ;サイコソード強
trigger5 = prevstateno = 1450 ;空中サイコソード弱
trigger6 = prevstateno = 1460 ;空中サイコソード強
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1
;----------------------------------
;SCゲージ消費用
[State 1000, varset]
type = varset
trigger1 = time = 0
var(11) = 1
;----------------------------------
[State 1000, 音を鳴らす];声
type = PlaySnd
trigger1 = AnimElem = 2
value = 1200, 0
channel = 0
volume = 100

[State 1000, 音を鳴らす];効果音
type = PlaySnd
trigger1 = AnimElem = 2
value = 1200, 1

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1420

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1422

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1220

[state 1200, PosAdd]
type = PosAdd
trigger1 = animelemtime(3) = 0
y = -30

[state 1200, VelSet]
type = VelSet
trigger1 = animelem = 3
x = 7.5
y = 6.5

[State 801, Explod];火球エフェクト
type = Explod
trigger1 = NumExplod(1220)=0
trigger1 = AnimElemTime(3)=0
anim = 1220
ID = 1220
pos = 0, 0
postype = p1
facing = 1
sprpriority = 1
ownpal = 1
bindtime = -1
removetime = -1
removeongethit = 1

[State 1000, 0]
Type = RemoveExplod
trigger1 = Pos Y >= 0
ID = 1220

[State 1905, ScreenBound];画面固定
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 1000, ヒット定義]
type = HitDef
trigger1 = time = 0
trigger2 = movecontact = 3
attr = A, SA
animtype  = hard
damage    = ifelse(hitcount=0,41,25), 8
getpower  = 30, 30
priority  = 5, hit
hitflag = MAF
guardflag = MA
pausetime = 3,2
sparkxy = -15,-25
sparkno = s4002
guard.sparkno = s4012
hitsound = s1, 4
guardsound = s121,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 24
ground.velocity = -1.8
guard.slidetime = 16
guard.ctrltime = 16
guard.velocity = -2
air.velocity = -2.5,-4
yaccel = .45
;ground.cornerpush.veloff = 0
;air.cornerpush.veloff = 0
air.fall = 1
fall.recover = 0
id = 1210
nochainid = 290

[State 1200, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0
value = 1211

;---------------------------------------------------------------------------
;フェニックスアロー強（着地）
[Statedef 1211]
type    = S
movetype= A
physics = N
juggle  = 2
poweradd= 0
velset = 0.5,0
anim = 1211
ctrl = 0
sprpriority = 2

;----------------------------------
;SCゲージ消費用
[State 1000, varset]
type = varset
trigger1 = animtime = 0
var(11) = 0
;----------------------------------
[state 1200, PosSet]
type = PosSet
trigger1 = time = 0
y = 0

[state 1200, VelSet]
type = VelSet
trigger1 = animelemtime(4)=5
x = 0

[state 1200, Turn]
type = Turn
trigger1 = time = 0
trigger1 = P2Dist x <= 0

[State 1000, 0]
Type = RemoveExplod
Trigger1 = Time = 0
ID = 1220

[State 801, Explod];火球エフェクト
type = Explod
trigger1 = NumExplod(1221)=0
trigger1 = Time = 0
anim = 1221
ID = 1221
pos = 0, 0
postype = p1
facing = 1
sprpriority = 1
ownpal = 1
bindtime = -1
removeongethit = 1

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelem = 4
attr = S, SA
animtype  = back
damage    = 91, 8
getpower  = 30, 30
priority  = 5, hit
hitflag = MAF
guardflag = MA
pausetime = 13,12
sparkxy = -15,-50
sparkno = s4002
guard.sparkno = s4012
hitsound = s1, 16
guardsound = s121,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 29
ground.velocity = -5.5,-5.5
guard.slidetime = 17
guard.ctrltime = 17
guard.velocity = -7
air.velocity = -4.5,-4.5
yaccel = .43
;ground.cornerpush.veloff = 0
;air.cornerpush.veloff = 0
fall = 1
fall.recover = 0
id = 1210
nochainid = 290

[state 1000, TargetState];ヒット
type = TargetState
trigger1 = NumTarget(1210)
trigger1 = MoveHit
value = 1250
id = 1210
persistent = 0
ignorehitpause = 1

[State 1200, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;フェニックスアロー強
;相手やられ
[Statedef 1250]
type    = S
movetype= H
physics = N
velset = 0,0

;---------------------------------------------
[state 1050, SelfState];Helperは返却
type = SelfState
trigger1 = ishelper
value = PrevStateNo
;---------------------------------------------

[State 5000, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
value = 5030

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5000, 5] ;State type gets set to aerial if getting hit up
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = Pos Y != 0
statetype = A

[State 5000, 7]
type = ChangeState
trigger1 = HitShakeOver
value = 1251

[State 5000, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
;フェニックスアロー強
;相手やられ
;HITA_UP (initial going up)
[Statedef 1251]
type    = A
movetype= H
physics = N
ctrl = 0

[State 5030, 1]
type = VelAdd;Gravity
trigger1 = 1
y = GetHitVar(yaccel)

[State 5030, 2]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 5030, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 1252 ;HITA_UP (transition)

;---------------------------------------------------------------------------
;フェニックスアロー強
;相手やられ
; HITA_UP_T (transition)
[Statedef 1252]
type    = A
movetype= H
physics = N

[State 5035, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5035)
trigger1 = Anim != [5051,5059] ;Not if in hit up anim
trigger1 = Anim != 5090 ;Not if hit off ground anim
value = 5035

[State 5035, 2]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5035, 4]
type = ChangeState
;triggerall = HitFall
trigger1 = HitOver  ;Hit is over
trigger2 = AnimTime = 0 ;Anim is over
trigger3 = Vel Y > 0    ;Hit ground
trigger3 = Pos Y >= 10  ;.
trigger4 = Time = 0     ;No transition anim
trigger4 = Anim != 5035 ;.
value = 1253 ;HITA_FALL

;---------------------------------------------------------------------------
;フェニックスアロー強
;相手やられ
;HITA_FALL (knocked up, falling)
[Statedef 1253]
type    = A
movetype= H
physics = N

[State 5050, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 5050

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 5050, 3] ;Gravity
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5050, 4] ;Recover near ground
type = ChangeState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5200 ;HITFALL_RECOVER

[State 5050, 5]; Recover in mid air
type = ChangeState
triggerall = Vel Y > -1
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5210 ;HITFALL_AIRRECOVER

[State 5050, 6]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= ifelse((anim = [5051,5059]) || (anim = [5061,5069]), 0, 25)
value = 5100 ;HIT_BOUNCE


;---------------------------------------------------------------------------
;サイコリフレクター
[Statedef 1300]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 61
velset = 0,0
anim = 1300
ctrl = 0
sprpriority = 2

;----------------------------------
; どこでもキャンセル
; var(8)
;----------------------------------
;MAXゲージ消費
[State 1000, VarAdd]
type = VarAdd
triggerall = var(8) > 0
triggerall = Time = 0
trigger1 = prevstateno = 205
trigger2 = prevstateno = 210
trigger3 = prevstateno = 240
trigger4 = prevstateno = 440
trigger5 = prevstateno = 250
trigger5 = var(1) = 0
trigger6 = prevstateno = 1211 ;フェニックスアロー強
trigger7 = prevstateno = 1400 ;サイコソード弱
trigger8 = prevstateno = 1410 ;サイコソード強
var(8) = -150
ignorehitpause = 1

[State 1000, PalFx];点滅
type = PalFx
triggerall = var(8) > 0
triggerall = Time < 5
trigger1 = prevstateno = 205
trigger2 = prevstateno = 210
trigger3 = prevstateno = 240
trigger4 = prevstateno = 440
trigger5 = prevstateno = 250
trigger5 = var(1) = 0
trigger6 = prevstateno = 1211 ;フェニックスアロー強
trigger7 = prevstateno = 1400 ;サイコソード弱
trigger8 = prevstateno = 1410 ;サイコソード強
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1
;----------------------------------
[State 1000, 音を鳴らす];え〜い
type = PlaySnd
trigger1 = AnimElem = 3
value = 1300, 0
channel = 0
volume = 100

[State 1000, 音を鳴らす];効果音
type = PlaySnd
trigger1 = AnimElem = 4
value = 1300, 1

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1420

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1422

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1220

;--------------------------------Helper
[State 1000, Helper]
type = helper
trigger1 = NumHelper(1310)=0
trigger1 = animelem = 6
id = 1310
persistent = 0
name = "Barrier"
pos = 0,0
postype = p1
stateno = 1310
helpertype = normal
keyctrl = 0
ownpal = 1

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;サイコリフレクター
;(子HELPER)バリアエフェクト
[Statedef 1310]
type    = S
movetype= A
physics = N
juggle  = 8
poweradd= 0
velset = 0,0
ctrl = 0
anim = 1310
sprpriority = 3

[state 11000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1000, BindToRoot]
Type = BindToRoot
Trigger1 = Time = 0
Time = 9999
Facing = 0
Pos = 0,0

[State 1000, 0]
Type = AssertSpecial
Trigger1 = 1
Flag = NoShadow
;--------------------------------Helper
[State 1000, Helper];反射用Helper
type = helper
trigger1 = NumHelper(1315)=0
trigger1 = time = 0
id = 1315
persistent = 0
name = "Reflector"
pos = 0,0
postype = p1
stateno = 1315
helpertype = normal
keyctrl = 0
ownpal = 1

[State 1000, ヒット定義]
type = HitDef
trigger1 = time = 0
attr = S, SP
animtype  = back
damage    = floor(107*root,fvar(3)), 10
getpower  = 30, 30
priority  = 5, hit
hitflag = MAF
guardflag = MA
pausetime = 0,15
guard.pausetime = 0,15
sparkxy = -15,-65
sparkno = s4002
guard.sparkno = s4012
hitsound   = s1,10
guardsound = s121,0
ground.type = high
ground.slidetime = 30
ground.hittime  = 25
ground.velocity = -4,-9
air.velocity = -4,-8
guard.velocity = -11.5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .4
fall = 1
fall.recover = 0
id = 1300
nochainid = 1300

[state 11000, destroyselef]
type = destroyself
trigger1 = animtime = 0
trigger2 = root,movetype = H
trigger3 = root,stateno != 1300

;---------------------------------------------------------------------------
;サイコリフレクター
;(孫HELPER)リフレクター
[Statedef 1315]
type    = S
movetype= A
physics = N
juggle  = 8
poweradd= 0
velset = 0,0
ctrl = 0
anim = 1315
sprpriority = 6

[State 1000, 0]
Type = AssertSpecial
Trigger1 = 1
Flag = NoShadow
Flag2 = Invisible

[State 11101, NotHitBy];無敵
type = NotHitBy
trigger1 = Time >= 0
value = SCA

[State 11101, HitBy];飛び道具のみ接触許可
type = HitBy
trigger1 = Time >= 0
value = SCA, NP, SP, HP, AP

[State 11101, HitOverRide];飛び道具を受けた際の演出
Type = HitOverRide
trigger1 = 1
time = -1
attr = SCA, NP, SP ,HP    ;通常及び必殺技
slot = 0
stateno = 1316

[State 11101, HitOverRide];飛び道具を受けた際の演出
Type = null;HitOverRide
trigger1 = 1
time = -1
attr = SCA, HP        ;超必
slot = 1
stateno = 1318

;[State 1000, BindToRoot]
;Type = BindToRoot
;Trigger1 = Time = 0
;Time = 9999
;Facing = 0
;Pos = 0,0

[State 11101, DestroySelf];消滅
type = DestroySelf
trigger1 = animtime = 0
trigger2 = root,movetype = H
trigger3 = root,stateno != 1300

;---------------------------------------------------------------------------
;サイコリフレクター
;(孫HELPER)反射後通常or必殺技用
[Statedef 1316]
type    = A
movetype= A
physics = N
juggle  = 8
poweradd= 0
velset = 6,0
ctrl = 0
anim = 1050     ;サイコボールエフェクト利用
sprpriority = 4

[State 11101, PosAdd]
type = PosSet
trigger1 = time = 0
y = -65

[State 11101, PosAdd]
type = PosAdd
trigger1 = time = 0
x = 50

[State 11101, VarSet];ダメージ記憶
type = VarSet
trigger1 = var(0)=0
var(0) = GetHitVar(damage)

[state 2901,1]
type = nothitby
trigger1 = 1
value = SCA
time = -1

[state 2901,1]
type = hitby
trigger1 = 1
value = SCA,NP,SP,HP
time = -1

[state 2901,1]
type = hitoverride
trigger1 = 1
attr = SCA,NP,SP,HP
stateno = 1317

[State 20001, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 1000, ヒット定義]
type = HitDef
trigger1 = time = 0
attr = S, SP
animtype  = back
damage    = var(0), 10
getpower  = 75, 75
priority  = 5, hit
hitflag = MAF
guardflag = MA
pausetime = 0,10
guard.pausetime = 0,10
sparkxy = -15, 0
sparkno = s4002
guard.sparkno = s4012
hitsound   = s1,9
guardsound = s121,0
ground.type = high
ground.slidetime = 19
ground.hittime  = 25
ground.velocity = -5,-5
air.velocity = -3,-4
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .45
fall = 1
fall.recover = 0
p1stateno = 1317
id = 1316

[state 11000, destroyselef]
type = destroyself
trigger1 = FrontEdgeDist <= -10
trigger2 = root,movetype = H

[state 11000, ChangeState]
type = ChangeState
trigger1 = moveguarded
value = 1317

;[State 3100, デバック(変数確認)]
;Type = DisplayToClipBoard
;Trigger1 = 1
;Text = "var(0)=%d,Py=%.2f\n"
;Params = var(0),pos y
;IgnoreHitPause = 1

;---------------------------------------------------------------------------
;サイコリフレクター
;(孫HELPER)反射後攻撃用の消滅
[Statedef 1317]
type    = A
movetype= A
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
ctrl = 0
anim = 1051     ;サイコボールエフェクト利用

[State 20001, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[state 3130]
type = destroyself
trigger1 = animtime = 0

;---------------------------------------------------------------------------
;サイコソード弱
[Statedef 1400]
type    = S
movetype= A
physics = N
juggle  = 8
poweradd= 74
velset = 0,0
anim = 1400
ctrl = 0
sprpriority = 2

;----------------------------------
; どこでもキャンセル
; var(8)
;----------------------------------
;MAXゲージ消費
[State 1000, VarAdd]
type = VarAdd
triggerall = var(8) > 0
triggerall = Time = 0
trigger1 = prevstateno = 205
trigger2 = prevstateno = 210
trigger3 = prevstateno = 240
trigger4 = prevstateno = 440
trigger5 = prevstateno = 250
trigger5 = var(1) = 0
trigger6 = prevstateno = 1211 ;フェニックスアロー強
var(8) = -150
ignorehitpause = 1

[State 1000, PalFx];点滅
type = PalFx
triggerall = var(8) > 0
triggerall = Time < 5
trigger1 = prevstateno = 205
trigger2 = prevstateno = 210
trigger3 = prevstateno = 240
trigger4 = prevstateno = 440
trigger5 = prevstateno = 250
trigger5 = var(1) = 0
trigger6 = prevstateno = 1211 ;フェニックスアロー強
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1
;----------------------------------
;SCゲージ消費用
[State 1000, varset]
type = varset
trigger1 = time = 0
var(11) = 1
;----------------------------------
[State 1000, 音を鳴らす];さいこそ〜ど
type = PlaySnd
trigger1 = AnimElem = 2
value = 1400, 0
channel = 0
volume = 100

[State 1000, 音を鳴らす];効果音
type = PlaySnd
trigger1 = AnimElem = 3
value = 1400, 1

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1422

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1220

[state 1200, VelSet]
type = VelSet
trigger1 = animelem = 4
x = 2.1
y = -6.5

[state 1200, VelAdd]
type = VelAdd
trigger1 = animelemtime(4)>=0
y = 0.35

[state 1200, VelAdd]
type = VelAdd
trigger1 = vel x > 0
x = -0.2

[state 1200, VelAdd]
type = VelAdd
trigger1 = vel x <= 0
x = 0

[State 801, Explod];ソードエフェクト1
type = Explod
trigger1 = NumExplod(1420)=0
trigger1 = Time = 0
anim = 1420
ID = 1420
pos = 0, 0
postype = p1
facing = 1
sprpriority = 3
ownpal = 1
bindtime = -1
removetime = -1
ignorehitpause = 0  ;hitpause中は動かない
removeongethit = 1  ;攻撃を受けて消える

[State 801, Explod];ソードエフェクト2
type = Explod
trigger1 = NumExplod(1421)=0
trigger1 = animelem = 6
anim = 1421
ID = 1421
pos = 0, 0
postype = p1
facing = 1
sprpriority = 3
ownpal = 1
;bindtime = -1
;removetime = -1
ignorehitpause = 0  ;hitpause中は動かない
removeongethit = 1  ;攻撃を受けて消える

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 6
ID = 1420

[State 1905, StateTypeSet]
type = StateTypeSet
trigger1 = statetype != A
Trigger1 = animelem = 4
StateType = A

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelem = 2
attr = S, SA
animtype  = hard
damage    = 41, 8
getpower  = 45, 45
priority  = 5, hit
hitflag = MAFP
guardflag = M
pausetime = 10,9
sparkxy = -15,-25
sparkno = s4002
guard.sparkno = s4012
hitsound = s1, 9
guardsound = s121,0
ground.type = low
ground.slidetime = 25
ground.hittime  = 25
ground.velocity = 1.5,0;-5.5
guard.velocity = -6
air.hittime = 99
air.velocity = -1,-5
yaccel = .45
ground.cornerpush.veloff = 0
;air.cornerpush.veloff = 0
air.fall = 1
fall.recover = 0
id = 1400
nochainid = 290

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelem = 4
attr = A, SA
animtype  = hard
damage    = 33, 8
getpower  = 45, 45
priority  = 5, hit
hitflag = MAFP
guardflag = M
pausetime = 6,4
sparkxy = -15,-75
sparkno = s4002
guard.sparkno = s4012
hitsound = s1, 9
guardsound = s121,0
ground.type = High
ground.slidetime = 18
ground.hittime  = 20
ground.velocity = -1,-5.5
guard.velocity = -5
air.hittime = 99
air.velocity = -1,-5.5
yaccel = .45
;ground.cornerpush.veloff = 0
;air.cornerpush.veloff = 0
fall = 1
fall.recover = 0
id = 1400
nochainid = 290

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelem = 5
attr = A, SA
animtype  = up
damage    = 33, 8
getpower  = 45, 45
priority  = 5, hit
hitflag = MAFP
guardflag = M
pausetime = 5,4
sparkxy = -15,-75
sparkno = s4002
guard.sparkno = s4012
hitsound = s1, 9
guardsound = s121,0
ground.type = High
ground.slidetime = 18
ground.hittime  = 20
ground.velocity = -1,-8
guard.velocity = -5
air.hittime = 99
air.velocity = -1.2,-9
yaccel = .42
;ground.cornerpush.veloff = 0
;air.cornerpush.veloff = 0
fall = 1
fall.recover = 0
id = 1400
nochainid = 290

[State 1200, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1401

;---------------------------------------------------------------------------
;サイコソード（着地）
[Statedef 1401]
type    = S
movetype= A
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
anim = 1401
ctrl = 0
sprpriority = 2

;----------------------------------
;SCゲージ消費用
[State 1000, varset]
type = varset
trigger1 = time = 0
var(11) = 0
;----------------------------------
[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1420

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1422

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1220

[state 1200, PosSet]
type = PosSet
trigger1 = time = 0
y = 0

[state 1200, VelSet]
type = VelSet
trigger1 = time = 0
x = 0
y = 0

[State 1200, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;サイコソード強
[Statedef 1410]
type    = S
movetype= A
physics = N
juggle  = 8
poweradd= 74
velset = 0,0
anim = 1410
ctrl = 0
sprpriority = 2

;----------------------------------
; どこでもキャンセル
; var(8)
;----------------------------------
;MAXゲージ消費
[State 1000, VarAdd]
type = VarAdd
triggerall = var(8) > 0
triggerall = Time = 0
trigger1 = prevstateno = 205
trigger2 = prevstateno = 210
trigger3 = prevstateno = 240
trigger4 = prevstateno = 440
trigger5 = prevstateno = 250
trigger5 = var(1) = 0
trigger6 = prevstateno = 1211 ;フェニックスアロー強
var(8) = -150
ignorehitpause = 1

[State 1000, PalFx];点滅
type = PalFx
triggerall = var(8) > 0
triggerall = Time < 5
trigger1 = prevstateno = 205
trigger2 = prevstateno = 210
trigger3 = prevstateno = 240
trigger4 = prevstateno = 440
trigger5 = prevstateno = 250
trigger5 = var(1) = 0
trigger6 = prevstateno = 1211 ;フェニックスアロー強
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1
;----------------------------------
;SCゲージ消費用
[State 1000, varset]
type = varset
trigger1 = time = 0
var(11) = 1
;----------------------------------
[State 1000, 音を鳴らす];さいこそ〜ど
type = PlaySnd
trigger1 = AnimElem = 2
value = 1400, 0
channel = 0
volume = 100

[State 1000, 音を鳴らす];効果音
type = PlaySnd
trigger1 = AnimElem = 3
value = 1400, 1

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1422

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1220

[state 1200, VelSet]
type = VelSet
trigger1 = animelem = 5
x = 3
y = -8

[state 1200, VelAdd]
type = VelAdd
trigger1 = animelemtime(5)>=0
y = 0.41

[state 1200, VelAdd]
type = VelAdd
trigger1 = vel x > 0
x = -0.2

[state 1200, VelAdd]
type = VelAdd
trigger1 = vel x <= 0
x = 0

[State 1400, NotHitBy]
type = NotHitBy
trigger1 = animelem = 1
value = SCA

[State 801, Explod];ソードエフェクト1
type = Explod
trigger1 = NumExplod(1422)=0
trigger1 = Time = 0
anim = 1422
ID = 1422
pos = 0, 0
postype = p1
facing = 1
sprpriority = 3
ownpal = 1
bindtime = -1
removetime = -1
ignorehitpause = 0  ;hitpause中は動かない
removeongethit = 1  ;攻撃を受けて消える

[State 801, Explod];ソードエフェクト2
type = Explod
trigger1 = NumExplod(1421)=0
trigger1 = animelem = 7
anim = 1421
ID = 1421
pos = 0, 0
postype = p1
facing = 1
sprpriority = 3
ownpal = 1
;bindtime = -1
;removetime = -1
ignorehitpause = 0  ;hitpause中は動かない
removeongethit = 1  ;攻撃を受けて消える

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 7
ID = 1422

[State 1905, StateTypeSet]
type = StateTypeSet
trigger1 = statetype != A
Trigger1 = animelem = 5
StateType = A

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelem = 3
attr = S, SA
animtype  = hard
damage    = 41, 5
getpower  = 45, 45
priority  = 5, hit
hitflag = MAFP
guardflag = M
pausetime = 8,7
sparkxy = -15,-25
sparkno = s4002
guard.sparkno = s4012
hitsound = s1, 9
guardsound = s121,0
ground.type = low
ground.slidetime = 25
ground.hittime  = 25
ground.velocity = 1.5,0;-5.5
guard.velocity = -6.5
air.hittime = 99
air.velocity = -1,-5.5
yaccel = .45
ground.cornerpush.veloff = 0
;air.cornerpush.veloff = 0
air.fall = 1
fall.recover = 0
id = 1410
nochainid = 290

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelem = 4
attr = S, SA
animtype  = hard
damage    = 25, 5
getpower  = 45, 45
priority  = 5, hit
hitflag = MAFP
guardflag = M
pausetime = 7,6
sparkxy = -15,-50
sparkno = s4002
guard.sparkno = s4012
hitsound = s1, 9
guardsound = s121,0
ground.type = low
ground.slidetime = 25
ground.hittime  = 25
ground.velocity = -.5,0
guard.velocity = -5
air.hittime = 99
air.velocity = -1,-5
yaccel = .45
ground.cornerpush.veloff = 0
;air.cornerpush.veloff = 0
air.fall = 1
fall.recover = 0
id = 1410
nochainid = 290

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelem = 5
attr = A, SA
animtype  = hard
damage    = 25, 4
getpower  = 45, 45
priority  = 5, hit
hitflag = MAFP
guardflag = M
pausetime = 4,2
sparkxy = -15,-70
sparkno = s4002
guard.sparkno = s4012
hitsound = s1, 9
guardsound = s121,0
ground.type = High
ground.slidetime = 18
ground.hittime  = 20
ground.velocity = -1,-6
guard.velocity = -5
air.hittime = 99
air.velocity = -1,-6
yaccel = .45
;ground.cornerpush.veloff = 0
;air.cornerpush.veloff = 0
fall = 1
fall.recover = 0
id = 1410
nochainid = 290

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelemtime(6)=0
trigger2 = animelemtime(6)=3
trigger3 = animelemtime(6)=6
trigger4 = animelemtime(6)=9
;trigger1 = movecontact = 3
;trigger1 = hitcount<7
attr = A, SA
animtype  = up
damage    = 17, 8
getpower  = 15, 15
priority  = 5, hit
hitflag = MAFP
guardflag = M
pausetime = 2,1
sparkxy = -15,-85
sparkno = s4002
guard.sparkno = s4012
hitsound = s1, 9
guardsound = s121,0
ground.type = High
ground.slidetime = 18
ground.hittime  = 20
ground.velocity = -1.5,-7
guard.velocity = -5
air.hittime = 99
air.velocity = -1.5,-7
yaccel = .45
;ground.cornerpush.veloff = 0
;air.cornerpush.veloff = 0
fall = 1
fall.recover = 0
id = 1410
nochainid = 290

[State 1200, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1401

;---------------------------------------------------------------------------
;サイコソード弱（空中版）
[Statedef 1450]
type    = A
movetype= A
physics = N
juggle  = 8-(prevstateno=1410)*4
poweradd= 74
velset = 0,0
anim = 1400
ctrl = 0
sprpriority = 2

;----------------------------------
; どこでもキャンセル
; var(8)
;----------------------------------
;MAXゲージ消費
[State 1000, VarAdd]
type = VarAdd
triggerall = var(8) > 0
triggerall = Time = 0
trigger1 = prevstateno = 630
trigger2 = prevstateno = 640
trigger3 = prevstateno = 1200 ;フェニックスアロー弱
trigger4 = prevstateno = 1210 ;フェニックスアロー強
trigger5 = prevstateno = 1400 ;サイコソード弱
trigger6 = prevstateno = 1410 ;サイコソード強
var(8) = -150
ignorehitpause = 1

[State 1000, PalFx];点滅
type = PalFx
triggerall = var(8) > 0
triggerall = Time < 5
trigger1 = prevstateno = 630
trigger2 = prevstateno = 640
trigger3 = prevstateno = 1200 ;フェニックスアロー弱
trigger4 = prevstateno = 1210 ;フェニックスアロー強
trigger5 = prevstateno = 1400 ;サイコソード弱
trigger6 = prevstateno = 1410 ;サイコソード強
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1
;----------------------------------
;SCゲージ消費用
[State 1000, varset]
type = varset
trigger1 = time = 0
var(11) = 1
;----------------------------------
[State 1000, 音を鳴らす];さいこそ〜ど
type = PlaySnd
trigger1 = AnimElem = 2
value = 1400, 0
channel = 0
volume = 100

[State 1000, 音を鳴らす];効果音
type = PlaySnd
trigger1 = AnimElem = 3
value = 1400, 1

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1422

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1220

[state 1200, VelSet]
type = VelSet
trigger1 = animelem = 4
x = 2.2
y = -6.5

[state 1200, VelAdd]
type = VelAdd
trigger1 = animelemtime(4)>=0
y = 0.37

[state 1200, VelAdd]
type = VelAdd
trigger1 = vel x > 0
x = -0.2

[state 1200, VelAdd]
type = VelAdd
trigger1 = vel x <= 0
x = 0

[State 801, Explod];ソードエフェクト1
type = Explod
trigger1 = NumExplod(1420)=0
trigger1 = Time = 0
anim = 1420
ID = 1420
pos = 0, 0
postype = p1
facing = 1
sprpriority = 3
ownpal = 1
bindtime = -1
removetime = -1
ignorehitpause = 0  ;hitpause中は動かない
removeongethit = 1  ;攻撃を受けて消える

[State 801, Explod];ソードエフェクト2
type = Explod
trigger1 = NumExplod(1421)=0
trigger1 = animelem = 6
anim = 1421
ID = 1421
pos = 0, 0
postype = p1
facing = 1
sprpriority = 3
ownpal = 1
;bindtime = -1
;removetime = -1
ignorehitpause = 0  ;hitpause中は動かない
removeongethit = 1  ;攻撃を受けて消える

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 6
ID = 1420

[State 1905, StateTypeSet]
type = StateTypeSet
trigger1 = statetype != A
Trigger1 = animelem = 4
StateType = A

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelem = 2
attr = A, SA
animtype  = hard
damage    = 41, 8
getpower  = 45, 45
priority  = 5, hit
hitflag = MAFP
guardflag = M
pausetime = 10,9
sparkxy = -15,-25
sparkno = s4002
guard.sparkno = s4012
hitsound = s1, 9
guardsound = s121,0
ground.type = low
ground.slidetime = 25
ground.hittime  = 25
ground.velocity = -.5;,-5.3
guard.velocity = -5
air.hittime = 99
air.velocity = -1,-5.3
yaccel = .45
ground.cornerpush.veloff = 0
;air.cornerpush.veloff = 0
air.fall = 1
fall.recover = 0
id = 1400
nochainid = 290

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelem = 4
attr = A, SA
animtype  = hard
damage    = 33, 8
getpower  = 45, 45
priority  = 5, hit
hitflag = MAFP
guardflag = M
pausetime = 5,4
sparkxy = -15,-75
sparkno = s4002
guard.sparkno = s4012
hitsound = s1, 9
guardsound = s121,0
ground.type = High
ground.slidetime = 18
ground.hittime  = 20
ground.velocity = -1,-5.5
guard.velocity = -5
air.hittime = 99
air.velocity = -1,-7
yaccel = .45
;ground.cornerpush.veloff = 0
;air.cornerpush.veloff = 0
fall = 1
fall.recover = 0
id = 1400
nochainid = 290

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelem = 5
attr = A, SA
animtype  = up
damage    = 33, 8
getpower  = 45, 45
priority  = 5, hit
hitflag = MAFP
guardflag = M
pausetime = 5,4
sparkxy = -15,-75
sparkno = s4002
guard.sparkno = s4012
hitsound = s1, 9
guardsound = s121,0
ground.type = High
ground.slidetime = 18
ground.hittime  = 20
ground.velocity = -1,-8
guard.velocity = -5
air.hittime = 99
air.velocity = -1,-8
yaccel = .45
;ground.cornerpush.veloff = 0
;air.cornerpush.veloff = 0
fall = 1
fall.recover = 0
id = 1400
nochainid = 290

[State 1200, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1401

;---------------------------------------------------------------------------
;サイコソード強（空中版）
[Statedef 1460]
type    = S
movetype= A
physics = N
juggle  = 8-(prevstateno=1400)*4
poweradd= 74
velset = 0,0
anim = 1410
ctrl = 0
sprpriority = 2

;----------------------------------
; どこでもキャンセル
; var(8)
;----------------------------------
;MAXゲージ消費
[State 1000, VarAdd]
type = VarAdd
triggerall = var(8) > 0
triggerall = Time = 0
trigger1 = prevstateno = 630
trigger2 = prevstateno = 640
trigger3 = prevstateno = 1200 ;フェニックスアロー弱
trigger4 = prevstateno = 1210 ;フェニックスアロー強
trigger5 = prevstateno = 1400 ;サイコソード弱
trigger6 = prevstateno = 1410 ;サイコソード強
var(8) = -150
ignorehitpause = 1

[State 1000, PalFx];点滅
type = PalFx
triggerall = var(8) > 0
triggerall = Time < 5
trigger1 = prevstateno = 630
trigger2 = prevstateno = 640
trigger3 = prevstateno = 1200 ;フェニックスアロー弱
trigger4 = prevstateno = 1210 ;フェニックスアロー強
trigger5 = prevstateno = 1400 ;サイコソード弱
trigger6 = prevstateno = 1410 ;サイコソード強
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1
;----------------------------------
;SCゲージ消費用
[State 1000, varset]
type = varset
trigger1 = time = 0
var(11) = 1
;----------------------------------
[State 1000, 音を鳴らす];さいこそ〜ど
type = PlaySnd
trigger1 = AnimElem = 2
value = 1400, 0
channel = 0
volume = 100

[State 1000, 音を鳴らす];効果音
type = PlaySnd
trigger1 = AnimElem = 3
value = 1400, 1

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1420

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1220

[state 1200, VelSet]
type = VelSet
trigger1 = animelem = 5
x = 3
y = -8

[state 1200, VelAdd]
type = VelAdd
trigger1 = animelemtime(5)>=0
y = 0.41

[state 1200, VelAdd]
type = VelAdd
trigger1 = vel x > 0
x = -0.2

[state 1200, VelAdd]
type = VelAdd
trigger1 = vel x <= 0
x = 0

[State 1400, NotHitBy]
type = NotHitBy
trigger1 = animelem = 1
value = SCA

[State 801, Explod];ソードエフェクト1
type = Explod
trigger1 = NumExplod(1422)=0
trigger1 = Time = 0
anim = 1422
ID = 1422
pos = 0, 0
postype = p1
facing = 1
sprpriority = 3
ownpal = 1
bindtime = -1
removetime = -1
ignorehitpause = 0  ;hitpause中は動かない
removeongethit = 1  ;攻撃を受けて消える

[State 801, Explod];ソードエフェクト2
type = Explod
trigger1 = NumExplod(1421)=0
trigger1 = animelem = 7
anim = 1421
ID = 1421
pos = 0, 0
postype = p1
facing = 1
sprpriority = 3
ownpal = 1
;bindtime = -1
;removetime = -1
ignorehitpause = 0  ;hitpause中は動かない
removeongethit = 1  ;攻撃を受けて消える

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 7
ID = 1422

[State 1905, StateTypeSet]
type = StateTypeSet
trigger1 = statetype != A
Trigger1 = animelem = 5
StateType = A

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelem = 3
attr = A, SA
animtype  = hard
damage    = 41, 5
getpower  = 45, 45
priority  = 5, hit
hitflag = MAFP
guardflag = M
pausetime = 10,9
sparkxy = -15,-25
sparkno = s4002
guard.sparkno = s4012
hitsound = s1, 9
guardsound = s121,0
ground.type = low
ground.slidetime = 25
ground.hittime  = 25
ground.velocity = -1;,-6
guard.velocity = -5
air.hittime = 99
air.velocity = -1,-6
yaccel = .42
ground.cornerpush.veloff = 0
;air.cornerpush.veloff = 0
air.fall = 1
fall.recover = 0
id = 1410
nochainid = 290

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelem = 4
attr = S, SA
animtype  = hard
damage    = 25, 5
getpower  = 45, 45
priority  = 5, hit
hitflag = MAFP
guardflag = M
pausetime = 5,4
sparkxy = -15,-50
sparkno = s4002
guard.sparkno = s4012
hitsound = s1, 9
guardsound = s121,0
ground.type = High
ground.slidetime = 25
ground.hittime  = 25
ground.velocity = -1,-5
guard.velocity = -5
air.hittime = 99
air.velocity = -1,-6.5
yaccel = .42
ground.cornerpush.veloff = 0
;air.cornerpush.veloff = 0
fall = 1
fall.recover = 0
id = 1410
nochainid = 290

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelem = 5
attr = A, SA
animtype  = hard
damage    = 25, 4
getpower  = 45, 45
priority  = 5, hit
hitflag = MAFP
guardflag = M
pausetime = 3,2
sparkxy = -15,-70
sparkno = s4002
guard.sparkno = s4012
hitsound = s1, 9
guardsound = s121,0
ground.type = High
ground.slidetime = 18
ground.hittime  = 20
ground.velocity = -1,-6
guard.velocity = -5
air.hittime = 99
air.velocity = -1,-6.5
yaccel = .45
;ground.cornerpush.veloff = 0
;air.cornerpush.veloff = 0
fall = 1
fall.recover = 0
id = 1410
nochainid = 290

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelemtime(6)=0
trigger2 = animelemtime(6)=3
trigger3 = animelemtime(6)=6
trigger4 = animelemtime(6)=9
;trigger1 = movecontact = 3
;trigger1 = hitcount<7
attr = A, SA
animtype  = up
damage    = 17, 8
getpower  = 15, 15
priority  = 5, hit
hitflag = MAFP
guardflag = M
pausetime = 2,1
sparkxy = -15,-85
sparkno = s4002
guard.sparkno = s4012
hitsound = s1, 9
guardsound = s121,0
ground.type = High
ground.slidetime = 18
ground.hittime  = 20
ground.velocity = -1.5,-8
guard.velocity = -5
air.hittime = 99
air.velocity = -1.5,-8
yaccel = .44
;ground.cornerpush.veloff = 0
;air.cornerpush.veloff = 0
fall = 1
fall.recover = 0
id = 1410
nochainid = 290

[State 1200, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1401

;---------------------------------------------------------------------------
;サイキックテレポート弱
[Statedef 1500]
type    = S
movetype= I
physics = N
juggle  = 0
poweradd= 61
velset = 0,0
anim = 1500
sprpriority = 2
ctrl = 0

;----------------------------------
; どこでもキャンセル
; var(8)
;----------------------------------
;MAXゲージ消費
[State 1000, VarAdd]
type = VarAdd
triggerall = var(8) > 0
triggerall = Time = 0
trigger1 = prevstateno = 205
trigger2 = prevstateno = 210
trigger3 = prevstateno = 240
trigger4 = prevstateno = 440
trigger5 = prevstateno = 250
trigger5 = var(1) = 0
trigger6 = prevstateno = 1211 ;フェニックスアロー強
trigger7 = prevstateno = 1400 ;サイコソード弱
trigger8 = prevstateno = 1410 ;サイコソード強
var(8) = -150
ignorehitpause = 1

[State 1000, PalFx];点滅
type = PalFx
triggerall = var(8) > 0
triggerall = Time < 5
trigger1 = prevstateno = 205
trigger2 = prevstateno = 210
trigger3 = prevstateno = 240
trigger4 = prevstateno = 440
trigger5 = prevstateno = 250
trigger5 = var(1) = 0
trigger6 = prevstateno = 1211 ;フェニックスアロー強
trigger7 = prevstateno = 1400 ;サイコソード弱
trigger8 = prevstateno = 1410 ;サイコソード強
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1
;----------------------------------
[State 1000, 音を鳴らす];てれぽ〜と
type = PlaySnd
trigger1 = AnimElem = 1
value = 1500, 0
channel = 0
volume = 100

[State 1000, 音を鳴らす];効果音
type = PlaySnd
trigger1 = AnimElem = 5
value = 1500, 1

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1420

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1422

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1220

[State 700, HitBy];無敵
type = HitBy
trigger1 = animelemtime(7)>=0
value = SCA, NT, ST, HT  ;投げ以外に無敵

[State 1200, VelSet]
type = VelSet
trigger1 = animelem = 7
x = 13

[state 1500, PlayerPush]
type = PlayerPush
trigger1 = animelemtime(7)>=0
value = 0

;--------------------------------Helper
[State 1000, Helper]
type = helper
trigger1 = NumHelper(1550)=0
trigger1 = animelem = 6
id = 1550
persistent = 0
name = "Dummy"
pos = 0,0
postype = p1
stateno = 1550
helpertype = player
keyctrl = 0
ownpal = 1

[State 1000, Helper];残像
type = Helper
trigger1 = AnimElemTime(7)>=0
trigger1 = GameTime % 2  =0
id = 1553
name = "Zanzou"
sprpriority = 0
pos = 0,0
postype = p1
stateno = 1553
helpertype = normal
keyctrl = 0 
ownpal = 1
;--------------------------------
[State 1200, ChangeState]
type = ChangeState
trigger1 = animelemtime(7)=10
value = 1501

;---------------------------------------------------------------------------
;サイキックテレポート強
[Statedef 1510]
type    = S
movetype= I
physics = N
juggle  = 0
poweradd= 61
velset = 0,0
anim = 1500
sprpriority = 2
ctrl = 0

;----------------------------------
; どこでもキャンセル
; var(8)
;----------------------------------
;MAXゲージ消費
[State 1000, VarAdd]
type = VarAdd
triggerall = var(8) > 0
triggerall = Time = 0
trigger1 = prevstateno = 205
trigger2 = prevstateno = 210
trigger3 = prevstateno = 240
trigger4 = prevstateno = 440
trigger5 = prevstateno = 250
trigger5 = var(1) = 0
trigger6 = prevstateno = 1211 ;フェニックスアロー強
trigger7 = prevstateno = 1400 ;サイコソード弱
trigger8 = prevstateno = 1410 ;サイコソード強
var(8) = -150
ignorehitpause = 1

[State 1000, PalFx];点滅
type = PalFx
triggerall = var(8) > 0
triggerall = Time < 5
trigger1 = prevstateno = 205
trigger2 = prevstateno = 210
trigger3 = prevstateno = 240
trigger4 = prevstateno = 440
trigger5 = prevstateno = 250
trigger5 = var(1) = 0
trigger6 = prevstateno = 1211 ;フェニックスアロー強
trigger7 = prevstateno = 1400 ;サイコソード弱
trigger8 = prevstateno = 1410 ;サイコソード強
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1
;----------------------------------
[State 1000, 音を鳴らす];てれぽ〜と
type = PlaySnd
trigger1 = AnimElem = 1
value = 1500, 0
channel = 0
volume = 100

[State 1000, 音を鳴らす];効果音
type = PlaySnd
trigger1 = AnimElem = 5
value = 1500, 1

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1420

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1422

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1220

[State 700, HitBy];無敵
type = HitBy
trigger1 = animelemtime(7)>=0
value = SCA, NT, ST, HT  ;投げ以外に無敵

[State 1200, VelSet]
type = VelSet
trigger1 = animelem = 7
x = 13

[state 1500, PlayerPush]
type = PlayerPush
trigger1 = animelemtime(7)>=0
value = 0

;--------------------------------Helper
[State 1000, Helper]
type = helper
trigger1 = NumHelper(1550)=0
trigger1 = animelem = 6
id = 1550
persistent = 0
name = "Dummy"
pos = 0,0
postype = p1
stateno = 1550
helpertype = player
keyctrl = 0
ownpal = 1

[State 1000, Helper];残像
type = Helper
trigger1 = AnimElemTime(7)>=0
trigger1 = GameTime % 2 = 0
id = 1553
name = "Zanzou"
sprpriority = 0
pos = 0,0
postype = p1
stateno = 1553
helpertype = normal
keyctrl = 0 
ownpal = 1
;--------------------------------
[State 1200, ChangeState]
type = ChangeState
trigger1 = animelemtime(7)=15
value = 1501

;---------------------------------------------------------------------------
;サイキックテレポート（終了）
[Statedef 1501]
type    = S
movetype= A
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
anim = 1501
ctrl = 0
sprpriority = 2

[state 1200, PosSet]
type = PosSet
trigger1 = time = 0
y = 0

[state 1200, VelSet]
type = VelSet
trigger1 = time = 0
x = 0
y = 0

[State 700, HitBy];無敵
type = NotHitBy
trigger1 = animelem = 1
value = SCA

[State 1200, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;サイキックテレポート・フェイク
[Statedef 1520]
type    = S
movetype= I
physics = N
juggle  = 0
poweradd= 61
velset = 0,0
anim = 1520
sprpriority = 2
ctrl = 0

;----------------------------------
; どこでもキャンセル
; var(8)
;----------------------------------
;MAXゲージ消費
[State 1000, VarAdd]
type = VarAdd
triggerall = var(8) > 0
triggerall = Time = 0
trigger1 = prevstateno = 205
trigger2 = prevstateno = 210
trigger3 = prevstateno = 240
trigger4 = prevstateno = 440
trigger5 = prevstateno = 250
trigger5 = var(1) = 0
trigger6 = prevstateno = 1211 ;フェニックスアロー強
trigger7 = prevstateno = 1400 ;サイコソード弱
trigger8 = prevstateno = 1410 ;サイコソード強
var(8) = -150
ignorehitpause = 1

[State 1000, PalFx];点滅
type = PalFx
triggerall = var(8) > 0
triggerall = Time < 5
trigger1 = prevstateno = 205
trigger2 = prevstateno = 210
trigger3 = prevstateno = 240
trigger4 = prevstateno = 440
trigger5 = prevstateno = 250
trigger5 = var(1) = 0
trigger6 = prevstateno = 1211 ;フェニックスアロー強
trigger7 = prevstateno = 1400 ;サイコソード弱
trigger8 = prevstateno = 1410 ;サイコソード強
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1
;----------------------------------
[State 1000, 音を鳴らす];てれぽ〜と
type = PlaySnd
trigger1 = AnimElem = 1
value = 1500, 0
channel = 0
volume = 100

[State 1000, 音を鳴らす];効果音
type = PlaySnd
trigger1 = AnimElem = 5
value = 1500, 1

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1420

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1422

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1220

;--------------------------------Helper
[State 1000, Helper]
type = helper
trigger1 = NumHelper(1560)=0
trigger1 = animelem = 6
id = 1560
persistent = 0
name = "Dummy"
pos = 0,0
postype = p1
stateno = 1560
helpertype = player
keyctrl = 0
ownpal = 1

;--------------------------------
[State 1200, ChangeState]
type = ChangeState
trigger1 = time>=35
value = 1501

;---------------------------------------------------------------------------
;サイキックテレポート
;(子HELPER)ダミー
[Statedef 1550]
type    = A
movetype= I
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
ctrl = 0
anim = 1550
sprpriority = 2

[state 1550, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 11101, NotHitBy];無敵
type = NotHitBy
trigger1 = Time >= 0
value = SCA

[State 11101, HitOverRide];攻撃を受けてしまった時の保険
Type = HitOverRide
trigger1 = 1
time = -1
attr = SCA, AA, AT, AP    ;通常及び必殺技
slot = 0
stateno = 1552

[state 11000, destroyselef]
type = destroyself
trigger1 = root,movetype = H
trigger2 = root,stateno != [1500,1501]
trigger2 = root,stateno != 1510

[state 11000, changestate]
type = changestate
trigger1 = root,stateno = 1501
trigger1 = root,animelem = 3
value = 1551

;---------------------------------------------------------------------------
;サイキックテレポート
;(子HELPER)ダミー終了
[Statedef 1551]
type    = A
movetype= I
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
ctrl = 0
anim = 1551
sprpriority = 2

[state 1550, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 11101, NotHitBy];無敵
type = NotHitBy
trigger1 = Time >= 0
value = SCA

[State 11101, HitOverRide];攻撃を受けてしまった時の保険
Type = HitOverRide
trigger1 = 1
time = -1
attr = SCA, AA, AT, AP    ;通常及び必殺技
slot = 0
stateno = 1552

[state 11000, destroyselef]
type = destroyself
trigger1 = animtime = 0

;---------------------------------------------------------------------------
;サイキックテレポート
;(子HELPER)保健用ダミー
[Statedef 1552]
type    = A
movetype= H
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
ctrl = 0
anim = 1552
sprpriority = 0

[state 1550, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
flag2 = invisible

[State 11101, NotHitBy];無敵
type = NotHitBy
trigger1 = Time >= 0
value = SCA

[state 11000, destroyselef]
type = destroyself
trigger1 = animtime = 0
trigger2 = time = 0

;---------------------------------------------------------------------------
;サイキックテレポート
;(子HELPER2)残像
[Statedef 1553]
type    = A
movetype= I
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
ctrl = 0
anim = 1553
sprpriority = 2

[state 1550, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 1553, VarSet];透過用変数リセット
type = VarSet
trigger1 = time = 0
var(0) = 0

[state 1553, VarAdd];透過用変数加算
type = VarAdd
trigger1 = 1
var(0) = 30

[state 1553, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 306-(var(0)), (var(0))

[State 11101, NotHitBy];無敵
type = NotHitBy
trigger1 = Time >= 0
value = SCA

[State 11101, HitOverRide];攻撃を受けてしまった時の保険
Type = HitOverRide
trigger1 = 1
time = -1
attr = SCA, AA, AT, AP    ;通常及び必殺技
slot = 0
stateno = 1552

[state 11000, destroyselef]
type = destroyself
trigger1 = root,movetype = H
trigger2 = animtime = 0

;---------------------------------------------------------------------------
;サイキックテレポート・フェイク
;(子HELPER)ダミー
[Statedef 1560]
type    = A
movetype= I
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
ctrl = 0
anim = 1560
sprpriority = 2

[State 700, NotHitBy];無敵
type = NotHitBy
trigger1 = 1
value = SCA

[State 1200, VelSet]
type = VelSet
trigger1 = animelem = 2
x = 13

[State 1200, VelSet]
type = VelSet
trigger1 = animelem = 3
x = 0

[state 1500, PlayerPush];相手を押さない
type = PlayerPush
trigger1 = 1
value = 0

[state 1550, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
;--------------------------------Helper
[State 1000, Helper];残像
type = Helper
trigger1 = AnimElemTime(2)>=0
trigger1 = GameTime % 2 = 1
id = 1562
name = "Zanzou"
sprpriority = -1
pos = 0,0
postype = p1
stateno = 1562
helpertype = normal
keyctrl = 0 
ownpal = 1
;--------------------------------
[State 11101, HitOverRide];攻撃を受けてしまった時の保険
Type = HitOverRide
trigger1 = 1
time = -1
attr = SCA, AA, AT, AP    ;通常及び必殺技
slot = 0
stateno = 1552

[state 11000, destroyselef]
type = destroyself
trigger1 = root,movetype = H

[state 11000, changestate]
type = changestate
trigger1 = animtime = 0
value = 1561

;---------------------------------------------------------------------------
;サイキックテレポート・フェイク
;(HELPER)ダミー終了
[Statedef 1561]
type    = A
movetype= I
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
ctrl = 0
anim = 1551
sprpriority = 2

[state 1550, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 11101, NotHitBy];無敵
type = NotHitBy
trigger1 = Time >= 0
value = SCA

[State 11101, HitOverRide];攻撃を受けてしまった時の保険
Type = HitOverRide
trigger1 = 1
time = -1
attr = SCA, AA, AT, AP    ;通常及び必殺技
slot = 0
stateno = 1552

[state 11000, destroyselef]
type = destroyself
trigger1 = animtime = 0

;---------------------------------------------------------------------------
;サイキックテレポート・フェイク
;(孫HELPER)残像
[Statedef 1562]
type    = A
movetype= I
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
ctrl = 0
anim = 1553
sprpriority = 2

[state 1550, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state 1553, VarSet];透過用変数リセット
type = VarSet
trigger1 = time = 0
var(0) = 0

[state 1553, VarAdd];透過用変数加算
type = VarAdd
trigger1 = 1
var(0) = 30

[state 1553, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 306-(var(0)), (var(0))

[State 11101, NotHitBy];無敵
type = NotHitBy
trigger1 = Time >= 0
value = SCA

[State 11101, HitOverRide];攻撃を受けてしまった時の保険
Type = HitOverRide
trigger1 = 1
time = -1
attr = SCA, AA, AT, AP    ;通常及び必殺技
slot = 0
stateno = 1552

[state 11000, destroyselef]
type = destroyself
trigger1 = root,movetype = H
trigger2 = animtime = 0
trigger3 = parent,stateno = 1561

;===========================================================================
; 超必殺技
;===========================================================================
;---------------------------------------------------------------------------
;シャイニングクリスタルビット弱
[Statedef 3000]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= ifelse(var(8)>0,0,ifelse(var(11),-2000,-1000))  ;MAX発動中なら消費ゼロ
velset = 0,0
anim = 3000
ctrl = 0
sprpriority = 2

;----------------------------------
; どこでもキャンセル
; var(8)
;----------------------------------
;MAXゲージ消費
[State 1000, VarSet]
type = VarSet
triggerall = var(8) > 0
trigger1 = time = 0
var(8) = 0
;----------------------------------
[State 1000, VarSet];強弱判定
type = VarSet
trigger1 = time = 0
var(10) = 0

[State 1000, VarSet];ヒット判定リセット
type = VarSet
trigger1 = time = 0
var(12) = 0

[State 1000, 音を鳴らす];はあああ
type = PlaySnd
trigger1 = animelem = 4
value = 3000, 0
channel = 0
volume = 100

[State 1000, 音を鳴らす];ビット音
type = PlaySnd
trigger1 = animelem = 4
value = 3000, 1
channel = 4
;loop = 1

[state 3000, NotHitBy];無敵
type = NotHitBy
trigger1 = 1
value = SCA

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1420

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1422

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1220
;----------------------------------攻撃ビットHelper
[State 3000, Helper]
type = helper
trigger1 = animelemtime(4)=0
id = 3020
;persistent = 0
name = "Bit_1"
pos = 15,-75
postype = p1
stateno = 3020
helpertype = normal
keyctrl = 0
ownpal = 1

[State 3000, Helper]
type = helper
trigger1 = animelemtime(4)=0
id = 3020
;persistent = 0
name = "Bit_2"
pos = -15,-75
postype = p1
stateno = 3021
helpertype = normal
keyctrl = 0
ownpal = 1

;----------------------------------
[State 3000, SuperPause]
type = SuperPause
trigger1 = time = 1
time = 28
movetime = 28
anim = -1
darken = 0
p2defmul = 1

[State 3000, 超必スパーク]
type = Explod
trigger1 = time = 3
anim = 6000
sprpriority = -9999
postype = p1
pos = 3,-70
bindtime = 1
under = 0
ownpal = 1
supermovetime = 999

[State 3000, 超必スパーク]
type = Explod
trigger1 = Time = 13
anim = 6001
sprpriority = 3
postype = p1
pos = 3,-70
bindtime = 1
under = 0
ownpal = 1
supermovetime = 999

[State 3000, フラッシュ]
type = EnvColor
trigger1 = time = 1
value = 255,255,255
persistent = 0
ignorehitpause = 1
time = 4
under = 2

[State 3000, 暗転]
type = EnvColor
trigger1 = time = 5
value = 0,0,0
persistent = 0
ignorehitpause = 1
time = 24
under = 2

[State 3000, 音を鳴らす];超必音
type = PlaySnd
trigger1 = time = 1
value = 6000, 0
;-------------------------------------
[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 3001

;---------------------------------------------------------------------------
;シャイニングクリスタルビット（ビット展開中）
[Statedef 3001]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
velset = 0,0
anim = 3001
ctrl = 0
sprpriority = 2

[state 3000, NotHitBy];無敵
type = NotHitBy
trigger1 = time<4
value = SCA

[State 1000, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 1000, ステート変更];クリスタルシュート弱
type = ChangeState
triggerall = NumHelper(3020)
triggerall = Helper(3020),stateno != 3022
trigger1 = var(59)=0
trigger1 = command = "弱サイコボール"
trigger2 = var(59)>0
trigger2 = helper(3020),movehit
value = 3050

[State 1000, ステート変更];クリスタルシュート強
type = ChangeState
triggerall = NumHelper(3020)
triggerall = Helper(3020),stateno != 3022
trigger1 = var(59)=0
trigger1 = command = "強サイコボール"
trigger2 = var(59)>0
trigger2 = helper(3020),movehit
value = 3055

[State 1000, ステート変更];終了
type = ChangeState
trigger1 = var(10) = 0 ;弱
trigger1 = Time >= 173
trigger2 = var(10) = 1 ;強
trigger2 = Time >= 200
trigger3 = roundstate!=2
trigger4 = var(59)=0
trigger4 = command = "a" && command = "b" && command = "x" && command = "y" ;強制終了
value = 3002

;---------------------------------------------------------------------------
;シャイニングクリスタルビット（終了）
[Statedef 3002]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
velset = 0,0
anim = ifelse(var(10)=0, 3002, 3011)
ctrl = 0
sprpriority = 2

[State 1000, StopSnd];音停止
type = StopSnd
trigger1 = time = 0
channel = 4

[State 1000, ステート変更]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;シャイニングクリスタルビット強
[Statedef 3010]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= ifelse(var(8)>0,0,ifelse(var(11),-2000,-1000))  ;MAX発動中なら消費ゼロ
velset = 0,0
anim = 3010
ctrl = 0
sprpriority = 2

;----------------------------------
; どこでもキャンセル
; var(8)
;----------------------------------
;MAXゲージ消費
[State 1000, VarSet]
type = VarSet
triggerall = var(8) > 0
trigger1 = time = 0
var(8) = 0
;----------------------------------
[State 1000, VarSet];強弱判定
type = VarSet
trigger1 = time = 0
var(10) = 1

[State 1000, VarSet];ヒット判定リセット
type = VarSet
trigger1 = time = 0
var(12) = 0

[State 1000, 音を鳴らす];はあああ
type = PlaySnd
trigger1 = animelem = 4
value = 3000, 0
channel = 0
volume = 100

[State 1000, 音を鳴らす];ビット音
type = PlaySnd
trigger1 = animelem = 4
value = 3000, 1
channel = 4
;loop = 1

[state 3000, NotHitBy];無敵
type = NotHitBy
trigger1 = 1
value = SCA

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1420

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1422

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1220
;----------------------------------攻撃ビットHelper
[State 3000, Helper]
type = helper
trigger1 = animelemtime(4)=0
id = 3020
;persistent = 0
name = "Bit_1"
pos = 15,-75
postype = p1
stateno = 3020
helpertype = normal
keyctrl = 0
ownpal = 1

[State 3000, Helper]
type = helper
trigger1 = animelemtime(4)=0
id = 3020
;persistent = 0
name = "Bit_2"
pos = -15,-75
postype = p1
stateno = 3021
helpertype = normal
keyctrl = 0
ownpal = 1

;----------------------------------
[State 3000, SuperPause]
type = SuperPause
trigger1 = time = 1
time = 28
movetime = 28
anim = -1
darken = 0
p2defmul = 1

[State 3000, 超必スパーク]
type = Explod
trigger1 = time = 3
anim = 6000
sprpriority = -9999
postype = p1
pos = 3,-70
bindtime = 1
under = 0
ownpal = 1
supermovetime = 999

[State 3000, 超必スパーク]
type = Explod
trigger1 = Time = 13
anim = 6001
sprpriority = 3
postype = p1
pos = 3,-70
bindtime = 1
under = 0
ownpal = 1
supermovetime = 999

[State 3000, フラッシュ]
type = EnvColor
trigger1 = time = 1
value = 255,255,255
persistent = 0
ignorehitpause = 1
time = 4
under = 2

[State 3000, 暗転]
type = EnvColor
trigger1 = time = 5
value = 0,0,0
persistent = 0
ignorehitpause = 1
time = 24
under = 2

[State 3000, 音を鳴らす];超必音
type = PlaySnd
trigger1 = time = 1
value = 6000, 0
;-------------------------------------
[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 3001

;---------------------------------------------------------------------------
;シャイニングクリスタルビット
;(子HELPER)ビット1
[Statedef 3020]
type    = A
movetype= A
physics = N
juggle  = 8
poweradd= 0
velset = 0,0
ctrl = 0
anim = 3020
sprpriority = 3

[state 11000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 20001, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

;--------------------------------
[state 3020, VarSet];周回軌道用変数リセット
type = VarSet
trigger1 = time = 0
fvar(0) = 0

[state 3020, VarAdd];周回軌道用変数加算
type = varadd
trigger1 = 1
fvar(0) = 0.2

[state 3020, BindToRoot];周回軌道
type = BindToRoot
trigger1 = 1
pos = (50 * sin(fvar(0))), (65 * sin(fvar(0))-70)

;--------------------------------
[state 3020, VarSet];表示優順位変更用変数リセット
type = VarSet
trigger1 = time = 0
var(1) = 3

[state 3020, VarSet];表示優順位変更用
type = VarSet
trigger1 = animelemtime(6)=0
var(1) = 3*ifelse(var(1)>=0,-1,1)

;--------------------------------
[state 3020, ParentVarSet];多段ヒット防止用
type = ParentVarSet
trigger1 = movehit = 1
var(12) = 1

[state 3020, ParentVarSet];リセット
type = ParentVarSet
trigger1 = enemynear,movetype!=H
var(12) = 0
;--------------------------------
[state 3020, VarSet];親の前方
type = VarSet
trigger1 = parentdist x<0
var(2) = 1

[state 3020, VarSet];親の後方
type = VarSet
trigger1 = parentdist x>0
var(2) = -1

[state 3020, VarSet];敵が前方
type = VarSet
trigger1 = p2dist x>0
var(3) = 1

[state 3020, VarSet];敵が後方
type = VarSet
trigger1 = p2dist x<0
var(3) = -1
;--------------------------------
[state 3020, SprPriority];手前表示
type = SprPriority
trigger1 = 1
value = var(1)

;-------------------------------------
;[State -2, デバック(変数確認)]
;Type = DisplayToClipBoard
;Trigger1 = 1
;Text = "Px=%.2f,ParentDistX=%.2f, P2X=%.2f, var(2)=%2d, var(3)=%2d\n"
;Params = Pos x,ParentDist X,p2dist x,var(2),var(3)
;IgnoreHitPause = 1
;-------------------------------------

;--------------------------------飛び道具相殺用Helper
[State 1000, Helper]
type = helper
trigger1 = time = 0
id = 3030
;persistent = 0
name = "Sousai_1"
pos = 0,0
postype = p1
stateno = 3030
helpertype = normal
keyctrl = 0
ownpal = 1

;--------------------------------
[State 1000, ヒット定義]
type = HitDef
triggerall = Root,var(12) = 0
trigger1 = time = 0
;trigger2 = moveguarded = 20
trigger2 = time > 0
trigger2 = time % 6 = 0
attr = A, HP
animtype  = diagup
damage    = floor(198*root,fvar(3)), 6
getpower  = 0, 0
priority  = 5, hit
hitflag = MAFP
guardflag = MA
sprpriority = var(1)
pausetime = 0,2
guard.pausetime = 0,5
sparkxy = -15,-25
sparkno = s4002
guard.sparkno = s4012
hitsound   = s1,23
guardsound = s121,0
ground.type = high
ground.slidetime = 18
ground.hittime  = 20
ground.velocity = -7*var(2)*var(3),-9
air.velocity = -7*var(2)*var(3),-9
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .4
fall = 1
fall.recover = 0
id = 3020
nochainid = 3020
palfx.time = 46                 ;持続時間
palfx.mul = 230,230,250         ;乗算
palfx.sinadd = 255,255,255,5
palfx.add = 16,16,16            ;加算
palfx.color = 1                 ;彩度
palfx.invertall = 1             ;反転

[State 1000, ヒット定義]
type = HitDef
trigger1 = Root,var(12) = 1
attr = A, HP
animtype  = diagup
damage    = 0, 0
getpower  = 0, 0
priority  = 5, hit
hitflag = P
guardflag = MA
sprpriority = var(1)
pausetime = 0,0
guard.pausetime = 0,0
sparkxy = -15,-25
sparkno = -1
guard.sparkno = -1
hitsound   = -1     ;音鳴らない
guardsound = -1     ;音鳴らない
ground.type = high
ground.slidetime = 0
ground.hittime  = 0
ground.velocity = 0,0
air.velocity = 0,0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .4
fall = 1
fall.recover = 0

;--------------------------------
[state 3020, ChangeState];消滅ステート
type = ChangeState
trigger1 = root,var(10)=0
trigger1 = time = 156
trigger2 = root,var(10)=1
trigger2 = time = 186
trigger3 = root,movetype = H
trigger4 = root,stateno = 3002
value = 3022

[state 3020, ChangeState];クリスタルシュート派生ステート
type = ChangeState
trigger1 = root,stateno = 3050
trigger2 = root,stateno = 3055
value = 3023

;---------------------------------------------------------------------------
;シャイニングクリスタルビット
;(子HELPER)ビット2
[Statedef 3021]
type    = A
movetype= A
physics = N
juggle  = 8
poweradd= 0
velset = 0,0
ctrl = 0
anim = 3020
sprpriority = 3

[state 11000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 20001, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

;--------------------------------
[state 3020, VarSet];周回軌道用変数リセット
type = VarSet
trigger1 = time = 0
fvar(0) = 0

[state 3020, VarAdd];周回軌道用変数加算
type = varadd
trigger1 = 1
fvar(0) = 0.2

[state 3020, BindToRoot];周回軌道
type = BindToRoot
trigger1 = 1
pos = (-50 * sin(fvar(0))), (65 * sin(fvar(0))-70)

;--------------------------------
[state 3020, VarSet];表示優順位変更用変数リセット
type = VarSet
trigger1 = time = 0
var(1) = -3

[state 3020, VarSet];表示優順位変更用
type = VarSet
trigger1 = animelemtime(6)=0
var(1) = -3*ifelse(var(1)<=0,-1,1)

;--------------------------------
[state 3020, ParentVarSet];多段ヒット防止用
type = ParentVarSet
trigger1 = movehit = 1
var(12) = 1

[state 3020, ParentVarSet];リセット
type = ParentVarSet
trigger1 = enemynear,movetype!=H
var(12) = 0
;--------------------------------
[state 3020, VarSet];親の前方
type = VarSet
trigger1 = parentdist x<0
var(2) = 1

[state 3020, VarSet];親の後方
type = VarSet
trigger1 = parentdist x>0
var(2) = -1

[state 3020, VarSet];敵が前方
type = VarSet
trigger1 = p2dist x>0
var(3) = 1

[state 3020, VarSet];敵が後方
type = VarSet
trigger1 = p2dist x<0
var(3) = -1
;--------------------------------
[state 3020, SprPriority];手前表示
type = SprPriority
trigger1 = 1
value = var(1)

;-------------------------------------
;[State -2, デバック(変数確認)]
;Type = DisplayToClipBoard
;Trigger1 = 1
;Text = "ParentDistX=%.2f, var(2)=%d, var(3)=%d, var(4)=%d\n"
;Params = ParentDist X,var(2),var(3),var(4)
;IgnoreHitPause = 1
;-------------------------------------

;--------------------------------飛び道具相殺用Helper
[State 1000, Helper]
type = helper
trigger1 = time = 0
id = 3030
;persistent = 0
name = "Sousai_2"
pos = 0,0
postype = p1
stateno = 3030
helpertype = normal
keyctrl = 0
ownpal = 1

;--------------------------------
[State 1000, ヒット定義]
type = HitDef
triggerall = Root,var(12) = 0
;triggerall = time = 0 || time % 6 = 0
;trigger1 = var(2) = 1
;trigger1 = var(4):=0
;trigger2 = var(2) = -1
;trigger2 = var(4):=1
trigger1 = time = 0
;trigger2 = moveguarded = 20
trigger2 = time > 0
trigger2 = time % 6 = 0
attr = A, HP
animtype  = diagup
damage    = floor(198*root,fvar(3)), 6
getpower  = 0, 0
priority  = 5, hit
hitflag = MAFP
guardflag = MA
sprpriority = var(1)
pausetime = 0,2
guard.pausetime = 0,5
sparkxy = -15,-25
sparkno = s4002
guard.sparkno = s4012
hitsound   = s1,23
guardsound = s121,0
ground.type = high
ground.slidetime = 18
ground.hittime  = 20
ground.velocity = 7*var(2)*var(3),-9
air.velocity = 7*var(2)*var(3),-9
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .4
fall = 1
fall.recover = 0
id = 3020
nochainid = 3020
palfx.time = 46                 ;持続時間
palfx.mul = 230,230,250         ;乗算
palfx.sinadd = 255,255,255,5
palfx.add = 16,16,16            ;加算
palfx.color = 1                 ;彩度
palfx.invertall = 1             ;反転

[State 1000, ヒット定義]
type = HitDef
trigger1 = Root,var(12) = 1
attr = A, HP
animtype  = diagup
damage    = 0, 0
getpower  = 0, 0
priority  = 5, hit
hitflag = P
guardflag = MA
sprpriority = var(1)
pausetime = 0,0
guard.pausetime = 0,0
sparkxy = -15,-25
sparkno = -1
guard.sparkno = -1
hitsound   = -1;音鳴らない
guardsound = -1;音鳴らない
ground.type = high
ground.slidetime = 0
ground.hittime  = 0
ground.velocity = 0,0
air.velocity = 0,0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .4
fall = 1
fall.recover = 0

;--------------------------------
[state 3020, ChangeState];消滅ステート
type = ChangeState
trigger1 = root,var(10)=0
trigger1 = time = 156
trigger2 = root,var(10)=1
trigger2 = time = 186
trigger3 = root,movetype = H
trigger4 = root,stateno = 3002
value = 3022

[state 3020, ChangeState];クリスタルシュート派生ステート
type = ChangeState
trigger1 = root,stateno = 3050
trigger2 = root,stateno = 3055
value = 3023

;---------------------------------------------------------------------------
;シャイニングクリスタルビット
;(子HELPER)ビット消滅
[Statedef 3022]
type    = A
movetype= A
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
ctrl = 0
anim = 3022
sprpriority = 3

[state 11000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 20001, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

;--------------------------------
[state 3020, VarSet];縮小用変数リセット
type = VarSet
trigger1 = time = 0
fvar(2) = 0

[state 3020, VarAdd]
type = VarAdd
trigger1 = time >= 10
fvar(2) = 0.04
;--------------------------------
[state 3020, VarSet];回転角度用変数リセット
type = VarSet
trigger1 = time = 0
var(0) = 0

[state 3020, VarAdd];回転角度
type = varadd
trigger1 = time>=0
var(0) = 6

[State 1500, 2];360度を超えたらリセット
type = VarSet
trigger1 = var(0) >= 360
var(0) = var(0) - 360

[state 3020, VarSet];倍数用変数リセット
type = VarSet
trigger1 = time = 0
fvar(0) = 0

[state 3020, VarAdd];倍数加算
type = varadd
trigger1 = time<5
fvar(0) = .5

[state 3020, VarAdd];倍数加算
type = varadd
trigger1 = time>=5
fvar(0) = 2.5

;--------------------------------
[state 3020, BindToRoot];位置決定
type = BindToRoot
trigger1 = PrevStateNo = 3020 || PrevStateNo = 3120 || PrevStateNo = 3320
trigger1 = Time>=0
pos = (-1*cos(var(0))*(-1+fvar(0))),(-70+sin(var(0))*(1+fvar(0)))

[state 3020, BindToRoot];位置決定
type = BindToRoot
trigger1 = PrevStateNo = 3021 || PrevStateNo = 3121 || PrevStateNo = 3321
trigger1 = Time>=0
pos = (-1*cos(var(0))*(-1-fvar(0))),(-70-sin(var(0))*(1+fvar(0)))

[state 3020, AngleDraw];画像縮小
type = AngleDraw
trigger1 = 1
scale = 1-fvar(2),1-fvar(2)

[state 3020, DestroySelf];消滅
type = DestroySelf
trigger1 = animtime=0

;---------------------------------------------------------------------------
;シャイニングクリスタルビット
;(子HELPER)クリスタルシュート移行
[Statedef 3023]
type    = A
movetype= A
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
ctrl = 0
anim = 3022
sprpriority = var(1)

[state 11000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 20001, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[state 3023, VelSet]
type = VelSet
trigger1 = 1
x = 8*((parentdist x -19)/(abs(parentdist x -19) + abs(parentdist y - 130) + 0.0000001))
y = 8*((parentdist y - 130)/(abs(parentdist x -19) + abs(parentdist y - 130) + 0.0000001))

[state 3023, DestroySelf]
type = DestroySelf
trigger1 = parentdist x >= 12 && parentdist x <= 26
trigger1 = parentdist y >= 123 && parentdist y <= 137
trigger2 = root,movetype = H

;---------------------------------------------------------------------------
;シャイニングクリスタルビット
;(孫HELPER)飛び道具相殺用
[Statedef 3030]
type    = A
movetype= A
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
ctrl = 0
anim = 3030
sprpriority = 0

[state 3020, BindToParent];位置決定
type = BindToParent
trigger1 = numhelper(3020)
pos = 0,0

[State 11101, NotHitBy];無敵
type = NotHitBy
trigger1 = Time >= 0
value = SCA

[State 11101, HitBy];飛び道具のみ接触許可
type = HitBy
trigger1 = Time >= 0
value = SCA, NP, SP, HP, AP

[State 11101, HitOverRide];飛び道具を受けた際の演出
Type = HitOverRide
trigger1 = 1
time = -1
attr = SCA, NP, SP ,HP
slot = 0
stateno = 3030

[State 1000, 0]
Type = AssertSpecial
Trigger1 = 1
Flag = NoShadow
Flag2 = Invisible

[state 11000, DestroySelf]
type = DestroySelf
trigger1 = root,stateno = 3002
trigger2 = root,stateno = 3050
trigger3 = root,movetype = H
trigger4 = NumHelper(3020) = 0
trigger5 = NumHelper(3020)
trigger5 = Helper(3020),stateno = 3022 || Helper(3020),stateno = 3023

;---------------------------------------------------------------------------
;クリスタルシュート弱（発動）
[Statedef 3050]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
velset = 0,0
anim = 3050
ctrl = 0
sprpriority = 2

[State 1000, StopSnd];音停止
type = StopSnd
trigger1 = time = 0
channel = 4

[state 3060, VarSet];強弱判定
type = VarSet
trigger1 = time = 0 
var(9) = 0
;----------------------------------攻撃ビットHelper
[State 3000, Helper]
type = helper
;trigger1 = NumHelper(3020) = 0
;trigger1 = NumHelper(3070) = 0
trigger1 = animelem = 4
id = 3070
persistent = 0
name = "Bit_Crystal"
pos = -13,-137
postype = p1
stateno = 3070
helpertype = normal
keyctrl = 0
ownpal = 1

;----------------------------------
[State 3000, SuperPause]
type = SuperPause
trigger1 = time = 1
time = 28
movetime = 28
anim = -1
darken = 0
p2defmul = 1

[State 3000, 超必スパーク]
type = Explod
trigger1 = time = 3
anim = 6000
sprpriority = -9999
postype = p1
pos = -14,-129
bindtime = 1
under = 0
ownpal = 1
supermovetime = 999

[State 3000, 超必スパーク]
type = Explod
trigger1 = Time = 13
anim = 6001
sprpriority = 3
postype = p1
pos = -14,-129
bindtime = 1
under = 0
ownpal = 1
supermovetime = 999

[State 3000, フラッシュ]
type = EnvColor
trigger1 = time = 1
value = 255,255,255
persistent = 0
ignorehitpause = 1
time = 4
under = 2

[State 3000, 暗転]
type = EnvColor
trigger1 = time = 5
value = 0,0,0
persistent = 0
ignorehitpause = 1
time = 24
under = 2

[State 3000, 音を鳴らす];超必音
type = PlaySnd
trigger1 = time = 1
value = 6000, 0
;-------------------------------------
[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 3051

;---------------------------------------------------------------------------
;クリスタルシュート（待機）
[Statedef 3051]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
velset = 0,0
anim = 3051
ctrl = 0
sprpriority = 2

[State 3051, ChangeState]
type = ChangeState
triggerall = var(9)=0 ;クリスタルシュート弱
trigger1 = var(59)=0
trigger1 = command != "CSホールド"
trigger2 = time >= 170
trigger3 = var(59)>0
trigger4 = roundstate!=2
value = 3060

[State 3051, ChangeState]
type = ChangeState
triggerall = var(9)=1 ;クリスタルシュート強
trigger1 = var(59)=0
trigger1 = command != "CSホールド"
trigger2 = time >= 170
trigger3 = var(59)>0
trigger4 = roundstate!=2
value = 3065

;---------------------------------------------------------------------------
;クリスタルシュート強（発動）
[Statedef 3055]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
velset = 0,0
anim = 3050
ctrl = 0
sprpriority = 2

[State 1000, StopSnd];音停止
type = StopSnd
trigger1 = time = 0
channel = 4

[state 3060, VarSet];強弱判定
type = VarSet
trigger1 = time = 0 
var(9) = 1
;----------------------------------攻撃ビットHelper
[State 3000, Helper]
type = helper
;trigger1 = NumHelper(3020) = 0
;trigger1 = NumHelper(3070) = 0
trigger1 = animelem = 4
id = 3070
persistent = 0
name = "Bit_Crystal"
pos = -13,-137
postype = p1
stateno = 3070
helpertype = normal
keyctrl = 0
ownpal = 1

;----------------------------------
[State 3000, SuperPause]
type = SuperPause
trigger1 = time = 1
time = 28
movetime = 28
anim = -1
darken = 0
p2defmul = 1

[State 3000, 超必スパーク]
type = Explod
trigger1 = time = 3
anim = 6000
sprpriority = -9999
postype = p1
pos = -14,-129
bindtime = 1
under = 0
ownpal = 1
supermovetime = 999

[State 3000, 超必スパーク]
type = Explod
trigger1 = Time = 13
anim = 6001
sprpriority = 3
postype = p1
pos = -14,-129
bindtime = 1
under = 0
ownpal = 1
supermovetime = 999

[State 3000, フラッシュ]
type = EnvColor
trigger1 = time = 1
value = 255,255,255
persistent = 0
ignorehitpause = 1
time = 4
under = 2

[State 3000, 暗転]
type = EnvColor
trigger1 = time = 5
value = 0,0,0
persistent = 0
ignorehitpause = 1
time = 24
under = 2

[State 3000, 音を鳴らす];超必音
type = PlaySnd
trigger1 = time = 1
value = 6000, 0
;-------------------------------------
[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 3051

;---------------------------------------------------------------------------
;クリスタルシュート弱（発射）
[Statedef 3060]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
velset = 0,0
anim = 3060
ctrl = 0
sprpriority = 2

[State 1000, 音を鳴らす];いっけ〜
type = PlaySnd
trigger1 = time = 0
value = 3100, 0
channel = 0
volume = 100

[State 1000, 音を鳴らす];ビット音
type = PlaySnd
trigger1 = animelem = 2
value = 3100, 1

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
Ctrl = 1

;---------------------------------------------------------------------------
;クリスタルシュート強（発射）
[Statedef 3065]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
velset = 0,0
anim = 3065
ctrl = 0
sprpriority = 2

[State 1000, 音を鳴らす];いっけ〜
type = PlaySnd
trigger1 = time = 0
value = 3100, 0
channel = 0
volume = 100

[State 1000, 音を鳴らす];ビット音
type = PlaySnd
trigger1 = animelem = 2
value = 3100, 1

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
Ctrl = 1

;---------------------------------------------------------------------------
;クリスタルシュート
;(子HELPER)ビット
[Statedef 3070]
type    = A
movetype= A
physics = N
juggle  = 8
poweradd= 0
velset = 0,0
ctrl = 0
anim = 3070
sprpriority = 3

[state 11000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 20001, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 20001, AssertSpecial]
type = AssertSpecial
trigger1 = Numhelper(3020)>0
flag = Invisible

[state 3070, BindToRoot];本体が発射するまでは維持
type = BindToRoot
trigger1 = root,stateno = 3050 || root,stateno = 3051 || root,stateno = 3055 || root,stateno = 3150 || root,stateno = 3151
pos = -13,-137

[state 3070, VelSet];弱初速度
type = VelSet
trigger1 = root,var(9) = 0
trigger1 = root,stateno = 3060 || root,stateno = 3065
x = 8
y = 7.5
persistent = 0

[state 3070, VelAdd];弱Y軸加速度
type = VelAdd
trigger1 = root,var(9) = 0
trigger1 = root,stateno != 3050 && root,stateno != 3051 && root,stateno != 3055
trigger1 = pos y < -65
y = -0.3

[state 3070, VelSet];弱Y軸加速停止
type = VelSet
trigger1 = root,var(9) = 0
trigger1 = pos y >= -65
y = 0

[state 3070, VelSet];強初速度
type = VelSet
trigger1 = root,var(9) = 1
trigger1 = root,stateno = 3060 || root,stateno = 3065
x = 7.5
y = 6.5
persistent = 0

[state 3070, VelAdd];強Y軸加速度
type = VelAdd
trigger1 = root,var(9) = 1
trigger1 = root,stateno != 3050 && root,stateno != 3051 && root,stateno != 3055
y = -0.4

[state 3070, VelSet];空中版初速度
type = VelSet
trigger1 = root,var(9) = 2
trigger1 = root,stateno = 3160
x = 8
y = 10.5
persistent = 0

[state 3070, VelAdd];空中版Y軸加速度
type = VelAdd
trigger1 = root,var(9) = 2
trigger1 = root,stateno != 3050 && root,stateno != 3051 && root,stateno != 3055 && root,stateno != 3150 && root,stateno != 3151
y = -0.4

;--------------------------------飛び道具相殺用Helper
[State 1000, Helper]
type = helper
trigger1 = time = 0
id = 3080
;persistent = 0
name = "Sousai_Crystal"
pos = 0,0
postype = p1
stateno = 3080
helpertype = normal
keyctrl = 0
ownpal = 1

;--------------------------------
[State 1000, ヒット定義]
type = HitDef
trigger1 = root,stateno = 3060 || root,stateno = 3065 || root,stateno = 3160;本体発射体勢
attr = A, HP
animtype  = diagup
damage    = floor(165*root,fvar(4)), 10
getpower  = 0, 0
priority  = 5, hit
hitflag = MAFP
guardflag = MA
sprpriority = 2
pausetime = 0,7
guard.pausetime = 0,7
sparkxy = -15,-25
sparkno = s4002
guard.sparkno = s4012
hitsound   = s1,23
guardsound = s121,0
ground.type = high
ground.slidetime = 18
ground.hittime  = 22
ground.velocity = -7,-6.5
air.velocity = -7,-6.5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .45
fall = 1
fall.recover = 0
id = 3070
palfx.time = 46                 ;持続時間
palfx.mul = 230,230,250         ;乗算
palfx.sinadd = 255,255,255,5
palfx.add = 16,16,16            ;加算
palfx.color = 1                 ;彩度
palfx.invertall = 1             ;反転

;--------------------------------
[state 3020, ChangeState];消滅ステート
type = ChangeState
trigger1 = movecontact
trigger2 = frontedgebodydist < -50
trigger3 = pos y < -300
trigger4 = pos y > 300
value = 3071

;---------------------------------------------------------------------------
;クリスタルシュート
;(孫HELPER)消滅
[Statedef 3071]
type    = A
movetype= A
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
ctrl = 0
anim = 1051 ;サイコボール流用
sprpriority = 2

[State 11101, NotHitBy];無敵
type = NotHitBy
trigger1 = 1
value = SCA

[State 11101, PosAdd]
type = PosAdd
trigger1 = time = 0
x = 20

[state 11000, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0

;---------------------------------------------------------------------------
;クリスタルシュート
;(孫HELPER)飛び道具相殺用
[Statedef 3080]
type    = A
movetype= A
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
ctrl = 0
anim = 3030 ;SCB流用
sprpriority = 0

[state 3020, BindToParent];位置決定
type = BindToParent
trigger1 = numhelper(3070)
pos = 0,0

[State 11101, NotHitBy];無敵
type = NotHitBy
trigger1 = Time >= 0
value = SCA

[State 11101, HitBy];飛び道具のみ接触許可
type = HitBy
trigger1 = Time >= 0
value = SCA, NP, SP, HP, AP

[State 11101, HitOverRide];飛び道具を受けた際の演出
Type = HitOverRide
trigger1 = 1
time = -1
attr = SCA, NP, SP ,HP
slot = 0
stateno = 3030

[State 1000, 0]
Type = AssertSpecial
Trigger1 = 1
Flag = NoShadow
Flag2 = Invisible

[state 11000, DestroySelf]
type = DestroySelf
trigger1 = NumHelper(3070) = 0
trigger2 = NumHelper(3070)
trigger2 = Helper(3070),stateno = 3071

;---------------------------------------------------------------------------
;空中シャイニングクリスタルビット弱
[Statedef 3100]
type    = A
movetype= A
physics = N
juggle  = 0
poweradd= ifelse(var(8)>0,0,ifelse(var(11),-2000,-1000))  ;MAX発動中なら消費ゼロ
velset = 0,0
anim = 3100
ctrl = 0
sprpriority = 2

;----------------------------------
; どこでもキャンセル
; var(8)
;----------------------------------
;MAXゲージ消費
[State 1000, VarSet]
type = VarSet
triggerall = var(8) > 0
trigger1 = time = 0
var(8) = 0
;----------------------------------
[State 1000, VarSet];強弱判定
type = VarSet
trigger1 = time = 0
var(10) = 0

[State 1000, VarSet];ヒット判定リセット
type = VarSet
trigger1 = time = 0
var(12) = 0

[State 1000, 音を鳴らす];はあああ
type = PlaySnd
trigger1 = animelem = 4
value = 3000, 0
channel = 0
volume = 100

[State 1000, 音を鳴らす];ビット音
type = PlaySnd
trigger1 = animelem = 4
value = 3000, 1
channel = 4
;loop = 1

[state 3000, NotHitBy];無敵
type = NotHitBy
trigger1 = 1
value = SCA

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1420

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1422

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1220
;----------------------------------攻撃ビットHelper
[State 3000, Helper]
type = helper
trigger1 = animelemtime(4)=0
id = 3020
;persistent = 0
name = "Bit_1"
pos = 15,-75
postype = p1
stateno = 3120
helpertype = normal
keyctrl = 0
ownpal = 1

[State 3000, Helper]
type = helper
trigger1 = animelemtime(4)=0
id = 3020
;persistent = 0
name = "Bit_2"
pos = -15,-75
postype = p1
stateno = 3121
helpertype = normal
keyctrl = 0
ownpal = 1

;----------------------------------
[State 3000, SuperPause]
type = SuperPause
trigger1 = time = 1
time = 28
movetime = 28
anim = -1
darken = 0
p2defmul = 1

[State 3000, 超必スパーク]
type = Explod
trigger1 = time = 3
anim = 6000
sprpriority = -9999
postype = p1
pos = 0,-73
bindtime = 1
under = 0
ownpal = 1
supermovetime = 999

[State 3000, 超必スパーク]
type = Explod
trigger1 = Time = 13
anim = 6001
sprpriority = 3
postype = p1
pos = 0,-73
bindtime = 1
under = 0
ownpal = 1
supermovetime = 999

[State 3000, フラッシュ]
type = EnvColor
trigger1 = time = 1
value = 255,255,255
persistent = 0
ignorehitpause = 1
time = 4
under = 2

[State 3000, 暗転]
type = EnvColor
trigger1 = time = 5
value = 0,0,0
persistent = 0
ignorehitpause = 1
time = 24
under = 2

[State 3000, 音を鳴らす];超必音
type = PlaySnd
trigger1 = time = 1
value = 6000, 0
;-------------------------------------
[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 3101

;---------------------------------------------------------------------------
;空中シャイニングクリスタルビット（ビット展開中）
[Statedef 3101]
type    = A
movetype= A
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
anim = 3101
ctrl = 0
sprpriority = 2

[state 3000, NotHitBy];無敵
type = NotHitBy
trigger1 = time<4
value = SCA

[State 1000, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 1000, ステート変更];空中クリスタルシュート
type = ChangeState
triggerall = NumHelper(3020)
triggerall = Helper(3020),stateno != 3022
trigger1 = var(59)=0
trigger1 = command = "弱サイコボール" || command = "強サイコボール"
trigger2 = var(59)>0
trigger2 = helper(3020),movehit
value = 3150

[State 1000, ステート変更];終了
type = ChangeState
trigger1 = var(10) = 0 ;弱
trigger1 = Time >= 184
trigger2 = var(10) = 1 ;強
trigger2 = Time >= 212
trigger3 = roundstate!=2
trigger4 = var(59)=0
trigger4 = command = "a" && command = "b" && command = "x" && command = "y" ;強制終了
value = 3102

;---------------------------------------------------------------------------
;空中シャイニングクリスタルビット（終了）
[Statedef 3102]
type    = A
movetype= A
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
anim = 3102
ctrl = 0
sprpriority = 2

[State 1000, StopSnd];音停止
type = StopSnd
trigger1 = time = 0
channel = 4

[State 1000, VelAdd]
type = VelAdd
trigger1 = animelemtime(5)>=0
y = .42

[State 1000, ステート変更]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel y > 0
value = 3103

;---------------------------------------------------------------------------
;空中シャイニングクリスタルビット（着地）
[Statedef 3103]
type    = S
movetype= A
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
anim = 3103
ctrl = 0
sprpriority = 2

[State 1000, ステート変更]
type = ChangeState
trigger1 = animtime = 0
value = 0
Ctrl = 1

;---------------------------------------------------------------------------
;空中シャイニングクリスタルビット強
[Statedef 3110]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= ifelse(var(8)>0,0,ifelse(var(11),-2000,-1000))  ;MAX発動中なら消費ゼロ
velset = 0,0
anim = 3110
ctrl = 0
sprpriority = 2

;----------------------------------
; どこでもキャンセル
; var(8)
;----------------------------------
;MAXゲージ消費
[State 1000, VarSet]
type = VarSet
triggerall = var(8) > 0
trigger1 = time = 0
var(8) = 0
;----------------------------------
[State 1000, VarSet];強弱判定
type = VarSet
trigger1 = time = 0
var(10) = 1

[State 1000, VarSet];ヒット判定リセット
type = VarSet
trigger1 = time = 0
var(12) = 0

[State 1000, 音を鳴らす];はあああ
type = PlaySnd
trigger1 = animelem = 4
value = 3000, 0
channel = 0
volume = 100

[State 1000, 音を鳴らす];ビット音
type = PlaySnd
trigger1 = animelem = 4
value = 3000, 1
channel = 4
;loop = 1

[state 3000, NotHitBy];無敵
type = NotHitBy
trigger1 = 1
value = SCA

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1420

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1422

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1220
;----------------------------------攻撃ビットHelper
[State 3000, Helper]
type = helper
trigger1 = animelemtime(4)=0
id = 3020
;persistent = 0
name = "Bit_1"
pos = 15,-75
postype = p1
stateno = 3120
helpertype = normal
keyctrl = 0
ownpal = 1

[State 3000, Helper]
type = helper
trigger1 = animelemtime(4)=0
id = 3020
;persistent = 0
name = "Bit_2"
pos = -15,-75
postype = p1
stateno = 3121
helpertype = normal
keyctrl = 0
ownpal = 1

;----------------------------------
[State 3000, SuperPause]
type = SuperPause
trigger1 = time = 1
time = 28
movetime = 28
anim = -1
darken = 0
p2defmul = 1

[State 3000, 超必スパーク]
type = Explod
trigger1 = time = 3
anim = 6000
sprpriority = -9999
postype = p1
pos = 0,-73
bindtime = 1
under = 0
ownpal = 1
supermovetime = 999

[State 3000, 超必スパーク]
type = Explod
trigger1 = Time = 13
anim = 6001
sprpriority = 3
postype = p1
pos = 0,-73
bindtime = 1
under = 0
ownpal = 1
supermovetime = 999

[State 3000, フラッシュ]
type = EnvColor
trigger1 = time = 1
value = 255,255,255
persistent = 0
ignorehitpause = 1
time = 4
under = 2

[State 3000, 暗転]
type = EnvColor
trigger1 = time = 5
value = 0,0,0
persistent = 0
ignorehitpause = 1
time = 24
under = 2

[State 3000, 音を鳴らす];超必音
type = PlaySnd
trigger1 = time = 1
value = 6000, 0
;-------------------------------------
[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 3101

;---------------------------------------------------------------------------
;空中シャイニングクリスタルビット
;(子HELPER)ビット1
[Statedef 3120]
type    = A
movetype= A
physics = N
juggle  = 8
poweradd= 0
velset = 0,0
ctrl = 0
anim = 3020
sprpriority = 3

[state 11000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 20001, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

;--------------------------------
[state 3020, VarSet];周回軌道用変数リセット
type = VarSet
trigger1 = time = 0
fvar(0) = 0

[state 3020, VarAdd];周回軌道用変数加算
type = varadd
trigger1 = 1
fvar(0) = 0.2

[state 3020, BindToRoot];周回軌道
type = BindToRoot
trigger1 = 1
pos = (50 * sin(fvar(0))), (65 * sin(fvar(0))-70)

;--------------------------------
[state 3020, VarSet];表示優順位変更用変数リセット
type = VarSet
trigger1 = time = 0
var(1) = 3

[state 3020, VarSet];表示優順位変更用
type = VarSet
trigger1 = animelemtime(6)=0
var(1) = 3*ifelse(var(1)>=0,-1,1)

;--------------------------------
[state 3020, ParentVarSet];多段ヒット防止用
type = ParentVarSet
trigger1 = movehit = 1
var(12) = 1

[state 3020, ParentVarSet];リセット
type = ParentVarSet
trigger1 = enemynear,movetype != H
var(12) = 0
;--------------------------------
[state 3020, VarSet];親の前方
type = VarSet
trigger1 = parentdist x<0
var(2) = 1

[state 3020, VarSet];親の後方
type = VarSet
trigger1 = parentdist x>0
var(2) = -1

[state 3020, VarSet];敵が前方
type = VarSet
trigger1 = p2dist x>0
var(3) = 1

[state 3020, VarSet];敵が後方
type = VarSet
trigger1 = p2dist x<0
var(3) = -1
;--------------------------------
[state 3020, SprPriority];手前表示
type = SprPriority
trigger1 = 1
value = var(1)

;[State -2, デバック(変数確認)]
;Type = DisplayToClipBoard
;Trigger1 = 1
;Text = "var(12)=%d\n"
;Params = var(12)
;IgnoreHitPause = 1

;--------------------------------飛び道具相殺用Helper
[State 1000, Helper]
type = helper
trigger1 = time = 0
id = 3030
;persistent = 0
name = "Sousai_1"
pos = 0,0
postype = p1
stateno = 3030
helpertype = normal
keyctrl = 0
ownpal = 1

;--------------------------------
[State 1000, ヒット定義]
type = HitDef
triggerall = Root,var(12) = 0
trigger1 = time = 0
trigger2 = time > 0
trigger2 = time % 6 = 0
attr = A, HP
animtype  = diagup
damage    = floor(149*root,fvar(3)), 6
getpower  = 0, 0
priority  = 5, hit
hitflag = MAFP
guardflag = MA
sprpriority = var(1)
pausetime = 0,2
guard.pausetime = 0,5
sparkxy = -15,-25
sparkno = s4002
guard.sparkno = s4012
hitsound   = s1,23
guardsound = s121,0
ground.type = high
ground.slidetime = 18
ground.hittime  = 20
ground.velocity = -7*var(2)*var(3),-9
air.velocity = -7*var(2)*var(3),-9
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .43
fall = 1
fall.recover = 0
id = 3020
palfx.time = 46                 ;持続時間
palfx.mul = 230,230,250         ;乗算
palfx.sinadd = 255,255,255,5
palfx.add = 16,16,16            ;加算
palfx.color = 1                 ;彩度
palfx.invertall = 1             ;反転

[State 1000, ヒット定義]
type = HitDef
trigger1 = Root,var(12) = 1
attr = A, HP
animtype  = diagup
damage    = 0, 0
getpower  = 0, 0
priority  = 5, hit
hitflag = P
guardflag = MA
sprpriority = var(1)
pausetime = 0,0
guard.pausetime = 0,0
sparkxy = -15,-25
sparkno = -1
guard.sparkno = -1
hitsound   = -1 ;音鳴らない
guardsound = -1 ;音鳴らない
ground.type = high
ground.slidetime = 0
ground.hittime  = 0
ground.velocity = 0,0
air.velocity = 0,0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .43
fall = 1
fall.recover = 0

;--------------------------------
[state 3020, ChangeState];消滅ステート
type = ChangeState
trigger1 = root,var(10)=0
trigger1 = time = 156
trigger2 = root,var(10)=1
trigger2 = time = 187
trigger3 = root,movetype = H
trigger4 = root,stateno = 3102
value = 3022

[state 3020, ChangeState];クリスタルシュート派生ステート
type = ChangeState
trigger1 = root,stateno = 3150
trigger2 = root,stateno = 3155
value = 3023

;---------------------------------------------------------------------------
;シャイニングクリスタルビット
;(子HELPER)ビット2
[Statedef 3121]
type    = A
movetype= A
physics = N
juggle  = 8
poweradd= 0
velset = 0,0
ctrl = 0
anim = 3020
sprpriority = 3

[state 11000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 20001, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

;--------------------------------
[state 3020, VarSet];周回軌道用変数リセット
type = VarSet
trigger1 = time = 0
fvar(0) = 0

[state 3020, VarAdd];周回軌道用変数加算
type = varadd
trigger1 = 1
fvar(0) = 0.2

[state 3020, BindToRoot];周回軌道
type = BindToRoot
trigger1 = 1
pos = (-50 * sin(fvar(0))), (65 * sin(fvar(0))-70)

;--------------------------------
[state 3020, VarSet];表示優順位変更用変数リセット
type = VarSet
trigger1 = time = 0
var(1) = -3

[state 3020, VarSet];表示優順位変更用
type = VarSet
trigger1 = animelemtime(6)=0
var(1) = -3*ifelse(var(1)<=0,-1,1)

;--------------------------------
[state 3020, ParentVarSet];多段ヒット防止用
type = ParentVarSet
trigger1 = movehit = 1
var(12) = 1

[state 3020, ParentVarSet];リセット
type = ParentVarSet
trigger1 = enemynear,movetype != H
var(12) = 0

;--------------------------------
[state 3020, VarSet];親の前方
type = VarSet
trigger1 = parentdist x<0
var(2) = 1

[state 3020, VarSet];親の後方
type = VarSet
trigger1 = parentdist x>0
var(2) = -1

[state 3020, VarSet];敵が前方
type = VarSet
trigger1 = p2dist x>0
var(3) = 1

[state 3020, VarSet];敵が後方
type = VarSet
trigger1 = p2dist x<0
var(3) = -1
;--------------------------------
[state 3020, SprPriority];手前表示
type = SprPriority
trigger1 = 1
value = var(1)

;[State -2, デバック(変数確認)]
;Type = DisplayToClipBoard
;Trigger1 = 1
;Text = "var(1)=%d\n"
;Params = var(1)
;IgnoreHitPause = 1
;--------------------------------飛び道具相殺用Helper
[State 1000, Helper]
type = helper
trigger1 = time = 0
id = 3030
;persistent = 0
name = "Sousai_2"
pos = 0,0
postype = p1
stateno = 3030
helpertype = normal
keyctrl = 0
ownpal = 1

;--------------------------------
[State 1000, ヒット定義]
type = HitDef
triggerall = Root,var(12) = 0
trigger1 = time = 0
trigger2 = time > 0
trigger2 = time % 6 = 0
attr = A, HP
animtype  = diagup
damage    = floor(149*root,fvar(3)), 6
getpower  = 0, 0
priority  = 5, hit
hitflag = MAFP
guardflag = MA
sprpriority = var(1)
pausetime = 0,2
guard.pausetime = 0,5
sparkxy = -15,-25
sparkno = s4002
guard.sparkno = s4012
hitsound   = s1,23
guardsound = s121,0
ground.type = high
ground.slidetime = 18
ground.hittime  = 20
ground.velocity = 7*var(2)*var(3),-9
air.velocity = 7*var(2)*var(3),-9
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .43
fall = 1
fall.recover = 0
id = 3020
palfx.time = 46                 ;持続時間
palfx.mul = 230,230,250         ;乗算
palfx.sinadd = 255,255,255,5
palfx.add = 16,16,16            ;加算
palfx.color = 1                 ;彩度
palfx.invertall = 1             ;反転

[State 1000, ヒット定義]
type = HitDef
trigger1 = Root,var(12) = 1
attr = A, HP
animtype  = diagup
damage    = 0, 0
getpower  = 0, 0
priority  = 5, hit
hitflag = P
guardflag = MA
sprpriority = var(1)
pausetime = 0,0
guard.pausetime = 0,0
sparkxy = -15,-25
sparkno = -1
guard.sparkno = -1
hitsound   = -1 ;音鳴らない
guardsound = -1 ;音鳴らない
ground.type = high
ground.slidetime = 0
ground.hittime  = 0
ground.velocity = 0,0
air.velocity = 0,0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .43
fall = 1
fall.recover = 0

;--------------------------------
[state 3020, ChangeState];消滅ステート
type = ChangeState
trigger1 = root,var(10)=0
trigger1 = time = 156
trigger2 = root,var(10)=1
trigger2 = time = 187
trigger3 = root,movetype = H
trigger4 = root,stateno = 3102
value = 3022

[state 3020, ChangeState];クリスタルシュート派生ステート
type = ChangeState
trigger1 = root,stateno = 3150
trigger2 = root,stateno = 3155
value = 3023

;---------------------------------------------------------------------------
;空中クリスタルシュート（発動）
[Statedef 3150]
type    = A
movetype= A
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
anim = 3150
ctrl = 0
sprpriority = 2

[State 1000, StopSnd];音停止
type = StopSnd
trigger1 = time = 0
channel = 4

[state 3060, VarSet];空中版判定
type = VarSet
trigger1 = time = 0 
var(9) = 2
;----------------------------------攻撃ビットHelper
[State 3000, Helper]
type = helper
;trigger1 = NumHelper(3020) = 0
;trigger1 = NumHelper(3070) = 0
trigger1 = animelem = 4
id = 3070
persistent = 0
name = "Bit_Crystal"
pos = -13,-137
postype = p1
stateno = 3070
helpertype = normal
keyctrl = 0
ownpal = 1

;----------------------------------
[State 3000, SuperPause]
type = SuperPause
trigger1 = time = 1
time = 28
movetime = 28
anim = -1
darken = 0
p2defmul = 1

[State 3000, 超必スパーク]
type = Explod
trigger1 = time = 3
anim = 6000
sprpriority = -9999
postype = p1
pos = -15,-135
bindtime = 1
under = 0
ownpal = 1
supermovetime = 999

[State 3000, 超必スパーク]
type = Explod
trigger1 = Time = 13
anim = 6001
sprpriority = 3
postype = p1
pos = -15,-135
bindtime = 1
under = 0
ownpal = 1
supermovetime = 999

[State 3000, フラッシュ]
type = EnvColor
trigger1 = time = 1
value = 255,255,255
persistent = 0
ignorehitpause = 1
time = 4
under = 2

[State 3000, 暗転]
type = EnvColor
trigger1 = time = 5
value = 0,0,0
persistent = 0
ignorehitpause = 1
time = 24
under = 2

[State 3000, 音を鳴らす];超必音
type = PlaySnd
trigger1 = time = 1
value = 6000, 0
;-------------------------------------
[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 3151

;---------------------------------------------------------------------------
;空中クリスタルシュート（待機）
[Statedef 3151]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
velset = 0,0
anim = 3151
ctrl = 0
sprpriority = 2

[State 3051, ChangeState]
type = ChangeState
trigger1 = var(59)=0
trigger1 = command != "CSホールド"
trigger2 = time >= 140
trigger3 = var(59)>0
trigger4 = roundstate!=2
value = 3160

;---------------------------------------------------------------------------
;空中クリスタルシュート（発射）
[Statedef 3160]
type    = A
movetype= A
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
anim = 3160
ctrl = 0
sprpriority = 2

[State 1000, 音を鳴らす];いっけ〜
type = PlaySnd
trigger1 = time = 0
value = 3100, 0
channel = 0
volume = 100

[State 1000, 音を鳴らす];ビット音
type = PlaySnd
trigger1 = animelem = 2
value = 3100, 1

[State 1000, VelAdd]
type = VelAdd
trigger1 = animelemtime(5)>=0
y = .4

[State 1000, ステート変更]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 3103

;---------------------------------------------------------------------------
;フェニックスファングアロー弱（始動）
[Statedef 3200]
type    = A
movetype= A
physics = N
juggle  = 0
poweradd= ifelse(var(8)>0,0,ifelse(var(11),-2000,-1000))  ;MAX発動中なら消費ゼロ
velset = 0,0
anim = 3200
ctrl = 0
sprpriority = 2

;----------------------------------
; どこでもキャンセル
; var(8)
;----------------------------------
;MAXゲージ消費
[State 1000, VarSet]
type = VarSet
triggerall = var(8) > 0
trigger1 = time = 0
var(8) = 0
;----------------------------------
[State 1000, VarSet];強弱判定
type = VarSet
trigger1 = time = 0
var(10) = 0

[State 1000, 音を鳴らす];ふぁ〜んぐ
type = PlaySnd
trigger1 = animelem = 3
value = 3200, 0
channel = 0
volume = 100

[State 2000, 6];SE
type = PlaySnd
trigger1 = animelem = 3
value = 3200,2

[state 3000, NotHitBy];無敵
type = NotHitBy
trigger1 = 1
value = SCA

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1420

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1422

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1220
;----------------------------------
[State 3000, SuperPause]
type = SuperPause
trigger1 = time = 1
time = 28
movetime = 28
anim = -1
darken = 0
p2defmul = 1

[State 3000, 超必スパーク]
type = Explod
trigger1 = time = 3
anim = 6000
sprpriority = -9999
postype = p1
pos = -12,-73
bindtime = 1
under = 0
ownpal = 1
supermovetime = 999

[State 3000, 超必スパーク]
type = Explod
trigger1 = Time = 13
anim = 6001
sprpriority = 3
postype = p1
pos = -12,-73
bindtime = 1
under = 0
ownpal = 1
supermovetime = 999

[State 3000, フラッシュ]
type = EnvColor
trigger1 = time = 1
value = 255,255,255
persistent = 0
ignorehitpause = 1
time = 4
under = 2

[State 3000, 暗転]
type = EnvColor
trigger1 = time = 5
value = 0,0,0
persistent = 0
ignorehitpause = 1
time = 24
under = 2

[State 3000, 音を鳴らす];超必音
type = PlaySnd
trigger1 = time = 1
value = 6000, 0
;-------------------------------------
[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 3201

;---------------------------------------------------------------------------
;フェニックスファングアロー（攻撃1-3）
[Statedef 3201]
type    = A
movetype= A
physics = N
juggle  = 8
poweradd= 0
velset = 0,0
ctrl = 0
anim = 3201
sprpriority = 2

[State 2000, 6];SE
type = PlaySnd
trigger1 = animelemtime(1)=0
trigger2 = animelemtime(4)=0
trigger3 = animelemtime(7)=0
value = 3200,2

[State 801, Explod];ワープエフェクト
type = Explod
trigger1 = AnimElemTime(1)=0
trigger2 = animelemtime(4)=0
trigger3 = animelemtime(7)=0
anim = 1551
ID = 1551
pos = 0, 0
postype = p1
facing = 1
sprpriority = 2
ownpal = 1
bindtime = -1
removetime = -2
removeongethit = 1

[State 1905, ScreenBound];画面固定
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[state 3000, NotHitBy];無敵
type = NotHitBy
trigger1 = animelemtime(1)>=0
trigger1 = animelemtime(2)<0
trigger2 = animelemtime(4)>=0
trigger2 = animelemtime(5)<0
trigger3 = animelemtime(7)>=0
trigger3 = animelemtime(8)<0
value = SCA
;----------------------------------突進Helper
[State 3000, Helper]
type = helper
trigger1 = animelemtime(1)=0
trigger2 = animelemtime(4)=0
trigger3 = animelemtime(7)=0
id = 3250
;persistent = 0
name = "Rush"
pos = 0,-30
postype = p1
stateno = 3250
helpertype = normal
keyctrl = 0
ownpal = 1

;--------------------------------
[state 3020, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 3202

;---------------------------------------------------------------------------
;フェニックスファングアロー（攻撃4）
[Statedef 3202]
type    = A
movetype= A
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
ctrl = 0
anim = 3202
sprpriority = 2

[State 1000, 音を鳴らす];あろ〜
type = PlaySnd
trigger1 = time = 0
value = 3200, 1
channel = 0
volume = 100

[state 1200, PosAdd]
type = PosAdd
trigger1 = time = 0
y = -15

[state 1200, VelSet]
type = VelSet
trigger1 = var(10) = 0
trigger1 = time = 0
x = 5.2
y = 8.2

[state 1200, VelSet]
type = VelSet
trigger1 = var(10) = 1
trigger1 = time = 0
x = 7.5
y = 8.5

[State 801, Explod];火球エフェクト
type = Explod
trigger1 = NumExplod(3230)=0
trigger1 = time = 0
anim = 3230
ID = 3230
pos = 0, 0
postype = p1
facing = 1
sprpriority = 1
ownpal = 1
bindtime = -1
removetime = -1
removeongethit = 1

[State 1000, 0]
Type = RemoveExplod
trigger1 = Pos Y >= 0
ID = 3230

[State 1905, ScreenBound];画面固定
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0
;--------------------------------
[State 1000, ヒット定義]
type = HitDef
triggerall = hitcount<=1
trigger1 = time = 0
trigger2 = movecontact = 2
attr = A, HA
animtype  = hard
damage    = 58, 2
getpower  = 0, 0
priority  = 5, hit
hitflag = MAF
guardflag = MA
;sprpriority = var(1)
pausetime = 2,10
guard.pausetime = 3,10
sparkxy = -15,-25
sparkno = s4002
guard.sparkno = s4012
hitsound   = s1,9
guardsound = s121,0
ground.type = high
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -5,-6.5
air.velocity = -5,-6.5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .4
fall = 1
fall.recover = 0
id = 3200

[state 3020, ChangeState]
type = ChangeState
trigger1 = var(10) = 0
trigger1 = Pos Y >= 0
value = 3220

[state 3020, ChangeState]
type = ChangeState
trigger1 = var(10) = 1
trigger1 = Pos Y >= 0
value = 3221

;---------------------------------------------------------------------------
;フェニックスファングアロー強（始動）
[Statedef 3210]
type    = A
movetype= A
physics = N
juggle  = 0
poweradd= ifelse(var(8)>0,0,ifelse(var(11),-2000,-1000))  ;MAX発動中なら消費ゼロ
velset = 0,0
anim = 3210
ctrl = 0
sprpriority = 2

;----------------------------------
; どこでもキャンセル
; var(8)
;----------------------------------
;MAXゲージ消費
[State 1000, VarSet]
type = VarSet
triggerall = var(8) > 0
trigger1 = time = 0
var(8) = 0
;----------------------------------
[State 1000, VarSet];強弱判定
type = VarSet
trigger1 = time = 0
var(10) = 1

[State 1000, 音を鳴らす];ふぁ〜んぐ
type = PlaySnd
trigger1 = animelem = 3
value = 3200, 0
channel = 0
volume = 100

[State 2000, 6];SE
type = PlaySnd
trigger1 = animelem = 3
value = 3200,2

[state 3000, NotHitBy];無敵
type = NotHitBy
trigger1 = 1
value = SCA

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1420

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1422

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1220
;----------------------------------
[State 3000, SuperPause]
type = SuperPause
trigger1 = time = 1
time = 28
movetime = 28
anim = -1
darken = 0
p2defmul = 1

[State 3000, 超必スパーク]
type = Explod
trigger1 = time = 3
anim = 6000
sprpriority = -9999
postype = p1
pos = -12,-73
bindtime = 1
under = 0
ownpal = 1
supermovetime = 999

[State 3000, 超必スパーク]
type = Explod
trigger1 = Time = 13
anim = 6001
sprpriority = 3
postype = p1
pos = -12,-73
bindtime = 1
under = 0
ownpal = 1
supermovetime = 999

[State 3000, フラッシュ]
type = EnvColor
trigger1 = time = 1
value = 255,255,255
persistent = 0
ignorehitpause = 1
time = 4
under = 2

[State 3000, 暗転]
type = EnvColor
trigger1 = time = 5
value = 0,0,0
persistent = 0
ignorehitpause = 1
time = 24
under = 2

[State 3000, 音を鳴らす];超必音
type = PlaySnd
trigger1 = time = 1
value = 6000, 0
;-------------------------------------
[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 3201

;---------------------------------------------------------------------------
;フェニックスファングアロー（弱着地）
[Statedef 3220]
type    = S
movetype= A
physics = N
juggle  = 8
poweradd= 0
velset = 1,0
ctrl = 0
anim = 3220
sprpriority = 2

[state 3020, PosSet]
type = PosSet
trigger1 = time = 0
y = 0

[state 1200, VelSet]
type = VelSet
trigger1 = animelem = 2
x = 0

[State 1000, 0]
Type = RemoveExplod
trigger1 = time = 0
ID = 3230

[State 801, Explod];火球エフェクト2
type = Explod
trigger1 = NumExplod(1221)=0
trigger1 = Time = 0
anim = 1221
ID = 1221
pos = 0, 0
postype = p1
facing = 1
sprpriority = 1
ownpal = 1
bindtime = -1
removeongethit = 1

[state 3020, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;フェニックスファングアロー（強着地）
[Statedef 3221]
type    = S
movetype= A
physics = N
juggle  = 8
poweradd= 0
velset = 1,0
ctrl = 0
anim = 3221
sprpriority = 2

[state 3020, PosSet]
type = PosSet
trigger1 = time = 0
y = 0

[state 1200, VelSet]
type = VelSet
trigger1 = animelem = 2
x = 0

[State 1000, 0]
Type = RemoveExplod
trigger1 = time = 0
ID = 3230

[State 801, Explod];火球エフェクト2
type = Explod
trigger1 = NumExplod(1221)=0
trigger1 = Time = 0
anim = 1221
ID = 1221
pos = 0, 0
postype = p1
facing = 1
sprpriority = 1
ownpal = 1
bindtime = -1
removeongethit = 1

[state 3020, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;フェニックスファングアロー
;(子HELPER)突進
[Statedef 3250]
type    = A
movetype= A
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
ctrl = 0
anim = 3250
sprpriority = 2

[state 11000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

;[State 20001, AssertSpecial]
;type = AssertSpecial
;trigger1 = 1
;flag = NoShadow

[state 1200, VelSet]
type = VelSet
trigger1 = root,var(10) = 0
trigger1 = time = 0
x = 5.2
y = 8.2

[state 1200, VelSet]
type = VelSet
trigger1 = root,var(10) = 1
trigger1 = time = 0
x = 7.5
y = 8.5

[State 801, Explod];火球エフェクト
type = Explod
trigger1 = NumExplod(3230)=0
trigger1 = time = 0
anim = 3230
ID = 3230
pos = 0, 0
postype = p1
facing = 1
sprpriority = 1
ownpal = 1
bindtime = -1
removetime = -1
removeongethit = 1

[State 1000, 0]
Type = RemoveExplod
trigger1 = Pos Y >= 10
ID = 3230
;--------------------------------
[State 1000, ヒット定義]
type = HitDef
triggerall = hitcount < 6
trigger1 = time = 0
trigger2 = movecontact = 2
attr = A, HP
animtype  = hard
damage    = floor(23*root,fvar(3)), 3
getpower  = 0, 0
priority  = 5, hit
hitflag = MAF
guardflag = MA
sprpriority = 2
pausetime = 1,20
guard.pausetime = 1,20
sparkxy = -15,-25
sparkno = s4002
guard.sparkno = s4012
hitsound   = s1,9
guardsound = s121,0
ground.type = high
ground.slidetime = 18
ground.hittime  = 20
ground.velocity = -7.5
air.velocity = -4,-6
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .43
air.fall = 1
fall.recover = 0
id = 3250

;--------------------------------
[state 3020, DestroySelf];消滅
type = DestroySelf
trigger1 = Pos Y >= 10

;===========================================================================
; MAX超必殺技
;===========================================================================
;---------------------------------------------------------------------------
;MAXシャイニングクリスタルビット
[Statedef 3300]
type    = A
movetype= A
physics = N
juggle  = 1
poweradd= ifelse(var(8)>0,-1000,ifelse(var(11),-4000,-3000))
velset = 0,0
anim = 3300
ctrl = 0
sprpriority = 2

;----------------------------------
; どこでもキャンセル
; var(8)
;----------------------------------
;MAXゲージ消費
[State 1000, VarSet]
type = VarSet
triggerall = var(8) > 0
trigger1 = time = 0
var(8) = 0
;----------------------------------
;[State 1000, VarSet];強弱判定
;type = VarSet
;trigger1 = time = 0
;var(10) = 0

[State 1000, VarSet];ヒット判定リセット
type = VarSet
trigger1 = time = 0
var(12) = 0

[State 1000, 音を鳴らす];はあああ
type = PlaySnd
trigger1 = animelem = 4
value = 3000, 0
channel = 0
volume = 100

[State 1000, 音を鳴らす];ビット音
type = PlaySnd
trigger1 = animelem = 4
value = 3000, 1
channel = 4
;loop = 1

[state 3000, NotHitBy];無敵
type = NotHitBy
trigger1 = 1
value = SCA

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1420

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1422

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1220
;----------------------------------攻撃ビットHelper
[State 3000, Helper]
type = helper
trigger1 = animelemtime(4)=0
id = 3020
;persistent = 0
name = "Bit_1"
pos = 15,-75
postype = p1
stateno = 3320
helpertype = normal
keyctrl = 0
ownpal = 1

[State 3000, Helper]
type = helper
trigger1 = animelemtime(4)=0
id = 3020
;persistent = 0
name = "Bit_2"
pos = -15,-75
postype = p1
stateno = 3321
helpertype = normal
keyctrl = 0
ownpal = 1

;----------------------------------
[State 3000, SuperPause]
type = SuperPause
trigger1 = time = 1
time = 29
movetime = 29
anim = -1
darken = 0
p2defmul = 1

[State 3000, 超必スパーク]
type = Explod
trigger1 = time = 3
anim = 6010
sprpriority = -9999
postype = p1
pos = 3,-71
bindtime = 1
under = 0
ownpal = 1
supermovetime = 999

[State 3000, 超必スパーク]
type = Explod
trigger1 = Time = 13
anim = 6011
sprpriority = 3
postype = p1
pos = 3,-71
bindtime = 1
under = 0
ownpal = 1
supermovetime = 999

[State 3000, フラッシュ]
type = EnvColor
trigger1 = time = 1
value = 255,255,255
persistent = 0
ignorehitpause = 1
time = 4
under = 2

[State 3000, 暗転]
type = EnvColor
trigger1 = time = 5
value = 0,0,0
persistent = 0
ignorehitpause = 1
time = 24
under = 2

[State 3000, 音を鳴らす];超必音
type = PlaySnd
trigger1 = time = 1
value = 6000, 1
;-------------------------------------
[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 3301

;---------------------------------------------------------------------------
;MAXシャイニングクリスタルビット（ビット展開中）
[Statedef 3301]
type    = A
movetype= A
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
anim = 3301
ctrl = 0
sprpriority = 2

[state 3000, NotHitBy];無敵
type = NotHitBy
trigger1 = time<4
value = SCA

[State 1000, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[state 3020, VarSet];多段ヒット防止用
type = VarSet
trigger1 = movehit = 1
var(12) = 1

[State 1000, ヒット定義]
type = HitDef
trigger1 = time = 0
trigger1 = NumTarget(290)=0
attr = A, HP
animtype  = diagup
damage    = floor(231*fvar(4)), 4
getpower  = 0, 0
priority  = 5, hit
hitflag = MAFP
guardflag = MA
sprpriority = 2
pausetime = 0,1
guard.pausetime = 0,1
sparkxy = -15,-75
sparkno = s4002
guard.sparkno = s4012
hitsound   = s1,23
guardsound = s121,0
ground.type = high
ground.slidetime = 18
ground.hittime  = 20
ground.velocity = -7,-9
air.velocity = -7,-9
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .45
fall = 1
fall.recover = 0
id = 3300
nochainid = 290
palfx.time = 46                 ;持続時間
palfx.mul = 230,230,250         ;乗算
palfx.sinadd = 255,255,255,5
palfx.add = 16,16,16            ;加算
palfx.color = 1                 ;彩度
palfx.invertall = 1             ;反転

[State 1000, ステート変更];MAXクリスタルシュート弱
type = ChangeState
triggerall = NumHelper(3020)
triggerall = Helper(3020),stateno != 3022
trigger1 = var(59)=0
trigger1 = command = "弱サイコボール"
trigger2 = var(59)>0
trigger2 = helper(3020),movehit
value = 3350

[State 1000, ステート変更];MAXクリスタルシュート強
type = ChangeState
triggerall = NumHelper(3020)
triggerall = Helper(3020),stateno != 3022
trigger1 = var(59)=0
trigger1 = command = "強サイコボール"
trigger2 = var(59)>0
trigger2 = helper(3020),movehit
value = 3355

[State 1000, ステート変更];終了
type = ChangeState
;trigger1 = var(10) = 0 ;弱
trigger1 = Time >= 173
trigger2 = roundstate!=2
trigger3 = var(59)=0
trigger3 = command = "a" && command = "b" && command = "x" && command = "y" ;強制終了
value = 3302

;---------------------------------------------------------------------------
;MAXシャイニングクリスタルビット（終了）
[Statedef 3302]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
velset = 0,0
anim = 3302
ctrl = 0
sprpriority = 2

[state 3050, StopSnd]
type = StopSnd
trigger1 = time = 0
channel = 4

[State 1000, ステート変更]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;MAXシャイニングクリスタルビット
;(子HELPER)ビット1
[Statedef 3320]
type    = A
movetype= A
physics = N
juggle  = 8
poweradd= 0
velset = 0,0
ctrl = 0
anim = 3020
sprpriority = 3

[state 11000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 20001, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

;--------------------------------
[state 3020, VarSet];周回軌道用変数リセット
type = VarSet
trigger1 = time = 0
fvar(0) = 0

[state 3020, VarAdd];周回軌道用変数加算
type = varadd
trigger1 = 1
fvar(0) = 0.2

[state 3020, BindToRoot];周回軌道
type = BindToRoot
trigger1 = 1
pos = (50 * sin(fvar(0))), (65 * sin(fvar(0))-70)

;--------------------------------
[state 3020, VarSet];表示優順位変更用変数リセット
type = VarSet
trigger1 = time = 0
var(1) = 3

[state 3020, VarSet];表示優順位変更用
type = VarSet
trigger1 = animelemtime(6)=0
var(1) = 3*ifelse(var(1)>=0,-1,1)

;--------------------------------
[state 3020, ParentVarSet];多段ヒット防止用
type = ParentVarSet
trigger1 = movehit = 1
var(12) = 1

[state 3020, ParentVarSet];リセット
type = ParentVarSet
trigger1 = enemynear,movetype != H
var(12) = 0

;--------------------------------
[state 3020, VarSet];親の前方
type = VarSet
trigger1 = parentdist x<0
var(2) = 1

[state 3020, VarSet];親の後方
type = VarSet
trigger1 = parentdist x>0
var(2) = -1

[state 3020, VarSet];敵が前方
type = VarSet
trigger1 = p2dist x>0
var(3) = 1

[state 3020, VarSet];敵が後方
type = VarSet
trigger1 = p2dist x<0
var(3) = -1
;--------------------------------
[state 3020, SprPriority];手前表示
type = SprPriority
trigger1 = 1
value = var(1)

;[State -2, デバック(変数確認)]
;Type = DisplayToClipBoard
;Trigger1 = 1
;Text = "var(2)=%d\n"
;Params = var(2)
;IgnoreHitPause = 1
;--------------------------------飛び道具相殺用Helper
[State 1000, Helper]
type = helper
trigger1 = time = 0
id = 3030
;persistent = 0
name = "Sousai_1"
pos = 0,0
postype = p1
stateno = 3030
helpertype = normal
keyctrl = 0
ownpal = 1

;--------------------------------
[State 1000, ヒット定義]
type = HitDef
triggerall = Root,var(12) = 0
trigger1 = time = 0
trigger2 = time > 0
trigger2 = time % 6 = 0
attr = A, HP
animtype  = diagup
damage    = floor(248*root,fvar(3)), 7
getpower  = 0, 0
priority  = 5, hit
hitflag = MAFP
guardflag = MA
sprpriority = var(1)
pausetime = 0,2
guard.pausetime = 0,5
sparkxy = -15,-15
sparkno = s4002
guard.sparkno = s4012
hitsound   = s1,23
guardsound = s121,0
ground.type = high
ground.slidetime = 18
ground.hittime  = 20
ground.velocity = -7*var(2)*var(3),-9
air.velocity = -7*var(2)*var(3),-9
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .4
fall = 1
fall.recover = 0
id = 3320
palfx.time = 46                 ;持続時間
palfx.mul = 230,230,250         ;乗算
palfx.sinadd = 255,255,255,5
palfx.add = 16,16,16            ;加算
palfx.color = 1                 ;彩度
palfx.invertall = 1             ;反転

[State 1000, ヒット定義]
type = HitDef
trigger1 = Root,var(12) = 1
attr = A, HP
animtype  = diagup
damage    = 0, 0
getpower  = 0, 0
priority  = 5, hit
hitflag = P
guardflag = MA
sprpriority = var(1)
pausetime = 0,0
guard.pausetime = 0,0
sparkxy = -15,-15
sparkno = -1
guard.sparkno = -1
hitsound   = -1 ;音鳴らない
guardsound = -1 ;音鳴らない
ground.type = high
ground.slidetime = 0
ground.hittime  = 0
ground.velocity = 0,0
air.velocity = 0,0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .4
fall = 1
fall.recover = 0

;--------------------------------
[state 3020, ChangeState];消滅ステート
type = ChangeState
trigger1 = time >= 156
trigger2 = root,movetype = H
trigger3 = root,stateno = 3302 || root,stateno=3402
value = 3022

[state 3020, ChangeState];クリスタルシュート派生ステート
type = ChangeState
trigger1 = root,stateno = 3350
trigger2 = root,stateno = 3355
trigger3 = root,stateno = 3450
value = 3023

;---------------------------------------------------------------------------
;MAXシャイニングクリスタルビット
;(子HELPER)ビット2
[Statedef 3321]
type    = A
movetype= A
physics = N
juggle  = 8
poweradd= 0
velset = 0,0
ctrl = 0
anim = 3020
sprpriority = 3

[state 11000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 20001, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

;--------------------------------
[state 3020, VarSet];周回軌道用変数リセット
type = VarSet
trigger1 = time = 0
fvar(0) = 0

[state 3020, VarAdd];周回軌道用変数加算
type = varadd
trigger1 = 1
fvar(0) = 0.2

[state 3020, BindToRoot];周回軌道
type = BindToRoot
trigger1 = 1
pos = (-50 * sin(fvar(0))), (65 * sin(fvar(0))-70)

;--------------------------------
[state 3020, VarSet];表示優順位変更用変数リセット
type = VarSet
trigger1 = time = 0
var(1) = -3

[state 3020, VarSet];表示優順位変更用
type = VarSet
trigger1 = animelemtime(6)=0
var(1) = -3*ifelse(var(1)<=0,-1,1)

;--------------------------------
[state 3020, ParentVarSet];多段ヒット防止用
type = ParentVarSet
trigger1 = movehit = 1
var(12) = 1

[state 3020, ParentVarSet];リセット
type = ParentVarSet
trigger1 = enemynear,movetype != H
var(12) = 0

;--------------------------------
[state 3020, VarSet];親の前方
type = VarSet
trigger1 = parentdist x<0
var(2) = 1

[state 3020, VarSet];親の後方
type = VarSet
trigger1 = parentdist x>0
var(2) = -1

[state 3020, VarSet];敵が前方
type = VarSet
trigger1 = p2dist x>0
var(3) = 1

[state 3020, VarSet];敵が後方
type = VarSet
trigger1 = p2dist x<0
var(3) = -1
;--------------------------------
[state 3020, SprPriority];手前表示
type = SprPriority
trigger1 = 1
value = var(1)

;[State -2, デバック(変数確認)]
;Type = DisplayToClipBoard
;Trigger1 = 1
;Text = "var(2)=%d\n"
;Params = var(2)
;IgnoreHitPause = 1
;--------------------------------飛び道具相殺用Helper
[State 1000, Helper]
type = helper
trigger1 = time = 0
id = 3030
;persistent = 0
name = "Sousai_2"
pos = 0,0
postype = p1
stateno = 3030
helpertype = normal
keyctrl = 0
ownpal = 1

;--------------------------------
[State 1000, ヒット定義]
type = HitDef
triggerall = Root,var(12) = 0
trigger1 = time = 0
trigger2 = time > 0
trigger2 = time % 6 = 0
attr = A, HP
animtype  = diagup
damage    = floor(248*root,fvar(3)), 7
getpower  = 0, 0
priority  = 5, hit
hitflag = MAFP
guardflag = MA
sprpriority = var(1)
pausetime = 0,2
guard.pausetime = 0,5
sparkxy = -15,-15
sparkno = s4002
guard.sparkno = s4012
hitsound   = s1,23
guardsound = s121,0
ground.type = high
ground.slidetime = 18
ground.hittime  = 20
ground.velocity = 7*var(2)*var(3),-9
air.velocity = 7*var(2)*var(3),-9
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .4
fall = 1
fall.recover = 0
id = 3320
palfx.time = 46                 ;持続時間
palfx.mul = 230,230,250         ;乗算
palfx.sinadd = 255,255,255,5
palfx.add = 16,16,16            ;加算
palfx.color = 1                 ;彩度
palfx.invertall = 1             ;反転

[State 1000, ヒット定義]
type = HitDef
trigger1 = Root,var(12) = 1
attr = A, HP
animtype  = diagup
damage    = 0, 0
getpower  = 0, 0
priority  = 5, hit
hitflag = P
guardflag = MA
sprpriority = var(1)
pausetime = 0,0
guard.pausetime = 0,0
sparkxy = -15,-15
sparkno = -1
guard.sparkno = -1
hitsound   = -1  ;音鳴らない
guardsound = -1  ;音鳴らない
ground.type = high
ground.slidetime = 0
ground.hittime  = 0
ground.velocity = 0,0
air.velocity = 0,0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .4
fall = 1
fall.recover = 0

;--------------------------------
[state 3020, ChangeState];消滅ステート
type = ChangeState
trigger1 = time >= 156
trigger2 = root,movetype = H
trigger3 = root,stateno = 3302 || root,stateno = 3402
value = 3022

[state 3020, ChangeState];クリスタルシュート派生ステート
type = ChangeState
trigger1 = root,stateno = 3350
trigger2 = root,stateno = 3355
trigger3 = root,stateno = 3450
value = 3023

;---------------------------------------------------------------------------
;MAXクリスタルシュート弱（発動）
[Statedef 3350]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
velset = 0,0
anim = 3050
ctrl = 0
sprpriority = 2

[state 3050, StopSnd]
type = StopSnd
trigger1 = time = 0
channel = 4

[state 3060, VarSet];強弱判定
type = VarSet
trigger1 = time = 0 
var(9) = 0
;----------------------------------攻撃ビットHelper
[State 3000, Helper]
type = helper
;trigger1 = NumHelper(3020) = 0
;trigger1 = NumHelper(3070) = 0
trigger1 = animelem = 4
id = 3070
persistent = 0
name = "Bit_Crystal"
pos = -13,-137
postype = p1
stateno = 3370
helpertype = normal
keyctrl = 0
ownpal = 1

;----------------------------------
[State 3000, SuperPause]
type = SuperPause
trigger1 = time = 1
time = 29
movetime = 29
anim = -1
darken = 0
p2defmul = 1

[State 3000, 超必スパーク]
type = Explod
trigger1 = time = 3
anim = 6010
sprpriority = -9999
postype = p1
pos = -15,-131
bindtime = 1
under = 0
ownpal = 1
supermovetime = 999

[State 3000, 超必スパーク]
type = Explod
trigger1 = Time = 13
anim = 6011
sprpriority = 3
postype = p1
pos = -15,-131
bindtime = 1
under = 0
ownpal = 1
supermovetime = 999

[State 3000, フラッシュ]
type = EnvColor
trigger1 = time = 1
value = 255,255,255
persistent = 0
ignorehitpause = 1
time = 4
under = 2

[State 3000, 暗転]
type = EnvColor
trigger1 = time = 5
value = 0,0,0
persistent = 0
ignorehitpause = 1
time = 24
under = 2

[State 3000, 音を鳴らす];超必音
type = PlaySnd
trigger1 = time = 1
value = 6000, 1
;-------------------------------------
[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 3351

;---------------------------------------------------------------------------
;MAXクリスタルシュート（待機）
[Statedef 3351]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
velset = 0,0
anim = 3051
ctrl = 0
sprpriority = 2

[State 3051, ChangeState]
type = ChangeState
triggerall = var(9)=0 ;MAXクリスタルシュート弱
trigger1 = var(59)=0
trigger1 = command != "CSホールド"
trigger2 = time >= 170
trigger3 = var(59)>0
value = 3360

[State 3051, ChangeState]
type = ChangeState
triggerall = var(9)=1 ;MAXクリスタルシュート強
trigger1 = var(59)=0
trigger1 = command != "CSホールド"
trigger2 = time >= 170
trigger3 = var(59)>0
value = 3365

;---------------------------------------------------------------------------
;MAXクリスタルシュート強（発動）
[Statedef 3355]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
velset = 0,0
anim = 3050
ctrl = 0
sprpriority = 2

[state 3050, StopSnd]
type = StopSnd
trigger1 = time = 0
channel = 4

[state 3060, VarSet];強弱判定
type = VarSet
trigger1 = time = 0 
var(9) = 1
;----------------------------------攻撃ビットHelper
[State 3000, Helper]
type = helper
;trigger1 = NumHelper(3020) = 0
;trigger1 = NumHelper(3070) = 0
trigger1 = animelem = 4
id = 3070
persistent = 0
name = "Bit_Crystal"
pos = -13,-137
postype = p1
stateno = 3370
helpertype = normal
keyctrl = 0
ownpal = 1

;----------------------------------
[State 3000, SuperPause]
type = SuperPause
trigger1 = time = 1
time = 29
movetime = 29
anim = -1
darken = 0
p2defmul = 1

[State 3000, 超必スパーク]
type = Explod
trigger1 = time = 3
anim = 6010
sprpriority = -9999
postype = p1
pos = -15,-131
bindtime = 1
under = 0
ownpal = 1
supermovetime = 999

[State 3000, 超必スパーク]
type = Explod
trigger1 = Time = 13
anim = 6011
sprpriority = 3
postype = p1
pos = -15,-131
bindtime = 1
under = 0
ownpal = 1
supermovetime = 999

[State 3000, フラッシュ]
type = EnvColor
trigger1 = time = 1
value = 255,255,255
persistent = 0
ignorehitpause = 1
time = 4
under = 2

[State 3000, 暗転]
type = EnvColor
trigger1 = time = 5
value = 0,0,0
persistent = 0
ignorehitpause = 1
time = 24
under = 2

[State 3000, 音を鳴らす];超必音
type = PlaySnd
trigger1 = time = 1
value = 6000, 1
;-------------------------------------
[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 3351

;---------------------------------------------------------------------------
;MAXクリスタルシュート弱（発射）
[Statedef 3360]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
velset = 0,0
anim = 3060
ctrl = 0
sprpriority = 2

[State 1000, 音を鳴らす];いっけ〜
type = PlaySnd
trigger1 = time = 0
value = 3100, 0
channel = 0
volume = 100

[State 1000, 音を鳴らす];ビット音
type = PlaySnd
trigger1 = animelem = 2
value = 3100, 1

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
Ctrl = 1

;---------------------------------------------------------------------------
;MAXクリスタルシュート強（発射）
[Statedef 3365]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
velset = 0,0
anim = 3065
ctrl = 0
sprpriority = 2

[State 1000, 音を鳴らす];いっけ〜
type = PlaySnd
trigger1 = time = 0
value = 3100, 0
channel = 0
volume = 100

[State 1000, 音を鳴らす];ビット音
type = PlaySnd
trigger1 = animelem = 2
value = 3100, 1

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
Ctrl = 1

;---------------------------------------------------------------------------
;MAXクリスタルシュート
;(子HELPER)ビット
[Statedef 3370]
type    = A
movetype= A
physics = N
juggle  = 8
poweradd= 0
velset = 0,0
ctrl = 0
anim = 3070
sprpriority = 3

[state 11000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 20001, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 20001, AssertSpecial]
type = AssertSpecial
trigger1 = Numhelper(3020)>0
flag = Invisible

[state 3070, BindToRoot];本体が発射するまでは維持
type = BindToRoot
trigger1 = root,stateno = 3350 || root,stateno = 3355
pos = -13,-137

[state 3070, VelSet];弱初速度
type = VelSet
trigger1 = root,var(9) = 0
trigger1 = root,stateno = 3360 || root,stateno = 3365
x = 8
y = 7.5
persistent = 0

[state 3070, VelAdd];弱Y軸加速度
type = VelAdd
trigger1 = root,var(9) = 0
trigger1 = root,stateno != 3350 && root,stateno != 3351 && root,stateno != 3355 && root,stateno != 3450 && root,stateno != 3451
trigger1 = pos y < -65
y = -0.3

[state 3070, VelSet];弱Y軸加速停止
type = VelSet
trigger1 = root,var(9) = 0
trigger1 = pos y >= -65
y = 0

[state 3070, VelSet];強初速度
type = VelSet
trigger1 = root,var(9) = 1
trigger1 = root,stateno = 3360 || root,stateno = 3365
x = 7.5
y = 6.5
persistent = 0

[state 3070, VelAdd];強Y軸加速度
type = VelAdd
trigger1 = root,var(9) = 1
trigger1 = root,stateno != 3350 && root,stateno != 3351 && root,stateno != 3355 && root,stateno != 3450 && root,stateno != 3451
y = -0.4

[state 3070, VelSet];空中版初速度
type = VelSet
trigger1 = root,var(9) = 2
trigger1 = root,stateno = 3460
x = 8
y = 10.5
persistent = 0

[state 3070, VelAdd];空中版Y軸加速度
type = VelAdd
trigger1 = root,var(9) = 2
trigger1 = root,stateno != 3350 && root,stateno != 3351 && root,stateno != 3355 && root,stateno != 3450 && root,stateno != 3451
y = -0.4

[state 1000, VarSet];フラグリセット
type = VarSet
trigger1 = time = 0
var(0) = 0

[state 11000, VarSet];接触した瞬間加算
type = VarAdd
trigger1 = movecontact = 1
var(0) = 1

;[State -2, デバック(変数確認)]
;Type = DisplayToClipBoard
;Trigger1 = 1
;Text = "var(0)=%d\n"
;Params = var(0)
;IgnoreHitPause = 1
;--------------------------------飛び道具相殺用Helper
[State 1000, Helper]
type = helper
trigger1 = time = 0
id = 3080
;persistent = 0
name = "Sousai_Crystal"
pos = 0,0
postype = p1
stateno = 3080
helpertype = normal
keyctrl = 0
ownpal = 1

;--------------------------------
[State 1000, ヒット定義]
type = HitDef
triggerall = var(0) < 3
trigger1 = root,stateno = 3360 || root,stateno = 3365 || root,stateno = 3460;本体発射体勢
;trigger1 = time = 0
trigger1 = var(0) = 0
trigger2 = var(0) = 1
trigger3 = var(0) = 2
attr = A, HP
animtype  = diagup
damage    = ifelse(var(0)=2, floor(81*root,fvar(3)), floor(90*root,fvar(4))), 5
getpower  = 0, 0
priority  = 5, hit
hitflag = MAFP
guardflag = M
sprpriority = 2
pausetime = 1,7
guard.pausetime = 1,7
sparkxy = -15,-10
sparkno = s4002
guard.sparkno = s4012
hitsound   = s1,23
guardsound = s121,0
ground.type = high
ground.slidetime = 18
ground.hittime  = 22
ground.velocity = -7,-6.5
air.velocity = -7,-6.5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .45
fall = 1
fall.recover = 0
id = 3370
palfx.time = 46                 ;持続時間
palfx.mul = 230,230,250         ;乗算
palfx.sinadd = 255,255,255,5
palfx.add = 16,16,16            ;加算
palfx.color = 1                 ;彩度
palfx.invertall = 1             ;反転

;--------------------------------
[state 3020, ChangeState];消滅ステート
type = ChangeState
trigger1 = var(0) >= 3
trigger1 = movecontact
trigger2 = frontedgebodydist < -50
trigger3 = pos y < -300
trigger4 = pos y > 300
value = 3071

;---------------------------------------------------------------------------
;MAX空中シャイニングクリスタルビット
[Statedef 3400]
type    = A
movetype= A
physics = N
juggle  = 0
poweradd= ifelse(var(8)>0,-1000,ifelse(var(11),-4000,-3000))
velset = 0,0
anim = 3400
ctrl = 0
sprpriority = 2

;----------------------------------
; どこでもキャンセル
; var(8)
;----------------------------------
;MAXゲージ消費
[State 1000, VarSet]
type = VarSet
triggerall = var(8) > 0
trigger1 = time = 0
var(8) = 0
;----------------------------------
;[State 1000, VarSet];強弱判定
;type = VarSet
;trigger1 = time = 0
;var(10) = 0

[State 1000, VarSet];ヒット判定リセット
type = VarSet
trigger1 = time = 0
var(12) = 0

[State 1000, 音を鳴らす];はあああ
type = PlaySnd
trigger1 = animelem = 4
value = 3000, 0
channel = 0
volume = 100

[State 1000, 音を鳴らす];ビット音
type = PlaySnd
trigger1 = animelem = 4
value = 3000, 1
channel = 4
;loop = 1

[state 3000, NotHitBy];無敵
type = NotHitBy
trigger1 = 1
value = SCA

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1420

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1422

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1220
;----------------------------------攻撃ビットHelper
[State 3000, Helper]
type = helper
trigger1 = animelemtime(4)=0
id = 3020
;persistent = 0
name = "Bit_1"
pos = 15,-75
postype = p1
stateno = 3320
helpertype = normal
keyctrl = 0
ownpal = 1

[State 3000, Helper]
type = helper
trigger1 = animelemtime(4)=0
id = 3020
;persistent = 0
name = "Bit_2"
pos = -15,-75
postype = p1
stateno = 3321
helpertype = normal
keyctrl = 0
ownpal = 1

;----------------------------------
[State 3000, SuperPause]
type = SuperPause
trigger1 = time = 1
time = 29
movetime = 29
anim = -1
darken = 0
p2defmul = 1

[State 3000, 超必スパーク]
type = Explod
trigger1 = time = 3
anim = 6010
sprpriority = -9999
postype = p1
pos = 0,-72
bindtime = 1
under = 0
ownpal = 1
supermovetime = 999

[State 3000, 超必スパーク]
type = Explod
trigger1 = Time = 13
anim = 6011
sprpriority = 3
postype = p1
pos = 0,-72
bindtime = 1
under = 0
ownpal = 1
supermovetime = 999

[State 3000, フラッシュ]
type = EnvColor
trigger1 = time = 1
value = 255,255,255
persistent = 0
ignorehitpause = 1
time = 4
under = 2

[State 3000, 暗転]
type = EnvColor
trigger1 = time = 5
value = 0,0,0
persistent = 0
ignorehitpause = 1
time = 24
under = 2

[State 3000, 音を鳴らす];超必音
type = PlaySnd
trigger1 = time = 1
value = 6000, 1
;-------------------------------------
[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 3401

;---------------------------------------------------------------------------
;MAX空中シャイニングクリスタルビット（ビット展開中）
[Statedef 3401]
type    = A
movetype= A
physics = N
juggle  = 1
poweradd= 0
velset = 0,0
anim = 3401
ctrl = 0
sprpriority = 2

[state 3000, NotHitBy];無敵
type = NotHitBy
trigger1 = time<4
value = SCA

[State 1000, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[state 3020, VarSet];多段ヒット防止用
type = VarSet
trigger1 = movehit = 1
var(12) = 1

[State 1000, ヒット定義]
type = HitDef
trigger1 = time = 0
trigger1 = NumTarget(290)=0
attr = A, HP
animtype  = diagup
damage    = floor(231*fvar(4)), 4
getpower  = 0, 0
priority  = 5, hit
hitflag = MAFP
guardflag = MA
sprpriority = 2
pausetime = 0,1
guard.pausetime = 0,1
sparkxy = -15,-75
sparkno = s4002
guard.sparkno = s4012
hitsound   = s1,23
guardsound = s121,0
ground.type = high
ground.slidetime = 18
ground.hittime  = 20
ground.velocity = -7,-9
air.velocity = -7,-9
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .45
fall = 1
fall.recover = 0
id = 3400
nochainid = 290
palfx.time = 46                 ;持続時間
palfx.mul = 230,230,250         ;乗算
palfx.sinadd = 255,255,255,5
palfx.add = 16,16,16            ;加算
palfx.color = 1                 ;彩度
palfx.invertall = 1             ;反転

[State 1000, ステート変更];空中クリスタルシュート
type = ChangeState
triggerall = NumHelper(3020)
triggerall = Helper(3020),stateno != 3022
trigger1 = var(59)=0
trigger1 = command = "弱サイコボール" || command = "強サイコボール"
trigger2 = var(59)>0
trigger2 = helper(3020),movehit
value = 3450

[State 1000, ステート変更];終了
type = ChangeState
;trigger1 = var(10) = 0 ;弱
trigger1 = Time >= 173
trigger2 = roundstate!=2
trigger3 = var(59)=0
trigger3 = command = "a" && command = "b" && command = "x" && command = "y" ;強制終了
value = 3402

;---------------------------------------------------------------------------
;MAX空中シャイニングクリスタルビット（終了）
[Statedef 3402]
type    = A
movetype= A
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
anim = 3402
ctrl = 0
sprpriority = 2

[state 3050, StopSnd]
type = StopSnd
trigger1 = time = 0
channel = 4

[State 1000, VelAdd]
type = VelAdd
trigger1 = animelemtime(5)>=0
y = .42

[State 1000, ステート変更]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel y > 0
value = 3403

;---------------------------------------------------------------------------
;MAX空中シャイニングクリスタルビット（着地）
[Statedef 3403]
type    = S
movetype= A
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
anim = 3403
ctrl = 0
sprpriority = 2

[State 1000, ステート変更]
type = ChangeState
trigger1 = animtime = 0
value = 0
Ctrl = 1

;---------------------------------------------------------------------------
;MAX空中クリスタルシュート（発動）
[Statedef 3450]
type    = A
movetype= A
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
anim = 3150
ctrl = 0
sprpriority = 2

[state 3050, StopSnd]
type = StopSnd
trigger1 = time = 0
channel = 4

[state 3060, VarSet];空中版判定
type = VarSet
trigger1 = time = 0 
var(9) = 2
;----------------------------------攻撃ビットHelper
[State 3000, Helper]
type = helper
;trigger1 = NumHelper(3020) = 0
;trigger1 = NumHelper(3070) = 0
trigger1 = animelem = 4
id = 3070
persistent = 0
name = "Bit_Crystal"
pos = -13,-137
postype = p1
stateno = 3370
helpertype = normal
keyctrl = 0
ownpal = 1

;----------------------------------
[State 3000, SuperPause]
type = SuperPause
trigger1 = time = 1
time = 29
movetime = 29
anim = -1
darken = 0
p2defmul = 1

[State 3000, 超必スパーク]
type = Explod
trigger1 = time = 3
anim = 6010
sprpriority = -9999
postype = p1
pos = -15,-135
bindtime = 1
under = 0
ownpal = 1
supermovetime = 999

[State 3000, 超必スパーク]
type = Explod
trigger1 = Time = 13
anim = 6011
sprpriority = 3
postype = p1
pos = -15,-135
bindtime = 1
under = 0
ownpal = 1
supermovetime = 999

[State 3000, フラッシュ]
type = EnvColor
trigger1 = time = 1
value = 255,255,255
persistent = 0
ignorehitpause = 1
time = 4
under = 2

[State 3000, 暗転]
type = EnvColor
trigger1 = time = 5
value = 0,0,0
persistent = 0
ignorehitpause = 1
time = 24
under = 2

[State 3000, 音を鳴らす];超必音
type = PlaySnd
trigger1 = time = 1
value = 6000, 1
;-------------------------------------
[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 3451

;---------------------------------------------------------------------------
;MAX空中クリスタルシュート（待機）
[Statedef 3451]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
velset = 0,0
anim = 3151
ctrl = 0
sprpriority = 2

[State 3051, ChangeState]
type = ChangeState
trigger1 = var(59)=0
trigger1 = command != "CSホールド"
trigger2 = time>= 140
trigger3 = var(59)>0
trigger4 = roundstate!=2
value = 3460

;---------------------------------------------------------------------------
;MAX空中クリスタルシュート（発射）
[Statedef 3460]
type    = A
movetype= A
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
anim = 3160
ctrl = 0
sprpriority = 2

[State 1000, 音を鳴らす];いっけ〜
type = PlaySnd
trigger1 = time = 0
value = 3100, 0
channel = 0
volume = 100

[State 1000, 音を鳴らす];ビット音
type = PlaySnd
trigger1 = animelem = 2
value = 3100, 1

[State 1000, VelAdd]
type = VelAdd
trigger1 = animelemtime(5)>=0
y = .4

[State 1000, ステート変更];着地ステート
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 3403

;---------------------------------------------------------------------------
;サイキック9
[Statedef 3500]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= ifelse(var(8)>0,-1000,ifelse(var(11),-4000,-3000))
velset = 0,0
anim = 3500
ctrl = 0
sprpriority = 2

;----------------------------------
; どこでもキャンセル
; var(8)
;----------------------------------
;MAXゲージ消費
[State 1000, VarSet]
type = VarSet
triggerall = var(8) > 0
trigger1 = time = 0
var(8) = 0
;----------------------------------
[State 1000, VarSet];コマンド変数リセット
type = VarSet
trigger1 = time = 0
var(13) = 0
;----------------------------------
[State 1000, 音を鳴らす];しょ〜た〜いむ
type = PlaySnd
trigger1 = animelem = 2
value = 3500, 0
channel = 0
volume = 100

[state 3000, NotHitBy];無敵
type = NotHitBy
trigger1 = 1
value = SCA

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1420

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1422

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1220
;----------------------------------
[State 3000, SuperPause]
type = SuperPause
trigger1 = time = 4
time = 29
movetime = 29
anim = -1
darken = 0
p2defmul = 1

[State 3000, 超必スパーク]
type = Explod
trigger1 = time = 6
anim = 6010
sprpriority = -9999
postype = p1
pos = 28,-106
bindtime = 1
under = 0
ownpal = 1
supermovetime = 999

[State 3000, 超必スパーク]
type = Explod
trigger1 = Time = 16
anim = 6011
sprpriority = 3
postype = p1
pos = 28,-106
bindtime = 1
under = 0
ownpal = 1
supermovetime = 999

[State 3000, フラッシュ]
type = EnvColor
trigger1 = time = 4
value = 255,255,255
persistent = 0
ignorehitpause = 1
time = 4
under = 2

[State 3000, 暗転]
type = EnvColor
trigger1 = time = 8
value = 0,0,0
persistent = 0
ignorehitpause = 1
time = 24
under = 2

[State 3000, 音を鳴らす];超必音
type = PlaySnd
trigger1 = time = 4
value = 6000, 1
;-------------------------------------
[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 3501

;---------------------------------------------------------------------------
;サイキック9（1段目:ヒット後乱舞移行）
[Statedef 3501]
type    = S
movetype= A
physics = N
juggle  = 0
poweradd= 0
velset = 8,0
anim = 3501
ctrl = 0
sprpriority = 2

[State 200, 音を鳴らす];尻餅
type = PlaySnd
trigger1 = animelemtime(7) = 0
value = 1, 18

[State 1000, StateTypeSet]
type = StateTypeSet
trigger1 = animelemtime(3) = 0
Physics = S

[State 801, Explod];衝撃尻餅
type = Explod
trigger1 = animelemtime(7) = 0
anim = 4052
ID = 4052
pos = -10, 0
postype = p1
facing = 1
sprpriority = 0
ownpal = 1
removeongethit = 1

[State 2100, 残像]
type = AfterImage
trigger1 = time = 0
time = 16
length = 7      ;残像の表示時間
timegap = 2     ;時間差
framegap = 2    ;フレーム差
palbright = 0, 0, 90
palcontrast = 110, 110, 180
PalAdd = 20,20,40
;palmul = 1, 1, 1
trans = Add1

[State 1000, ヒット定義]
type = HitDef
trigger1 = time = 0
attr = S, HA
animtype  = hard
damage    = 0, 5
getpower  = 0, 0
priority  = 6, hit
hitflag = MAF
guardflag = M
sprpriority = 2
pausetime = 10,9
guard.pausetime = 10,9
sparkxy = -15,-75
sparkno = s4003
guard.sparkno = s4012
hitsound   = s1,3
guardsound = s121,0
ground.type = high
ground.slidetime = 17
ground.hittime  = 20
ground.velocity = 0
guard.ctrltime = 28
air.velocity = -4,-6
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .47
air.fall = 1
fall.recover = 0
forcestand = 1    ;強制立たせ
numhits = 0
id = 3500
nochainid = 290

;-------------------------------------
[State 3000, EnvColor];フラッシュ
type = EnvColor
trigger1 = movehit
time = 1
value = 255,255,255
under = 0
persistent = 0
ignorehitpause = 1

[State 1000, ステート変更];2段目へ
type = ChangeState
trigger1 = animelemtime(1)>0
trigger1 = movehit
value = 3502

[State 1000, ステート変更]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;サイキック9（2段目）
[Statedef 3502]
type    = S
movetype= A
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
anim = 3502
ctrl = 0
sprpriority = 2

;----------------------------------
[State 1000, VarSet];コマンド変数
type = VarSet
triggerall = animelemtime(3)>=0
triggerall = animelemtime(5)<0
trigger1 = var(59) = 0
trigger1 = command = "x"
trigger2 = var(59)>4
trigger3 = var(59)>0
trigger3 = random<=var(59)*4
var(13) = 1
;----------------------------------
[State 1000, 音を鳴らす];いー
type = PlaySnd
trigger1 = animelem = 3
value = 3500, 1
channel = 0
volume = 100

[State 2100, 残像]
type = AfterImage
trigger1 = time = 0
time = 0

[State 1000, Width]
type = Width
trigger1 = 1
edge = 50,0

[State 200, 音を鳴らす];尻餅
type = PlaySnd
trigger1 = animelemtime(8) = 0
value = 1, 18

[State 801, Explod];衝撃尻餅
type = Explod
trigger1 = animelemtime(8) = 0
anim = 4052
ID = 4052
pos = -10, 0
postype = p1
facing = 1
sprpriority = 0
ownpal = 1
removeongethit = 1

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelemtime(3)=0
attr = S, HA
animtype  = hard
damage    = 42, 5
getpower  = 0, 0
priority  = 6, hit
hitflag = MAF
guardflag = M
sprpriority = 2
pausetime = 10,9
guard.pausetime = 10,9
sparkxy = -15,-66
sparkno = s4003
guard.sparkno = s4012
hitsound   = s1,3
guardsound = s121,0
ground.type = high
ground.slidetime = 17
ground.hittime  = 25
ground.velocity = 0
guard.ctrltime = 28
air.velocity = -4,-5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .47
air.fall = 1
fall.recover = 0
forcestand = 1    ;強制立たせ
id = 3500
nochainid = 290

;-------------------------------------
[State 3000, EnvColor];フラッシュ
type = EnvColor
trigger1 = movehit
time = 1
value = 255,255,255
under = 0
persistent = 0
ignorehitpause = 1

[State 1000, ステート変更];3段目へ
type = ChangeState
trigger1 = animelemtime(4)>0
trigger1 = var(13) = 1
value = 3503

[State 1000, ステート変更]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;サイキック9（3段目）
[Statedef 3503]
type    = S
movetype= A
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
anim = 3503
ctrl = 0
sprpriority = 2

;----------------------------------
[State 1000, VarSet];コマンド変数リセット
type = VarSet
trigger1 = time = 0
var(13) = 0

[State 1000, VarSet];コマンド変数セット
type = VarSet
triggerall = animelemtime(5)>=0
triggerall = animelemtime(7)<0
trigger1 = var(59) = 0
trigger1 = command = "a"
trigger2 = var(59)>5
trigger3 = var(59)>0
trigger3 = random<=var(59)*4
var(13) = 1
;----------------------------------
[State 1000, 音を鳴らす];ある
type = PlaySnd
trigger1 = animelem = 5
value = 3500, 2
channel = 0
volume = 100

[State 1000, Width]
type = Width
trigger1 = 1
edge = 50,0

[State 200, 音を鳴らす];尻餅
type = PlaySnd
trigger1 = animelemtime(11) = 0
value = 1, 18

[State 801, Explod];衝撃尻餅
type = Explod
trigger1 = animelemtime(11) = 0
anim = 4052
ID = 4052
pos = -10, 0
postype = p1
facing = 1
sprpriority = 0
ownpal = 1
removeongethit = 1

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelemtime(5)=0
attr = S, HA
animtype  = hard
damage    = 42, 5
getpower  = 0, 0
priority  = 6, hit
hitflag = MAF
guardflag = M
sprpriority = 2
pausetime = 10,9
guard.pausetime = 10,9
sparkxy = -20,-68
sparkno = s4003
guard.sparkno = s4012
hitsound   = s1,4
guardsound = s121,0
ground.type = high
ground.slidetime = 17
ground.hittime  = 35
ground.velocity = 0
guard.ctrltime = 28
air.velocity = -4,-5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .47
air.fall = 1
fall.recover = 0
forcestand = 1    ;強制立たせ
id = 3500
nochainid = 290

;-------------------------------------
[State 3000, EnvColor];フラッシュ
type = EnvColor
trigger1 = movehit
time = 1
value = 255,255,255
under = 0
persistent = 0
ignorehitpause = 1

[State 1000, ステート変更]
type = ChangeState
trigger1 = animelemtime(6)>0
trigger1 = var(13) = 1
value = 3504

[State 1000, ステート変更]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;サイキック9（4段目）
[Statedef 3504]
type    = S
movetype= A
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
anim = 3504
ctrl = 0
sprpriority = 2

;----------------------------------
[State 1000, VarSet];コマンド変数リセット
type = VarSet
trigger1 = time = 0
var(13) = 0

[State 1000, VarSet];コマンド変数セット
type = VarSet
triggerall = animelemtime(5)>=0
triggerall = animelemtime(7)<0
trigger1 = var(59) = 0
trigger1 = command = "y"
trigger2 = var(59)>6
trigger3 = var(59)>0
trigger3 = random<=var(59)*4
var(13) = 1
;----------------------------------
[State 1000, 音を鳴らす];さん
type = PlaySnd
trigger1 = animelem = 5
value = 3500, 3
channel = 0
volume = 100

[State 1000, Width]
type = Width
trigger1 = 1
edge = 50,0

[State 200, 音を鳴らす];尻餅
type = PlaySnd
trigger1 = animelemtime(11) = 0
value = 1, 18

[State 801, Explod];衝撃尻餅
type = Explod
trigger1 = animelemtime(11) = 0
anim = 4052
ID = 4052
pos = -10, 0
postype = p1
facing = 1
sprpriority = 0
ownpal = 1
removeongethit = 1

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelemtime(5)=0
attr = S, HA
animtype  = hard
damage    = 42, 5
getpower  = 0, 0
priority  = 6, hit
hitflag = MAF
guardflag = M
sprpriority = 2
pausetime = 10,9
guard.pausetime = 10,9
sparkxy = -22,-69
sparkno = s4003
guard.sparkno = s4012
hitsound   = s1,3
guardsound = s121,0
ground.type = low
ground.slidetime = 17
ground.hittime  = 35
ground.velocity = 0
guard.ctrltime = 28
air.velocity = -4,-5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .47
air.fall = 1
fall.recover = 0
forcestand = 1    ;強制立たせ
id = 3500
nochainid = 290

;-------------------------------------
[State 3000, EnvColor];フラッシュ
type = EnvColor
trigger1 = movehit
time = 1
value = 255,255,255
under = 0
persistent = 0
ignorehitpause = 1

[State 1000, ステート変更]
type = ChangeState
trigger1 = animelemtime(6)>0
trigger1 = var(13) = 1
value = 3505

[State 1000, ステート変更]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;サイキック9（5段目）
[Statedef 3505]
type    = S
movetype= A
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
anim = 3505
ctrl = 0
sprpriority = 2

;----------------------------------
[State 1000, VarSet];コマンド変数リセット
type = VarSet
trigger1 = time = 0
var(13) = 0

[State 1000, VarSet];コマンド変数セット
type = VarSet
triggerall = animelemtime(8)>=0
triggerall = animelemtime(11)<0
trigger1 = var(59) = 0
trigger1 = command = "x"
trigger2 = var(59)>6
trigger3 = var(59)>0
trigger3 = random<=var(59)*4
var(13) = 1
;----------------------------------
[State 1000, 音を鳴らす];すー
type = PlaySnd
trigger1 = animelem = 8
value = 3500, 4
channel = 0
volume = 100

[State 1000, Width]
type = Width
trigger1 = 1
edge = 50,0

[State 200, 音を鳴らす];尻餅
type = PlaySnd
trigger1 = animelemtime(15) = 0
value = 1, 18

[State 801, Explod];衝撃尻餅
type = Explod
trigger1 = animelemtime(15) = 0
anim = 4052
ID = 4052
pos = -10, 0
postype = p1
facing = 1
sprpriority = 0
ownpal = 1
removeongethit = 1

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelemtime(8)=0
attr = S, HA
animtype  = hard
damage    = 33, 5
getpower  = 0, 0
priority  = 6, hit
hitflag = MAF
guardflag = M
sprpriority = 2
pausetime = 10,9
guard.pausetime = 10,9
sparkxy = -20,-79
sparkno = s4003
guard.sparkno = s4012
hitsound   = s1,3
guardsound = s121,0
ground.type = high
ground.slidetime = 17
ground.hittime  = 35
ground.velocity = 0
guard.ctrltime = 28
air.velocity = -4,-5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .47
air.fall = 1
fall.recover = 0
forcestand = 1    ;強制立たせ
id = 3500
nochainid = 290

;-------------------------------------
[State 3000, EnvColor];フラッシュ
type = EnvColor
trigger1 = movehit
time = 1
value = 255,255,255
under = 0
persistent = 0
ignorehitpause = 1

[State 1000, ステート変更]
type = ChangeState
trigger1 = animelemtime(10)>0
trigger1 = var(13) = 1
value = 3506

[State 1000, ステート変更]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;サイキック9（6段目）
[Statedef 3506]
type    = S
movetype= A
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
anim = 3506
ctrl = 0
sprpriority = 2

;----------------------------------
[State 1000, VarSet];コマンド変数リセット
type = VarSet
trigger1 = time = 0
var(13) = 0

[State 1000, VarSet];コマンド変数セット
type = VarSet
triggerall = animelemtime(7)>=0
triggerall = animelemtime(10)<0
trigger1 = var(59) = 0
trigger1 = command = "a"
trigger2 = var(59)>6
trigger3 = var(59)>0
trigger3 = random<=var(59)*4
var(13) = 1
;----------------------------------
[State 1000, 音を鳴らす];うー
type = PlaySnd
trigger1 = animelem = 7
value = 3500, 5
channel = 0
volume = 100

[State 1000, Width]
type = Width
trigger1 = 1
edge = 50,0

[State 200, 音を鳴らす];尻餅
type = PlaySnd
trigger1 = animelemtime(12) = 0
value = 1, 18

[State 801, Explod];衝撃尻餅
type = Explod
trigger1 = animelemtime(12) = 0
anim = 4052
ID = 4052
pos = -10, 0
postype = p1
facing = 1
sprpriority = 0
ownpal = 1
removeongethit = 1

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelemtime(7)=0
attr = S, HA
animtype  = hard
damage    = 33, 5
getpower  = 0, 0
priority  = 6, hit
hitflag = MAF
guardflag = M
sprpriority = 2
pausetime = 10,9
guard.pausetime = 10,9
sparkxy = -20,-55
sparkno = s4003
guard.sparkno = s4012
hitsound   = s1,5
guardsound = s121,0
ground.type = high
ground.slidetime = 17
ground.hittime  = 35
ground.velocity = 0
guard.ctrltime = 28
air.velocity = -4,-5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .47
air.fall = 1
fall.recover = 0
forcestand = 1    ;強制立たせ
id = 3500
nochainid = 290

;-------------------------------------
[State 3000, EnvColor];フラッシュ
type = EnvColor
trigger1 = movehit
time = 1
value = 255,255,255
under = 0
persistent = 0
ignorehitpause = 1

[State 1000, ステート変更]
type = ChangeState
trigger1 = animelemtime(9)>0
trigger1 = var(13) = 1
value = 3507

[State 1000, ステート変更]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;サイキック9（7段目）
[Statedef 3507]
type    = S
movetype= A
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
anim = 3507
ctrl = 0
sprpriority = 2

;----------------------------------
[State 1000, VarSet];コマンド変数リセット
type = VarSet
trigger1 = time = 0
var(13) = 0

[State 1000, VarSet];コマンド変数セット
type = VarSet
triggerall = animelemtime(5)>=0
triggerall = animelemtime(7)<0
trigger1 = var(59) = 0
trigger1 = command = "y"
trigger2 = var(59)>7
trigger3 = var(59)>0
trigger3 = random<=var(59)*4
var(13) = 1
;----------------------------------
[State 1000, 音を鳴らす];りう
type = PlaySnd
trigger1 = animelem = 5
value = 3500, 6
channel = 0
volume = 100

[State 1000, Width]
type = Width
trigger1 = 1
edge = 50,0

[State 200, 音を鳴らす];尻餅
type = PlaySnd
trigger1 = animelemtime(9) = 0
value = 1, 18

[State 801, Explod];衝撃尻餅
type = Explod
trigger1 = animelemtime(9) = 0
anim = 4052
ID = 4052
pos = 6, 0
postype = p1
facing = 1
sprpriority = 0
ownpal = 1
removeongethit = 1

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelemtime(5)=0
attr = S, HA
animtype  = hard
damage    = 33, 5
getpower  = 0, 0
priority  = 6, hit
hitflag = MAF
guardflag = M
sprpriority = 2
pausetime = 10,9
guard.pausetime = 10,9
sparkxy = -18,-72
sparkno = s4003
guard.sparkno = s4012
hitsound   = s1,4
guardsound = s121,0
ground.type = high
ground.slidetime = 17
ground.hittime  = 35
ground.velocity = 0
guard.ctrltime = 28
air.velocity = -4,-5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .47
air.fall = 1
fall.recover = 0
forcestand = 1    ;強制立たせ
id = 3500
nochainid = 290

;-------------------------------------
[State 3000, EnvColor];フラッシュ
type = EnvColor
trigger1 = movehit
time = 1
value = 255,255,255
under = 0
persistent = 0
ignorehitpause = 1

[State 1000, ステート変更]
type = ChangeState
trigger1 = animelemtime(6)>0
trigger1 = var(13) = 1
value = 3508

[State 1000, ステート変更]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;サイキック9（8段目）
[Statedef 3508]
type    = S
movetype= A
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
anim = 3508
ctrl = 0
sprpriority = 2

;----------------------------------
[State 1000, VarSet];コマンド変数リセット
type = VarSet
trigger1 = time = 0
var(13) = 0

[State 1000, VarSet];コマンド変数セット
type = VarSet
triggerall = animelemtime(4)>=0
triggerall = animelemtime(7)<0
trigger1 = var(59) = 0
trigger1 = command = "b"
trigger2 = var(59)>7
trigger3 = var(59)>0
trigger3 = random<=var(59)*4
var(13) = 1
;----------------------------------
[State 1000, 音を鳴らす];ちー
type = PlaySnd
trigger1 = animelem = 4
value = 3500, 7
channel = 0
volume = 100

[State 1000, Width]
type = Width
trigger1 = 1
edge = 50,0

[State 200, 音を鳴らす];尻餅
type = PlaySnd
trigger1 = animelemtime(10) = 0
value = 1, 18

[State 801, Explod];衝撃尻餅
type = Explod
trigger1 = animelemtime(10) = 0
anim = 4052
ID = 4052
pos = -10, 0
postype = p1
facing = 1
sprpriority = 0
ownpal = 1
removeongethit = 1

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelemtime(4)=0
attr = S, HA
animtype  = hard
damage    = 33, 5
getpower  = 0, 0
priority  = 6, hit
hitflag = MAF
guardflag = M
sprpriority = 2
pausetime = 10,9
guard.pausetime = 10,9
sparkxy = -21,-92
sparkno = s4003
guard.sparkno = s4012
hitsound   = s1,3
guardsound = s121,0
ground.type = high
ground.slidetime = 17
ground.hittime  = 35
ground.velocity = 1
guard.ctrltime = 28
air.velocity = -4,-5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .47
air.fall = 1
fall.recover = 0
forcestand = 1    ;強制立たせ
id = 3500
nochainid = 290

;-------------------------------------
[State 3000, EnvColor];フラッシュ
type = EnvColor
trigger1 = movehit
time = 1
value = 255,255,255
under = 0
persistent = 0
ignorehitpause = 1

[State 1000, ステート変更]
type = ChangeState
trigger1 = animelemtime(6)>0
trigger1 = var(13) = 1
value = 3509

[State 1000, ステート変更]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;サイキック9（9段目）
[Statedef 3509]
type    = S
movetype= A
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
anim = 3509
ctrl = 0
sprpriority = 2

;----------------------------------
[State 1000, VarSet];コマンド変数リセット
type = VarSet
trigger1 = time = 0
var(13) = 0

[State 1000, VarSet];コマンド変数セット
type = VarSet
triggerall = var(13) = 0
triggerall = animelemtime(11)>=0
triggerall = animelemtime(13)<0
trigger1 = var(59) = 0
trigger1 = command = "ファイヤーソード"
trigger2 = var(59)>5
trigger2 = random%3=0
var(13) = 1

[State 1000, VarSet];コマンド変数セット
type = VarSet
triggerall = var(13) = 0
triggerall = animelemtime(11)>=0
triggerall = animelemtime(13)<0
trigger1 = var(59) = 0
trigger1 = command = "サイコソード"
trigger2 = var(59)>5
trigger2 = random%3=1
var(13) = 2

[State 1000, VarSet];コマンド変数セット
type = VarSet
triggerall = var(13) = 0
triggerall = animelemtime(11)>=0
triggerall = animelemtime(13)<0
trigger1 = var(59) = 0
trigger1 = command = "セーラー"
trigger2 = var(59)>5
trigger2 = random%3=2
var(13) = 3
;----------------------------------
[State 1000, 音を鳴らす];ぱー
type = PlaySnd
trigger1 = animelem = 11
value = 3500, 8
channel = 0
volume = 100

[State 1000, Width]
type = Width
trigger1 = 1
edge = 50,0

[State 200, 音を鳴らす];尻餅
type = PlaySnd
trigger1 = animelemtime(15) = 0
value = 1, 18

[State 801, Explod];衝撃尻餅
type = Explod
trigger1 = animelemtime(15) = 0
anim = 4052
ID = 4052
pos = -10, 0
postype = p1
facing = 1
sprpriority = 0
ownpal = 1
removeongethit = 1

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelemtime(11)=0
attr = S, HA
animtype  = hard
damage    = 33, 5
getpower  = 0, 0
priority  = 6, hit
hitflag = MAF
guardflag = M
sprpriority = 2
pausetime = 10,9
guard.pausetime = 10,9
sparkxy = -20,-95
sparkno = s4003
guard.sparkno = s4012
hitsound   = s1,3
guardsound = s121,0
ground.type = high
ground.slidetime = 17
ground.hittime  = 48
ground.velocity = 1
guard.ctrltime = 28
air.velocity = -4,-5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .47
air.fall = 1
fall.recover = 0
forcestand = 1    ;強制立たせ
id = 3500
nochainid = 290

;-------------------------------------
[State 3000, EnvColor];フラッシュ
type = EnvColor
trigger1 = movehit
time = 1
value = 255,255,255
under = 0
persistent = 0
ignorehitpause = 1

[State 1000, ステート変更]
type = ChangeState
trigger1 = animelemtime(12)>0
trigger1 = var(13) > 0
value = 3550 + (var(13)-1)*10

[State 1000, ステート変更]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;サイキック9（ファイヤーソードフィニッシュ）
[Statedef 3550]
type    = S
movetype= A
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
anim = 3550
ctrl = 0
sprpriority = 2

[State 1000, 音を鳴らす];ふぁいあーそーど
type = PlaySnd
trigger1 = animelem = 5
value = 3500, 10
channel = 0
volume = 100

[State 1000, 音を鳴らす];ワープ効果音
type = PlaySnd
trigger1 = AnimElem = 23
value = 1500, 1
;----------------------------------
[state 11000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1000, Width]
type = Width
trigger1 = 1
edge = 50,0

[State 801, Explod];炎エフェクト
type = Explod
trigger1 = NumExplod(3555)=0
trigger1 = animelemtime(17)=0
anim = 3555
ID = 3555
pos = 75, 0
postype = p1
facing = 1
sprpriority = 3
ownpal = 1
bindtime = -1
removetime = -2     ;アニメ終了時消滅
ignorehitpause = 1  ;hitpause中は動かない
removeongethit = 1  ;攻撃を受けて消える

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelemtime(15)=0
attr = S, HA
animtype  = hard
damage    = 66, 5
getpower  = 0, 0
priority  = 6, hit
hitflag = MAF
guardflag = M
sprpriority = 2
pausetime = 31,30
guard.pausetime = 31,30
sparkxy = -10,-28
sparkno = s4003
guard.sparkno = s4012
hitsound   = s1,14
guardsound = s121,0
ground.type = high
ground.slidetime = 17
ground.hittime  = 35
ground.velocity = 0,0
guard.ctrltime = 33
air.hittime = 99
air.velocity = 0,0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .45
air.fall = 1
fall.recover = 0
;forcestand = 1    ;強制立たせ
id = 3550
nochainid = 290
envshake.time = 3
envshake.ampl = -8
kill = 0

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelemtime(17)=0
attr = S, HA
animtype  = back
damage    = 66, 5
getpower  = 0, 0
priority  = 6, hit
hitflag = MAF
guardflag = M
sprpriority = 2
pausetime = 11,10
guard.pausetime = 11,10
sparkxy = -10,-75
sparkno = s4003
guard.sparkno = s4012
hitsound   = s1,20
guardsound = s121,0
ground.type = high
ground.slidetime = 17
ground.hittime  = 35
ground.velocity = -5,-8
guard.velocity = -9
guard.ctrltime = 33
air.hittime = 99
air.velocity = -5,-8
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .45
fall = 1
fall.recover = 0
;forcestand = 1    ;強制立たせ
id = 3550
nochainid = 290
palfx.time = 42
palfx.mul = 240,200,100
palfx.sinadd = 63,65,68,18
palfx.add = 230,180,124
palfx.invertall = 1
kill = 0

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelemtime(18)=0
attr = S, HA
animtype  = back
damage    = 66, 5
getpower  = 0, 0
priority  = 6, hit
hitflag = MAF
guardflag = M
sprpriority = 2
pausetime = 11,10
guard.pausetime = 11,10
sparkxy = -10,-90
sparkno = s4003
guard.sparkno = s4012
hitsound   = s1,20
guardsound = s121,0
ground.type = high
ground.slidetime = 17
ground.hittime  = 35
ground.velocity = -5,-8
guard.ctrltime = 33
guard.velocity = -9
air.hittime = 99
air.velocity = -5,-8
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .45
fall = 1
fall.recover = 0
;forcestand = 1    ;強制立たせ
id = 290
nochainid = 290
kill = 1

;-------------------------------------
[State 3000, EnvColor];フラッシュ
type = EnvColor
trigger1 = movehit
trigger1 = animelemtime(15)>=0
trigger1 = animelemtime(16)<0
time = 1
value = 255,255,255
under = 0
persistent = 0
ignorehitpause = 1

[State 3000, SuperPause]
type = SuperPause
trigger1 = time = 1
time = 29-1
movetime = 29-1
anim = -1
darken = 0
p2defmul = 1

[State 3000, 暗転]
type = EnvColor
trigger1 = time = 1
value = 0,0,0
persistent = 0
ignorehitpause = 1
time = 24+4
under = 2

[State 3000, 音を鳴らす];超必音
type = PlaySnd
trigger1 = time = 1
value = 6000, 1

[State 1000, ステート変更]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;サイキック9（サイコソードフィニッシュ）
[Statedef 3560]
type    = S
movetype= A
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
anim = 3560
ctrl = 0
sprpriority = 2

[State 1000, 音を鳴らす];そーど
type = PlaySnd
trigger1 = animelem = 14
value = 1400, 1
;----------------------------------
[state 1200, VelSet]
type = VelSet
trigger1 = animelem = 14
y = -10

[state 1200, VelAdd]
type = VelAdd
trigger1 = animelemtime(14)>=0
y = 0.42

[state 11000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1000, Width]
type = Width
trigger1 = 1
edge = 50,0

[State 801, Explod];ソードエフェクト1
type = Explod
trigger1 = NumExplod(3565)=0
trigger1 = animelemtime(10)=0
anim = 3565
ID = 3565
pos = 0, 0
postype = p1
facing = 1
sprpriority = 3
ownpal = 1
bindtime = -1
removetime = -1
ignorehitpause = 0  ;hitpause中は動かない
removeongethit = 1  ;攻撃を受けて消える

[State 801, Explod];ソードエフェクト2
type = Explod
trigger1 = NumExplod(1421)=0
trigger1 = animelem = 17
anim = 1421
ID = 1421
pos = 0, 0
postype = p1
facing = 1
sprpriority = 3
ownpal = 1
;bindtime = -1
;removetime = -1
ignorehitpause = 0  ;hitpause中は動かない
removeongethit = 1  ;攻撃を受けて消える

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 17
ID = 3565

[State 1905, StateTypeSet]
type = StateTypeSet
Trigger1 = animelem = 14
StateType = A

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelemtime(13)=0
attr = S, HA
animtype  = hard
damage    = 66, 5
getpower  = 0, 0
priority  = 6, hit
hitflag = MAF
guardflag = M
sprpriority = 2
pausetime = 32,30
guard.pausetime = 32,30
sparkxy = -10,-35
sparkno = s4003
guard.sparkno = s4012
hitsound   = s1,9
guardsound = s121,0
ground.type = low
ground.slidetime = 17
ground.hittime  = 33
ground.velocity = -1
guard.ctrltime = 25
air.hittime = 99
air.velocity = 0,0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .45
air.fall = 1
fall.recover = 0
;forcestand = 1    ;強制立たせ
id = 3560
nochainid = 290
envshake.time = 3
envshake.ampl = -8
kill = 0

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelemtime(14)=0
attr = A, HA
animtype  = up
damage    = 58, 5
getpower  = 0, 0
priority  = 6, hit
hitflag = MAF
guardflag = M
sprpriority = 2
pausetime = 5,4
guard.pausetime = 5,4
sparkxy = -10,-75
sparkno = s4003
guard.sparkno = s4012
hitsound   = s1,9
guardsound = s121,0
ground.type = high
ground.slidetime = 17
ground.hittime  = 35
ground.velocity = 0,-8
guard.velocity = -2
guard.ctrltime = 33
air.hittime = 99
air.velocity = 0,-8
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .45
fall = 1
fall.recover = 0
;forcestand = 1    ;強制立たせ
id = 3550
nochainid = 290
kill = 0

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelemtime(15)=0
trigger2 = animelemtime(15)=3
trigger3 = animelemtime(15)=6
trigger4 = animelemtime(15)=9
;trigger5 = animelemtime(15)=12
attr = A, HA
animtype  = up
damage    = 45, 5
getpower  = 0, 0
priority  = 6, hit
hitflag = MAF
guardflag = M
sprpriority = 2
pausetime = 3,2
guard.pausetime = 3,2
sparkxy = -10,-90
sparkno = s4003
guard.sparkno = s4012
hitsound   = s1,9
guardsound = s121,0
ground.type = high
ground.slidetime = 17
ground.hittime  = 35
ground.velocity = 0,-8
guard.ctrltime = 33
guard.velocity = -3
air.hittime = 99
air.velocity = 0,-8
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .45
fall = 1
fall.recover = 0
;forcestand = 1    ;強制立たせ
id = 3560
nochainid = 290
kill = 0

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelemtime(15)=12
attr = A, HA
animtype  = up
damage    = 50, 5
getpower  = 0, 0
priority  = 6, hit
hitflag = MAF
guardflag = M
sprpriority = 2
pausetime = 3,2
guard.pausetime = 3,2
sparkxy = -10,-90
sparkno = s4003
guard.sparkno = s4012
hitsound   = s1,9
guardsound = s121,0
ground.type = high
ground.slidetime = 17
ground.hittime  = 35
ground.velocity = -3,-8
guard.ctrltime = 33
guard.velocity = -3
air.hittime = 99
air.velocity = -3,-8
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .45
fall = 1
fall.recover = 0
;forcestand = 1    ;強制立たせ
id = 290
nochainid = 290
kill = 1

;-------------------------------------
[State 3000, EnvColor];フラッシュ
type = EnvColor
trigger1 = movehit
trigger1 = animelem=13
time = 1
value = 255,255,255
under = 0
persistent = 0
ignorehitpause = 1

[State 3000, SuperPause]
type = SuperPause
trigger1 = time = 1
time = 29-1
movetime = 29-1
anim = -1
darken = 0
p2defmul = 1

[State 3000, 暗転]
type = EnvColor
trigger1 = time = 1
value = 0,0,0
persistent = 0
ignorehitpause = 1
time = 24+4
under = 2

[State 3000, 音を鳴らす];超必音
type = PlaySnd
trigger1 = time = 1
value = 6000, 1

[State 1000, ステート変更]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 3561

;---------------------------------------------------------------------------
;サイキック9（サイコソードフィニッシュ着地）
[Statedef 3561]
type    = S
movetype= A
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
anim = 3561
ctrl = 0
sprpriority = 2

[State 1000, 音を鳴らす];ワープ効果音
type = PlaySnd
trigger1 = time = 1
value = 1500, 1

[state 1200, PosSet]
type = PosSet
trigger1 = time = 0
y = 0

[state 1200, VelSet]
type = VelSet
trigger1 = time = 0
x = 0
y = 0

[state 11000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1200, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;サイキック9（セーラーフィニッシュ）
[Statedef 3570]
type    = S
movetype= A
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
anim = 3570
ctrl = 0
sprpriority = 2

[State 1000, 音を鳴らす];たーん
type = PlaySnd
trigger1 = animelem = 15
value = 3500, 9
channel = 0
volume = 100

[State 1000, 音を鳴らす];ワープ効果音
type = PlaySnd
trigger1 = AnimElem = 21
value = 1500, 1
;----------------------------------
[state 11000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1000, Width]
type = Width
trigger1 = 1
edge = 50,0

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelemtime(15)=0
attr = S, HA
animtype  = hard
damage    = 75, 10
getpower  = 0, 0
priority  = 6, hit
hitflag = MAF
guardflag = M
sprpriority = 2
pausetime = 21,20
guard.pausetime = 31,30
sparkxy = -17,-68
sparkno = s4003
guard.sparkno = s4012
hitsound   = s1,16
guardsound = s121,0
ground.type = low
ground.slidetime = 17
ground.hittime  = 33
ground.velocity = .5
guard.ctrltime = 25
air.hittime = 99
air.velocity = 0,0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .45
air.fall = 1
fall.recover = 0
;forcestand = 1    ;強制立たせ
id = 3570
nochainid = 290
envshake.time = 3
envshake.ampl = -8
kill = 1

;-------------------------------------
[State 3000, EnvColor];フラッシュ
type = EnvColor
trigger1 = movehit
trigger1 = animelem=15
time = 1
value = 255,255,255
under = 0
persistent = 0
ignorehitpause = 1

[State 3000, SuperPause]
type = SuperPause
trigger1 = time = 1
time = 29-1
movetime = 29-1
anim = -1
darken = 0
p2defmul = 1

[State 3000, 暗転]
type = EnvColor
trigger1 = time = 1
value = 0,0,0
persistent = 0
ignorehitpause = 1
time = 24+4
under = 2

[State 3000, 音を鳴らす];超必音
type = PlaySnd
trigger1 = time = 1
value = 6000, 1

[state 1900, TargetState];ワイヤーダメージ移行
type = TargetState
trigger1 = NumTarget(3570)
trigger1 = MoveHit
value = 3575
id = 3570
persistent = 0
ignorehitpause = 0

[State 1000, ステート変更]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;サイキック9（セーラーフィニッシュ）
;相手やられ（ワイヤーダメージ）
[Statedef 3575]
type    = A
movetype= H
physics = N
velset = 0,0

;---------------------------------------------
[state 1050, SelfState];Helperは返却
type = SelfState
trigger1 = ishelper
value = PrevStateNo
;---------------------------------------------

[State 1905, ChangeAnim2]
type = ChangeAnim2
Trigger1 = Time = 0
value = 3575

[State 1905, VelSet]
type = VelSet
trigger1 = animelem = 2
x = -11
y = -1

[State 1000, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 1905, ScreenBound];画面固定
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,1

[State 1905, ChangeState]
type = ChangeState
triggerall = animelemtime(2)>=0
trigger1 = backEdgebodydist <= 5
trigger2 = time >=100
value = 3576

;---------------------------------------------------------------------------
;サイキック9（セーラーフィニッシュ）
;相手やられ（WD壁バウンド）
[Statedef 3576]
type    = A
movetype= H
physics = N
velset = 0,0

[State 1906, ChangeAnim2]
type = ChangeAnim2
Trigger1 = Time = 0
value = 3576

[State 1906, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 0
value = F7,2

[State 1000, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 1905, ScreenBound];画面固定
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,1

[State 801, Explod]
type = Explod
trigger1 = Time = 0
anim = f72
ID = 1056
pos = -30, -35
postype = p1
facing = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 1906, EnvShake]
type = EnvShake
trigger1 = time = 0
time = 3
ampl = -8
freq = 95
phase = 95

[State 1905, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 3577

;---------------------------------------------------------------------------
;サイキック9（セーラーフィニッシュ）
;相手やられ（WD跳ね返り）
[Statedef 3577]
type    = A
movetype= H
physics = N
velset = 4,-7.5

[State 1907, ChangeAnim]
type = ChangeAnim
Trigger1 = Time = 0
value = 5050

[State 1000, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 1905, ScreenBound];画面固定
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,1

[State 1905, VelAdd]
type = VelAdd
Trigger1 = 1
y = .35

[State 1905, SelfState] 
type = SelfState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 5100 

;===========================================================================
; MAX2
;===========================================================================
;---------------------------------------------------------------------------
;MAX2
;サイコメドレー
[Statedef 3600]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= ifelse(var(8)>0,-1000,ifelse(var(11),-4000,-3000))
velset = 0,0
anim = 3500
ctrl = 0
sprpriority = 2

;----------------------------------
; どこでもキャンセル
; var(8)
;----------------------------------
;MAXゲージ消費
[State 1000, VarSet]
type = VarSet
triggerall = var(8) > 0
trigger1 = time = 0
var(8) = 0
;----------------------------------
[State 1000, VarSet];コマンド変数リセット
type = VarSet
trigger1 = time = 0
var(13) = 0
;----------------------------------
[State 1000, 音を鳴らす];あ、いくよ〜
type = PlaySnd
trigger1 = animelem = 2
value = 3600, 0
channel = 0
volume = 100

[state 3000, NotHitBy];無敵
type = NotHitBy
trigger1 = 1
value = SCA

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1420

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1422

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
ID = 1220
;----------------------------------
[State 3000, SuperPause]
type = SuperPause
trigger1 = time = 4
time = 29
movetime = 29
anim = -1
darken = 0
p2defmul = 1

[State 3000, 超必スパーク]
type = Explod
trigger1 = time = 6
anim = 6020
sprpriority = -9999
postype = p1
pos = 28,-106
bindtime = 1
under = 0
ownpal = 1
supermovetime = 999

[State 3000, 超必スパーク]
type = Explod
trigger1 = Time = 16
anim = 6021
sprpriority = 3
postype = p1
pos = 28,-106
bindtime = 1
under = 0
ownpal = 1
supermovetime = 999

[State 3000, フラッシュ]
type = EnvColor
trigger1 = time = 4
value = 255,255,255
persistent = 0
ignorehitpause = 1
time = 4
under = 2

[State 3000, 暗転]
type = EnvColor
trigger1 = time = 8
value = 0,0,0
persistent = 0
ignorehitpause = 1
time = 24
under = 2

[State 3000, 音を鳴らす];超必音
type = PlaySnd
trigger1 = time = 4
value = 6000, 2
;-------------------------------------MAX2カットイン処理
[state 3500, Helper];MAX2
type = Helper
trigger1 = time = 30
id = 8000
name = "MAX2"
pos = 0,0
postype = p2
stateno = 8000
helpertype = normal
pausemovetime = 0
keyctrl = 0 
ownpal = 1

[state 3500, Helper];カットイン
type = Helper
trigger1 = time = 4
id = 8100
name = "cut"
pos = 0,0
postype = p1
stateno = 8100
pausemovetime = 999
supermovetime = 999
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1

[State 3500, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0
;-------------------------------------

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 3601

;---------------------------------------------------------------------------
;サイコメドレー（1段目:ヒット後乱舞移行）
[Statedef 3601]
type    = S
movetype= A
physics = N
juggle  = 0
poweradd= 0
velset = 8,0
anim = 3501
ctrl = 0
sprpriority = 2

[State 1000, StateTypeSet]
type = StateTypeSet
trigger1 = animelemtime(3) = 0
Physics = S

[State 200, 音を鳴らす];尻餅
type = PlaySnd
trigger1 = animelemtime(7) = 0
value = 1, 18

[state 3000, NotHitBy];無敵
type = NotHitBy
trigger1 = time<6
value = SCA

[State 801, Explod];衝撃尻餅
type = Explod
trigger1 = animelemtime(7) = 0
anim = 4052
ID = 4052
pos = -10, 0
postype = p1
facing = 1
sprpriority = 0
ownpal = 1
removeongethit = 1

[State 2100, 残像]
type = AfterImage
trigger1 = time = 0
time = 16
length = 7      ;残像の表示時間
timegap = 2     ;時間差
framegap = 2    ;フレーム差
palbright = 0, 0, 90
palcontrast = 110, 110, 180
PalAdd = 20,20,40
;palmul = 1, 1, 1
trans = Add1

[State 1000, ヒット定義]
type = HitDef
trigger1 = time = 0
attr = S, HA
animtype  = hard
damage    = 0, 5
getpower  = 0, 0
priority  = 6, hit
hitflag = MAF
guardflag = M
sprpriority = 2
pausetime = 10,9
guard.pausetime = 10,9
sparkxy = -15,-75
sparkno = s4003
guard.sparkno = s4012
hitsound   = s1,3
guardsound = s121,0
ground.type = high
ground.slidetime = 17
ground.hittime  = 20
ground.velocity = 0
guard.ctrltime = 28
air.velocity = -4,-6
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .47
air.fall = 1
fall.recover = 0
forcestand = 1    ;強制立たせ
numhits = 0
id = 3600
nochainid = 290

;-------------------------------------
[State 3000, EnvColor];フラッシュ
type = EnvColor
trigger1 = movehit
time = 1
value = 255,255,255
under = 0
persistent = 0
ignorehitpause = 1

[State 3500, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 1000, TargetState]
type = TargetState
trigger1 = Numtarget(3600)
trigger1 = movehit = 1
value = 3690
persistent = 0
ignorehitpause = 1

[State 1000, ステート変更];2段目へ
type = ChangeState
trigger1 = animelemtime(1)>0
trigger1 = movehit
value = 3602

[State 1000, ステート変更]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;サイコメドレー（2段目）
[Statedef 3602]
type    = S
movetype= A
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
anim = 3502
ctrl = 0
sprpriority = 2

;----------------------------------
[State 1000, VarSet];コマンド変数
type = VarSet
triggerall = animelemtime(3)>=0
triggerall = animelemtime(5)<0
trigger1 = var(59) = 0
trigger1 = command = "b"
trigger2 = var(59)>7
trigger3 = var(59)>0
trigger3 = random<=var(59)*4
var(13) = 1
;----------------------------------
[State 1000, 音を鳴らす];いー
type = PlaySnd
trigger1 = animelem = 3
value = 3500, 1
channel = 0
volume = 100

[State 2100, 残像]
type = AfterImage
trigger1 = time = 0
time = 0

[State 1000, Width]
type = Width
trigger1 = 1
edge = 50,0

[State 200, 音を鳴らす];尻餅
type = PlaySnd
trigger1 = animelemtime(8) = 0
value = 1, 18

[State 1000, TargetBind]
type = TargetBind
trigger1 = time = 0
trigger1 = numtarget(3600)
pos = 50,0

[State 801, Explod];衝撃尻餅
type = Explod
trigger1 = animelemtime(8) = 0
anim = 4052
ID = 4052
pos = -10, 0
postype = p1
facing = 1
sprpriority = 0
ownpal = 1
removeongethit = 1

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelemtime(3)=0
attr = S, HA
animtype  = hard
damage    = 42, 5
getpower  = 0, 0
priority  = 6, hit
hitflag = MAF
guardflag = M
sprpriority = 2
pausetime = 10,9
guard.pausetime = 10,9
sparkxy = -15,-66
sparkno = s4003
guard.sparkno = s4012
hitsound   = s1,3
guardsound = s121,0
ground.type = high
ground.slidetime = 17
ground.hittime  = 25
ground.velocity = 0
guard.ctrltime = 28
air.velocity = -4,-5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .47
air.fall = 1
fall.recover = 0
forcestand = 1    ;強制立たせ
id = 3600
nochainid = 290

;-------------------------------------
[State 3000, EnvColor];フラッシュ
type = EnvColor
trigger1 = movehit
time = 1
value = 255,255,255
under = 0
persistent = 0
ignorehitpause = 1

[State 3500, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 1000, ステート変更];3段目へ
type = ChangeState
trigger1 = animelemtime(4)>0
trigger1 = var(13) = 1
value = 3603

[State 1000, ステート変更]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;サイコメドレー（3段目）
[Statedef 3603]
type    = S
movetype= A
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
anim = 3503
ctrl = 0
sprpriority = 2

;----------------------------------
[State 1000, VarSet];コマンド変数リセット
type = VarSet
trigger1 = time = 0
var(13) = 0

[State 1000, VarSet];コマンド変数セット
type = VarSet
triggerall = animelemtime(5)>=0
triggerall = animelemtime(7)<0
trigger1 = var(59) = 0
trigger1 = command = "y"
trigger2 = var(59)>7
trigger3 = var(59)>0
trigger3 = random<=var(59)*4
var(13) = 1
;----------------------------------
[State 1000, 音を鳴らす];ある
type = PlaySnd
trigger1 = animelem = 5
value = 3500, 2
channel = 0
volume = 100

[State 1000, Width]
type = Width
trigger1 = 1
edge = 50,0

[State 200, 音を鳴らす];尻餅
type = PlaySnd
trigger1 = animelemtime(11) = 0
value = 1, 18

[State 801, Explod];衝撃尻餅
type = Explod
trigger1 = animelemtime(11) = 0
anim = 4052
ID = 4052
pos = -10, 0
postype = p1
facing = 1
sprpriority = 0
ownpal = 1
removeongethit = 1

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelemtime(5)=0
attr = S, HA
animtype  = hard
damage    = 42, 5
getpower  = 0, 0
priority  = 6, hit
hitflag = MAF
guardflag = M
sprpriority = 2
pausetime = 10,9
guard.pausetime = 10,9
sparkxy = -20,-68
sparkno = s4003
guard.sparkno = s4012
hitsound   = s1,4
guardsound = s121,0
ground.type = high
ground.slidetime = 17
ground.hittime  = 35
ground.velocity = 0
guard.ctrltime = 28
air.velocity = -4,-5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .47
air.fall = 1
fall.recover = 0
forcestand = 1    ;強制立たせ
id = 3600
nochainid = 290

;-------------------------------------
[State 3000, EnvColor];フラッシュ
type = EnvColor
trigger1 = movehit
time = 1
value = 255,255,255
under = 0
persistent = 0
ignorehitpause = 1

[State 3500, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 1000, ステート変更]
type = ChangeState
trigger1 = animelemtime(6)>0
trigger1 = var(13) = 1
value = 3604

[State 1000, ステート変更]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;サイコメドレー（4段目）
[Statedef 3604]
type    = S
movetype= A
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
anim = 3504
ctrl = 0
sprpriority = 2

;----------------------------------
[State 1000, VarSet];コマンド変数リセット
type = VarSet
trigger1 = time = 0
var(13) = 0

[State 1000, VarSet];コマンド変数セット
type = VarSet
triggerall = animelemtime(5)>=0
triggerall = animelemtime(7)<0
trigger1 = var(59) = 0
trigger1 = command = "a"
trigger2 = var(59)>7
trigger3 = var(59)>0
trigger3 = random<=var(59)*4
var(13) = 1
;----------------------------------
[State 1000, 音を鳴らす];さん
type = PlaySnd
trigger1 = animelem = 5
value = 3500, 3
channel = 0
volume = 100

[State 1000, Width]
type = Width
trigger1 = 1
edge = 50,0

[State 200, 音を鳴らす];尻餅
type = PlaySnd
trigger1 = animelemtime(11) = 0
value = 1, 18

[State 801, Explod];衝撃尻餅
type = Explod
trigger1 = animelemtime(11) = 0
anim = 4052
ID = 4052
pos = -10, 0
postype = p1
facing = 1
sprpriority = 0
ownpal = 1
removeongethit = 1

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelemtime(5)=0
attr = S, HA
animtype  = hard
damage    = 42, 5
getpower  = 0, 0
priority  = 6, hit
hitflag = MAF
guardflag = M
sprpriority = 2
pausetime = 10,9
guard.pausetime = 10,9
sparkxy = -22,-69
sparkno = s4003
guard.sparkno = s4012
hitsound   = s1,3
guardsound = s121,0
ground.type = low
ground.slidetime = 17
ground.hittime  = 35
ground.velocity = 0
guard.ctrltime = 28
air.velocity = -4,-5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .47
air.fall = 1
fall.recover = 0
forcestand = 1    ;強制立たせ
id = 3600
nochainid = 290

;-------------------------------------
[State 3000, EnvColor];フラッシュ
type = EnvColor
trigger1 = movehit
time = 1
value = 255,255,255
under = 0
persistent = 0
ignorehitpause = 1

[State 3500, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 1000, ステート変更]
type = ChangeState
trigger1 = animelemtime(6)>0
trigger1 = var(13) = 1
value = 3605

[State 1000, ステート変更]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;サイコメドレー（5段目）
[Statedef 3605]
type    = S
movetype= A
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
anim = 3505
ctrl = 0
sprpriority = 2

;----------------------------------
[State 1000, VarSet];コマンド変数リセット
type = VarSet
trigger1 = time = 0
var(13) = 0

[State 1000, VarSet];コマンド変数セット
type = VarSet
triggerall = animelemtime(8)>=0
triggerall = animelemtime(11)<0
trigger1 = var(59) = 0
trigger1 = command = "b"
trigger2 = var(59)>7
trigger3 = var(59)>0
trigger3 = random<=var(59)*4
var(13) = 1
;----------------------------------
[State 1000, 音を鳴らす];すー
type = PlaySnd
trigger1 = animelem = 8
value = 3500, 4
channel = 0
volume = 100

[State 1000, Width]
type = Width
trigger1 = 1
edge = 50,0

[State 200, 音を鳴らす];尻餅
type = PlaySnd
trigger1 = animelemtime(15) = 0
value = 1, 18

[State 801, Explod];衝撃尻餅
type = Explod
trigger1 = animelemtime(15) = 0
anim = 4052
ID = 4052
pos = -10, 0
postype = p1
facing = 1
sprpriority = 0
ownpal = 1
removeongethit = 1

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelemtime(8)=0
attr = S, HA
animtype  = hard
damage    = 33, 5
getpower  = 0, 0
priority  = 6, hit
hitflag = MAF
guardflag = M
sprpriority = 2
pausetime = 10,9
guard.pausetime = 10,9
sparkxy = -20,-79
sparkno = s4003
guard.sparkno = s4012
hitsound   = s1,3
guardsound = s121,0
ground.type = high
ground.slidetime = 17
ground.hittime  = 35
ground.velocity = 0
guard.ctrltime = 28
air.velocity = -4,-5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .47
air.fall = 1
fall.recover = 0
forcestand = 1    ;強制立たせ
id = 3600
nochainid = 290

;-------------------------------------
[State 3000, EnvColor];フラッシュ
type = EnvColor
trigger1 = movehit
time = 1
value = 255,255,255
under = 0
persistent = 0
ignorehitpause = 1

[State 3500, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 1000, ステート変更]
type = ChangeState
trigger1 = animelemtime(10)>0
trigger1 = var(13) = 1
value = 3606

[State 1000, ステート変更]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;サイコメドレー（6段目）
[Statedef 3606]
type    = S
movetype= A
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
anim = 3506
ctrl = 0
sprpriority = 2

;----------------------------------
[State 1000, VarSet];コマンド変数リセット
type = VarSet
trigger1 = time = 0
var(13) = 0

[State 1000, VarSet];コマンド変数セット
type = VarSet
triggerall = animelemtime(7)>=0
triggerall = animelemtime(10)<0
trigger1 = var(59) = 0
trigger1 = command = "y"
trigger2 = var(59)>7
trigger3 = var(59)>0
trigger3 = random<=var(59)*4
var(13) = 1
;----------------------------------
[State 1000, 音を鳴らす];うー
type = PlaySnd
trigger1 = animelem = 7
value = 3500, 5
channel = 0
volume = 100

[State 1000, Width]
type = Width
trigger1 = 1
edge = 50,0

[State 200, 音を鳴らす];尻餅
type = PlaySnd
trigger1 = animelemtime(12) = 0
value = 1, 18

[State 801, Explod];衝撃尻餅
type = Explod
trigger1 = animelemtime(12) = 0
anim = 4052
ID = 4052
pos = -10, 0
postype = p1
facing = 1
sprpriority = 0
ownpal = 1
removeongethit = 1

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelemtime(7)=0
attr = S, HA
animtype  = hard
damage    = 33, 5
getpower  = 0, 0
priority  = 6, hit
hitflag = MAF
guardflag = M
sprpriority = 2
pausetime = 10,9
guard.pausetime = 10,9
sparkxy = -20,-55
sparkno = s4003
guard.sparkno = s4012
hitsound   = s1,5
guardsound = s121,0
ground.type = high
ground.slidetime = 17
ground.hittime  = 35
ground.velocity = 0
guard.ctrltime = 28
air.velocity = -4,-5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .47
air.fall = 1
fall.recover = 0
forcestand = 1    ;強制立たせ
id = 3600
nochainid = 290

;-------------------------------------
[State 3000, EnvColor];フラッシュ
type = EnvColor
trigger1 = movehit
time = 1
value = 255,255,255
under = 0
persistent = 0
ignorehitpause = 1

[State 3500, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 1000, ステート変更]
type = ChangeState
trigger1 = animelemtime(9)>0
trigger1 = var(13) = 1
value = 3607

[State 1000, ステート変更]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;サイキック9（7段目）
[Statedef 3607]
type    = S
movetype= A
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
anim = 3507
ctrl = 0
sprpriority = 2

;----------------------------------
[State 1000, VarSet];コマンド変数リセット
type = VarSet
trigger1 = time = 0
var(13) = 0

[State 1000, VarSet];コマンド変数セット
type = VarSet
triggerall = animelemtime(5)>=0
triggerall = animelemtime(7)<0
trigger1 = var(59) = 0
trigger1 = command = "a"
trigger2 = var(59)>7
trigger3 = var(59)>0
trigger3 = random<=var(59)*4
var(13) = 1
;----------------------------------
[State 1000, 音を鳴らす];りう
type = PlaySnd
trigger1 = animelem = 5
value = 3500, 6
channel = 0
volume = 100

[State 1000, Width]
type = Width
trigger1 = 1
edge = 50,0

[State 200, 音を鳴らす];尻餅
type = PlaySnd
trigger1 = animelemtime(9) = 0
value = 1, 18

[State 801, Explod];衝撃尻餅
type = Explod
trigger1 = animelemtime(9) = 0
anim = 4052
ID = 4052
pos = 6, 0
postype = p1
facing = 1
sprpriority = 0
ownpal = 1
removeongethit = 1

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelemtime(5)=0
attr = S, HA
animtype  = hard
damage    = 33, 5
getpower  = 0, 0
priority  = 6, hit
hitflag = MAF
guardflag = M
sprpriority = 2
pausetime = 10,9
guard.pausetime = 10,9
sparkxy = -18,-72
sparkno = s4003
guard.sparkno = s4012
hitsound   = s1,4
guardsound = s121,0
ground.type = high
ground.slidetime = 17
ground.hittime  = 35
ground.velocity = 0
guard.ctrltime = 28
air.velocity = -4,-5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .47
air.fall = 1
fall.recover = 0
forcestand = 1    ;強制立たせ
id = 3600
nochainid = 290

;-------------------------------------
[State 3000, EnvColor];フラッシュ
type = EnvColor
trigger1 = movehit
time = 1
value = 255,255,255
under = 0
persistent = 0
ignorehitpause = 1

[State 3500, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 1000, ステート変更]
type = ChangeState
trigger1 = animelemtime(6)>0
trigger1 = var(13) = 1
value = 3608

[State 1000, ステート変更]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;サイコメドレー（8段目）
[Statedef 3608]
type    = S
movetype= A
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
anim = 3508
ctrl = 0
sprpriority = 2

;----------------------------------
[State 1000, VarSet];コマンド変数リセット
type = VarSet
trigger1 = time = 0
var(13) = 0

[State 1000, VarSet];コマンド変数セット
type = VarSet
triggerall = animelemtime(4)>=0
triggerall = animelemtime(7)<0
trigger1 = var(59) = 0
trigger1 = command = "x"
trigger2 = var(59)>7
trigger3 = var(59)>0
trigger3 = random<=var(59)*4
var(13) = 1
;----------------------------------
[State 1000, 音を鳴らす];ちー
type = PlaySnd
trigger1 = animelem = 4
value = 3500, 7
channel = 0
volume = 100

[State 1000, Width]
type = Width
trigger1 = 1
edge = 50,0

[State 200, 音を鳴らす];尻餅
type = PlaySnd
trigger1 = animelemtime(10) = 0
value = 1, 18

[State 801, Explod];衝撃尻餅
type = Explod
trigger1 = animelemtime(10) = 0
anim = 4052
ID = 4052
pos = -10, 0
postype = p1
facing = 1
sprpriority = 0
ownpal = 1
removeongethit = 1

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelemtime(4)=0
attr = S, HA
animtype  = hard
damage    = 33, 5
getpower  = 0, 0
priority  = 6, hit
hitflag = MAF
guardflag = M
sprpriority = 2
pausetime = 10,9
guard.pausetime = 10,9
sparkxy = -21,-92
sparkno = s4003
guard.sparkno = s4012
hitsound   = s1,3
guardsound = s121,0
ground.type = high
ground.slidetime = 17
ground.hittime  = 35
ground.velocity = 1
guard.ctrltime = 28
air.velocity = -4,-5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .47
air.fall = 1
fall.recover = 0
forcestand = 1    ;強制立たせ
id = 3600
nochainid = 290

;-------------------------------------
[State 3000, EnvColor];フラッシュ
type = EnvColor
trigger1 = movehit
time = 1
value = 255,255,255
under = 0
persistent = 0
ignorehitpause = 1

[State 3500, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 1000, ステート変更]
type = ChangeState
trigger1 = animelemtime(6)>0
trigger1 = var(13) = 1
value = 3609

[State 1000, ステート変更]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;サイコメドレー（9段目）
[Statedef 3609]
type    = S
movetype= A
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
anim = 3509
ctrl = 0
sprpriority = 2

;----------------------------------
[State 1000, VarSet];コマンド変数リセット
type = VarSet
trigger1 = time = 0
var(13) = 0

[State 1000, VarSet];コマンド変数セット
type = VarSet
triggerall = var(13) = 0
triggerall = animelemtime(11)>=0
triggerall = animelemtime(13)<0
trigger1 = var(59) = 0
trigger1 = command = "桃色固め"
trigger2 = var(59)>5
trigger2 = enemynear(var(58)),life<300 || random<400 || fvar(38)>0
var(13) = 1

[State 1000, VarSet];コマンド変数セット
type = VarSet
triggerall = var(13) = 0
triggerall = animelemtime(11)>=0
triggerall = animelemtime(13)<0
trigger1 = var(59) = 0
trigger1 = command = "ヒーリングアテナ"
trigger2 = var(59)>5
trigger2 = fvar(38)=0
trigger2 = enemynear(var(58)),life>500 || random<350
var(13) = 2

;[State 1000, VarSet];コマンド変数セット
;type = VarSet
;triggerall = var(13) = 0
;triggerall = animelemtime(11)>=0
;triggerall = animelemtime(13)<0
;trigger1 = var(59) = 0
;trigger1 = command = "SPI"
;var(13) = 3
;----------------------------------
[State 1000, 音を鳴らす];ぱー
type = PlaySnd
trigger1 = animelem = 11
value = 3500, 8
channel = 0
volume = 100

[State 1000, Width]
type = Width
trigger1 = 1
edge = 50,0

[State 200, 音を鳴らす];尻餅
type = PlaySnd
trigger1 = animelemtime(15) = 0
value = 1, 18

[State 801, Explod];衝撃尻餅
type = Explod
trigger1 = animelemtime(15) = 0
anim = 4052
ID = 4052
pos = -10, 0
postype = p1
facing = 1
sprpriority = 0
ownpal = 1
removeongethit = 1

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelemtime(11)=0
attr = S, HA
animtype  = hard
damage    = 33, 5
getpower  = 0, 0
priority  = 6, hit
hitflag = MAF
guardflag = M
sprpriority = 2
pausetime = 10,9
guard.pausetime = 10,9
sparkxy = -20,-95
sparkno = s4003
guard.sparkno = s4012
hitsound   = s1,3
guardsound = s121,0
ground.type = high
ground.slidetime = 17
ground.hittime  = 48
ground.velocity = 1
guard.ctrltime = 28
air.velocity = -4,-5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .47
air.fall = 1
fall.recover = 0
forcestand = 1    ;強制立たせ
id = 3600
nochainid = 290

;-------------------------------------
[State 3000, EnvColor];フラッシュ
type = EnvColor
trigger1 = movehit
time = 1
value = 255,255,255
under = 0
persistent = 0
ignorehitpause = 1

[State 3500, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 1000, ステート変更]
type = ChangeState
trigger1 = animelemtime(12)>0
trigger1 = var(13) > 0
value = 3610

[State 1000, ステート変更]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;サイコメドレー
;Fire Sword→Sailor→Psycho Sword
[Statedef 3610]
type    = S
movetype= A
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
anim = 3610
ctrl = 0
sprpriority = 2

[State 1000, 音を鳴らす];そーど
type = PlaySnd
trigger1 = animelem = 56
value = 1400, 1

[State 1000, 音を鳴らす];ワープ効果音
type = PlaySnd
trigger1 = AnimElem = 24
trigger2 = AnimElem = 44
value = 1500, 1

;----------------------------------
[state 1200, VelSet]
type = VelSet
trigger1 = animelem = 56
y = -10

[state 1200, VelAdd]
type = VelAdd
trigger1 = animelemtime(56)>=0
y = 0.42

[state 11000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1000, Width]
type = Width
trigger1 = 1
edge = 50,0

[State 801, Explod];炎エフェクト
type = Explod
trigger1 = NumExplod(3555)=0
trigger1 = animelemtime(17)=0
anim = 3555
ID = 3555
pos = 75, 0
postype = p1
facing = 1
sprpriority = 3
ownpal = 1
bindtime = -1
removetime = -2     ;アニメ終了時消滅
ignorehitpause = 1  ;hitpause中は動かない
removeongethit = 1  ;攻撃を受けて消える

[State 801, Explod];ソードエフェクト1
type = Explod
trigger1 = NumExplod(3565)=0
trigger1 = animelemtime(52)=0
anim = 3565
ID = 3565
pos = 0, 0
postype = p1
facing = 1
sprpriority = 3
ownpal = 1
bindtime = -1
removetime = -1     ;消えない
ignorehitpause = 0  ;hitpause中は動かない
removeongethit = 1  ;攻撃を受けて消える

[State 801, Explod];ソードエフェクト2
type = Explod
trigger1 = NumExplod(1421)=0
trigger1 = animelem = 59
anim = 1421
ID = 1421
pos = 0, 0
postype = p1
facing = 1
sprpriority = 3
ownpal = 1
;bindtime = -1
;removetime = -1
ignorehitpause = 0  ;hitpause中は動かない
removeongethit = 1  ;攻撃を受けて消える

[state 1400, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 59
ID = 3565

[State 1905, StateTypeSet]
type = StateTypeSet
Trigger1 = animelem = 56
StateType = A
;----------------------------------
[State 1000, ヒット定義];Fire Sword
type = HitDef
trigger1 = animelemtime(15)=0
attr = S, HA
animtype  = hard
damage    = 58, 5
getpower  = 0, 0
priority  = 6, hit
hitflag = MAF
guardflag = M
sprpriority = 2
pausetime = 11,10
guard.pausetime = 11,10
sparkxy = -10,-28
sparkno = s4003
guard.sparkno = s4012
hitsound   = s1,14
guardsound = s121,0
ground.type = high
ground.slidetime = 17
ground.hittime  = 35
ground.velocity = 0,0
guard.ctrltime = 33
air.hittime = 99
air.velocity = 0,0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .45
air.fall = 1
fall.recover = 0
;forcestand = 1    ;強制立たせ
id = 3610
nochainid = 290
envshake.time = 3
envshake.ampl = -8
kill = 0

[State 1000, ヒット定義];Fire Sword
type = HitDef
trigger1 = animelemtime(17)=0
attr = S, HA
animtype  = hard
damage    = 50, 5
getpower  = 0, 0
priority  = 6, hit
hitflag = MAF
guardflag = M
sprpriority = 2
pausetime = 11,10
guard.pausetime = 11,10
sparkxy = -10,-75
sparkno = s4003
guard.sparkno = s4012
hitsound   = s1,20
guardsound = s121,0
ground.type = high
ground.slidetime = 17
ground.hittime  = 35
ground.velocity = 0,0
guard.velocity = 0
guard.ctrltime = 33
air.hittime = 99
air.velocity = -5,-8
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .45
air.fall = 1
fall.recover = 0
;forcestand = 1    ;強制立たせ
id = 3610
nochainid = 290
palfx.time = 42
palfx.mul = 240,200,100
palfx.sinadd = 63,65,68,18
palfx.add = 230,180,124
palfx.invertall = 1
kill = 0

[State 1000, ヒット定義];Sailor
type = HitDef
trigger1 = animelemtime(36)=0
attr = S, HA
animtype  = hard
damage    = 50, 10
getpower  = 0, 0
priority  = 6, hit
hitflag = MAF
guardflag = M
sprpriority = 2
pausetime = 11,10
guard.pausetime = 11,10
sparkxy = -17,-68
sparkno = s4003
guard.sparkno = s4012
hitsound   = s1,3
guardsound = s121,0
ground.type = low
ground.slidetime = 17
ground.hittime  = 50
ground.velocity = 0
guard.ctrltime = 25
air.hittime = 99
air.velocity = 0,0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .45
air.fall = 1
fall.recover = 0
;forcestand = 1    ;強制立たせ
id = 3610
nochainid = 290
envshake.time = 3
envshake.ampl = -8
kill = 0

[State 1000, ヒット定義];Psycho
type = HitDef
trigger1 = animelemtime(55)=0
attr = S, HA
animtype  = hard
damage    = 50, 5
getpower  = 0, 0
priority  = 6, hit
hitflag = MAF
guardflag = M
sprpriority = 2
pausetime = 21,20
guard.pausetime = 21,20
sparkxy = -10,-35
sparkno = s4003
guard.sparkno = s4012
hitsound   = s1,9
guardsound = s121,0
ground.type = low
ground.slidetime = 17
ground.hittime  = 33
ground.velocity = .5
guard.ctrltime = 25
air.hittime = 99
air.velocity = 0,0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .45
air.fall = 1
fall.recover = 0
;forcestand = 1    ;強制立たせ
id = 3610
nochainid = 290
envshake.time = 3
envshake.ampl = -8
kill = 0

[State 1000, ヒット定義];Psycho
type = HitDef
trigger1 = animelemtime(56)=0
attr = A, HA
animtype  = up
damage    = 50, 5
getpower  = 0, 0
priority  = 6, hit
hitflag = MAF
guardflag = M
sprpriority = 2
pausetime = 5,4
guard.pausetime = 5,4
sparkxy = -10,-75
sparkno = s4003
guard.sparkno = s4012
hitsound   = s1,9
guardsound = s121,0
ground.type = high
ground.slidetime = 17
ground.hittime  = 35
ground.velocity = 0,-8
guard.velocity = -2
guard.ctrltime = 33
air.hittime = 99
air.velocity = 0,-8
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .4
fall = 1
fall.recover = 0
;forcestand = 1    ;強制立たせ
id = 3610
nochainid = 290
kill = 0

[State 1000, ヒット定義];Psycho
type = HitDef
trigger1 = animelemtime(57)=0
attr = A, HA
animtype  = up
damage    = 50, 5
getpower  = 0, 0
priority  = 6, hit
hitflag = MAF
guardflag = M
sprpriority = 2
pausetime = 4,3
guard.pausetime = 4,3
sparkxy = -10,-90
sparkno = s4003
guard.sparkno = s4012
hitsound   = s1,9
guardsound = s121,0
ground.type = high
ground.slidetime = 17
ground.hittime  = 35
ground.velocity = 0,-10
guard.ctrltime = 33
guard.velocity = -3
air.hittime = 99
air.velocity = 0,-10
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .4
fall = 1
fall.recover = 0
;forcestand = 1    ;強制立たせ
id = 3611
nochainid = 290
kill = 0

;-------------------------------------
[State 3000, EnvColor];フラッシュ
type = EnvColor
trigger1 = movehit
time = 1
value = 255,255,255
under = 0
persistent = 0
ignorehitpause = 1

[State 3500, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 901, TargetState];桃色固め用TargetState
type = TargetState
trigger1 = NumTarget(3611)
trigger1 = AnimElemTime(58) > 0
Trigger1 = var(13) = 1
value = 3655

[State 1000, ステート変更];桃色固め移行
type = ChangeState
trigger1 = AnimElemTime(58) > 0
trigger1 = var(13)  = 1
value = 3650

[State 1000, ステート変更];ヒーリングアテナ移行
type = ChangeState
trigger1 = AnimElemTime(58) > 0
trigger1 = var(13)  = 2
value = 3660

[State 1000, ステート変更];保険用着地ステート移行
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 3561

;---------------------------------------------------------------------------
;サイコメドレー（桃色固め）
[Statedef 3650]
type    = A
movetype= A
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
anim = 3650
ctrl = 0
sprpriority = 0

[State 1000, 音を鳴らす];ワープ音
type = PlaySnd
trigger1 = animelem = 1
value = 1500,1

[State 1000, 音を鳴らす];むねきゅん
type = PlaySnd
trigger1 = animelem = 7
value = 3600, 2
channel = 0
volume = 100

[State 1000, 音を鳴らす];ですもの
type = PlaySnd
trigger1 = animelem = 8
value = 3600, 3
channel = 0
volume = 100

[State 200, 音を鳴らす];爆発音
type = PlaySnd
trigger1 = animelemtime(9) = 0
value = 1, 24

[State 1000, TargetState]
type = TargetState
trigger1 = time = 0
value = 3655

[State 220, PosAdd]
type = PosAdd
trigger1 = time = 0
x = 50
y = 10

[State 220, PosSet]
type = PosSet
trigger1 = AnimElem = 10
y = 0

[State 1000, Width]
type = Width
trigger1 = 1
edge = 70,70

[state 11000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1000, SprPriority]
type = SprPriority
trigger1 = AnimElemTime(8) = 0 
value = 2

[State 801, 掴んだ相手の位置];TargetBindで相手を一時的に拘束
type = TargetBind
trigger1 = AnimElemTime(4) = 0
pos = 4, 29

[State 801, 掴んだ相手の位置];TargetBindで相手を一時的に拘束
type = TargetBind
trigger1 = animelemtime(8) = 0
pos = 4, 29

[State 801, Explod];パーツ
type = Explod
;trigger1 = NumExplod(13601)=0
trigger1 = animelemtime(8) = 0
anim = 3651
ID = 3651
pos = 0, 0
postype = p1
facing = 1
sprpriority = 3
ownpal = 1
bindtime = -1       ;永久に固定
removetime = -2     ;アニメ終了で消去
shadow = -1         ;ステージ設定に従う
persistent = 0
ignorehitpause = 0  ;hitpause中は動かない
removeongethit = 1  ;攻撃を受けて消える

[State 801, Explod];爆発エフェクト
type = Explod
trigger1 = NumExplod(3680)=0
trigger1 = animelemtime(9)=0
anim = 3680
ID = 3680
pos = 0, -10
postype = p2
facing = 1
sprpriority = 99
ownpal = 1
;bindtime = -1      ;永久に固定
removetime = -2     ;アニメ終了で消去
;shadow = -1         ;ステージ設定に従う
persistent = 0
ignorehitpause = 0  ;hitpause中は動かない
removeongethit = 1  ;攻撃を受けて消える
;--------------------------------アテナフレンドHelper
[State 1000, Helper]
type = helper
;trigger1 = NumHelper(13600)=0
trigger1 = animelem = 4
id = 13600
persistent = 0
name = "A_Friend1"
pos = -40,-30
postype = p1
stateno = 13600
helpertype = normal
keyctrl = 0
ownpal = 1

[State 1000, Helper]
type = helper
;trigger1 = NumHelper(13610)=0
trigger1 = animelem = 4
id = 13610
persistent = 0
name = "A_Friend2"
pos = 40,-30
postype = p1
stateno = 13610
helpertype = normal
keyctrl = 0
ownpal = 1
;--------------------------------
[State 1412, EnvShake];振動
type = EnvShake
trigger1 = AnimElem = 9
time = 10
ampl = -8
freq = 95
phase = 95
persistent = 0
ignorehitpause = 1

[State 1000, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = AnimElem = 9
value = -floor(325*fvar(0))

[State 3500, ScreenBound]
type = ScreenBound
trigger1 = numhelper(8100)
value = 1
movecamera = 0,1

[State 1000, ステート終了]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;サイコメドレー（桃色固め）
;相手やられ
[Statedef 3655]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = 1

[State 1000, ChangeAnim2]
type = ChangeAnim2
Trigger1 = Time = 0
value = 3655

[State 1000, VelSet]
type = VelSet
trigger1 = AnimElemTime(2) = 0
x = -2.5
y = -8

[State 1000, VelAdd]
type = VelAdd
trigger1 = AnimElemTime(2) > 0
y = 0.4

[State 1000, PalFX]
type = PalFX
trigger1 = animelem = 2
time = 60
mul = 240,200,100
sinadd = 63,65,68,18
add = 230,180,124
color = 0
invertall = 1
ignorehitpause = 1

[State 1000, ScreenBound];画面固定
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 170, 1]
type = NotHitBy
trigger1 = AnimElemTime(2) > 0
value = SCA

[State 1000, SelfState] 
type = SelfState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 5100

;---------------------------------------------------------------------------
;サイコメドレー（桃色固め）
;(HELPER)アテナフレンド1
[Statedef 13600]
type    = A
movetype= A
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
anim = 13600
ctrl = 0
sprpriority = 3

[state 11000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 801, Explod];パーツ1
type = Explod
;trigger1 = NumExplod(13601)=0
trigger1 = time = 0
anim = 13601
ID = 13601
pos = 0, 0
postype = p1
facing = 1
sprpriority = 3
ownpal = 1
bindtime = -1       ;永久に固定
removetime = -1     ;永久に消えない
shadow = -1         ;ステージ設定に従う
persistent = 0
ignorehitpause = 0  ;hitpause中は動かない
removeongethit = 1  ;攻撃を受けて消える

[State 801, Explod];パーツ2
type = Explod
;trigger1 = NumExplod(13602)=0
trigger1 = time = 0
anim = 13602
ID = 13601
pos = 0, 0
postype = p1
facing = 1
sprpriority = 3
ownpal = 1
bindtime = -1       ;永久に固定
removetime = -1     ;永久に消えない
shadow = -1         ;ステージ設定に従う
persistent = 0
ignorehitpause = 0  ;hitpause中は動かない
removeongethit = 1  ;攻撃を受けて消える

[State 1000, BindToRoot]
type = BindToRoot
trigger1 = anim = 13600
pos = -40,-30

[State 1000, ChangeState]
type = ChangeState
trigger1 = root,stateno = 3650
trigger1 = root,animelemtime(8) = 0
value = 13605

[State 1000, DestroySelf]
type = DestroySelf
trigger1 = root,stateno != 3650
trigger2 = root,movetype = H

;---------------------------------------------------------------------------
;サイコメドレー（桃色固め）
;(HELPER)アテナフレンド1変化
[Statedef 13605]
type    = A
movetype= A
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
anim = 13605
ctrl = 0
sprpriority = 3

[state 11000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1000, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
id = 13601
ignorehitpause = 1

[State 801, Explod];パーツ1
type = Explod
trigger1 = NumExplod(13606)=0
trigger1 = time = 0
anim = 13606
ID = 13606
pos = 0, 0
postype = p1
facing = 1
sprpriority = 3
ownpal = 1
bindtime = -1       ;永久に固定
removetime = -2     ;アニメ終了で消去
shadow = -1         ;ステージ設定に従う
persistent = 0
ignorehitpause = 0  ;hitpause中は動かない
removeongethit = 1  ;攻撃を受けて消える

[State 801, Explod];パーツ2
type = Explod
trigger1 = NumExplod(13607)=0
trigger1 = time = 0
anim = 13607
ID = 13607
pos = 0, 0
postype = p1
facing = 1
sprpriority = 3
ownpal = 1
bindtime = -1       ;永久に固定
removetime = -2     ;アニメ終了で消去
shadow = -1         ;ステージ設定に従う
persistent = 0
ignorehitpause = 0  ;hitpause中は動かない
removeongethit = 1  ;攻撃を受けて消える

[State 1000, BindToRoot]
type = BindToRoot
trigger1 = anim = 13600
trigger2 = anim = 13601 && animelemtime(2) < 0
pos = -40,-30

[State 4110, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0
trigger2 = root,movetype = H

;---------------------------------------------------------------------------
;サイコメドレー（桃色固め）
;(HELPER)アテナフレンド2
[Statedef 13610]
type    = A
movetype= A
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
anim = 13610
ctrl = 0
sprpriority = 3

[state 11000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 801, Explod];パーツ1
type = Explod
;trigger1 = NumExplod(13611)=0
trigger1 = time = 0
anim = 13611
ID = 13611
pos = 0, 0
postype = p1
facing = 1
sprpriority = 3
ownpal = 1
bindtime = -1       ;永久に固定
removetime = -1     ;永久に消えない
shadow = -1         ;ステージ設定に従う
persistent = 0
ignorehitpause = 0  ;hitpause中は動かない
removeongethit = 1  ;攻撃を受けて消える

[State 801, Explod];パーツ2
type = Explod
;trigger1 = NumExplod(13612)=0
trigger1 = time = 0
anim = 13612
ID = 13611
pos = 0, 0
postype = p1
facing = 1
sprpriority = 3
ownpal = 1
bindtime = -1       ;永久に固定
removetime = -1     ;永久に消えない
shadow = -1         ;ステージ設定に従う
persistent = 0
ignorehitpause = 0  ;hitpause中は動かない
removeongethit = 1  ;攻撃を受けて消える

[State 1000, BindToRoot]
type = BindToRoot
trigger1 = anim = 13610
pos = 40,-30

[State 1000, ChangeState]
type = ChangeState
trigger1 = root,stateno = 3650
trigger1 = root,animelemtime(8) = 0
value = 13615

[State 1000, DestroySelf]
type = DestroySelf
trigger1 = root,stateno != 3650
trigger2 = root,movetype = H

;---------------------------------------------------------------------------
;サイコメドレー（桃色固め）
;(HELPER)アテナフレンド1変化
[Statedef 13615]
type    = A
movetype= A
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
anim = 13615
ctrl = 0
sprpriority = 3

[state 11000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1000, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
id = 13611
ignorehitpause = 1

[State 801, Explod];パーツ1
type = Explod
trigger1 = NumExplod(13616)=0
trigger1 = time = 0
anim = 13616
ID = 13616
pos = 0, 0
postype = p1
facing = 1
sprpriority = 3
ownpal = 1
bindtime = -1       ;永久に固定
removetime = -2     ;永久に消えない
shadow = -1         ;ステージ設定に従う
persistent = 0
ignorehitpause = 0  ;hitpause中は動かない
removeongethit = 1  ;攻撃を受けて消える

[State 801, Explod];パーツ2
type = Explod
trigger1 = NumExplod(13617)=0
trigger1 = time = 0
anim = 13617
ID = 13617
pos = 0, 0
postype = p1
facing = 1
sprpriority = 3
ownpal = 1
bindtime = -1       ;永久に固定
removetime = -2     ;アニメ終了で消去
shadow = -1         ;ステージ設定に従う
persistent = 0
ignorehitpause = 0  ;hitpause中は動かない
removeongethit = 1  ;攻撃を受けて消える

[State 1000, BindToRoot]
type = BindToRoot
trigger1 = anim = 13610
trigger2 = anim = 13611 && animelemtime(2) < 0
pos = 40,-30

[State 4110, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0
trigger2 = root,movetype = H

;---------------------------------------------------------------------------
;サイコメドレー（ヒーリングアテナ）
[Statedef 3660]
type    = A
movetype= A
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
anim = 3660
velset = 0,0
ctrl = 0
sprpriority = 2

[State 1000, 音を鳴らす];ひーりんぐ
type = PlaySnd
trigger1 = animelem = 6
value = 3600, 1
channel = 0
volume = 100

[State 1000, 音を鳴らす];ワープ音
type = PlaySnd
trigger1 = animelem = 1
value = 1500,1

[State 220, Posadd]
type = PosAdd
trigger1 = AnimElem = 6
y = 30

[State 220, PosSet]
type = PosSet
trigger1 = AnimElem = 14
y = 0

[State 220, PosAdd]
type = PosAdd
trigger1 = AnimElem = 14
x = -30

[state 11000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

;[State 1000, Width]
;type = Width
;trigger1 = 1
;edge = 70,70

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelem = 6
attr = A, HP
animtype  = diagup
damage    = 80, 10
getpower  = 0, 0
priority  = 6, hit
hitflag = MAF
guardflag = M
sprpriority = 2
pausetime = 20,19
guard.pausetime = 20,19
sparkxy = -18,-55
sparkno = s4003
guard.sparkno = s4012
hitsound   = s1,23     ;しびれ音
guardsound = s121,0
ground.type = high
ground.slidetime = 17
ground.hittime  = 35
ground.velocity = -2.5,-6
guard.ctrltime = 28
air.hittime = 99
air.velocity = -2.5,-6
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .4
fall = 1
fall.recover = 0
forcestand = 1    ;強制立たせ
id = 3660
nochainid = 290

[State 3500, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
;movecamera = 0,0

[State 3000, EnvColor];フラッシュ
type = EnvColor
trigger1 = movehit
time = 1
value = 255,255,255
under = 0
persistent = 0
ignorehitpause = 1

[State 1000, LifeAdd];回復
type = LifeAdd
trigger1 = AnimElem = 6
value = 280

[State 1000, ステート終了]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;サイコメドレー（初段ロック相手やられ）
[Statedef 3690]
type    = S
movetype= H
physics = S
velset = 0,0
;facep2 = 1

;---------------------------------------------
[state 1050, SelfState];Helperは返却
type = SelfState
trigger1 = ishelper
value = PrevStateNo
;---------------------------------------------

[State 3060]
type = ChangeAnim2
trigger1 = Time = 0
value = 3690

[State 3060]
type = PosSet
trigger1 = time = 0
y = 0

[State 3060]
type = HitFallSet
trigger1 = Time = 0
value = 0

[State 3060]
type = SelfState
trigger1 = time = 100
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;MAX発動
[Statedef 900]
type = S
movetype = I
physics = N
anim = 900
velset = 0,0
sprpriority = 2
poweradd = -1000
ctrl = 0

[State 900, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = 900,2
channel = 0
volume = 150

[State 900, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = 900,0

[State 900, VarSet]
type = VarSet
trigger1 = 1;time = 0
var(8) = 900

[State 900, Explod]
type = Explod
trigger1 = animelem = 2
anim = 6001
sprpriority = 3
postype = p1
pos = -42,-96
bindtime = 1
under = 0
ownpal = 1
supermovetime = 999

[State 1412, EnvShake]
type = EnvShake
trigger1 = animelem = 2
time = 10
;ampl = -8
;freq = 95
;phase = 95

[State 3000,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;クイックMAX発動
[Statedef 901]
type = S
movetype = I
physics = N
anim = 901
velset = 0,0
sprpriority = 2
poweradd = -2000
ctrl = 0

[State 900, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 900,1
volume = 250

[State 900, Explod]
type = null;Explod
trigger1 = time = 0
anim = 6001
sprpriority = 3
postype = p1
pos = -4,-59
bindtime = 1
under = 0
ownpal = 1
supermovetime = 999

[State 900, VarSet]
type = VarSet
trigger1 = time = 0
var(8) = 900

[State 3000,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; HITA_FALL (knocked up, falling)
[Statedef 5050]
type    = A
movetype= H
physics = N

[State 5050, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 5050

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 5050, 3] ;Gravity
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5050, 4] ;Recover near ground
type = ChangeState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
triggerall = CanRecover; || 1
trigger1 = Command = "recovery"
value = 5200 ;HITFALL_RECOVER

[State 5050, 5]; Recover in mid air
type = ChangeState
triggerall = Vel Y > -1
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5210 ;HITFALL_AIRRECOVER

[State 5050, 6]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= ifelse((anim = [5051,5059]) || (anim = [5061,5069]), 0, 25)
value = 5100 ;HIT_BOUNCE

;---------------------------------------------------------------------------
; HIT_FALLRECOVER (still falling)
[Statedef 5200]
type    = A
movetype= H
physics = N

[State 5200, 1] ;Change anim if done with transition
type = ChangeAnim
trigger1 = Anim = 5035
trigger1 = AnimTime = 0
value = 5050

[State 5200, 2]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5200, 3]
type = SelfState 
trigger1 = var(59)=0
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 10
value = 5201

[State 5200, 3]
type = SelfState 
trigger1 = var(59)>0
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 10
value = 5201

;---------------------------------------------------------------------------
; HIT_FALLRECOVER (on the ground)
[Statedef 5201]
type    = S
movetype= H
physics = S
anim = 5200

[State 5201, 1] ;Turn if not facing opponent
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < -5

[State 5201, 2]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5201, 2.1]
type = VelSet
trigger1 = Time >= 0
trigger1 = Time <= 18
x = -2

[State 5201, 3]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5201, 4]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 5201, 5] ;Blink white
type = PalFX
trigger1 = Time = 0
time = 3
add = 128,128,128 ;256,256,256

[State 5201, 6]
type = GameMakeAnim
trigger1 = Time = 1
value = 60
pos = 0, 0
under = 1

[State 5201, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;===========================================================================
; 常時監視ステート（−２）
;===========================================================================
;---------------------------------------------------------------------------
; 通常の食らい状態（Statedef 5000〜5199間）でも、
; 相手に（「P2StateNo」や「TargetState」等で）制御を奪われても、
; 常に登録したステートコントローラが有効になります。
; サブシステム等を制御する時に重宝するでしょう。
;---------------------------------------------------------------------------
[Statedef -2]
;===========================================================================
[State -2, デバック(変数確認)]
Type = DisplayToClipBoard
Trigger1 = 1
Text = "AI=%d,fvar(39)=%.2f,fvar(38)=%.3f,TPx=%.2f,hittime=%d\n"
Params = var(59),fvar(39),fvar(38),enemy,pos x - pos x,enemynear,gethitvar(hittime)
IgnoreHitPause = 1

[State -2, 距離確認デバック]
type = AppendToClipboard
trigger1 = 1
text =  "P2X:%.2f,P2Y:%.2f,Vx%.2f,Vy%.2f,Py%.2f\n"
params = P2BodyDist x,P2BodyDist y,vel x,vel y,pos y
IgnoreHitPause = 1
;============================================================================

;-----------------------------------
;イントロ関係
;-----------------------------------
[State -2, 2人目のイントロ]
type = ChangeState
value = 190
triggerall = RoundsExisted = 0
triggerall = TeamMode = Turns
trigger1 = stateno = 5900

[State -2, 特殊イントロ]
type = ChangeState
value = 190
;--- 対拳崇時,初登場でなくてもイントロ開始 ---
;triggerall = RoundsExisted = 0
triggerall = TeamMode = Turns
triggerall = stateno = 5900
trigger1 = p2name = "Kensou"     || p4name = "Kensou"
trigger2 = p2name = "Sie Kensou" || p4name = "Sie Kensou"

;-----------------------------------
;ダメージボイス
;-----------------------------------
[State -2, ダメージボイス]
type = PlaySnd
triggerall = Time = 1
triggerall = Alive
triggerall = Random < 500
trigger1 = stateno = 5000 || stateno = 5010 || stateno = 5020
trigger2 = stateno = 5070 || stateno = 5080
;trigger3 = stateno = 5210 || stateno = 5220 || stateno = 5221 || stateno = 5222
value = 4218,21 + (Random%3)
channel = 0
volume = 200
 
[State -2, 叩きつけられボイス]
type = PlaySnd
triggerall = Time = 1
triggerall = Alive
triggerall = Random < 500
trigger1 = stateno = 5100
value = 4218,23 + (random%2)
channel = 0
volume = 180
;-----------------------------------
;カウンター関係
;-----------------------------------
[state -2]
type = varset
trigger1 = enemynear,movetype != A
var(1) = 0

[state -2]
type = varset
trigger1 = enemynear,movetype = A
var(1) = 1
;-----------------------------------
;MAX発動中のゲージ管理
;var(7): ゲージ量記憶
;var(8): MAXゲージ
;-----------------------------------
[state -2 ,VarSet];MAX発動時のゲージ量を記憶
type = varset
trigger1 = var(8) = 900
var(7) = Power

[state -2, VarSet]
type = VarSet
trigger1 = var(8) < 0
trigger2 =!alive || Life = 0
var(8) = 0

[state -2, VarAdd]
type = varadd
trigger1 = var(8) > 0
var(8) = -1

[state -2, PowerSet]
type = PowerSet
trigger1 = var(8) > 0
trigger1 = stateno != [3000,3999]
value = var(7)
ignorehitpause = 1

[State -2, PalFx];点滅
type = PalFx
trigger1 = var(8) > 0
trigger1 = gametime % 2 = 0
time = 1
add = 80,80,0
;color = 1
ignorehitpause = 1
;-----------------------------------
;スパキャンゲージ消費リセット
;var(11)
;-----------------------------------
;SCゲージ消費用
[State -2, varset]
type = varset
trigger1 = stateno != 1200        ;フェニックスアロー弱
trigger1 = stateno != [1210,1211] ;フェニックスアロー強
trigger1 = stateno != 1400        ;サイコソード弱
trigger1 = stateno != 1410        ;サイコソード強
trigger1 = stateno != 1450        ;空中サイコソード弱
trigger1 = stateno != 1460        ;空中サイコソード強
var(11) = 0
;-----------------------------------
;スパキャン点滅
;-----------------------------------
;SC点滅用変数リセット
[State -2, varset]
type = varset
trigger1 = stateno != 3000 ;SCB
trigger1 = stateno != 3010 ;SCB
trigger1 = stateno != 3100 ;空中SCB
trigger1 = stateno != 3110 ;空中SCB
trigger1 = stateno != 3200 ;フェニックスファングアロー
trigger1 = stateno != 3210 ;フェニックスファングアロー
trigger1 = stateno != 3300 ;MAXSCB
trigger1 = stateno != 3400 ;MAXSCB
trigger1 = stateno != 3500 ;サイキック9
var(6) = 0

;SC点滅用
[State -2, varset]
type = varset
triggerall = MoveType != H
triggerall = time <= 20
trigger1 = stateno = 3000 ;SCB
trigger2 = stateno = 3010 ;SCB
trigger3 = stateno = 3100 ;空中SCB
trigger4 = stateno = 3110 ;空中SCB
trigger5 = stateno = 3200 ;フェニックスファングアロー
trigger6 = stateno = 3210 ;フェニックスファングアロー
trigger7 = stateno = 3300 ;MAXSCB
trigger8 = stateno = 3400 ;MAXSCB
trigger9 = stateno = 3500 ;サイキック9
var(6) = 1

[State -2, palfx];SC点滅
type = palfx
triggerall = time <= 20
triggerall = time % 2 = 0
triggerall = var(6) = 1
triggerall = MoveType != H
trigger1 = prevstateno = 1200        ;フェニックスアロー弱
trigger2 = prevstateno = [1210,1211] ;フェニックスアロー強
trigger3 = prevstateno = 1400        ;サイコソード弱
trigger4 = prevstateno = 1410        ;サイコソード強
trigger5 = prevstateno = 1450        ;空中サイコソード弱
trigger6 = prevstateno = 1460        ;空中サイコソード強
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1
;-----------------------------------
;コンボ補正
;-----------------------------------
[state -2, varset];リセット
type = varset
trigger1 = 1
Trigger1 = RoundState = 0
trigger2 = p2MoveType != H
trigger3 = enemynear,stateno = [120,155]
fvar(0) = 1.0

[state -2, varset];30Hit以上で補正1%
type = VarSet
trigger1 = p2MoveType = H
trigger1 = enemynear,gethitvar(hitcount) >= 30
fvar(0) = 0.01

[state -2, varset];補正
type = varset
trigger1 = enemynear,MoveType = H
trigger1 = enemynear,gethitvar(hitcount) > 1
trigger1 = enemynear,gethitvar(hitcount) < 30
fvar(0) = ((100.0-(25.0+(enemynear,gethitvar(hitcount)/2.0)*5.0))/100.0)
IgnoreHitPause = 1

[state -2, varset];リセット
type = varset
trigger1 = enemynear,movetype != A
fvar(1) = 0

[state -2, varset];カウンター
type = varset
trigger1 = enemynear,movetype = A
fvar(1) = 0.05

[state -2, varset];リセット
type = varset
trigger1 = var(8) = 0
fvar(2) = 1.0

[state -2, varset];MAX発動中
type = varset
trigger1 = var(8) > 0
fvar(2) = 0.9

[state -2, varset];総括
type = varset
trigger1 = 1
fvar(3) = (fvar(0)+fvar(1))*fvar(2)

[state -2, varset];ビット用
type = varset
trigger1 = 1
fvar(4) = fvar(0)*fvar(2)

[state -2, attackmulset];攻撃力の倍数指定
type = attackmulset
trigger1 = 1
value = fvar(3)
;-----------------------------------
;その他
;-----------------------------------
[State -2, StopSnd];ダッシュの音止め
type = StopSnd
trigger1 = stateno != 100 && stateno != 99
channel = 1

[State 1000, StopSnd];ビット音停止
type = StopSnd
trigger1 = time = 0
trigger1 = movetype = H
channel = 4

[State -2, VarAdd];ハイジャンプ判定
type = varadd
trigger1 = 1
trigger1 = var(3)>-100
v = 3
value = -1

;-----------------------------------
;エフェクト消去
;-----------------------------------
[state 1400, RemoveExplod]
type = RemoveExplod
triggerall = numexplod(1420)
trigger1 = stateno = 1400 || stateno = 1450
trigger1 = animelem = 6
trigger2 = movetype = H || movetype = I
ID = 1420

[state 1400, RemoveExplod]
type = RemoveExplod
triggerall = numexplod(1422)
trigger1 = stateno = 1410 || stateno = 1460
trigger1 = animelem = 7
trigger2 = movetype = H || movetype = I
ID = 1422

;-----------------------------------
;残像消去
;-----------------------------------
[State -2, AfterImageTime]
type = AfterImageTime
trigger1 = stateno = 52   ;着地
trigger1 = Time = 1
trigger2 = movetype = H   ;やられ
trigger3 = stateno = 850  ;サイキックシュート
trigger3 = time = 0
trigger4 = stateno = 1200 || stateno = 1210 ;フェニックスアロー
trigger4 = time = 0
trigger5 = stateno = 1450 || stateno = 1460 ;空中サイコソード
trigger5 = time = 0
trigger6 = stateno = 3100 || stateno = 3110 || stateno = 3400 ;空中SCBorMAXSCB
trigger6 = time = 0
trigger7 = stateno = 3200 || stateno = 3210 ;フェニックスファングアロー
trigger7 = time = 0
time = 0

;-----------------------------------
;試合開始前まで無敵
;-----------------------------------
[State -2, NotHitBy];無敵
type = NotHitBy
trigger1 = roundstate = 0
trigger2 = roundstate = 1
trigger3 = stateno = 5900
value = SCA

;===========================================================================
; 準常時監視ステート（−３）
;===========================================================================
;---------------------------------------------------------------------------
; こちらは通常の食らい状態以外の「P2StateNo」や「TargetState」等で制御された、
; 作成者が任意に指定した相手側の食らいステートに限り、
; 登録したステートコントローラが有効にはなりません。
; −１や−２と上手く使い分けて行きましょう。
;---------------------------------------------------------------------------
[Statedef -3]
;-----------------------------------
;MAXゲージ呼び出し
;Helper(7000)
;-----------------------------------
[state -3, Helper];MAXゲージ呼び出し
type = Helper
trigger1 = NumHelper(7000)=0
trigger1 = var(8)>0
id = 7000
name = "max"
pos = 0,0
postype = p1
stateno = 7000
pausemovetime = 999
supermovetime = 999
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
;-----------------------------------
;ここは「ジャンプ」か「バックステップ」をした後に
;着地する音を鳴らす設定をしています。
;-----------------------------------
[State -3, 音を鳴らす]
type = PlaySnd
triggerall = Time = 1
trigger1 = stateno = 52   ;着地ステート
trigger2 = stateno = 106  ;バックステップ後の着地ステート
trigger3 = stateno = 251  ;連環腿
trigger4 = stateno = 1401 ;サイコソード
trigger5 = stateno = 3103 ;空中SCB
trigger6 = stateno = 3403 ;MAX空中SCB
value = 40, 2

[State -3, jump];ジャンプ音
type = PlaySnd
trigger1 = time = 1
trigger1 = stateno = 40 || stateno = 41
trigger1 = var(3) <= 0
trigger2 = stateno = 660     ;三角跳び
trigger2 = animelemtime(2)=1
value = 40, 0
channel = 3

[State -3, PlaySnd];大ジャンプ音
type = PlaySnd
triggerall = time = 1
trigger1 = stateno = 40 || stateno = 41
trigger1 = var(3) > 1
value = 40, 1
channel = 3

[State -3, PlaySnd];バックダッシュ音
type = PlaySnd
triggerall = Time = 1
;trigger1 = stateno = 100 
trigger1 = stateno = 105 
value = 105, 0
;-----------------------------------
;ハイジャンプ処理
;-----------------------------------
[State -3, VarSet];ハイジャンプ消去
type = VarSet
trigger1 = stateno = 52
trigger1 = time = 0
trigger2 = var(59)>7
trigger2 = fvar(39)=3.1
v = 3
value = 0

[State -3, VarSet];ハイジャンプ判定
type = VarSet
trigger1 = stateno = 10
trigger1 = time = 0
trigger2 = stateno = 100 || stateno = 99 || (var(59)>0&&p2bodydist x >=85&&var(56)<=5) || (var(59)>0&&var(56)<=8&&enemynear(var(58)),stateno=5120)
trigger3 = var(59)>5
trigger3 = p2bodydist x <= 80 && random<=150 && enemynear(var(58)),stateno!=5120 && enemynear(var(58)),statetype!=L
trigger4 = var(59)>0 && fvar(39)=3.5
v = 3
value = 20

[State -3, VelSet];ハイジャンプ前方
type = VelSet
trigger1 = stateno = 50
trigger1 = anim = 42
trigger1 = time = 1
trigger1 = var(3) >= 1
x = 5.5

[State -3, VelSet];ハイジャンプ後方
type = VelSet
trigger1 = stateno = 50
trigger1 = anim = 43
trigger1 = time = 1
trigger1 = var(3) >= 1
x = -6
;-----------------------------------
;小ジャンプ処理
;-----------------------------------
[State -3, VarSet];小ジャンプ判定
type = VarSet
triggerall = stateno = 40 || stateno = 41
trigger1 = var(59)=0
trigger1 = command != "holdup"
trigger2 = var(59)>0
trigger2 = p2bodydist x <= 130 && enemynear(var(58)),statetype!=L && (random<=300-(p2bodydist x<=70)*250)
trigger3 = var(59)>5
trigger3 = p2bodydist x <= 70 && enemynear(var(58)),stateno=5120
trigger4 = var(59)>7
trigger4 = fvar(39)=3.1
v = 4
value = 1

[State -3, VarSet];小ジャンプ消去
type = VarSet
triggerall = stateno = 40 || stateno = 41
trigger1 = var(59)=0
trigger1 = command = "holdup"
trigger2 = var(59)>0
trigger2 = p2bodydist x > 130-(fvar(39)=3.1)*30 || (enemynear(var(58)),statetype=A && enemynear(var(58)),pos y <=-35) || (p2bodydist x<=80&&random<=120&&fvar(39)!=3.1)
trigger3 = var(59)>0 && fvar(39)=3.5
v = 4
value = 0

[State -3, VelAdd];小ジャンプ
type = VelAdd
triggerall = stateno = 50
trigger1 = time = 1
trigger1 = var(4) = 1
y = 4;3
;-----------------------------------
;残像処理
;-----------------------------------
[State -3, AfterImage];残像
type = AfterImage
trigger1 = stateno = 50
trigger1 = time = 1
trigger1 = var(3) >= 1
time = 35
length = 3
frameGap = 1
timegap = 6
palbright = 0,0,0
palcontrast = 130,130,130
paladd = 0,0,0
palmul = 1,1,1
trans = add1

;-----------------------------------
;その他
;-----------------------------------
[State -3, 飛び越え防止]
type = Width
triggerall = stateno != 801 && stateno != 804
triggerall = stateno != 660
trigger1 = FrontEdgeDist < 8 && MoveType != H
edge = 3,

;---------------------------------------------------------------------------
;AIヘルパー
;---------------------------------------------------------------------------
[Statedef 20000]
anim=20000;なにも表示しないｱﾆﾒでもいいけど入れなくても全然問題ない
ctrl=0

[State 20000]
type = assertspecial
trigger1 = 1
flag = invisible

[State 20000]
type = NotHitBy
value = SCA
trigger1 = 1

[State 20000,間違いで本体が来たら立ちへ移行]
type=selfstate
trigger1=!ishelper
value=0

[State 20000,プレイヤー判定]
type=varset
trigger1=command="up"&&root,command="up"
trigger2=command="down"&&root,command="down"
trigger3=command="back"&&root,command="back"
trigger4=command="fwd"&&root,command="fwd"
trigger5=command="a"&&root,command="a"
trigger6=command="b"&&root,command="b"
trigger7=command="c"&&root,command="c"
trigger8=command="x"&&root,command="x"
trigger9=command="y"&&root,command="y"
trigger10=command="z"&&root,command="z"
trigger11=command="start"&&root,command="start"
var(59)=-1

[State 20000,立ったら消失]
Type = DestroySelf
triggerAll = isHelper
Trigger1 = root,var(59)||var(59)=-1
trigger2=command="up"&&root,command="up"
trigger3=command="down"&&root,command="down"
trigger4=command="back"&&root,command="back"
trigger5=command="fwd"&&root,command="fwd"
trigger6=command="a"&&root,command="a"
trigger7=command="b"&&root,command="b"
trigger8=command="c"&&root,command="c"
trigger9=command="x"&&root,command="x"
trigger10=command="y"&&root,command="y"
trigger11=command="z"&&root,command="z"
trigger12=command="start"&&root,command="start"

[State 20000,ﾌﾗｸﾞON]
type=varset
triggerall=var(59)!=-1
trigger1=root,command="up"
trigger2=root,command="down"
trigger3=root,command="back"
trigger4=root,command="fwd"
trigger5=root,command="a"
trigger6=root,command="b"
trigger7=root,command="c"
trigger8=root,command="x"
trigger9=root,command="y"
trigger10=root,command="z"
trigger11=root,command="start"
var(59)=1
