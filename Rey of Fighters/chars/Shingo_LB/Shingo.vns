;=================================================;
;Coding File for Shingo                           ;
;=================================================;
;Root variables
;Var   2 = Jump handling
;Var   3 = Jump handling
;Var   4 = Command Buffer
;Var   5 = Comand Buffer 2 (for Angel); Level check; Shingo Critical calculation
;Var   6 = Superpause check
;Var   9 = Display to Clipboard Message
;Var  11 = Guard Crush
;Var  12 = Used for cornerpush
;Var  13 = Dizzy Code 
;Var  14 = Dizzy Code
;Var  16 = Slowmotion Time
;Var  17 = UNCHAIN CIRCLE (for Angel)
;Var  19 = Throw Limitation
;Var  20 = Afterimage Switch
;Var  21 = Flash Switch
;Var  22 = Blood Switch (LB!)
;Var  23 = Command Detection Variable
;Var  24 = K.O. Background Switch
;Var  25 = Outdated System Switch (Free)
;Var  26 = Run buffer
;Var  27 = Transparency switch
;Var  28 = Recent Custom States
;Var  29 = Gametime Variable
;Var  30 = Primary AI Variable (Free)
;Var  31 = 2002/XI Switch
;Var  32 = 2002/XI Switch
;Var  33 = 2002/XI Switch
;Var  36 = Damage dampener
;Var  40 = AI jumping behavior
;Var  41 = AI combo map
;Var  50 = MAX Cancel PalFX
;Var  51 = MAX System
;Var  53 = MAX Cancel Check
;Var  54 = Super Cancel
;Var  55 = KOF Juggle System
;Var  56 = Counter Hit System
;Var  57 = Counter Hit System
;Var  58 = Juggle Special
;Var  59 = Simplifier Variable
;Floats
;FVar  0 = K.O. Voice
;FVar  1 = Cheap K.O.
;FVar  2 = K.O. Voice
;FVar  3 = Position Recorder
;FVar  4 = Velocity Recorder
;FVar  5 = Skillbar level (deprecated)
;FVar  6 = Cornerpush
;FVar  8 = Throw Escape Check
;FVar 34 = Basic Move Auto Recover (deprecated 1.0)
;FVar 35 = K.O. Voice
;FVar 36 = K.O. Voice


;---------------------------------------------------------------------------
; Win state decider Taken from KFM Plus some minor tweaks.
; Thanks to Neon_Tiger for pointing me out the VarRandom method.
[Statedef 180]
type = S

[State 180, 1]
type = ChangeState
triggerall = numenemy
trigger1 = Enemy, Name = "Kyo Kusanagi"
trigger2 = enemy, name = "Kyo Kusanagi 99"
trigger3 = enemy, name = "EX_Kyo"
trigger4 = enemy, name = "Kyo99"
trigger5 = enemy, name = "Kyo98"
trigger6 = enemy, name = "Kyo"
trigger7 = enemy, name = "cvskyo"
trigger8 = enemy, name = "NESTS Kyo"
trigger9 = enemy, name = "KOF_Kyo"
value = 178
[State 180, 1]
type = ChangeState
trigger1 = command = "hold_x" && command = "hold_a"
value = 175
[State 180, 1]
type = ChangeState
trigger1 = command = "hold_x" && command = "hold_y"
value = 176
[State 180, 1]
type = ChangeState
trigger1 = command = "hold_x" && command = "hold_b"
value = 177
[State 180, 1]
type = ChangeState
trigger1 = command = "hold_x"
value = 171
[State 180, 1]
type = ChangeState
trigger1 = command = "hold_a"
value = 172
[State 180, 1]
type = ChangeState
trigger1 = command = "hold_y"
value = 173
[State 180, 1]
type = ChangeState
trigger1 = command = "hold_b"
value = 174

[State 180, 1]
type = ChangeState
trigger1 = !time
value = 171+random%2

;---------------------------------------------------------------------------
; Win Action Number 1
[Statedef 171]
type = S
ctrl = 0
anim = 171
velset = 0,0

[State 182, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 191,3]
type = PlaySnd
trigger1 = animelem = 1
value = 171,0
channel = 0

[State 182, AssertSpecial]
type = AssertSpecial
trigger1 = anim = 171 && time = [1,180]
flag = roundnotover
;---------------------------------------------------------------------------
; Win Action Number 2
[Statedef 172]
type = S
ctrl = 0
anim = 172
velset = 0,0

[State 182, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 191,3]
type = PlaySnd
trigger1 = animelem = 5
value = 172,(random%2)
channel = 0

[State 182, AssertSpecial]
type = AssertSpecial
trigger1 = time = [1,359+15]
flag = roundnotover
;-------------------------------------------------------------------
;Win 3
[Statedef 173]
type = S
ctrl = 0
anim = 173
velset = 0,0

[State 182, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 191,3]
type = PlaySnd
trigger1 = animelem = 3
value = 173,0
channel = 0
[State 191,3]
type = PlaySnd
trigger1 = animelem = 8
value = 194,1
channel = 0

[State 182, AssertSpecial]
type = AssertSpecial
trigger1 = time = [1,214]
flag = roundnotover

;-------------------------------------------------------------------
;Win 4
[Statedef 174]
type = S
ctrl = 0
anim = 174+(random%2)
velset = 0,0

[State 182, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 191,3]
type = PlaySnd
trigger1 = animelem = 2
value = 174,0
channel = 0
[State 191,3]
type = PlaySnd
trigger1 = animelem = 7
value = 174,1
channel = 0

[State 182, AssertSpecial]
type = AssertSpecial
trigger1 = time = [1,227]
flag = roundnotover

;-------------------------------------------------------------------
;Win 5
[Statedef 175]
type = S
ctrl = 0
anim = 176
velset = 0,0

[State 182, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 191,3]
type = PlaySnd
trigger1 = animelem = 5
value = 175,0
channel = 0
[State 191,3]
type = PlaySnd
trigger1 = animelem = 18
value = 175,1
channel = 0

[State 182, AssertSpecial]
type = AssertSpecial
trigger1 = time = [1,287]
flag = roundnotover

;-------------------------------------------------------------------
;Win 6
[Statedef 176]
type = S
ctrl = 0
anim = 177
velset = 0,0

[State 182, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 191,3]
type = PlaySnd
trigger1 = animelem = 3
value = 176,0
channel = 0

[State 182, AssertSpecial]
type = AssertSpecial
trigger1 = time = [1,186]
flag = roundnotover

;-------------------------------------------------------------------
;Win 7
[Statedef 177]
type = S
ctrl = 0
anim = 178
velset = 0,0

[State 182, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 191,3]
type = PlaySnd
trigger1 = animelem = 1
value = 177,0
channel = 0
[State 191,3]
type = PlaySnd
trigger1 = animelem = 11
value = 177,1
channel = 0

[State 182, AssertSpecial]
type = AssertSpecial
trigger1 = time = [1,289]
flag = roundnotover

;-------------------------------------------------------------------
;Win vs Kyo
[Statedef 178]
type = S
ctrl = 0
anim = 179
velset = 0,0

[State 182, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 191,3]
type = PlaySnd
trigger1 = animelem = 2
value = 178,0
channel = 0
[State 191,3]
type = PlaySnd
trigger1 = animelem = 7
value = 178,1
channel = 0
[State 191,3]
type = PlaySnd
trigger1 = animelem = 8
value = 178,2
channel = 0
[State 191,3]
type = PlaySnd
trigger1 = animelem = 13
value = 178,3
channel = 0

[State 182, AssertSpecial]
type = AssertSpecial
trigger1 = time = [1,435]
flag = roundnotover

;-------------------------------------------------------------------
;Taken from KFM plus minor tweaks
;Intro
[Statedef 190]
type = S
ctrl = 0
anim = 0
velset = 0,0

[State 180, 1]
type = ChangeState
triggerall = numenemy
trigger1 = enemynear, name = "Kasumi"
trigger2 = enemynear, name = "Kasumi Todoh"
value = 184
[State 180, 1]
type = ChangeState
triggerall = numenemy
trigger1 = enemynear, name = "Iori Yagami"
trigger2 = enemynear, name = "Iori"
trigger3 = enemynear, name = "cvsiori"
trigger4 = enemynear, name = "F-Iori Yagami"
value = 183
[State 180, 1]
type = ChangeState
triggerall = numenemy
trigger1 = enemynear, name = "Kyo Kusanagi" && enemynear, authorname = "nazo"
trigger2 = enemynear, name = "Kyo Kusanagi" && enemynear, authorname = "David Demianoff"
value = 182
[State 180, 1]
type = ChangeState
triggerall = numenemy
trigger1 = enemynear, name = "Kyo Kusanagi 99"
trigger2 = enemynear, name = "Kyo_WLS"
trigger3 = enemynear, name = "EX_Kyo"
trigger4 = enemynear, name = "Kyo99"
trigger5 = enemynear, name = "NESTS Kyo"
value = 181
[State 180, 1]
type = ChangeState
triggerall = numenemy
trigger1 = enemynear, name = "Kyo Kusanagi" 
trigger2 = enemynear, name = "cvskyo"
trigger3 = enemynear, name = "Kyo"
trigger4 = enemynear, name = "Kyo98"
value = 194
[State 190, 1]
type = ChangeState
trigger1 = !time
value = 191+(random%3)

;-------------------------------------------------------------------
;Intro
[Statedef 191]
type = S
movetype = I
physics = S
anim = 190
ctrl = 0

[State 191, 1]
type = ChangeAnim
trigger1 = RoundState = 0
value = anim

[State 191,0]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay
flag2 = intro

[State 191,3]
type = PlaySnd
trigger1 = animelem = 8
value = 191,0
channel = 0

[State 191,4]
type = ChangeState
trigger1 = Animtime = 0;RoundState = 2
value = 0
ctrl = 0

;-------------------------------------------------------------------
;Intro '98
[Statedef 192]
type = S
movetype = I
physics = N
anim = 191
ctrl = 0

[State 191, 1]
type = ChangeAnim
trigger1 = RoundState = 0
value = anim

[State 191,0]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay
flag2 = intro

[State 191,3]
type = PlaySnd
trigger1 = animelem = 4
value = 192,0
channel = 0
persistent = 0
[State 191,3]
type = PlaySnd
trigger1 = animelem = 14, = 9
value = 192,1
channel = 0
persistent = 0

[State 191,4]
type = ChangeState
trigger1 = Animtime = 0;RoundState = 2
value = 0
ctrl = 0

;-------------------------------------------------------------------
;Intro '99
[Statedef 193]
type = S
movetype = I
physics = S
anim = 192
ctrl = 0

[State 191, 1]
type = ChangeAnim
trigger1 = RoundState = 0
value = anim

[State 191,0]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay
flag2 = intro

[State 191,3]
type = PlaySnd
trigger1 = animelem = 4
value = 193,0
channel = 0
[State 191,3]
type = PlaySnd
trigger1 = animelem = 20
value = 193,1
channel = 0
[State 191,3]
type = PlaySnd
trigger1 = animelem = 29
value = 4,4
[State 193, Explod]
type = Explod
trigger1 = animelem = 29
anim = 30192
ID = 30192
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
bindtime = 1
sprpriority = 2
vel = -3,0.5

[State 191,4]
type = ChangeState
trigger1 = Animtime = 0;RoundState = 2
value = 0
ctrl = 0

;---------------------------------------------------------------------------
;Intro vs Kyo '98
[Statedef 194]
type = S
movetype = I
physics = S
anim = 193
ctrl = 0

[State 191, 1]
type = ChangeAnim
trigger1 = RoundState = 0
value = anim

[State 191,0]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay
flag2 = intro

[State 191,3]
type = PlaySnd
trigger1 = animelem = 3
value = 194,0
channel = 0
[State 191,3]
type = PlaySnd
trigger1 = animelem = 10
value = 194,1
channel = 0
[State 191,3]
type = PlaySnd
trigger1 = animelem = 13
value = 194,2
channel = 0

[State 191,4]
type = ChangeState
trigger1 = Animtime = 0;RoundState = 2
value = 0
ctrl = 0

;---------------------------------------------------------------------------
;Intro vs Kyo '99
[Statedef 181]
type = S
movetype = I
physics = S
anim = 194
ctrl = 0

[State 191, 1]
type = ChangeAnim
trigger1 = RoundState = 0
value = anim

[State 191,0]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay
flag2 = intro

[State 191,3]
type = PlaySnd
trigger1 = animelem = 4
value = 181,0
channel = 0
[State 191,3]
type = PlaySnd
trigger1 = animelem = 21
value = 181,1
channel = 0

[State 191,4]
type = ChangeState
trigger1 = Animtime = 0;RoundState = 2
value = 0
ctrl = 0

;---------------------------------------------------------------------------
;Intro vs Kyo '99
[Statedef 182]
type = S
movetype = I
physics = S
anim = 181
ctrl = 0

[State 191, 1]
type = ChangeAnim
trigger1 = RoundState = 0
value = anim

[State 191,0]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay
flag2 = intro

[State 191,3]
type = PlaySnd
trigger1 = animelem = 4
value = 182,0
channel = 0
[State 191,3]
type = PlaySnd
trigger1 = animelem = 14
value = 182,1
channel = 0

[State 191,4]
type = ChangeState
trigger1 = Animtime = 0;RoundState = 2
value = 0
ctrl = 0

;---------------------------------------------------------------------------
;Intro vs Iori
[Statedef 183]
type = S
movetype = I
physics = S
anim = 182
ctrl = 0

[State 191, 1]
type = ChangeAnim
trigger1 = RoundState = 0
value = anim

[State 191,0]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay
flag2 = intro

[State 191,3]
type = PlaySnd
trigger1 = animelem = 3
value = 183,0
channel = 0
[State 191,3]
type = PlaySnd
trigger1 = animelem = 8
value = 191,0
channel = 0
[State 191,3]
type = PlaySnd
trigger1 = animelem = 14
value = 183,1
channel = 0

[State 191,4]
type = ChangeState
trigger1 = Animtime = 0;RoundState = 2
value = 0
ctrl = 0

;---------------------------------------------------------------------------
;Intro vs Kasumi
[Statedef 184]
type = S
movetype = I
physics = S
anim = 183
ctrl = 0

[State 191, 1]
type = ChangeAnim
trigger1 = RoundState = 0
value = anim

[State 191,0]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay
flag2 = intro

[State 191,3]
type = PlaySnd
trigger1 = animelem = 7
value = 184,0
channel = 0
[State 191,3]
type = PlaySnd
trigger1 = animelem = 19
value = 184,1
channel = 0

[State 191,4]
type = ChangeState
trigger1 = Animtime = 0;RoundState = 2
value = 0
ctrl = 0



;---------------------------------------------------------------------------
; Taunt, taken from KFM
[Statedef 195]
type = S
ctrl = 0
velset = 0,0
movetype = I
physics = S
sprpriority = 2

[State 191, 1]
type = ChangeAnim
trigger1 = !var(10) && !time
value = 195+var(8)

[State 191, 1]
type = ChangeAnim
trigger1 = var(10) && !time
value = 20195

[State 195, 1]
type = CtrlSet
trigger1 = Time = 40
value = 1

[State 195, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 191,3]
type = PlaySnd
trigger1 = anim = 195
trigger1 = animelem = 1
value = 195,0
channel = 19
[State 191,3]
type = PlaySnd
trigger1 = anim = 195
trigger1 = animelem = 6
value = 195,1
channel = 19
[State 191,3]
type = PlaySnd
trigger1 = anim = 195
trigger1 = animelem = 16
value = 195,2
channel = 19


;-------------------------------------------------------------------
;Taken from KFM plus minor tweaks
;Intro vs 98 Kyo
[Statedef 196]
type = S
movetype = I
physics = S
ctrl = 0

[State 191, 1]
type = ChangeAnim
trigger1 = RoundState = 0
value = 194

[State 191,0]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay
flag2 = intro
flag3 = nomusic

[State 1000: Helper]
type = Helper
trigger1 = animelem = 6
helpertype = Normal
name = "Honoo"
id = 196
pos = 0, 0
postype = p1
facing = 1
stateno = 10196
keyctrl = 0
ownpal = 1
supermovetime = 9999
pausemovetime = 9999

[State 191,3]
type = PlaySnd
trigger1 = animelem = 4, = 1
value = 194,0+(random%2)
channel = 0

[State 191,3]
type = PlaySnd
trigger1 = animelem = 8, = 67
value = 194,2
channel = 0
lowpriority = 1

[State 191,4]
type = ChangeState
trigger1 = Animtime = 0;RoundState = 2
value = 0
ctrl = 0

;---------------------------------------------------------------------------
; LOSE (Time over)
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 181, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = 170,0
channel = 0

[State 170, Explod]
type = Explod
trigger1 = animelem = 5 
anim = 30170
ID = 30171
pos = 0,0
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -1

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; HIT_LIEDEAD
[Statedef 5150]
type    = L
movetype= H
physics = N
sprpriority = -3

[State 5150, 1] ;Normal anim
type = ChangeAnim
triggerall = Time = 0
triggerall = SelfAnimExist(5140)
trigger1 = (anim != [5111,5119]) && (anim != [5171,5179])
trigger2 = !SelfAnimExist(5140 + (anim % 10))
value = 5140

[State 5150, 3] ;Hit up type anim
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (anim = [5111,5119]) || (anim = [5171,5179])
trigger1 = SelfAnimExist(5140 + (anim % 10))
value = 5140 + (anim % 10)

[State 5150, 4] ;Match over anim
type = ChangeAnim
persistent = 0
;trigger1 = Time = 0
trigger1 = MatchOver = 1
trigger1 = Anim = [5140,5149]
trigger1 = SelfAnimExist(anim+10)
value = anim+10

[State 5150, 5] ;Switch to 5110 if liedead anim does not exist
type = ChangeAnim
trigger1 = PrevStateno != 5950
trigger1 = Time = 0
trigger1 = Anim != [5140,5159]
trigger1 = Anim != [5110,5119]
value = 5110

[State 5150, 6] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 5150, 7] ;Friction
type = VelSet
trigger1 = Vel x < .05
persistent = 0
x = 0

[State 5150, 8]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; HIT_FALLRECOVER (on the ground)
[Statedef 5201]
type    = S
movetype= H
physics = N
anim = 5200

[State 1300, PlaySnd]
type = PlaySND
trigger1 = animelem = 1
value = 5200,0

[State 5201, 1] ;Turn if not facing opponent
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < -5

[State 5201, 3]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5201, VelSet]
type = VelSet
trigger1 = !time
x =-11.5
y = 0

[State 5201, VelSet]
type = VelSet
trigger1 = time = 1
x = -7.921875

[State 5201, VelMul]
type = VelMul
trigger1 = 1
x = 0.8125

[State 750, Push]
type = PlayerPush
trigger1 = 1
value = 0

[State 5201, 4]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 5201, 6]
type = GameMakeAnim
trigger1 = Time = 1
value = 60
pos = 0, 0
under = 1

[State 705, 1]
type = SelfState
trigger1 = Animtime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------------------
; Cheap KO
[Statedef 5950]
physics = S
movetype = H
ctrl = 0
velset = 0,0

[State 5950, 1]
type = HitVelSet
trigger1 = Time = 0
x = 2

[State 5950, 4]
type = VelSet
trigger1 = HitOver
x = 0

[State 5950, 4]
type = NotHitBy
trigger1 = 1
value = SCA

[State 5950, 4]
type = ChangeAnim
trigger1 = !HitOver
value = ifElse(FVar(1)=0,5010,5020)

[State 190, 4]
type = ChangeAnim
trigger1 = HitOver
value = 5950
persistent = 0

[State 1100, ChangeState]
type = ChangeState
trigger1 = anim = 5950
trigger1 = !animtime
value = 5150


;----------------------------------------
;Light Punch
[Statedef 200];Ok
type = S
movetype = A
physics = S
anim = 200
velset = 0,0
ctrl = 0
juggle = 8
facep2 = 1

[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = time = 0
value = 3+(var(32)*2),0
[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = !time && random <= 700
value = 200,0
channel = 0

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 3
movetype = I

[State 205, 1]
type = HitDef
triggerall = !var(55)
trigger1 = AnimElemtime(2) >= 0 && animelemtime(3) < 0
attr = S, NA
damage = floor(33*ifelse(var(56),1.25,1))
animtype = Light
air.animtype = Back
ground.type = Low
guardflag = MA
hitflag = MAF
sparkno = s17000+(var(31)*10000)
sparkxy = -10, -92
hitsound = s3+(var(32)*2+((random%3)*var(32))),1
guardsound = s3+(var(32)*2), 12
guard.sparkno = s17500+(var(31)*10000)
priority = 6, Hit
pausetime = 7,9
guard.pausetime = 7,8
ground.slidetime = 9
ground.hittime = 8
guard.hittime = 8
guard.slidetime = 9
guard.ctrltime = 16
ground.velocity = -5.796875
air.velocity = -4.5,-7
air.juggle = 0
getpower = 47,47
givepower = 16,16
air.fall = 0
forcenofall = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5
persistent = 0

[State -2, Juggle Killer]
type = VarSet
trigger1 = movehit && P2Statetype = A
var(55) = 1
ignorehitpause = 1
persistent = 0

[State 200,1]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1

;----------------------------------------
;Light Punch (close)
[Statedef 205];Ok
type = S
movetype = A
physics = S
anim = 205
velset = 0,0
ctrl = 0
juggle = 8
facep2 = 1

[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = time = 0
value = 3+(var(32)*2),0
[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = !time && random <= 700
value = 200,0
channel = 0

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 3
movetype = I

[State 205, 1]
type = HitDef
triggerall = !var(55) 
trigger1 = AnimElemtime(2) >= 0 && animelemtime(3) < 0
attr = S, NA
damage = floor(25*ifelse(var(56),1.25,1))
animtype = Light
air.animtype = Back
ground.type = High
guardflag = MA
hitflag = MAF
sparkno = s17000+(var(31)*10000)
sparkxy = -10, -92
hitsound = s3+(var(32)*2+((random%3)*var(32))),1
guardsound = s3+(var(32)*2), 12
guard.sparkno = s17500+(var(31)*10000)
priority = 6, Hit
pausetime = 7,9
guard.pausetime = 7,8
ground.slidetime = 9
ground.hittime = 8
guard.hittime = 8
guard.slidetime = 9
guard.ctrltime = 16
ground.velocity = -5.796875
air.velocity = -4.5,-7
air.juggle = 0
getpower = 47,47
givepower = 16,16
air.fall = 0
forcenofall = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5
persistent = 0

[State -2, Juggle Killer]
type = VarSet
trigger1 = movehit && P2Statetype = A
var(55) = 1
ignorehitpause = 1
persistent = 0

[State 200,1]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1

;----------------------------------------
;Hard Punch
[Statedef 210];Ok
type = S
movetype = A
physics = S
velset = 0,0
ctrl = 0
anim = 210
juggle = 8
facep2 = 1

[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = time = 0
value = 3+(var(32)*2),2
[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = !time && random <= 700
value = 210,0
channel = 0

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 7
movetype = I

[State 310, PosAdd]
type = PosAdd
trigger1 = animelem = 4
trigger2 = animelem = 5
x = 8
[State 310, PosAdd]
type = PosAdd
trigger1 = animelem = 6
x = 6

[State 210, 1]
type = HitDef
triggerall = !var(55) 
trigger1 = AnimElemtime(5) >= 0 && animelemtime(7) < 0
attr = S, NA
damage = floor(83*ifelse(var(56),1.25,1))
animtype = Hard
air.animtype = Back
ground.type = low
guardflag = MA
hitflag = MAF
priority = 5, Hit
sparkno = s17001+(var(31)*10000)
sparkxy = -10, -44
hitsound = s3+(var(32)*2+((random%3)*var(32))),3
guardsound = s3+(var(32)*2), 13-(var(32))
guard.sparkno = s17501+(var(31)*10000)
pausetime = 11,13
guard.pausetime = 11,12
ground.slidetime = 17
ground.hittime = 16
guard.hittime = 16
guard.slidetime = 17
guard.ctrltime = 28
ground.velocity = -11.1796875
air.type = High
air.velocity = -4.5,-7
air.hittime = 13
air.juggle = 0
getpower = 94,94
givepower = 16,16
air.fall = 0
forcenofall = 1
id = 210
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5
persistent = 0
[State 210, 1]
type = HitDef
triggerall = !var(55) 
trigger1 = AnimElemtime(3) >= 0 && animelemtime(4) < 0
attr = S, NA
damage = floor(67*ifelse(var(56),1.25,1))
animtype = Hard
air.animtype = Back
ground.type = High
guardflag = MA
hitflag = MAF
priority = 5, Hit
sparkno = s17001+(var(31)*10000)
sparkxy = -10, -116
hitsound = s3+(var(32)*2+((random%3)*var(32))),3
guardsound = s3+(var(32)*2), 13-(var(32))
guard.sparkno = s17501+(var(31)*10000)
pausetime = 11,13
guard.pausetime = 11,12
ground.slidetime = 17
ground.hittime = 16
guard.hittime = 16
guard.slidetime = 17
guard.ctrltime = 28
ground.velocity = -11.1796875
air.type = High
air.velocity = -4.5,-7
air.hittime = 13
air.juggle = 0
getpower = 94,94
givepower = 16,16
air.fall = 0
forcenofall = 1
nochainid = 210
id = 211
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5
persistent = 0

[State -2, Juggle Killer]
type = VarSet
trigger1 = movehit && P2Statetype = A
var(55) = 1
ignorehitpause = 1
persistent = 0

[State 210,2]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1
;----------------------------------------
;Hard Punch (Close)
[Statedef 215];Ok
type = S
movetype = A
physics = N
velset = 0,0
ctrl = 0
anim = 215
juggle = 8
facep2 = 1

[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = time = 0
value = 3+(var(32)*2),2
[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = !time && random <= 700
value = 210,0
channel = 0

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 210, 1]
type = HitDef
triggerall = !var(55) 
trigger1 = AnimElemtime(2) >= 0 && animelemtime(3) < 0
attr = S, NA
damage = floor(67*ifelse(var(56),1.25,1))
animtype = Hard
air.animtype = Back
ground.type = low
guardflag = MA
hitflag = MAF
priority = 5, Hit
sparkno = s17001+(var(31)*10000)
sparkxy = -10, -44
hitsound = s3+(var(32)*2+((random%3)*var(32))),3
guardsound = s3+(var(32)*2), 13-(var(32))
guard.sparkno = s17501+(var(31)*10000)
pausetime = 11,13
guard.pausetime = 11,12
ground.slidetime = 17
ground.hittime = 16
guard.hittime = 16
guard.slidetime = 17
guard.ctrltime = 28
ground.velocity = -11.1796875
air.type = High
air.velocity = -4.5,-7
air.hittime = 13
air.juggle = 0
getpower = 94,94
givepower = 16,16
air.fall = 0
forcenofall = 1
id = 215
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5
persistent = 0
[State 210, 1]
type = HitDef
triggerall = !var(55) 
trigger1 = AnimElemtime(3) >= 0 && animelemtime(4) < 0
attr = S, NA
damage = floor(67*ifelse(var(56),1.25,1))
animtype = Hard
air.animtype = Back
ground.type = High
guardflag = MA
hitflag = MAF
priority = 5, Hit
sparkno = s17001+(var(31)*10000)
sparkxy = -10, -116
hitsound = s3+(var(32)*2+((random%3)*var(32))),3
guardsound = s3+(var(32)*2), 13-(var(32))
guard.sparkno = s17501+(var(31)*10000)
pausetime = 11,13
guard.pausetime = 11,12
ground.slidetime = 17
ground.hittime = 16
guard.hittime = 16
guard.slidetime = 17
guard.ctrltime = 28
ground.velocity = -11.1796875
air.type = High
air.velocity = -4.5,-7
air.hittime = 13
air.juggle = 0
getpower = 94,94
givepower = 16,16
air.fall = 0
forcenofall = 1
nochainid = 215
id = 215
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5
persistent = 0

[State -2, Juggle Killer]
type = VarSet
trigger1 = movehit && P2Statetype = A
var(55) = 1
ignorehitpause = 1
persistent = 0

[State 220,2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------
;Light Kick
[Statedef 300];Ok
type = S
movetype = A
physics = N
anim = 300
velset = 0,0
ctrl = 0
juggle = 8
facep2 = 1

[State 300, Kick Attempt Sound]
type = PlaySnd
trigger1 = time = 0
value = 3+(var(32)*2),4
[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = !time && random <= 700
value = 200,0
channel = 0

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 5
movetype = I

[State 205, 1]
type = HitDef
triggerall = !var(55)
trigger1 = AnimElemtime(4) >= 0 && animelemtime(5) < 0
attr = S, NA
damage = floor(33*ifelse(var(56),1.25,1))
animtype = Light
air.animtype = Back
ground.type = High
guardflag = MA
hitflag = MAF
sparkno = s17000+(var(31)*10000)
sparkxy = -10, -82
hitsound = s3+(var(32)*2+((random%3)*var(32))),5
guardsound = s3+(var(32)*2), 12;s2, 6
guard.sparkno = s17500+(var(31)*10000)
priority = 6, Hit
pausetime = 7,9
guard.pausetime = 7,8
ground.slidetime = 9
ground.hittime = 8
guard.hittime = 9
guard.slidetime = 10
guard.ctrltime = 17
ground.velocity = -5.796875
air.velocity = -4.5,-7
air.hittime = 13
air.juggle = 0
getpower = 47,47
givepower = 16,16
air.fall = 0
id = 300
;nochainid = 300
forcenofall = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.546875
persistent = 0

[State -2, Juggle Killer]
type = VarSet
trigger1 = movehit && P2Statetype = A
var(55) = 1
ignorehitpause = 1
persistent = 0

[State 300,2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------
;Light Kick (Close)
[Statedef 305];Ok
type = S
movetype = A
physics = N
anim = 305
velset = 0,0
ctrl = 0
juggle = 8
facep2 = 1

[State 300, Kick Attempt Sound]
type = PlaySnd
trigger1 = time = 0
value = 3+(var(32)*2),4
[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = !time && random <= 700
value = 200,0
channel = 0

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 205, 1]
type = HitDef
triggerall = !var(55)
trigger1 = AnimElemtime(3) >= 0 && animelemtime(4) < 0
attr = S, NA
damage = floor(30*ifelse(var(56),1.25,1))
animtype = Light
air.animtype = Back
ground.type = Low
guardflag = MA
hitflag = MAF
sparkno = s17000+(var(31)*10000)
sparkxy = -20, -44
hitsound = s3+(var(32)*2+((random%3)*var(32))),5
guardsound = s3+(var(32)*2), 12;s2, 6
guard.sparkno = s17500+(var(31)*10000)
priority = 6, Hit
pausetime = 7,9
guard.pausetime = 7,8
ground.slidetime = 9
ground.hittime = 8
guard.hittime = 9
guard.slidetime = 10
guard.ctrltime = 17
ground.velocity = -5.796875
air.velocity = -4.5,-7
air.hittime = 13
air.juggle = 0
getpower = 47,47
givepower = 16,16
air.fall = 0
id = 305
;nochainid = 305
forcenofall = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.546875
persistent = 0

[State -2, Juggle Killer]
type = VarSet
trigger1 = movehit && P2Statetype = A
var(55) = 1
ignorehitpause = 1
persistent = 0

[State 300,2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------
;Hard Kick
[Statedef 310];Ok
type = S
movetype = A
physics = S
anim = 310
velset = 0,0
ctrl = 0
juggle = 8
facep2 = 1

[State 300, Kick Attempt Sound]
type = PlaySnd
trigger1 = time = 0
value = 3+(var(32)*2),6
[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = !time && random <= 700
value = 210,0
channel = 0

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 6
movetype = I
[State 210, 1]
type = HitDef
triggerall = !var(55) 
trigger1 = AnimElemtime(5) >= 0 && animelemtime(6) < 0
attr = S, NA
damage = floor(100*ifelse(var(56),1.25,1))
animtype = Hard
air.animtype = back
guardflag = MA
hitflag = MAF
priority = 5, Hit
sparkno = s17001+(var(31)*10000)
sparkxy = -10, -82
hitsound = s3+(var(32)*2+((random%3)*var(32))),7
guardsound = s3+(var(32)*2), 13-(var(32))
guard.sparkno = s17501+(var(31)*10000)
ground.type = High
pausetime = 11,13
guard.pausetime = 11,12
ground.slidetime = 17
ground.hittime = 16
guard.hittime = 16
guard.slidetime = 17
guard.ctrltime = 28
ground.velocity = -11.1796875
air.type = High
air.velocity = -4.5,-7
air.hittime = 13
air.juggle = 0
getpower = 94,94
givepower = 16,16
id = 310
air.fall = 0
forcenofall = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
persistent = 0

[State -2, Juggle Killer]
type = VarSet
trigger1 = movehit && P2Statetype = A
var(55) = 1
ignorehitpause = 1
persistent = 0

[State 320,2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------
;Hard Kick (Close)
[Statedef 315];Ok
type = S
movetype = A
physics = N
anim = 315
velset = 0,0
ctrl = 0
juggle = 8
facep2 = 1

[State 300, Kick Attempt Sound]
type = PlaySnd
trigger1 = time = 0
value = 3+(var(32)*2),6
[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = !time && random <= 700
value = 210,0
channel = 0

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I
[State 210, 1]
type = HitDef
triggerall = !var(55) 
trigger1 = AnimElemtime(3) >= 0 && animelemtime(4) < 0
attr = S, NA
damage = floor(67*ifelse(var(56),1.25,1)) ;1.24 Mul for Counter Hit
animtype = Hard
air.animtype = back
guardflag = MA
hitflag = MAF
priority = 5, Hit
sparkno = s17001+(var(31)*10000)
sparkxy = -20, -68
hitsound = s3+(var(32)*2+((random%3)*var(32))),7
guardsound = s3+(var(32)*2), 13-(var(32))
guard.sparkno = s17501+(var(31)*10000)
ground.type = Low
pausetime = 11,13
guard.pausetime = 11,12
ground.slidetime = 17
ground.hittime = 16
guard.hittime = 16
guard.slidetime = 17
guard.ctrltime = 28
ground.velocity = -11.1796875
air.type = High
air.velocity = -4.5,-7
air.hittime = 13
air.juggle = 0
getpower = 94,94
givepower = 16,16
air.fall = 0
forcenofall = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
persistent = 0

[State -2, Juggle Killer]
type = VarSet
trigger1 = movehit && P2Statetype = A
var(55) = 1
ignorehitpause = 1
persistent = 0

[State 320,2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------
;Crouching Light Punch
[Statedef 400];Ok
type = C
movetype = A
physics = N
anim = 400
juggle = 8
ctrl = 0
velset = 0,0
facep2 = 1

[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = time = 0
value = 3+(var(32)*2),0
[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = !time && random <= 700
value = 200,0
channel = 0

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 3
movetype = I

[State 200, Hit Def]
type = HitDef
triggerall = !var(55)
trigger1 = AnimElemtime(2) >= 0 && animelemtime(3) < 0
attr = C, NA
damage = floor(17*ifelse(var(56),1.25,1))
animtype = Light
air.animtype = back
guardflag = MA
hitflag = MAF
priority = 6, Hit
sparkno = s17000+(var(31)*10000)
sparkxy = -10, -44
hitsound = s3+(var(32)*2+((random%3)*var(32))),1
guardsound = s3+(var(32)*2), 12;s2, 6
guard.sparkno = s17500+(var(31)*10000)
ground.type = low
priority = 6, Hit
pausetime = 7,9
guard.pausetime = 7,8
ground.slidetime = 9
ground.hittime = 8
guard.hittime = 8
guard.slidetime = 9
guard.ctrltime = 16
ground.velocity = -5.796875
air.velocity = -4.5,-7
air.juggle = 0
getpower = 47,47
givepower = 16,16
air.fall = 0
forcenofall = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
persistent = 0

[State -2, Juggle Killer]
type = VarSet
trigger1 = movehit && P2Statetype = A
var(55) = 1
ignorehitpause = 1
persistent = 0

[State 400,3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1
;--------------------------------------------
;Crouching Hard Punch
[Statedef 405];Ok
type = C
movetype = A
physics = N
juggle = 8
anim = 405
ctrl = 0
velset = 0,0
facep2 = 1

[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = time = 0
value = 3+(var(32)*2),2
[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = !time && random <= 700
value = 210,0
channel = 0

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 5
movetype = I

[State 210, 1]
type = HitDef
triggerall = !var(55)
trigger1 = AnimElemtime(3) >= 0 && animelemtime(4) < 0
attr = C, NA
damage = floor(67*ifelse(var(56),1.25,1))
animtype = Hard
air.animtype = back
guardflag = MA
hitflag = MAF
priority = 5, Hit
sparkno = s17001+(var(31)*10000)
sparkxy = -10, -82
hitsound = s3+(var(32)*2+((random%3)*var(32))),3
guardsound = s3+(var(32)*2), 13-(var(32));s2, 7
guard.sparkno = s17501+(var(31)*10000)
ground.type = High
pausetime = 11,13
guard.pausetime = 11,12
ground.slidetime = 17
ground.hittime = 16
guard.hittime = 16
guard.slidetime = 17
guard.ctrltime = 28
ground.velocity = -11.1796875
air.type = High
air.velocity = -4.5,-7;.25
air.hittime = 13
air.juggle = 0
getpower = 94,94
givepower = 16,16
air.fall = 0
forcenofall = 1
id = 405
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
persistent = 0
[State 210, 1]
type = HitDef
triggerall = !var(55)
trigger1 = AnimElemtime(4) >= 0 && animelemtime(5) < 0
attr = C, NA
damage = floor(67*ifelse(var(56),1.25,1))
animtype = Hard
air.animtype = back
guardflag = MA
hitflag = MAF
priority = 5, Hit
sparkno = s17001+(var(31)*10000)
sparkxy = -10, -126
hitsound = s3+(var(32)*2+((random%3)*var(32))),3
guardsound = s3+(var(32)*2), 13-(var(32));s2, 7
guard.sparkno = s17501+(var(31)*10000)
ground.type = High
pausetime = 11,13
guard.pausetime = 11,12
ground.slidetime = 17
ground.hittime = 16
guard.hittime = 16
guard.slidetime = 17
guard.ctrltime = 28
ground.velocity = -11.1796875
air.type = High
air.velocity = -4.5,-7;.25
air.hittime = 13
air.juggle = 0
getpower = 94,94
givepower = 16,16
air.fall = 0
forcenofall = 1
id = 406
nochainid = 405
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
persistent = 0

[State -2, Juggle Killer]
type = VarSet
trigger1 = movehit && P2Statetype = A
var(55) = 1
ignorehitpause = 1
persistent = 0

[State 405,3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1
;-------------------------------------
;Crouching Light Kick
[Statedef 500];Ok
type = c
movetype = A
physics = N
juggle = 8
anim = 500
ctrl = 0
velset = 0,0
facep2 = 1

[State 300, Kick Attempt Sound]
type = PlaySnd
trigger1 = time = 0
value = 3+(var(32)*2),4
[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = !time && random <= 700
value = 200,0
channel = 0

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 3
movetype = I

[State 200, Hit Def]
type = HitDef
triggerall = !var(55)
trigger1 = AnimElemtime(2) >= 0 && animelemtime(3) < 0
attr = C, NA
damage = floor(33*ifelse(var(56),1.25,1))
animtype = Light
air.animtype = back
guardflag = L
hitflag = MA
priority = 6, Hit
sparkno = s17000+(var(31)*10000)
sparkxy = -10, -8
hitsound = s3+(var(32)*2+((random%3)*var(32))),5
guardsound = s3+(var(32)*2), 12;s2, 6
guard.sparkno = s17500+(var(31)*10000)
ground.type = low
priority = 7, Hit
pausetime = 7,9
guard.pausetime = 7,8
ground.slidetime = 9
ground.hittime = 8
guard.hittime = 9
guard.slidetime = 10
guard.ctrltime = 17
ground.velocity = -5.796875
air.velocity = -4.5,-7
air.hittime = 13
air.juggle = 0
getpower = 47,47
givepower = 16,16
air.fall = 0
forcenofall = 1
id = 500
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
persistent = 0

[State -2, Juggle Killer]
type = VarSet
trigger1 = movehit && P2Statetype = A
var(55) = 1
ignorehitpause = 1
persistent = 0

[State 500,3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1
;--------------------------------------------
;Crouching Hard Kick 
[Statedef 505];Ok
type = c
movetype = A
physics = C
juggle = 8
anim = 505
ctrl = 0
velset = 0,0
facep2 = 1

[State 300, Kick Attempt Sound]
type = PlaySnd
trigger1 = time = 0
value = 3+(var(32)*2),6
[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = !time && random <= 700
value = 210,0
channel = 0

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 6
movetype = I

[State 210, 1]
type = HitDef
triggerall = !var(55)
trigger1 = AnimElemtime(5) >= 0 && animelemtime(6) < 0
attr = C, NA
damage = floor(100*ifelse(var(56),1.25,1))
animtype = Hard
air.animtype = back
guardflag = L
hitflag = MA
priority = 5, Hit
sparkno = s17001+(var(31)*10000)
sparkxy = -10, -20
hitsound = s3+(var(32)*2+((random%3)*var(32))),7
guardsound = s3+(var(32)*2), 13-(var(32));s2, 6
guard.sparkno = s17501+(var(31)*10000)
ground.type = Trip
pausetime = 11,13
guard.pausetime = 11,12
ground.slidetime = 27
ground.hittime = 26
guard.hittime = 17
guard.slidetime = 18
guard.ctrltime = 29
ground.velocity = -1.75,-10.25341796875
fall.yvelocity = -2-(p2statetype=A)*0.5
guard.velocity = -11.1796875
air.type = High
air.velocity = -5.5,-8.5
air.hittime = 13
air.juggle = 0
getpower = 94,94
givepower = 16,16
fall = 1
id = 506
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.807692307692307692307692307692308
persistent = 0

[State -2, Juggle Killer]
type = VarSet
trigger1 = movehit && P2Statetype = A
var(55) = 1
ignorehitpause = 1
persistent = 0

[State 510,3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1
;--------------------------------------------
;Jumping Light Punch
[Statedef 600];Ok
type = A
movetype = A
physics = N
anim = 600+ifelse((var(3)=2),1,5*(Vel X != 0))
ctrl = 0
juggle = 8

[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = time = 0
value = 3+(var(32)*2),0
[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = !time && random <= 700
value = 200,0
channel = 0

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 50, Gravity]
type = Gravity
trigger1 = prevstateno != 40
trigger2 = prevstateno = 40 && time > 0

[State 600, 1]
type = HitDef
triggerall = !var(55) 
trigger1 = AnimElemtime(3) >= 0 && animelemtime(4) < 0
attr = A, NA
damage = floor(33*ifelse(var(56),1.25,1))
animtype = Medium
guardflag = HA
hitflag = MAF
priority = 6, Hit
sparkno = s17000+(var(31)*10000)
sparkxy = -10, -54
hitsound = s3+(var(32)*2+((random%3)*var(32))),1
guardsound = s3+(var(32)*2), 12;s2, 6
guard.sparkno = s17500+(var(31)*10000)
pausetime = 11,13
guard.pausetime = 11,12
ground.slidetime = 9
ground.hittime = 8
guard.hittime = 8
guard.slidetime = 9
guard.ctrltime = 17
ground.type = low
ground.velocity = -5.796875
air.velocity = -4.5,-7
air.juggle = 0
getpower = 47,47
givepower = 16,16
air.fall = 0
forcenofall = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5
persistent = 0

[State -2, Juggle Killer]
type = VarSet
trigger1 = movehit && P2Statetype = A
var(55) = 1
ignorehitpause = 1
persistent = 0

[State 40, 6]
type = ChangeState
trigger1 = Pos Y + Vel Y >= 0
value = 52

;----------------------------------------
;Jumping Hard Punch
[Statedef 610];Ok
type = A
movetype = A
physics = N
anim = 610+ifelse((var(3)=2),1,5*(Vel X != 0))
ctrl = 0
juggle = 8

[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = time = 1
value = 3+(var(32)*2),2
[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = time = 1 && random <= 700
value = 210,0
channel = 0

[State 50, Gravity]
type = Gravity
trigger1 = prevstateno != 40
trigger2 = prevstateno = 40 && time > 0

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 600, 1]
type = HitDef
triggerall = !var(55)
trigger1 = AnimElemtime(3) >= 0 && animelemtime(4) < 0
attr = A, NA
damage = floor(83*ifelse(var(56),1.25,1))
animtype = medium
guardflag = HA
hitflag = MAF
priority = 5, Hit
sparkno = s17001+(var(31)*10000)
sparkxy = -10, -60
hitsound = s3+(var(32)*2+((random%3)*var(32))),3
guardsound = s3+(var(32)*2), 13-(var(32));s2, 7
guard.sparkno = s17501+(var(31)*10000)
ground.type = Low
pausetime = 11,13
guard.pausetime = 11,12
ground.slidetime = 9
ground.hittime = 8
guard.hittime = 8
guard.slidetime = 9
guard.ctrltime = 22
guard.velocity = -11.1796875
ground.velocity = -5.796875
air.velocity = -4.5,-7
air.juggle = 0
getpower = 94,94
givepower = 16,16
id = 610
forcenofall = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5
persistent = 0

[State -2, Juggle Killer]
type = VarSet
trigger1 = movehit && P2Statetype = A
var(55) = 1
ignorehitpause = 1
persistent = 0

[State 40, 6]
type = ChangeState
trigger1 = Pos Y + Vel Y >= 0
value = 52
;----------------------------------------
;Jumping Light Kick
[Statedef 700];Ok
type = A
movetype = A
physics = N
anim = 700+ifelse((var(3)=2),1,5*(Vel X != 0))
ctrl = 0
juggle = 8

[State 300, Kick Attempt Sound]
type = PlaySnd
trigger1 = time = 0
value = 3+(var(32)*2),4
[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = !time && random <= 700
value = 200,0
channel = 0

[State 50, Gravity]
type = Gravity
trigger1 = prevstateno != 40
trigger2 = prevstateno = 40 && time > 0

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 600, 1]
type = HitDef
triggerall = !var(55) 
trigger1 = animelemtime(3) >= 0 && animelemtime(4) < 0
attr = A, NA
damage = floor(42*ifelse(var(56),1.25,1))
animtype = m
guardflag = HA
hitflag = MAF
priority = 6, Hit
sparkno = s17000+(var(31)*10000)
sparkxy = -10,ifelse(anim=705,-40,-30)
hitsound = s3+(var(32)*2+((random%3)*var(32))),5
guardsound = s3+(var(32)*2), 12;s2, 6
guard.sparkno = s17500+(var(31)*10000)
ground.type = Low
pausetime = 11,13
guard.pausetime = 11,12
ground.slidetime = 9
ground.hittime = 8
guard.hittime = 8
guard.slidetime = 9
guard.ctrltime = 17
ground.velocity = -5.796875
air.velocity = -4.5,-7
air.juggle = 0
getpower = 47,47
givepower = 16,16
air.fall = 0
id = 700
forcenofall = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5
persistent = 0

[State -2, Juggle Killer]
type = VarSet
trigger1 = movehit && P2Statetype = A
var(55) = 1
ignorehitpause = 1
persistent = 0

[State 40, 6]
type = ChangeState
trigger1 = Pos Y + Vel Y >= 0
value = 52
;----------------------------------------
;Jumping Hard Kick
[Statedef 710]
type = A
movetype = A
physics = N
anim = 710+ifelse((var(3)=2),1,5*(Vel X != 0))
ctrl = 0
juggle = 8

[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = time = 1
value = 3+(var(32)*2),2
[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = time = 1 && random <= 700
value = 210,0
channel = 0

[State 50, Gravity]
type = Gravity
trigger1 = prevstateno != 40
trigger2 = prevstateno = 40 && time > 0

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 4
movetype = I

[State 600, 1]
type = HitDef
triggerall = !var(55) 
trigger1 = AnimElemtime(3) >= 0 && animelemtime(4) < 0
attr = A, NA
damage = floor(75*ifelse(var(56),1.25,1))
animtype = m
guardflag = HA
hitflag = MAF
priority = 5, Hit
sparkno = s17001+(var(31)*10000)
sparkxy = -10, -48
hitsound = s3+(var(32)*2+((random%3)*var(32))),7
guardsound = s3+(var(32)*2), 13-(var(32));s2, 6
guard.sparkno = s17501+(var(31)*10000)
ground.type = low
pausetime = 11,13
guard.pausetime = 11,12
ground.slidetime = 9
ground.hittime = 8
guard.hittime = 8
guard.slidetime = 9
guard.ctrltime = 22
ground.velocity = -5.796875
guard.velocity = -11.1796875
air.velocity = -4.5,-7
air.juggle = 0
getpower = 94,94
givepower = 16,16
air.fall = 0
id = 710
forcenofall = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5
persistent = 0

[State -2, Juggle Killer]
type = VarSet
trigger1 = movehit && P2Statetype = A
var(55) = 1
ignorehitpause = 1
persistent = 0

[State 40, 6]
type = ChangeState
trigger1 = Pos Y + Vel Y >= 0
value = 52
;--------------------------------------------
;Thanks to Warusaki's original roll code, which these rolls were adapted from.
;Roll 1
[Statedef 750]
type = S
movetype= I
physics = N
juggle = 10
velset = 0,0
ctrl = 0
anim = 750

[State 750, VelSet]
type = VelSet
trigger1 = animelem = 3
x = 5+((prevstateno = 101)*2)

[State 750, VelSet]
type = VelSet
trigger1 = animelem = 7
x = 0

[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = !time
value = 750,0
channel = 0

[State 750, Push]
type = PlayerPush
trigger1 = AnimElemTime(3) >= 0 && AnimElemTime(7) < 0
value = 0

[State 750, Width]
type = Width
trigger1 = Vel X != 0
edge = 10,0

[State 810, 1]
type = AfterImage
triggerall = var(31)
trigger1 = time = 8
time = 10
length = 6
framegap = 3
palcontrast = 256,256,256
paladd = 0,0,0
palmul = 1,1,1

[State 750, PowerAdd]
type = PowerAdd
trigger1 = prevstateno = 150
trigger2 = prevstateno = 151
value = -1000
persistent = 0

[State 750, 1]
type = HitBy
trigger1 = AnimElemTime(7) < 0
value = SCA,NT,ST,HT

[State 750, 1]
type = Changestate
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------------------
;Roll cancel
[Statedef 751]
type = S
movetype= I
physics = N
juggle = 10
velset = 0,0
ctrl = 0
anim = 751

[State 750, PowerAdd]
type = PowerAdd
trigger1 = !time
value = -1000
persistent = 0

[State 750, VelSet]
type = VelSet
trigger1 = animelem = 4
x = 5

[State 750, VelSet]
type = VelSet
trigger1 = animelem = 9
x = 0

[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = !time
value = 750,0
channel = 0

[State 750, Push]
type = PlayerPush
trigger1 = AnimElemTime(4) >= 0 && AnimElemTime(8) < 0
value = 0

[State 750, Width]
type = Width
trigger1 = Vel X != 0
edge = 10,0

[State 13000, EnvColor]
type = EnvColor
triggerall = var(21)
trigger1 = time = 1
value = 255,255,255
time = 4
under = 1
ignorehitpause = 1
persistent = 0

[State 751, Pause]
type = Pause
trigger1 = !time 
time = 11
movetime = 11

[State 910, Explod]
type = Explod
trigger1 = animelem = 1
anim = 12100
pos = -24, -72
postype = p1  ;p2,front,back,left,right
removetime = -2
sprpriority = 3
pausemovetime = 11

[State 810, 1]
type = AfterImage
triggerall = var(31)
trigger1 = time = 8
time = 10
length = 6
framegap = 3
palcontrast = 256,256,256
paladd = 0,0,0
palmul = 1,1,1

[State 750, 1]
type = HitBy
trigger1 = AnimElemTime(8) < 0
value = SCA

[State 750, 1]
type = Changestate
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------------------
;Roll 2
[Statedef 760]
type = S
movetype= I
physics = N
juggle = 10
velset = 0,0
ctrl = 0
anim = 760

[State 750, VelSet]
type = VelSet
trigger1 = animelem = 3
x = -5

[State 750, VelSet]
type = VelSet
trigger1 = animelem = 8
x = 0

[State 750, Width]
type = Width
trigger1 = Vel X != 0
edge = 10,0

[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = !time
value = 750,0
channel = 0

[State 750, Push]
type = PlayerPush
trigger1 = AnimElemTime(3) > 0 &&  AnimElemTime(7) < 0
value = 0

[State 810, 1]
type = AfterImage
triggerall = var(31)
trigger1 = time = 8
time = 10
length = 6
framegap = 3
palcontrast = 256,256,256
paladd = 0,0,0
palmul = 1,1,1

[State 750, PowerAdd]
type = PowerAdd
trigger1 = prevstateno = 150
trigger2 = prevstateno = 151
value = -1000
persistent = 0

[State 750, 1]
type = HitBy
trigger1 = AnimElemTime(7) < 0
value = SCA,NT,ST,HT

[State 750, 1]
type = Changestate
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;MAX - ON !!
[Statedef 780]
type = S
physics = N
movetype= I
ctrl = 0
anim = 99
velset = 0,0

[State 780, ChangeAnim]
type = ChangeAnim
triggerall = prevstateno != [200,980]
trigger1 = !time
value = 780

[State -2, Helper]
type = Helper
triggerall = prevstateno = [200,980]
triggerall = !numhelper(70001) && !numhelper(70002)
trigger1 = !time
helpertype = normal
name = "QUICKMAX"
ID = 70002
stateno = 70001
pos = 160,120
postype = left    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1

[State -2, Helper]
type = Helper
triggerall = !numhelper(70001) && !numhelper(70002)
trigger1 = !time
helpertype = normal
name = "MAX"
ID = 70001
stateno = 70001
pos = 160,120
postype = left    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1

[State 0, Explod]
type = Explod
triggerall = anim = 780
trigger1 = animelem = 5
anim = 14130+var(31)
id = 14130
pos = 6,-70
postype = p1
supermovetime = 9999
pausemovetime = 9999
supermove = 1
sprpriority = -4
ownpal = 1
bindtime = ifelse(anim=99,1,-1)

[State 3000, EnvShake]
type = EnvShake
triggerall = anim = 780
triggerall = numhelper(70001)
trigger1 = animelem = 5
time = 14
freq = 180
ampl = -6
persistent = 0

[State -1, Run Fwd]
type = ChangeState
value = 100
triggerall = prevstateno = [200,980]
trigger1 = time = [0,1]
trigger1 = command = "FF2"
;trigger1 = var(52)
[State 0, ChangeState]
type = ChangeState
triggerall = prevstateno = [200,980]
trigger1 = time = 1
value = ifelse(command = "holdup",40,ifelse(command = "holddown",11,0))
ctrl = ifelse(command = "holdup",0,1)

[State 0, ChangeState]
type = ChangeState
trigger1 = !animtime
value = 0
ctrl = 1

;----------------------------------------
;Ge Shiki: Goufu Kakkodake
[Statedef 800];Ok
type = S
movetype = A
physics = N
anim = 800
ctrl = 0
juggle = 8
velset = 0

[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = animelem = 6
value = 3+(var(32)*2),6
[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = !time
value = 210,0
channel = 0

[State 1400, PosAdd]
type = PosAdd
trigger1 = animelem = 2
trigger2 = animelem = 3
x = 4
[State 1400, PosAdd]
type = PosAdd
trigger1 = animelem = 4
x = 2

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 7
movetype = I

[State 210, 1]
type = HitDef
triggerall = !var(55) 
trigger1 = AnimElemtime(6) >= 0 && animelemtime(7) < 0
attr = S, NA
damage = floor(42*ifelse(var(56),1.25,1))
animtype = Hard
air.animtype = Back
ground.type = High
guardflag = MA
hitflag = MAF
priority = 5, Hit
sparkno = s17001+(var(31)*10000)
sparkxy = -10, -82
hitsound = s3+(var(32)*2),7
guardsound = s3+(var(32)*2), 13-(var(32))
guard.sparkno = s17501+(var(31)*10000)
pausetime = 11,13
guard.pausetime = 11,12
ground.slidetime = 17
ground.hittime = 16
guard.hittime = 16
guard.slidetime = 17
guard.ctrltime = 28
ground.velocity = -11.1796875
guard.velocity = -11.1796875
air.type = High
air.velocity = -4.5,-7
fall.yvelocity = -2.5
air.hittime = 13
air.juggle = 0
getpower = 94,94
givepower = 16,16
air.fall = 1
id = 800
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5
fall.recovertime = 50
persistent = 0

[State -2, Juggle Killer]
type = VarSet
trigger1 = movehit && P2Statetype = A
var(55) = 1
ignorehitpause = 1
persistent = 0

[State 220,2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------------------
;Handou Geki
[Statedef 900]
type = S
movetype= A
physics = S
juggle = 0
velset = 0,0
ctrl = 0
anim = 900

[State 900, Grab Attempt] ; Taken from OrochiKOF97's Tutorial
type = HitDef
trigger1 = AnimElem = 1
attr = S, NT
hitflag = M-
priority = 3, Miss
sprpriority = 1
p2facing = 1
sparkno = -1
guard.sparkno = -1
p1stateno = 910
p2stateno = 920
ground.velocity = -5.796875,-4.5
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall = 1
air.animtype = back
fall.xvelocity = -2.5
fall.yvelocity = -4
yaccel = .5

[State 900, 2]
type = ChangeState
trigger1 = !MoveContact && Time
value = 215
ctrl = 0

;----------------------------------------------------------------------
[Statedef 910]
type = S
movetype= A
physics = N
anim = 901

[State 910, Turn]
type = Turn
trigger1 = prevstateno = 956
trigger1 = animelem = 3

[State 910, TargetFacing]
type = TargetFacing
trigger1 = prevstateno = 956
trigger1 = animelem = 3
value = -1

[State 910, 1]
type = VarSet
trigger1 = Time = 0
fvar(8) = 0

[State 910, 1]
type = VarSet
triggerall = Time < 7 && !fVar(8)
trigger1 = ((Target,Command = "holdfwd") || (Target,Command = "holdback")) && ((Target,Command = "y") || (Target,Command = "z"))
fvar(8) = 1

[State 910, ChangeState]
type = ChangeState
trigger1 = Time < 7 && FVar(8)
value = 950

[State 910, TargetBind]
type = TargetBind
trigger1 = Time < 7 && FVar(8)
pos = 40, 0
[State 910, TargetBind]
type = TargetBind
trigger1 = !time
time = 1
pos = 36,0
[State 910, TargetBind]
type = TargetBind
trigger1 = animelemtime(2) >= 0 && animelemtime(7) < 0
time = 1
pos = 40,0

[State 1000, PosAdd]
type = PosAdd
trigger1 = animelem = 5
x = 4
[State 1000, PosAdd]
type = PosAdd
trigger1 = animelem = 6
x = 16
[State 1000, PosAdd]
type = PosAdd
trigger1 = animelem = 7
x = 8

[State 320, Voice]
type = PlaySnd
trigger1 = animelem = 5
value = 200,0
channel = 0

[State 5100, 10]
type = PlaySnd
trigger1 = animelem = 1
value = 2+(var(32)*10), 0

[State 5100, 10]
type = PlaySnd
trigger1 = animelem = 5
value = 2+(var(32)*10), 9

[State 5100, 10]
type = PlaySnd
trigger1 = animelem = 5
value = 3+(var(32)*2), 3

[State 910, Explod]
type = Explod
trigger1 = animelem = 1
anim = 20000
pos = 36,-80
postype = p1  ;p2,front,back,left,right
removetime = -2
sprpriority = 2
[State 0, Explod]
type = Explod
trigger1 = animelem = 6
anim = 17002+(var(31)*10000)
pos = 48,-60
postype = p1  ;p2,front,back,left,right
sprpriority = 3

[State 3500, Width]
type = Width
trigger1 = 1
edge = 50,50

[State 3502, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = animelem = 6
value = -147
kill = 1

[State 5100, EnvShake]
type = EnvShake
trigger1 = animelem = 6
time = 10
freq = 180
ampl = -9

[State -2, Helper]
type = Helper
trigger1 = !numhelper(50000) && !numhelper(50001)
trigger1 = WinKO && var(24)
helpertype = normal
name = "K.O."
ID = 50000
stateno = 50000
pos = 160,120
postype = left    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1

[State 910, State End]
type = ChangeState
trigger1 = !animtime
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Stand get-hit (shaking)
[Statedef 902]
type    = S
movetype= H
physics = N
velset = 0,0

[State 5000, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5000, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5000, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5000, 5] ;State type gets set to aerial if getting hit up
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = Pos Y != 0
statetype = a

[State 5000, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 5000, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5000, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

[State 5000, 6]
type = SelfState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0 && !GetHitVar(fall)
value = 5001 ;Stand get-hit (knocked back)

[State 5000, 7]
type = ChangeState
trigger1 = HitShakeOver
value = 903

;---------------------------------------------------------------------------
; Air get-hit (KOF)
[Statedef 903]
type    = A
movetype= H
physics = N
ctrl = 0

[State 5030, 1]
type = ChangeAnim
trigger1 = Anim != [5000, 5199]
trigger1 = SelfAnimExist(5030)
value = 5030

[State 5030, 3]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 3030, VelMul]
type = VelAdd
trigger1 = time > 0
y = GetHitVar(yaccel)

[State 5030, 4]
type = SelfState
triggerall = !HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10;Const(movement.air.gethit.groundlevel)
value = 5040 ;HITA_RECOV

[State 5030, 5]
type = ChangeState
triggerall = HitFall
trigger1 = time > 10
value = 904 ;HITA_FALL

[State 5035, 1]
type = ChangeAnim
trigger1 = animtime = 0
trigger1 = SelfAnimExist(5035)
trigger1 = Anim != [5051,5059] ;Not if in hit up anim
trigger1 = Anim != 5090 ;Not if hit off ground anim
value = 5035
persistent = 0

;---------------------------------------------------------------------------
; Air get-hit (falling) (KOF)
[Statedef 904]
type    = A
movetype= H
physics = N

[State 5050, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 5050

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2);ifelse(anim = 5050, Const720p(4), Const720p(-8))
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 3030, VelMul]
type = VelAdd
trigger1 = time > 0 
y = GetHitVar(yaccel)

[State 5050, 6]
type = SelfState
trigger1 = Vel Y + Pos Y >=0
;trigger1 = Vel Y > 0
;trigger1 = Pos Y >= ifelse((anim = [5051,5059]) || (anim = [5061,5069]), 0, 25)
value = 5100 ;Downed get-hit (hit ground from fall)



;----------------------------------------------------------------------
[Statedef 920]
type = A
movetype = H
physics = N
facep2 = 1
sprpriority = 1
velset = 0,0

[State 920, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 902

[State 910, Throw]
type = ChangeState
trigger1 = AnimTime = 0
value = 921

;----------------------------------------------------------------------
[Statedef 921]
type = A
movetype = H
physics = N
velset = 0,0

[State 920, 1]
type = ChangeAnim
Trigger1 = !time
value = 5030
[State 920, 1]
type = ChangeAnim
Trigger1 = anim = 5030 && !animtime
value = 5050

[State 1101, VelSet]
type = PosAdd
trigger1 = !time
x = -16

[State 1101, VelSet]
type = VelSet
trigger1 = !time
y = -7;68
x = 4.5*ifelse((facing=enemynear,facing),1,-1)

[State 1101, pos]
type = Veladd
trigger1 = time > 0
y = 0.5

[State 920, SelfState]
type = SelfState
trigger1 = Vel Y + Pos Y >= 0
value = 5100

;----------------------------------------------------------------------
;Air throw
[Statedef 930]
type = A
movetype= A
physics = N
anim = 930
velset = 0,0

[State 910, TargetBind]
type = TargetBind
trigger1 = animelemtime(1) >= 0 && animelemtime(2) < 0
time = 1
pos = 26,-74
[State 910, TargetBind]
type = TargetBind
trigger1 = animelemtime(2) >= 0 && animelemtime(3) < 0
time = 1
pos = -24,-72
[State 910, TargetBind]
type = TargetBind
trigger1 = animelemtime(3) >= 0 && animelemtime(4) < 0
time = 1
pos = -18,-50
[State 910, TargetBind]
type = TargetBind
trigger1 = animelemtime(4) >= 0 
time = 1
pos = -6,-24

[State 930, VelAdd]
type = VelAdd
trigger1 = animelemtime(2) >= 0
y = 0.5

[State 5100, 10]
type = PlaySnd
trigger1 = animelem = 1
value = 2+(var(32)*10), 0

[State 3500, Width]
type = Width
trigger1 = animelemtime(4) < 0
edge = 50,50

[State 910, Explod]
type = Explod
trigger1 = animelem = 1
anim = 20000
pos = 28,-88
postype = p1  ;p2,front,back,left,right
removetime = -2
sprpriority = 2

[State 920, ChangeState]
type = ChangeState
trigger1 = Vel Y + Pos Y >= 0
value = stateno+1

;Land
[Statedef 931]
type = S
movetype = I
physics = N
poweradd= 0
ctrl = 0
velset = 0,0
sprpriority = 2

[State 1000, ChangeAnim]
type = ChangeAnim
trigger1 = !time
value = 931

[State 852, PosSet]
type = PosSet
trigger1 = !time
y = 0

[State 910, Throw]
type = TargetState
trigger1 = AnimElem = 2
value = 941
persistent = 0

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 5
statetype = A
[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 3
movetype = I

[State 1402, VelSet]
type = VelSet
trigger1 = animelem = 5
x = -2.5
y = -8
[State -2, VelAdd]
type = VelAdd
trigger1 = animelemtime(5) > 0 
y = 0.5

[State 1400, PosAdd]
type = PosAdd
trigger1 = animelem = 6
trigger2 = animelem = 7
trigger3 = animelem = 8
x = 8

[State 910, TargetBind]
type = TargetBind
trigger1 = animelemtime(1) >= 0 && animelemtime(2) < 0
time = 1
pos = 0,-24
[State 910, TargetBind]
type = TargetBind
trigger1 = animelemtime(2) >= 0 && animelemtime(2) < 11
time = 1
pos = -8,0

[State 910, Explod]
type = Explod
trigger1 = animelem = 2
anim = 12000
pos = 0,0
postype = p2  ;p2,front,back,left,right
sprpriority = 0

[State 320, Voice]
type = PlaySnd
trigger1 = animelem = 2
value = 200,0
channel = 0
[State 320, Voice]
type = PlaySnd
trigger1 = animelem = 1000
value = 210,0
channel = 0
[State 5100, 10]
type = PlaySnd
trigger1 = animelem = 2
value = 2+(var(32)*10), 9

[State 5100, 10]
type = PlaySnd
trigger1 = animelem = 2
value = 3+(var(32)*2), 9

[State 5100, EnvShake]
type = EnvShake
trigger1 = animelem = 2
time = 10
freq = 180
ampl = -4

[State 3500, Width]
type = Width
trigger1 = animelemtime(2) < 0
edge = 50,50

[State 3502, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = animelem = 2
value = -133
kill = 1

[State -2, Helper]
type = Helper
trigger1 = !numhelper(50000) && !numhelper(50001)
trigger1 = WinKO && var(24)
helpertype = normal
name = "K.O."
ID = 50000
stateno = 50000
pos = 160,120
postype = left    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1

[State 220,2]
type = ChangeState
trigger1 = statetype = A
trigger1 = Vel Y + Pos Y >= 0
value = stateno+1
ctrl = 0

;Land II
[Statedef 932]
type = S
movetype = I
physics = S
poweradd= 0
ctrl = 0
velset = 0,0
sprpriority = 2
[State 1000, ChangeAnim]
type = ChangeAnim
trigger1 = !time
value = 932
[State 300, Land]
type = PlaySnd
trigger1 = !time
value = 2+(var(32)*10),2
[State 852, PosSet]
type = PosSet
trigger1 = !time
y = 0
[State 220,2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------
[Statedef 940]
type = A
movetype = H
physics = N
facep2 = 1
sprpriority = 1
velset = 0,0

[State 920, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 935
[State 962, ScreenBound]
type = ScreenBound
trigger1 = 1
movecamera = 0,0

;----------------------------------------------------------------------
[Statedef 941]
type = L
movetype = H
physics = N
sprpriority = 1
velset = 0,0

[State 920, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 936
[State 962, ScreenBound]
type = ScreenBound
trigger1 = 1
movecamera = 0,0
[State 941, ChangeState]
type = ChangeState
trigger1 = !animtime
value = stateno+1

;---------------------------------------------------------------------------
; HIT_BOUNCE (bounce into air)
[Statedef 942]
type    = L
movetype= H
physics = N

[State 5101, 1] ;Coming hit ground anim (normal)
type = ChangeAnim
trigger1 = !time
value = 5160+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*100000)

[State 1207, VelSet]
type = VelSet
triggerall = numenemy
trigger1 = time = 0
x = -ifelse((facing=enemynear,facing),-4,4)
y = -5.5

[State 1550, VelSet]
type = PosAdd
triggerall = numenemy
trigger1 = !time
x = -ifelse((facing=enemynear,facing),-20,20)

[State 5101, 4]
type = PosSet
trigger1 = !time
y = -2

[State 5101, 5] ;Acceleration
type = VelAdd
trigger1 = 1
y = .5

[State 5101, 6] ;Hit ground
trigger1 = Vel Y + Pos Y >= 0
type = SelfState
value = 5100


;---------------------------------------------------------------------
; ibyH"j
;------------------------ 
[Statedef 950]
type = S
movetype = A
physics = N
anim = 5945
ctrl = 0
velset = -16, 0

[State 13000, EnvColor]
type = EnvColor
trigger1 = time = 4
value = 255,255,255
time = 4
under = 1
ignorehitpause = 1
persistent = 0

[State 950, PlaySnd]
type = PlaySnd
trigger1 = !time
value = 3+(var(32)*2),3+(var(32)*6)

[State 810,TargetBind]
type = TargetState
trigger1 = Time = 0
value = 955

[State 810,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 194, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 105, VelMul]
type = VelMul
trigger1 = 1
x = .75

[State 4100,4]
type = PlayerPush
trigger1 = P2BodyDist X < 0
value = 0

[State 105,End]
type = ChangeState
trigger1 = Time >= 32
value = 0
ctrl = 1

;------------------------ 
[Statedef 955]
type = S
movetype = H
physics = N
ctrl = 0
velset = 0, 0
facing = enemy,facing
facep2 = 1

[State 810,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1040,ChangeAnim]
type = ChangeAnim
triggerall = Time = 0 && SelfAnimExist(5940)
trigger1 = authorname = "Hh" || authorname = "M.M.R." || authorname = "Mouser" || authorname = "CAMRAT Type KOF"
trigger2 = authorname = "Tin" || authorname = "Nyankoro" || authorname = "ryokucha"
trigger3 = authorname = "Third" || authorname = "adamskie" || authorname = "Bad Darkness" || authorname = "Warusaki3"
trigger4 = AuthorName = "NHK" || AuthorName = "Nyankoro" || AuthorName = "NyanKiryu"
trigger5 = AuthorName = "aoao" || AuthorName = "Mr.X-file"
trigger6 = AuthorName = "laiso_7" || AuthorName = "yu-go" || AuthorName = "MEKA"
trigger7 = AuthorName = "CROSSCAT" || AuthorName = "CrossCat"
trigger8 = AuthorName = "Jesuszilla" || AuthorName = "Vans"
trigger9 = AuthorName = "N64Mario" && Name = "Zero" && FVar(17) = 1
trigger10 = AuthorName = "KoopaKoot" || AuthorName = "Scal" || Authorname = "j"
value = 5940

[State 1040,ChangeAnim]
type = ChangeAnim
triggerall = Time = 0 && SelfAnimExist(5910) && !SelfAnimExist(5940)
trigger1 = authorname = "Hh" || authorname = "M.M.R." || authorname = "Mouser" || authorname = "CAMRAT Type KOF"
trigger2 = authorname = "Tin" || authorname = "Nyankoro" || authorname = "ryokucha"
trigger3 = authorname = "Third" || authorname = "adamskie" || authorname = "Bad Darkness" || authorname = "Warusaki3"
trigger4 = AuthorName = "NHK" || AuthorName = "Nyankoro" || AuthorName = "NyanKiryu"
trigger5 = AuthorName = "aoao" || AuthorName = "Mr.X-file"
trigger6 = AuthorName = "laiso_7" || AuthorName = "yu-go" || AuthorName = "MEKA"
trigger7 = AuthorName = "CROSSCAT" || AuthorName = "CrossCat"
trigger8 = AuthorName = "Jesuszilla" || AuthorName = "Vans"
trigger9 = AuthorName = "N64Mario" && Name = "Zero" && FVar(17) = 1
trigger10 = AuthorName = "KoopaKoot" || AuthorName = "Scal" || Authorname = "j"
value = 5910

[State 820,ChangeAnim2]
type = ChangeAnim
trigger1 = Time = 0 && anim != 5940 && anim != 5910
value = 5007

[State 194, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 4100,4]
type = PlayerPush
trigger1 = P2BodyDist X < 0
value = 0

[State 4100, Escape in corner (Scal Code)]
type = VelSet
trigger1 = !(EnemyNear, BackEdgedist)
trigger1 = EnemyNear, Vel X
x = (EnemyNear, Vel X)
persistent = 0
ignorehitpause = 1
[State 4100, Friction]
type = VelMul
trigger1 = 1
x = .75

[State 105,End]
type = SelfState
trigger1 = Time >= 29
value = 0
ctrl = 1

;--------------------------------------------
;Kubikime Otoshi
[Statedef 956]
type = S
movetype= A
physics = S
juggle = 0
velset = 0,0
ctrl = 0
anim = 900

[State 900, Grab Attempt] ; Taken from OrochiKOF97's Tutorial
type = HitDef
trigger1 = AnimElem = 1
attr = S, NT
hitflag = M-
priority = 3, Miss
sprpriority = 1
sparkno = -1
guard.sparkno = -1
p1stateno = 960
p2stateno = 962
ground.velocity = 4.5,-7
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall = 1
air.animtype = back
yaccel = .5

[State 900, 2]
type = ChangeState
trigger1 = !MoveContact && Time
value = 315
ctrl = 0

;----------------------------------------------------------------------
[Statedef 960]
type = S
movetype= A
physics = N
anim = 961
sprpriority = 2

[State 910, 1]
type = VarSet
trigger1 = Time = 0
fvar(8) = 0

[State 910, 1]
type = VarSet
triggerall = Time < 7 && !fVar(8)
trigger1 = ((Target,Command = "holdfwd") || (Target,Command = "holdback")) && ((Target,Command = "b") || (Target,Command = "c"))
fvar(8) = 1

[State 910, TargetBind]
type = TargetBind
trigger1 = Time < 7 && FVar(8)
pos = 40, 0

[State 910, ChangeState]
type = ChangeState
trigger1 = Time < 7 && FVar(8)
value = 950

[State 910, TargetBind]
type = TargetBind
trigger1 = animelemtime(1) >= 0 && animelemtime(2) < 0
time = 1
pos = 36,0
[State 910, TargetBind]
type = TargetBind
trigger1 = animelemtime(2) >= 0 && animelemtime(3) < 0
time = 1
pos = 40,0
[State 910, TargetBind]
type = TargetBind
trigger1 = animelemtime(3) >= 0 && animelemtime(4) < 0
time = 1
pos = -4,-102
[State 910, TargetBind]
type = TargetBind
trigger1 = animelemtime(4) >= 0 && animelemtime(5) < 0
time = 1
pos = -44,-84
[State 910, TargetBind]
type = TargetBind
trigger1 = animelemtime(5) >= 0 && animelemtime(6) < 0
time = 1
pos = -72,-32
[State 910, TargetBind]
type = TargetBind
trigger1 = animelemtime(6) >= 0 && animelemtime(6) < 5
time = 1
pos = -66,0;-10
[State 910, TargetBind]
type = TargetBind
trigger1 = animelemtime(6) >= 5 && animelemtime(8) < 0
time = 1
pos = -66,0;-72,0;-6

[State 910, Throw]
type = TargetState
trigger1 = AnimElem = 8
value = 963

[State 960, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1

[State 1000, PosAdd]
type = PosAdd
trigger1 = animelem = 3
trigger2 = animelem = 4
trigger3 = animelem = 5
x = -16

[State 910, Explod]
type = Explod
trigger1 = animelem = 1
anim = 20000
pos = 36, -80
postype = p1  ;p2,front,back,left,right
removetime = -2
sprpriority = 3
[State 0, Explod]
type = Explod
trigger1 = animelem = 6
anim = 12000
pos = 0,0
postype = p2  ;p2,front,back,left,right
sprpriority = 0

[State 320, Voice]
type = PlaySnd
trigger1 = animelem = 4
value = 200,0
channel = 0
[State 5100, 10]
type = PlaySnd
trigger1 = animelem = 1
value = 2+(var(32)*10), 0
[State 5100, 10]
type = PlaySnd
trigger1 = animelem = 6
value = 2+(var(32)*10), 9

[State 3500, Width]
type = Width
trigger1 = animelemtime(7) < 0
edge = 50,50

[State 960, Turn]
type = Turn
trigger1 = !animtime

[State 3502, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = animelem = 6
value = -147
kill = 1

[State 3000, EnvShake]
type = EnvShake
trigger1 = animelem = 6
time = 14
freq = 180
ampl = -4
persistent = 0

[State -2, Helper]
type = Helper
trigger1 = !numhelper(50000) && !numhelper(50001)
trigger1 = WinKO && var(24)
helpertype = normal
name = "K.O."
ID = 50000
stateno = 50000
pos = 160,120
postype = left    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1

[State 910, State End]
type = ChangeState
trigger1 = !animtime
value = 0
ctrl = 1

;----------------------------------------------------------------------
[Statedef 962]
type = A
movetype = H
physics = N
facep2 = 1
velset = 0,0

[State 920, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 963+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*30000)
[State 5100, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = Name = "cvsfelicia" && authorname = "Jesuszilla"
trigger1 = time = [34,38]
value = 5100
[State 5100, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = Name = "cvsfelicia" && authorname = "Jesuszilla"
trigger1 = anim = 5100 && !animtime
value = 5110
[State 5100, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = Name = "cvsfelicia" && authorname = "Jesuszilla"
trigger1 = time > 55
value = 5080
[State 962, ScreenBound]
type = ScreenBound
trigger1 = 1
movecamera = 0,0
[State 910, Throw]
type = ChangeState
trigger1 = AnimTime = 0
value = 963

;---------------------------------------------------------------------------
; HIT_BOUNCE (bounce into air)
[Statedef 963]
type    = L
movetype= H
physics = N

[State 5101, 1] ;Coming hit ground anim (normal)
type = ChangeAnim
trigger1 = !time
value = 5160+((Name = "Gill" && AuthorName = "GM" && Facing = -1)*100000)

[State 1207, VelSet]
type = VelSet
triggerall = numenemy
trigger1 = time = 0
x = ifelse((facing=enemynear,facing),-4,4)
y = -5.5

;[State 1550, VelSet]
;type = PosAdd
;triggerall = numenemy
;trigger1 = !time
;x = ifelse((facing=enemynear,facing),-20,20)

[State 5101, 4]
type = PosSet
trigger1 = !time
y = -2

[State 5101, 5] ;Acceleration
type = VelAdd
trigger1 = 1
y = .5

[State 5101, 6] ;Hit ground
trigger1 = Vel Y + Pos Y >= 0
type = SelfState
value = 5100


;--------------------------------------------
;Knockdown 1
[Statedef 980]
type = S
movetype = A
physics = N
velset = 0,0
ctrl = 0
juggle = 7
facep2 = 1

[State 980, ChangeAnim]
type = ChangeAnim
trigger1 = !time 
value = 980
[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = !time
value = 980,0
channel = 0

[State 5100, 10]
type = PlaySnd
trigger1 = animelem = 1
value = 3+(var(32)*2),8-(var(32)*2)

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 6
movetype = I

[State 980, PosAdd]
type = PosAdd
trigger1 = animelem = 5
trigger2 = animelem = 5, = 1
x = 6
[State 980, PosAdd]
type = PosAdd
trigger1 = animelem = 5, = 2
x = 4
[State 980, PosAdd]
type = PosAdd
trigger1 = animelem = 5, = 3
x = 2
[State 980, PosAdd]
type = PosAdd
trigger1 = animelem = 5, = 4
x = 1

[State 210, 1]
type = HitDef
triggerall = !Var(55)
trigger1 = AnimElemtime(5) >= 0 && animelemtime(6) < 0
attr = S, NA
damage = floor(100*ifelse(var(56),1.25,1)),0
animtype = Hard
air.animtype = back
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 11, 13
guard.pausetime = 11,12
sparkno = s17001+(var(31)*10000)
sparkxy = -10, -44
hitsound = s3+(var(32)*2),9
guardsound = s3+(var(32)*2),13-(var(32));s2, 6
guard.sparkno = s17501+(var(31)*10000)
ground.type = High
ground.slidetime = 17
ground.hittime  = 16
ground.velocity = -4.5,-7
fall.yvelocity = -2.5
guard.velocity = -14.90625
air.type = High
air.velocity = -4.5,-7
air.hittime = 13
air.juggle = 0
getpower = 94,94
givepower = 16,16
fall = 1
id = 980
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5
fall.recover = 0
;fall.recovertime = 35
persistent = 0

[State 220,2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;--------------------------------------------
;Knockdown Counter Version
[Statedef 981]
type = S
movetype = A
physics = S
velset = 0,0
ctrl = 0
juggle = 8
facep2 = 1
poweradd = -1000

[State 13000, EnvColor]
type = EnvColor
triggerall = var(21)
trigger1 = !time
value = 255,255,255
time = 1
under = 1
ignorehitpause = 1
persistent = 0

[State -2, PalFX]
type = PalFX
trigger1 = time < 7
time = 1
add = 255,255,255
sinadd = 0,0,0
invertall = 0
color = 256
ignorehitpause = 1
persistent = 2

[State 980, ChangeAnim]
type = ChangeAnim
trigger1 = !time 
value = 981

[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = !time
value = 980,0
channel = 0

[State 5100, 10]
type = PlaySnd
trigger1 = animelem = 1
value = 3+(var(32)*2),6

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 7
movetype = I
[State 981, NotHitBy]
type = NotHitBy
trigger1 = animelemtime(7) < 0
value = SCA
time = 1

[State 801, PosAdd]
type = PosAdd
trigger1 = animelem = 6
trigger2 = animelem = 6, = 1
x = 6
[State 801, PosAdd]
type = PosAdd
trigger1 = animelem = 6, = 2
x = 4
[State 801, PosAdd]
type = PosAdd
trigger1 = animelem = 6, = 3
x = 2
[State 801, PosAdd]
type = PosAdd
trigger1 = animelem = 6, = 4
x = 1

[State 210, 1]
type = HitDef
triggerall = !Var(55)
trigger1 = AnimElemtime(6) >= 0 && animelemtime(7) < 0
attr = S, NA
damage = 39
animtype = Hard
air.animtype = back
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 11, 13
guard.pausetime = 11,12
sparkno = s17001+(var(31)*10000)
sparkxy = -10, -44
hitsound = s3+(var(32)*2),9
guardsound = s3+(var(32)*2),13-(var(32)*2);s2, 6
guard.sparkno = s17501+(var(31)*10000)
ground.type = High
ground.slidetime = 17
ground.hittime  = 16
ground.velocity = -4.5,-7
fall.yvelocity = -2.5
guard.velocity = -14.90625
air.type = High
air.velocity = -4.5,-7
air.hittime = 13
air.juggle = 0
getpower = 94,94
givepower = 16,16
id = 980
fall = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5
fall.recovertime = 35
persistent = 0

[State 220,2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;----------------------------------------
;Knockdown 2
[Statedef 990]
type = A
movetype = A
physics = A
ctrl = 0
juggle = 8

[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = !time
value = 980,0
channel = 0

[State 990, ChangeAnim]
type = ChangeAnim
trigger1 = !time
value = 990

[State 5100, 10]
type = PlaySnd
trigger1 = animelem = 1
value = 3+(var(32)*2),8-(var(32)*2)

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 6
movetype = I

[State 600, 1]
type = HitDef
triggerall = !Var(55)
trigger1 = AnimElemtime(4) >= 0 && animelemtime(5) < 0
attr = A, NA
damage = floor(117*ifelse(var(56),1.25,1)),0
animtype = Light
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 11, 13
guard.pausetime = 11,12
sparkno = s17001+(var(31)*10000)
sparkxy = -10, -54
hitsound = s3+(var(32)*2),9
guardsound = s3+(var(32)*2),13-(var(32));s2, 6
guard.sparkno = s17501+(var(31)*10000)
ground.slidetime = 10
ground.hittime = 9
ground.velocity = -4.5,-7
fall.yvelocity = -2.5
guard.velocity = -14.90625
air.velocity = -4.5,-7
air.juggle = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 94,94
givepower = 16,16
fall = 1
id = 980
yaccel = .5
fall.recovertime = 35
persistent = 0
[State 600, 1]
type = HitDef
triggerall = !Var(55)
trigger1 = AnimElemtime(5) >= 0 && animelemtime(6) < 0
attr = A, NA
damage = floor(117*ifelse(var(56),1.25,1)),0
animtype = Light
guardflag = MA
hitflag = MAF
priority = 4, Hit
pausetime = 11, 13
guard.pausetime = 11,12
sparkno = s17001+(var(31)*10000)
sparkxy = -10, -54
hitsound = s3+(var(32)*2),9
guardsound = s3+(var(32)*2),13-(var(32));s2, 6
guard.sparkno = s17501+(var(31)*10000)
ground.slidetime = 10
ground.hittime = 9
ground.velocity = -4.5,-7
fall.yvelocity = -2.5
guard.velocity = -14.90625
air.velocity = -4.5,-7
air.juggle = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 94,94
givepower = 16,16
fall = 1
id = 980
yaccel = .5
fall.recovertime = 35
persistent = 0

[State 40, 6]
type = ChangeState
trigger1 = Vel Y + Pos Y >= 0
value = 52

;----------------------------------------
;114 Shiki: Aragami Mikansei(KOF2002)
[Statedef 1000];Ok!
type    = S
movetype= A
physics = N
poweradd= 109
ctrl = 0
velset = 0
sprpriority = 2
juggle = 8
facep2 = 1

[State 1000, ChangeAnim]
type = ChangeAnim
trigger1 = !time
value = 1000

[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = animelem = 1
value = 1000,0
channel = 0
[State 300, Land]
type = PlaySnd
trigger1 = animelem = 3
value = 4,3
channel = 2

[State 310, PosAdd]
type = PosAdd
trigger1 = animelem = 2
trigger2 = animelem = 3
trigger3 = animelem = 4
trigger4 = animelem = 5
x = 8

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 13
movetype = I

[State 210, 1]
type = HitDef
triggerall = !var(55)
trigger1 = animelemtime(10) >= 0 && animelemtime(13) < 0
attr = S, SA
damage = floor(67*ifelse(var(56),1.25,1)),10
animtype = Hard
air.animtype = back
guardflag = MA
hitflag = MAF
priority = 4, Hit
sparkno = s17002+(var(31)*10000)
sparkxy = -10, -82
hitsound = s3+(var(32)*2),3
guardsound = s3+(var(32)*2), 13
guard.sparkno = s17502+(var(31)*10000)
ground.type = Low
pausetime = 11,13
guard.pausetime = 11,12
ground.slidetime = 17
ground.hittime = 16
guard.hittime = 16
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity = -11.1796875
guard.velocity = -11.1796875
air.type = High
air.velocity =  -4.5,-7
fall.yvelocity = -3
air.hittime = 13
air.juggle = 0
getpower = 47,47
givepower = 16,16
nochainid = 1312
id = 1000
air.fall = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
fall.recover = 0
persistent = 0

[State -2, Juggle Killer]
type = VarSet
trigger1 = movehit && P2Statetype = A
var(55) = 1000
ignorehitpause = 1
persistent = 0

[State 220,2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------
;115 Shiki: Dokugami Mikansei (KOF2002)
[Statedef 1010];Ok!
type    = S
movetype= A
physics = N
poweradd= 109
ctrl = 0
velset = 0
sprpriority = 2
juggle = 8
facep2 = 1

[State 1600, CRITICAL RNG]
type = VarSet
trigger1 = !time
var(5) = (gametime%2)
[State 1000, ChangeAnim]
type = ChangeAnim
trigger1 = !time
value = 1010+var(5)

[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = animelem = 1
value = 1010,0
channel = 0
[State 300, Land]
type = PlaySnd
trigger1 = animelem = 7
value = 4,3
channel = 2

[State 310, PosAdd]
type = PosAdd
trigger1 = animelem = 2
trigger2 = animelem = 3
trigger3 = animelem = 4
trigger4 = animelem = 5
trigger5 = animelem = 6
trigger6 = animelem = 7
trigger7 = animelem = 13
trigger8 = animelem = 14
trigger9 = animelem = 15
trigger10 = animelem = 16
x = 8
[State 310, PosAdd]
type = PosAdd
trigger1 = animelem = 8
trigger2 = animelem = 9
x = 16
[State 310, PosAdd]
type = PosAdd
trigger1 = animelem = 17
trigger2 = animelem = 18
x = 6

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 11
movetype = I
[State 1000, NotHitBy]
type = NotHitBy
trigger1 = var(5)
trigger1 = animelemtime(4) < 0
value = SCA
time = 1
[State 1300, ReversalDef]
type = ReversalDef
triggerall = var(5)
triggerall = numenemy
triggerall = enemynear, movetype = A
trigger1 = animelemtime(4) >= 0 && animelemtime(6) < 0
attr = S, SA
reversal.attr = SCA,NA,SA,HA
pausetime = 11,13
sparkno = s17502+(var(31)*10000)
hitsound = s3+(var(32)*2), 13
id = 1015
ignorehitpause = 1
persistent = 0
[State 1300, TargetState]
type = TargetDrop
triggerall = var(5)
trigger1 = numtarget(1015)
trigger1 = target(1015), ishelper
ignorehitpause = 1

[State 12501, Explod]
type = Explod
triggerall = var(5)
trigger1 = movehit 
trigger1 = numtarget(1017)
anim = 12509
pos = 60,-80
postype = p1  ;p2,front,back,left,right
bindtime = 1
sprpriority = 4
ownpal = 1
persistent = 0

[State 210, 1]
type = HitDef
triggerall = !var(55)
trigger1 = anim = 1010
trigger1 = animelemtime(10) >= 0 && animelemtime(11) < 0
attr = S, SA
damage = floor(83*ifelse(var(56),1.25,1)),10
animtype = Hard
air.animtype = back
guardflag = MA
hitflag = MAF
priority = 4, Hit
sparkno = s17002+(var(31)*10000)
sparkxy = -10, -70
hitsound = s3+(var(32)*2),3
guardsound = s3+(var(32)*2), 13
guard.sparkno = s17502+(var(31)*10000)
ground.type = Low
pausetime = 11,13
guard.pausetime = 11,12
ground.slidetime = 17
ground.hittime = 16
guard.hittime = 16
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity =-4.5,-7
guard.velocity = -11.1796875
air.type = High
air.velocity =  -4.5,-7
fall.yvelocity = -3
air.hittime = 13
air.juggle = 0
getpower = 47,47
givepower = 16,16
nochainid = 1312
id = 1010
fall = 1
p2stateno = 10400
air.fall = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
fall.recover = 0
persistent = 0
[State 210, 1]
type = HitDef
triggerall = !var(55)
trigger1 = anim = 1011
trigger1 = animelemtime(6) >= 0 && animelemtime(7) < 0
attr = S, SA
damage = floor(83*ifelse(var(56),1.25,1)),10
animtype = Hard
air.animtype = back
guardflag = MA
hitflag = MAF
priority = 4, Hit
sparkno = s17002+(var(31)*10000)
sparkxy = -10, -64
hitsound = s3+(var(32)*2),3
guardsound = s3+(var(32)*2), 13
guard.sparkno = s17502+(var(31)*10000)
ground.type = High
pausetime = 15,17
guard.pausetime = 15,16
ground.slidetime = 17
ground.hittime = 16
guard.hittime = 16
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity = -11.1796875
guard.velocity = -11.1796875
air.type = High
air.velocity =  -4.5,-7
fall.yvelocity = -3
air.hittime = 13
air.juggle = 0
getpower = 47,47
givepower = 16,16
nochainid = 1312
id = 1016
air.fall = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
fall.recover = 0
persistent = 0
envshake.time = 14
envshake.freq = 180
envshake.ampl = -4
[State 210, 1]
type = HitDef
triggerall = !var(55)
trigger1 = anim = 1011
trigger1 = animelemtime(10) >= 0 && animelemtime(11) < 0
attr = S, SA
damage = floor(83*ifelse(var(56),1.25,1)),10
animtype = Hard
air.animtype = back
guardflag = MA
hitflag = MAF
priority = 4, Hit
sparkno = s17002+(var(31)*10000)
sparkxy = -10, -70
hitsound = s3+(var(32)*2),9
guardsound = s3+(var(32)*2), 13
guard.sparkno = s17502+(var(31)*10000)
ground.type = Low
pausetime = 15,17
guard.pausetime = 15,16
ground.slidetime = 17
ground.hittime = 16
guard.hittime = 16
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity =-19,-9
guard.velocity = -11.1796875
air.type = High
air.velocity =  -19,-9
fall.yvelocity = -3
air.hittime = 13
air.juggle = 0
getpower = 47,47
givepower = 16,16
nochainid = 1312
id = 1017
fall = 1
p2stateno = 10200
air.fall = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
persistent = 0
envshake.time = 14
envshake.freq = 180
envshake.ampl = -4
fall.envshake.time = 14
fall.envshake.freq = 180
fall.envshake.ampl = -4

[State 1411, VarSet]
type = VarSet
trigger1 = movehit && numtarget(1016)
var(16) = 12
persistent = 0
ignorehitpause = 1
[State 1411, VarSet]
type = VarSet
trigger1 = movehit && numtarget(1017)
var(16) = 12
persistent = 0
ignorehitpause = 1
[State -2, EnvColor];This will produce a flash a la KOF2K2
type = EnvColor
triggerall = var(21)
trigger1 = movehit && numtarget(1017)
value = 255,255,255
time = 1
under = 1
ignorehitpause = 1
persistent = 0

[State -2, Juggle Killer]
type = VarSet
trigger1 = movehit && numtarget(1017) ;&& P2Statetype = A
trigger2 = movehit && numtarget(1010)
var(55) = 1010
ignorehitpause = 1
persistent = 0

[State -2, Explod];Critical Explod for P1 Side.
type = Explod
triggerall = var(31)
triggerall = numenemy
triggerall = numexplod(58) = 0 && teamside = 1 
triggerall = enemy, movetype = h ;Enemy was indeed HIT, otherwise this'd be retarded.
trigger1 = numtarget(1017)
trigger1 = movehit ;Move hits
anim = 24002
pos = 0,80+15 ;106 is the correct offset, +2 to be aligned with OrochiKOF's
postype = left  ;p2,front,back,left,right
removetime = -2
supermove = 1
sprpriority = 2
id = 58
bindtime = -1
ontop = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = -1
[State -2, Explod];Critical Explod for P2 Side.
type = Explod
triggerall = var(31)
triggerall = numenemy
triggerall = numexplod(58) = 0 && teamside = 2 
triggerall = enemy, movetype = h ;Enemy was indeed HIT, otherwise this'd be retarded.
trigger1 = numtarget(1017)
trigger1 = movehit ;Move hits
anim = 24003
pos = 0,80+15
postype = right  ;p2,front,back,left,right
removetime = -2
supermove = 1
sprpriority = 2
id = 58
bindtime = -1
ontop = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = -1

[State 220,2]
type = ChangeState
trigger1 = var(5)
trigger1 = movehit && numtarget(1017)
trigger1 = AnimTime = 0
value = stateno+1
ctrl = 0
[State 220,2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;????!
[Statedef 1011]
type = S
movetype = I
physics = S
poweradd= 0
ctrl = 0
velset = 0,0
sprpriority = 2
[State 1000, ChangeAnim]
type = ChangeAnim
trigger1 = !time
value = 1012
[State 300, Land]
type = PlaySnd
trigger1 = !time
value = 1010,1
channel = 0
[State 1000, NotHitBy]
type = NotHitBy
trigger1 = time < 48
value = SCA
time = 1
[State 220,2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------
;100 Shiki: Oniyaki Mikansei (KOF2002)
[Statedef 1100];Ok!
type    = S
movetype= A
physics = N
poweradd= 109
ctrl = 0
velset = 0
sprpriority = 2
juggle = 8
facep2 = 1

[State 1000, VarSet]
type = VarSet
trigger1 = !time
var(23) = ifElse((helper(10371), var(0) = [1,3]),0,1)

[State 1000, ChangeAnim]
type = ChangeAnim
trigger1 = !time
value = 1100+(var(23)*10)

[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = animelem = 1
value = 1100,0
channel = 0
[State 300, Land]
type = PlaySnd
trigger1 = animelem = 4
value = 12,4

[State 1350, Width]
type = Width
trigger1 = AnimElem = 4, >= 0
player = 5,0
ignorehitpause = 1

[State 310, PosAdd]
type = PosAdd
trigger1 = animelem = 2
trigger2 = animelem = 3
x = 8
[State 1402, VelSet]
type = VelSet
trigger1 = animelemtime(4) >= 0 && animelemtime(7) < 1
x = (5*exp((-0.15764)*(time-8-var(23))))
[State 1402, VelSet]
type = VelSet
trigger1 = animelemtime(7) = 1
x = 0
[State -2, Accel]
type = VelSet
trigger1 = animelem = 4
y = -6-var(23)*2
[State -2, VelAdd]
type = VelAdd
trigger1 = animelemtime(4) > 0 
y = 0.42578125

[State 1000, NotHitBy]
type = NotHitBy
trigger1 = animelemtime(3) < 0
value = SCA
time = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 4
statetype = A
[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 7
movetype = I

[State 210, 1]
type = HitDef
triggerall = !var(55)
trigger1 = animelemtime(3) >= 0 && animelemtime(4) < 0
attr = S, SA
damage = floor(83*ifelse(var(56),1.25,1)),10
animtype = Hard
air.animtype = back
guardflag = MA
hitflag = MAF
priority = 4, Hit
sparkno = s17002+(var(31)*10000)
sparkxy = -10, -68
hitsound = s3+(var(32)*2),3
guardsound = s3+(var(32)*2), 13
guard.sparkno = s17502+(var(31)*10000)
ground.type = Low
pausetime = 11,13
guard.pausetime = 11,12
ground.slidetime = 17
ground.hittime = 16
guard.hittime = 16
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity =-4.5,-7
guard.velocity = -11.1796875
air.type = High
air.velocity =  -4.5,-7
fall.yvelocity = -3
air.hittime = 13
air.juggle = 0
getpower = 47,47
givepower = 16,16
nochainid = 1312
id = 1100
fall = 1
;p2stateno = 10400
air.fall = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
fall.recover = 0
persistent = 0
[State 210, 1]
type = HitDef
triggerall = !var(55)
trigger1 = animelemtime(4) >= 0 && animelemtime(7) < 0
attr = S, SA
damage = floor(83*ifelse(var(56),1.25,1)),10
animtype = Hard
air.animtype = back
guardflag = MA
hitflag = MAF
priority = 4, Hit
sparkno = s17002+(var(31)*10000)
sparkxy = -10, -114
hitsound = s3+(var(32)*2),3
guardsound = s3+(var(32)*2), 13
guard.sparkno = s17502+(var(31)*10000)
ground.type = Low
pausetime = 11,13
guard.pausetime = 11,12
ground.slidetime = 17
ground.hittime = 16
guard.hittime = 16
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity =-2,-17.25
guard.velocity = -11.1796875
air.type = High
air.velocity =  -2,-17.25
fall.yvelocity = -3
air.hittime = 13
air.juggle = 0
getpower = 47,47
givepower = 16,16
nochainid = 1100
id = 1101
fall = 1
p2stateno = 10030
fall.recover = 0
air.fall = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
fall.recover = 0
persistent = 0

[State -2, Juggle Killer]
type = VarSet
trigger1 = movehit && P2Statetype = A
var(55) = 1100
ignorehitpause = 1
persistent = 0

[State 1000, 6]
type = ChangeState
triggerall = statetype = A
triggerall = animelemtime(6) > 0
trigger1 = Vel Y + Pos Y >= 0
value = stateno+1
ctrl = 0

;Land
[Statedef 1101]
type = S
movetype = I
physics = S
poweradd= 0
ctrl = 0
velset = 0,0
sprpriority = 2

[State 1000, ChangeAnim]
type = ChangeAnim
trigger1 = !time
value = 1101

[State 300, Land]
type = PlaySnd
trigger1 = !time
value = 2+(var(32)*10),2

[State 852, PosSet]
type = PosSet
trigger1 = !time
y = 0

[State 220,2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------
;Shingo Kinsei Ore Shiki: Gecchuu (KOF2002)
[Statedef 1200];Ok!
type    = S
movetype= A
physics = N
poweradd= 109
ctrl = 0
velset = 0
sprpriority = 2
juggle = 8
facep2 = 1

[State 1000, ChangeAnim]
type = ChangeAnim
trigger1 = !time
value = 1200

[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = animelem = 1
value = 1200,0
channel = 0

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 5
movetype = I

[State 1300, ReversalDef]
type = ReversalDef
triggerall = numenemy
triggerall = enemynear, movetype = A
trigger1 = animelemtime(3) >= 0 && animelemtime(4) < 0
attr = S, SA
reversal.attr = SCA,NA,SA,HA
pausetime = 11,13
sparkno = s17502+(var(31)*10000)
hitsound = s3+(var(32)*2), 13
id = 1200
ignorehitpause = 1
persistent = 0
[State 1300, TargetState]
type = TargetDrop
trigger1 = numtarget(1200)
trigger1 = target(1200), ishelper
ignorehitpause = 1

[State 210, 1]
type = HitDef
triggerall = !var(55)
trigger1 = animelemtime(4) >= 0 && animelemtime(5) < 0
attr = S, SA
damage = floor(67*ifelse(var(56),1.25,1)),10
animtype = Hard
air.animtype = back
guardflag = HA
hitflag = MAF
priority = 4, Hit
sparkno = s17002+(var(31)*10000)
sparkxy = -10, -44
hitsound = s3+(var(32)*2),9
guardsound = s3+(var(32)*2), 13
guard.sparkno = s17502+(var(31)*10000)
ground.type = Low
pausetime = 11,13
guard.pausetime = 11,12
ground.slidetime = 17
ground.hittime = 16
guard.hittime = 16
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity = 0
guard.velocity = -11.1796875
air.type = High
air.velocity =  -6,10
air.hittime = 13
air.juggle = 0
getpower = 47,47
givepower = 16,16
nochainid = 1312
id = 1201
air.fall = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
fall.recover = 0
persistent = 0
p2stateno = 10060
fall.xvelocity = -2*(p2statetype=A)
fall.yvelocity = -2-(p2statetype=A)*4

[State -2, Juggle Killer]
type = VarSet
trigger1 = movehit && P2Statetype = A
var(55) = 1200
ignorehitpause = 1
persistent = 0

[State 220,2]
type = ChangeState
triggerall = movetype = A
trigger1 = numtarget(1200)
trigger1 = !(target, IsHelper)
value = stateno+5
ctrl = 0
[State 220,2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;Counter (KOF2002)
[Statedef 1205];Ok!
type    = S
movetype= A
physics = N
poweradd= 0
ctrl = 0
velset = 0
sprpriority = 2

[State 1000, ChangeAnim]
type = ChangeAnim
trigger1 = !time
value = 1205

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = animelem = 1
value = 1200,1
channel = 0

[State 1402, VelSet]
type = VelSet
trigger1 = animelemtime(1) >= 0 
x = -(13.5*exp((-0.1886)*(time+1)))

[State 210, 1]
type = HitDef
triggerall = !var(55) 
trigger1 = AnimElemtime(2) >= 0 && animelemtime(4) < 0
attr = S, NA
damage = floor(125*ifelse(var(56),1.25,1))
animtype = Hard
air.animtype = Back
ground.type = High
guardflag = MA
hitflag = MAF
priority = 4, Hit
sparkno = s17002+(var(31)*10000)
sparkxy = -10, -44
hitsound = s3+(var(32)*2),9
guardsound = s3+(var(32)*2), 13-(var(32))
guard.sparkno = s17501+(var(31)*10000)
pausetime = 11,13
guard.pausetime = 11,12
ground.slidetime = 17
ground.hittime = 17
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 28
ground.velocity = ifelse(var(56),-15.75,-7.3828125),-4.5
guard.velocity = -11.1796875
air.type = High
air.velocity = ifelse(var(56),-15.75,-7.3828125),-4.5
air.hittime = 13
air.juggle = 0
getpower = 94,94
givepower = 16,16
fall = 1
air.fall = 1
id = 1205
p2stateno = ifelse(var(56),10900,10070)
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5
fall.recovertime = 50
persistent = 0

[State 220,2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------
;Shingo Kinsei Ore Shiki: Nie Togi (KOF2002)
[Statedef 1300];Ok!
type    = S
movetype= A
physics = N
poweradd= 109
ctrl = 0
velset = 0
sprpriority = 2
juggle = 8
facep2 = 1

[State 1000, ChangeAnim]
type = ChangeAnim
trigger1 = !time
value = 1300

[State 310, PosAdd]
type = PosAdd
trigger1 = animelem = 3
trigger2 = animelem = 4
trigger3 = animelem = 5
trigger4 = animelem = 7
trigger5 = animelem = 8
x = 8

[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = animelem = 2
value = 1300,0
channel = 0
[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = animelem = 4
value = 1300,1
channel = 0
[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = animelem = 7
value = 1300,2
channel = 0

[State 1402, VelSet]
type = VelSet
trigger1 = animelemtime(6) >= 0 && animelemtime(8) < 8
x = (5*exp((-0.082489)*(time-15)))
[State 1402, VelSet]
type = VelSet
trigger1 = animelemtime(8) = 8
x = 0
[State -2, Accel]
type = VelSet
trigger1 = animelem = 6
y = -6
[State -2, VelAdd]
type = VelAdd
trigger1 = animelemtime(6) > 0 
y = 0.42578125

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 6
statetype = A
[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 8
movetype = I

[State 210, 1]
type = HitDef
triggerall = !var(55)
trigger1 = animelemtime(3) >= 0 && animelemtime(4) < 0
attr = S, SA
damage = floor(33*ifelse(var(56),1.25,1)),10
animtype = Hard
air.animtype = back
guardflag =
hitflag = MAF
priority = 4, Hit
sparkno = s17002+(var(31)*10000)
sparkxy = -10, -60
hitsound = s3+(var(32)*2),3
guardsound = s3+(var(32)*2), 13
guard.sparkno = s17502+(var(31)*10000)
ground.type = Low
pausetime = 11,13
guard.pausetime = 11,12
ground.slidetime = 17
ground.hittime = 16
guard.hittime = 16
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity =0
guard.velocity = -11.1796875
air.type = High
air.velocity =  -4.5,-7
fall.yvelocity = -3
air.hittime = 13
air.juggle = 0
getpower = 47,47
givepower = 16,16
id = 1300
air.fall = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
fall.recover = 0
persistent = 0
[State 210, 1]
type = HitDef
triggerall = !var(55)
trigger1 = animelemtime(5) >= 0 && animelemtime(6) < 0
attr = S, SA
damage = floor(33*ifelse(var(56),1.25,1)),10
animtype = Hard
air.animtype = back
guardflag =
hitflag = MAF
priority = 4, Hit
sparkno = s17002+(var(31)*10000)
sparkxy = -10, -60
hitsound = s3+(var(32)*2),3
guardsound = s3+(var(32)*2), 13
guard.sparkno = s17502+(var(31)*10000)
ground.type = High
pausetime = 11,13
guard.pausetime = 11,12
ground.slidetime = 17
ground.hittime = 16
guard.hittime = 16
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity =0
guard.velocity = -11.1796875
air.type = High
air.velocity =  -4.5,-7
fall.yvelocity = -3
air.hittime = 13
air.juggle = 0
getpower = 47,47
givepower = 16,16
id = 1301
air.fall = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
fall.recover = 0
persistent = 0
[State 210, 1]
type = HitDef
triggerall = !var(55)
trigger1 = animelemtime(7) >= 0 && animelemtime(8) < 0
attr = A, SA
damage = floor(33*ifelse(var(56),1.25,1)),10
animtype = Hard
air.animtype = back
guardflag =
hitflag = MAF
priority = 4, Hit
sparkno = s17002+(var(31)*10000)
sparkxy = -20, -68
hitsound = s3+(var(32)*2),9
guardsound = s3+(var(32)*2), 13
guard.sparkno = s17502+(var(31)*10000)
ground.type = High
pausetime = 11,13
guard.pausetime = 11,12
ground.slidetime = 17
ground.hittime = 16
guard.hittime = 16
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity =-2,-17.25
guard.velocity = 0
air.type = High
air.velocity = -2,-17.25
fall.yvelocity = -3
air.hittime = 13
air.juggle = 0
getpower = 47,47
givepower = 16,16
id = 1302
fall = 1
p2stateno = 10030
fall.recover = 0
air.fall = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
fall.recover = 0
persistent = 0

[State 1000, 6]
type = ChangeState
triggerall = statetype = A
triggerall = animelemtime(6) > 0
trigger1 = Vel Y + Pos Y >= 0
value = stateno+1
ctrl = 0

;Land
[Statedef 1301]
type = S
movetype = I
physics = S
poweradd= 0
ctrl = 0
velset = 0,0
sprpriority = 2

[State 1000, ChangeAnim]
type = ChangeAnim
trigger1 = !time
value = 1301

[State 300, Land]
type = PlaySnd
trigger1 = !time
value = 2+(var(32)*10),2

[State 852, PosSet]
type = PosSet
trigger1 = !time
y = 0

[State 220,2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------
;Shingo Kick (KOF2002)
[Statedef 1400];Ok!
type    = S
movetype= A
physics = N
poweradd= 109
ctrl = 0
velset = 0
sprpriority = 2
juggle = 8
facep2 = 1

[State 1000, VarSet]
type = VarSet
trigger1 = !time
var(23) = ifElse((helper(10371), var(3) = [1,3]),0,1)

[State 1000, ChangeAnim]
type = ChangeAnim
trigger1 = !time
value = 1400+(var(23)*10)

[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = anim = 1400 && animelem = 4
trigger2 = anim = 1410 && animelem = 5
value = 1400,0
channel = 0
[State 300, Land]
type = PlaySnd
trigger1 = anim = 1400 && animelem = 6
trigger2 = anim = 1410 && animelem = 7
value = 4,1

[State 310, PosAdd]
type = PosAdd
trigger1 = anim = 1400 && animelem = 4
trigger2 = animelem = 5
trigger3 = anim = 1400 && animelem = 7
trigger4 = animelem = 8
trigger5 = animelem = 9
trigger6 = anim = 1410 && animelem = 6
trigger7 = anim = 1410 && animelem = 10
x = 8

[State -2, Accel]
type = VelSet
trigger1 = anim = 1400 && animelem = 6
trigger2 = anim = 1410 && animelem = 7
x = 3.5+(var(23)*3.5)
y = -5.5+var(23)
[State -2, VelAdd]
type = VelAdd
trigger1 = anim = 1400 && animelemtime(6) > 0 
trigger2 = anim = 1410 && animelemtime(7) > 0 
y = 0.625

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = anim = 1400 && animelem = 6
trigger2 = anim = 1410 && animelem = 7
statetype = A
[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = anim = 1410 && animelem = 12
movetype = I

[State 210, 1]
type = HitDef
triggerall = !var(55)
triggerall = anim = 1400
trigger1 = animelemtime(9) >= 0 
attr = A, SA
damage = floor(125*ifelse(var(56),1.25,1)),10
animtype = Hard
air.animtype = back
guardflag = MA
hitflag = MAF
priority = 4, Hit
sparkno = s17002+(var(31)*10000)
sparkxy = -10, -76
hitsound = s3+(var(32)*2),9
guardsound = s3+(var(32)*2), 13
guard.sparkno = s17502+(var(31)*10000)
ground.type = Low
pausetime = 11,13
guard.pausetime = 11,12
ground.slidetime = 17
ground.hittime = 16
guard.hittime = 16
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity =-4.5,-7
guard.velocity = -11.1796875
air.type = High
air.velocity =  -4.5,-7
fall.yvelocity = -3
air.hittime = 13
air.juggle = 0
getpower = 47,47
givepower = 16,16
nochainid = 1312
id = 1400
fall = 1
p2stateno = 10400
air.fall = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
fall.recover = 0
persistent = 0
[State 210, 1]
type = HitDef
triggerall = !var(55)
triggerall = anim = 1410
trigger1 = animelemtime(9) >= 0 && animelemtime(12) < 0
attr = A, SA
damage = floor(125*ifelse(var(56),1.25,1)),10
animtype = Hard
air.animtype = back
guardflag = MA
hitflag = MAF
priority = 4, Hit
sparkno = s17002+(var(31)*10000)
sparkxy = -10, -76
hitsound = s3+(var(32)*2),9
guardsound = s3+(var(32)*2), 13
guard.sparkno = s17502+(var(31)*10000)
ground.type = Low
pausetime = 11,13
guard.pausetime = 11,12
ground.slidetime = 17
ground.hittime = 16
guard.hittime = 16
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity =-4.5,-7
guard.velocity = -11.1796875
air.type = High
air.velocity =  -4.5,-7
fall.yvelocity = -3
air.hittime = 13
air.juggle = 0
getpower = 47,47
givepower = 16,16
nochainid = 1312
id = 1400
fall = 1
p2stateno = 10400
air.fall = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
fall.recover = 0
persistent = 0

[State -2, Juggle Killer]
type = VarSet
trigger1 = movehit && P2Statetype = A
var(55) = 1400
ignorehitpause = 1
persistent = 0

[State 1000, 6]
type = ChangeState
triggerall = statetype = A
trigger1 = Vel Y + Pos Y >= 0
value = stateno+1
ctrl = 0

;Land
[Statedef 1401]
type = S
movetype = I
physics = S
poweradd= 0
ctrl = 0
velset = 0,0
sprpriority = 2

[State 1000, ChangeAnim]
type = ChangeAnim
trigger1 = !time
value = 1401

[State 310, PosAdd]
type = PosAdd
trigger1 = animelem = 3
trigger2 = animelem = 4
x = 8

[State 300, Land]
type = PlaySnd
trigger1 = !time
value = 2+(var(32)*10),2

[State 852, PosSet]
type = PosSet
trigger1 = !time
y = 0

[State 220,2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------
;212 Shiki: Kototsuki Mikansei(KOF2002)
[Statedef 1500];Ok!
type    = S
movetype= A
physics = N
poweradd= 109
ctrl = 0
velset = 0
sprpriority = 2
juggle = 8
facep2 = 1

[State 1000, VarSet]
type = VarSet
trigger1 = !time 
var(23) = ifElse((helper(10371), var(3) = [1,3]),0,1)

[State 1000, ChangeAnim]
type = ChangeAnim
trigger1 = !time
value = 1500
[State 1402, VelSet]
type = VelSet
trigger1 = animelem = 2
x = 8.5

[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = animelem = 2
value = 1500,0
channel = 0
[State 3000, StopSnd]
type = StopSnd
trigger1 = !time
channel = 27
[State -3, dash]
type = PlaySnd
trigger1 = animelem = 2
value = 2+(var(32)*10),8
loop = 1
channel = 27

[State 1000, 6]
type = ChangeState
trigger1 = animelemtime(2) >= 0 
trigger1 = P2BodyDist X <= 58 ;88 is the correct value in KOF2002 in "Axis-Axis" distance 45
value = stateno+2
ctrl = 0
[State 1000, 6]
type = ChangeState
trigger1 = !var(23) && time = 16
trigger2 = var(23) && time = 24
value = stateno+1
ctrl = 0

;Miss
[Statedef 1501]
type = S
movetype = I
physics = N
poweradd= 0
ctrl = 0
velset = 0,0
sprpriority = 2
[State 1000, ChangeAnim]
type = ChangeAnim
trigger1 = !time
value = 1501
[State 1402, VelSet]
type = VelSet
trigger1 = 1
x = (8.5*exp((-0.21245725851142667212614710105998)*(time)))
[State 1402, VelSet]
type = PosAdd
trigger1 = animelem = 1
x = 8.5
persistent = 0
[State 220,2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;Attack
[Statedef 1502]
type = S
movetype = A
physics = N
poweradd= 0
ctrl = 0
velset = 0,0
sprpriority = 2

[State 1000, ChangeAnim]
type = ChangeAnim
trigger1 = !time
value = 1502+(var(23)*10)

[State 1402, VelSet]
type = VelSet
trigger1 = animelemtime(9) < 1
x = (8.5*exp((-0.06454)*(time)))
[State 310, PosAdd]
type = PosAdd
trigger1 = animelem = 4
trigger2 = animelem = 5
trigger3 = animelem = 6
x = 8
[State 310, PosAdd]
type = PosAdd
trigger1 = animelem = 10
trigger2 = animelem = 11
x = 4
[State 310, PosAdd]
type = PosAdd
trigger1 = animelem = 9
x = (8.5*exp((-0.06454)*(time)))
[State -2, Accel]
type = VelSet
trigger1 = animelem = 9
x = 4
y = -3
[State -2, VelAdd]
type = VelAdd
trigger1 = animelemtime(9) > 0 
y = 0.375

[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = animelem = 9
value = 1500,1
channel = 0
[State 300, Land]
type = PlaySnd
trigger1 = animelem = 9
value = 4,3
channel = 2

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 9
statetype = A

[State 210, 1]
type = HitDef
triggerall = !var(55)
trigger1 = anim = 1502
trigger1 = animelemtime(5) >= 0 && animelemtime(6) < 0
attr = S, SA
damage = floor(58*ifelse(var(56),1.25,1)),10
animtype = Hard
air.animtype = back
guardflag = MA
hitflag = MAF
priority = 4, Hit
sparkno = s17002+(var(31)*10000)
sparkxy = -10, -44
hitsound = s3+(var(32)*2),3
guardsound = s3+(var(32)*2), 13
guard.sparkno = s17502+(var(31)*10000)
ground.type = Low
pausetime = 7,13
guard.pausetime = 7,12
ground.slidetime = 17
ground.hittime = 16
guard.hittime = 16
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity = 0
guard.velocity = 0
air.type = High
air.velocity =  -4.5,-7
fall.yvelocity = -3
air.hittime = 13
air.juggle = 0
getpower = 47,47
givepower = 16,16
nochainid = 1312
id = 1500
air.fall = 1
p2stateno = 1550
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
fall.recover = 0
persistent = 0
[State 210, 1]
type = HitDef
triggerall = !var(55)
trigger1 = anim = 1512
trigger1 = animelemtime(5) >= 0 && animelemtime(6) < 0
attr = S, SA
damage = floor(75*ifelse(var(56),1.25,1)),10
animtype = Hard
air.animtype = back
guardflag = MA
hitflag = MAF
priority = 4, Hit
sparkno = s17002+(var(31)*10000)
sparkxy = -10, -44
hitsound = s3+(var(32)*2),3
guardsound = s3+(var(32)*2), 13
guard.sparkno = s17502+(var(31)*10000)
ground.type = Low
pausetime = 7,13
guard.pausetime = 7,12
ground.slidetime = 17
ground.hittime = 16
guard.hittime = 16
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity = 0
guard.velocity = 0
air.type = High
air.velocity =  -4.5,-7
fall.yvelocity = -3
air.hittime = 13
air.juggle = 0
getpower = 47,47
givepower = 16,16
nochainid = 1312
id = 1500
air.fall = 1
p2stateno = 1550
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
fall.recover = 0
persistent = 0

[State 220,2]
type = ChangeState
trigger1 = statetype = A
trigger1 = Vel Y + Pos Y >= 0
value = stateno+1
ctrl = 0

;Land
[Statedef 1503]
type = S
movetype = A
physics = S
poweradd= 0
ctrl = 0
velset = 0,0
sprpriority = 2

[State 1000, ChangeAnim]
type = ChangeAnim
trigger1 = !time
value = 1503+(var(23)*10)

[State 300, Land]
type = PlaySnd
trigger1 = !time
value = 2+(var(32)*10),2

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 2
movetype = I

[State 310, PosAdd]
type = PosAdd
trigger1 = animelem = 2
trigger2 = animelem = 3
x = 8
[State 852, PosSet]
type = PosSet
trigger1 = !time
y = 0

[State 210, 1]
type = HitDef
triggerall = !var(55)
trigger1 = animelemtime(2) < 0
attr = S, SA
damage = floor(33*ifelse(var(56),1.25,1)),10
animtype = Hard
air.animtype = back
guardflag = HA
hitflag = MAFD
priority = 4, Hit
sparkno = s17002+(var(31)*10000)
sparkxy = -10, -44
hitsound = s3+(var(32)*2),9
guardsound = s3+(var(32)*2), 13
guard.sparkno = s17502+(var(31)*10000)
ground.type = Low
pausetime = 11,13
guard.pausetime = 11,12
ground.slidetime = 17
ground.hittime = 16
guard.hittime = 16
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity = 0
guard.velocity = -11.1796875
air.type = High
air.velocity =  -6,10
air.hittime = 13
air.juggle = 0
getpower = 47,47
givepower = 16,16
nochainid = 1312
id = 1501
air.fall = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
fall.recover = 0
persistent = 0
p2stateno = 10060
fall.xvelocity = -2*(p2statetype=A)
fall.yvelocity = -2-(p2statetype=A)*4

[State -2, Juggle Killer]
type = VarSet
trigger1 = movehit && P2Statetype = A
var(55) = 1500
ignorehitpause = 1
persistent = 0

[State 220,2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;Hit by
[Statedef 1550];Ok!
type    = U
movetype= H
physics = U
ctrl = 0
velset = 0,0
[State 3450, SelfState]
type = ChangeState
trigger1 = !alive
value = 10060
[State 3450, SelfState]
type = SelfState
trigger1 = statetype = A
value = 5000
[State 3105, StateTypeSet]
type = StateTypeSet
trigger1 = !time
statetype = S
[State 1000, ChangeAnim]
type = ChangeAnim
trigger1 = !HitShakeOver
value = 5002
[State 1000, ChangeAnim]
type = ChangeAnim
trigger1 = anim = 5002 && !animtime
value = 5017
[State 3105, StateTypeSet]
type = StateTypeSet
trigger1 = Hitshakeover
statetype = S
[State 3150, PosSet]
type = PosSet
trigger1 = !time
y = 0
[State 5001, 6]
type = SelfState
trigger1 = time = 50
value = 0
ctrl = 1

;----------------------------------------
;101 Shiki: Oboro Guruma Mikansei(KOF2002)
[Statedef 1600];Ok!
type    = S
movetype= A
physics = N
poweradd= 109
ctrl = 0
velset = 0
sprpriority = 2
juggle = 8
facep2 = 1

[State 1000, VarSet]
type = VarSet
trigger1 = !time
var(23) = ifElse((helper(10371), var(3) = [1,3]),0,1)
[State 1600, CRITICAL RNG]
type = VarSet
trigger1 = !time
var(5) = (gametime%2)*var(23)

[State 1000, ChangeAnim]
type = ChangeAnim
trigger1 = !time
value = 1600+(var(23)*10)
[State 1000, CRITICAL]
type = ChangeAnim
trigger1 = var(5)
trigger1 = anim = 1610 && animelem = 11
value = 1615

[State 1402, VelSet]
type = VelSet
triggerall = anim = 1600
trigger1 = animelem = 3
x = 4
y = -6
[State -2, VelAdd]
type = VelAdd
trigger1 = anim = 1600
trigger1 = animelemtime(3) > 0 
y = 0.5
[State 1402, VelSet]
type = VelSet
trigger1 = anim = 1610
trigger1 = animelemtime(3) >= 0
trigger2 = anim = 1615
x = (10*exp((-0.04800)*(time-4)))
[State 1402, VelSet]
type = VelSet
triggerall = anim = 1610
trigger1 = animelem = 3
y = -4
[State 1402, VelSet]
type = VelSet
triggerall = anim = 1610
trigger1 = animelem = 11
y = 0
[State -2, VelAdd]
type = VelAdd
trigger1 = anim = 1610
trigger1 = animelemtime(3) > 0 && animelemtime(11) < 0
trigger2 = anim = 1615 && animelemtime(8) < 0
y = 0.09375
[State -2, VelAdd]
type = VelAdd
trigger1 = anim = 1610 && animelemtime(11) > 0 
trigger2 = anim = 1615 && animelemtime(8) > 0
y = 0.28125
[State 50, Transition]
type = PosAdd
trigger1 = anim = 1610 && Vel Y > 0
trigger2 = anim = 1615 && Vel Y > 0
x = Vel X
persistent = 0

[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = animelem = 3
value = 1600,0
channel = 0
[State 200, Punch Attempt Sound]
type = Playsnd
trigger1 = anim = 1615 && animelem = 3
value = 1600,1
channel = 0
[State 300, Land]
type = PlaySnd
trigger1 = anim = 1600+(var(23)*10) && animelem = 3
trigger2 = anim = 1610 && animelem = 7
trigger3 = anim = 1615 && animelem = 4
value = 4,3
channel = 2
[State 300, Land]
type = PlaySnd
trigger1 = anim = 1615 && animelem = 9
value = 4,2

[State 1000, NotHitBy]
type = NotHitBy
triggerall = anim = 1600+(var(23)*10)
trigger1 = animelemtime(3) < 0
value = SCA
time = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 3
statetype = A
[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = anim = 1600 && animelem = 5
trigger2 = !var(5)
trigger2 = anim = 1610 && animelem = 10
movetype = I

[State 210, 1]
type = HitDef
triggerall = !var(55)
trigger1 = anim = 1600
trigger1 = animelemtime(4) >= 0 && animelemtime(5) < 0
attr = A, SA
damage = floor(83*ifelse(var(56),1.25,1)),10
animtype = Hard
air.animtype = back
guardflag = MA
hitflag = MAF
priority = 4, Hit
sparkno = s17002+(var(31)*10000)
sparkxy = -10, -70
hitsound = s3+(var(32)*2),7
guardsound = s3+(var(32)*2), 13
guard.sparkno = s17502+(var(31)*10000)
ground.type = Low
pausetime = 11,13
guard.pausetime = 11,12
ground.slidetime = 17
ground.hittime = 16
guard.hittime = 16
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity =-4.5,-7
guard.velocity = -11.1796875
air.type = High
air.velocity =  -4.5,-7
fall.yvelocity = -3
air.hittime = 13
air.juggle = 0
getpower = 47,47
givepower = 16,16
nochainid = 1312
id = 1600
fall = 1
air.fall = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
fall.recover = 0
persistent = 0
[State 210, 1]
type = HitDef
triggerall = !var(55)
trigger1 = anim = 1610
trigger1 = animelemtime(4) >= 0 && animelemtime(5) < 0
attr = A, SA
damage = floor(42*ifelse(var(56),1.25,1)),10
animtype = Hard
air.animtype = back
guardflag = MA
hitflag = MAF
priority = 4, Hit
sparkno = s17002+(var(31)*10000)
sparkxy = -10, -70
hitsound = s3+(var(32)*2),7
guardsound = s3+(var(32)*2), 13
guard.sparkno = s17502+(var(31)*10000)
ground.type = Low
pausetime = 7,13
guard.pausetime = 7,12
ground.slidetime = 17
ground.hittime = 16
guard.hittime = 16
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity =-4.5,-7
guard.velocity = -11.1796875
air.type = High
air.velocity =  -4.5,-7
fall.yvelocity = -3
air.hittime = 13
air.juggle = 0
getpower = 47,47
givepower = 16,16
nochainid = 1312
id = 1610
fall = 1
air.fall = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
fall.recover = 0
persistent = 0
[State 210, 1]
type = HitDef
triggerall = !var(55)
trigger1 = anim = 1610
trigger1 = animelemtime(9) >= 0 && animelemtime(10) < 0
attr = A, SA
damage = floor(50*ifelse(var(56),1.25,1)),10
animtype = Hard
air.animtype = back
guardflag = MA
hitflag = MAF
priority = 4, Hit
sparkno = s17002+(var(31)*10000)
sparkxy = -10, -80
hitsound = s3+(var(32)*2),7
guardsound = s3+(var(32)*2), 13
guard.sparkno = s17502+(var(31)*10000)
ground.type = Low
pausetime = 11,13
guard.pausetime = 11,12
ground.slidetime = 17
ground.hittime = 16
guard.hittime = 16
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity =-4.5,-7
guard.velocity = -11.1796875
air.type = High
air.velocity =  -4.5,-7
fall.yvelocity = -3
air.hittime = 13
air.juggle = 0
getpower = 47,47
givepower = 16,16
nochainid = 1312
id = 1611
fall = 1
air.fall = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
fall.recover = 0
persistent = 0
[State 210, 1]
type = HitDef
triggerall = !var(55) || var(55) = 1600
trigger1 = anim = 1615
trigger1 = animelemtime(9) >= 0
attr = A, SA
damage = floor(67*ifelse(var(56),1.25,1)),10
animtype = Hard
air.animtype = back
guardflag = HA
hitflag = MAFD
priority = 4, Hit
sparkno = s17002+(var(31)*10000)
sparkxy = -10, -18
hitsound = s3+(var(32)*2),9
guardsound = s3+(var(32)*2), 13
guard.sparkno = s17502+(var(31)*10000)
ground.type = Low
pausetime = 15,17
guard.pausetime = 15,16
ground.slidetime = 17
ground.hittime = 16
guard.hittime = 16
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity = 0
guard.velocity = -11.1796875
air.type = High
air.velocity =  -6,10
air.hittime = 13
air.juggle = 0
getpower = 47,47
givepower = 16,16
nochainid = 1312
id = 1615
air.fall = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
fall.recover = 0
persistent = 0
p2stateno = 10060
fall.xvelocity = -2*(p2statetype=A)
fall.yvelocity = -2-(p2statetype=A)*4
envshake.time = 14
envshake.freq = 180
envshake.ampl = -4

[State 1411, VarSet]
type = VarSet
trigger1 = movehit && numtarget(1615)
var(16) = 12
persistent = 0
ignorehitpause = 1
[State -2, Juggle Killer]
type = VarSet
triggerall = movehit && P2Statetype = A
trigger1 = numtarget(1600)
var(55) = 1600
ignorehitpause = 1
persistent = 0
[State -2, EnvColor];This will produce a flash a la KOF2K2
type = EnvColor
triggerall = var(21)
trigger1 = movehit && numtarget(1615)
value = 255,255,255
time = 1
under = 1
ignorehitpause = 1
persistent = 0
[State -2, Explod];Critical Explod for P1 Side.
type = Explod
triggerall = var(31)
triggerall = numenemy
triggerall = numexplod(58) = 0 && teamside = 1 
triggerall = enemy, movetype = h ;Enemy was indeed HIT, otherwise this'd be retarded.
trigger1 = numtarget(1615)
trigger1 = movehit ;Move hits
anim = 24002
pos = 0,80+15 ;106 is the correct offset, +2 to be aligned with OrochiKOF's
postype = left  ;p2,front,back,left,right
removetime = -2
supermove = 1
sprpriority = 2
id = 58
bindtime = -1
ontop = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = -1
[State -2, Explod];Critical Explod for P2 Side.
type = Explod
triggerall = var(31)
triggerall = numenemy
triggerall = numexplod(58) = 0 && teamside = 2 
triggerall = enemy, movetype = h ;Enemy was indeed HIT, otherwise this'd be retarded.
trigger1 = numtarget(1615)
trigger1 = movehit ;Move hits
anim = 24003
pos = 0,80+15
postype = right  ;p2,front,back,left,right
removetime = -2
supermove = 1
sprpriority = 2
id = 58
bindtime = -1
ontop = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = -1

[State 1000, 6]
type = ChangeState
triggerall = statetype = A
triggerall = animelemtime(3) > 0
trigger1 = Vel Y + Pos Y >= 0
value = stateno+1
ctrl = 0

;Land
[Statedef 1601]
type = S
movetype = I
physics = S
poweradd= 0
ctrl = 0
velset = 0,0
sprpriority = 2

[State 1000, ChangeAnim]
type = ChangeAnim
trigger1 = !time
value = 1601+(var(23)*10)+(var(5)*5)

[State 200, Punch Attempt Sound]
type = Playsnd
triggerall = var(23)
trigger1 = !time && var(5)
value = 1600,2
channel = 0
[State 300, Land]
type = PlaySnd
triggerall = !time
trigger1 = !var(23)
trigger2 = var(23) && !var(5)
value = 2+(var(32)*10),2
[State 5100, 10]
type = PlaySnd
triggerall = var(23)
trigger1 = !time && var(5)
value = 2+(var(32)*10),9

[State 852, PosSet]
type = PosSet
trigger1 = !time
y = 0

[State 5100, Explod]
type = Explod
triggerall = var(23)
trigger1 = !time && var(5)
anim = 12000
pos = 0,0
postype = p1  ;p2,front,back,left,right
sprpriority = -4
ownpal = 1
[State 3000, EnvShake]
type = EnvShake
triggerall = var(23)
trigger1 = !time && var(5)
time = 14
freq = 180
ampl = -4
persistent = 0

[State 220,2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------
; Ge Shiki: Kake Hourin (KOF2002UM)
[Statedef 3000];Ok!
type    = S
movetype= A
physics = N
poweradd=  ifelse(var(51),0,-1000)
ctrl = 0
velset = 0
sprpriority = 2
juggle = 8
facep2 = 1

[State 1000, VarAdd]
type = PowerAdd
triggerall = !time
triggerall = var(33) && !var(51)
trigger1 = prevstateno = [1000,1999]
value = -1000
persistent = 0
ignorehitpause = 1

[State 300, End MAXMODE]
type = VarSet
trigger1 = !time
var(51) = 0
ignorehitpause = 1
[State 1000, VarSet]
type = VarSet
trigger1 = !time
var(23) = ifElse((helper(10371), var(0) = [1,3]),0,1)
[State 1000, VarSet]
type = VarSet
trigger1 = !time
var(54) = 0
[State 1000, VarSet]
type = VarSet
trigger1 = prevstateno = [1000,1999]
var(54) = 1

[State 1000, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0
value = 3000
[State 1000, ChangeAnim]
type = ChangeAnim
trigger1 = anim = 3000 && !animtime
value = 3001+(var(23)*10)

[State 3000, StopSnd]
type = StopSnd
trigger1 = !time
channel = 27

[State 1000, VarAdd]
type = VarAdd
trigger1 = prevstateno = [1000,1999]
fvar(5) = -1000
persistent = 0
[State 3000, VarSet]
type = VarSet
trigger1 = time = 0 ;Superpause tick error fix.
var(6) = 26

[State 13000, EnvColor]
type = EnvColor
triggerall = var(21)
trigger1 = time = 1
value = 255,255,255
time = 4
under = 1
ignorehitpause = 1
persistent = 0

[State -2, PalFX]
type = PalFX
trigger1 = prevstateno = [1000,1999]
trigger1 = time < 17
time = 1
add = 255,255,255
sinadd = 0,0,0
invertall = 0
color = 256
ignorehitpause = 1
persistent = 2

[State 3000, AssertSpecial]
type = AssertSpecial
trigger1 = time = [1,29]
flag = noBG
flag2 = noFG

[State 1100, NotHitBy]
type = NotHitBy
trigger1 = time = [1,30]
value = SCA
[State 750, 1]
type = HitBy
trigger1 = anim = 3000
value = SCA,NT,ST,HT

[State 6001, pause]
type = SuperPause
trigger1 = time = 1
time = 28
movetime = 28
anim = -1
darken = 0
sound = s3+(var(32)*2),10
p2defmul = 1

[State -3, dash]
type = PlaySnd
trigger1 = anim = 3001+(var(23)*10)
trigger1 = animelem = 1
value = 2+(var(32)*10),8
loop = 1
channel = 27
[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 3000,0
channel = 0
persistent = 0

[State 6001, pause]
type = Explod
trigger1 = time = 1
anim = 15200-(var(31)*200)
pos = 12,-92
postype = p1
supermovetime = 9999999999999999
pausemovetime = 9999999999999999
supermove = 1
removetime = 28
sprpriority = -2
ownpal = 1
[State 6001, pause]
type = Explod
trigger1 = time = 1
anim = 15201-(var(31)*200)
pos = 12,-92
postype = p1
supermovetime = 9999999999999999
pausemovetime = 9999999999999999
supermove = 1
removetime = 28
sprpriority = 4
ownpal = 1

[State 3035, 1]
type = AfterImage
triggerall = var(31)
trigger1 = anim = 3001+(var(23)*10) 
time = -1
length = 4
timegap = 2
framegap = 1
palcolor = 0
trans = add1
palbright = 0,0,32;96,96,128
palpostbright = 0,0,0
;palcontrast = 96,64,160
paladd = 0,0,0
palmul = 1,1,1
persistent = 0
ignorehitpause = 1

[State 1402, VelSet]
type = VelSet
trigger1 = anim = 3001+(var(23)*10) 
trigger1 = animelem = 2
x = 8
persistent = 0

[State 1000, 6]
type = ChangeState
triggerall = anim = 3001+(var(23)*10)
trigger1 = !animtime
trigger2 = P2BodyDist X <= 39
trigger3 = (helper(10371), var(0) = [1,3]) || (helper(10371), var(1) = [1,3]) 
trigger3 = animelemtime(1) > 0
value = stateno+1
ctrl = 0

;Attack
[Statedef 3001]
type = S
movetype = A
physics = N
poweradd= 0
ctrl = 0
velset = 0,0
sprpriority = 2

[State 1000, ChangeAnim]
type = ChangeAnim
trigger1 = !time
value = 3002+(var(23)*10)

[State 3000, StopSnd]
type = StopSnd
trigger1 = !time
channel = 27

[State 310, PosAdd]
type = PosAdd
trigger1 = animelem = 1
x = 8
[State 1402, VelSet]
type = VelSet
trigger1 = animelemtime(5) < 2
x = (8*exp((-0.082489)*(time+1)))
[State -2, Accel]
type = VelSet
trigger1 = animelem = 5, = 1
x = 0

[State 3200, AfterImageTime]
type = AfterImageTime
trigger1 = movetype = I
time = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 5
movetype = I

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 1100,0
channel = 0
persistent = 0

[State 210, 1]
type = HitDef
triggerall = !var(55)
trigger1 = anim = 3002
trigger1 = animelemtime(4) >= 0 && animelemtime(5) < 0
attr = S, HA
damage = floor(233*ifelse(var(56),1.25,1)),10
animtype = diagup
air.animtype = diagup
guardflag = MA
hitflag = MAF
priority = 3, Hit
sparkno = s17002+(var(31)*10001)
sparkxy = -10, -44
hitsound = s2,6
guardsound = s3+(var(32)*2), 13
guard.sparkno = s17502+(var(31)*10000)
ground.type = Low
pausetime = 15,17
guard.pausetime = 15,16
ground.slidetime = 17
ground.hittime = 16
guard.hittime = 16
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity =-19,-9
guard.velocity = -11.1796875
air.type = High
air.velocity =  -19,-9
fall.yvelocity = -3
air.hittime = 13
air.juggle = 0
getpower = 47,47
givepower = 16,16
nochainid = 3200
id = 3000
fall = 1
p2stateno = 10200
air.fall = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
fall.recover = 0
persistent = 0
envshake.time = 14
envshake.freq = 180
envshake.ampl = -4
fall.envshake.time = 14
fall.envshake.freq = 180
fall.envshake.ampl = -4
[State 210, 1]
type = HitDef
triggerall = !var(55)
trigger1 = anim = 3012
trigger1 = animelemtime(4) >= 0 && animelemtime(5) < 0
attr = S, HA
damage = floor(233*ifelse(var(56),1.25,1)),10
animtype = up
air.animtype = up
guardflag = MA
hitflag = MAF
priority = 3, Hit
sparkno = s17002+(var(31)*10001)
sparkxy = -10, -44
hitsound = s2,6
guardsound = s3+(var(32)*2), 13
guard.sparkno = s17502+(var(31)*10000)
ground.type = Low
pausetime = 15,17
guard.pausetime = 15,16
ground.slidetime = 17
ground.hittime = 16
guard.hittime = 16
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity =-2,-21
guard.velocity = -11.1796875
air.type = High
air.velocity = -2,-21
fall.yvelocity = -3
air.hittime = 13
air.juggle = 0
getpower = 0,0
givepower = 16,16
nochainid = 3200
id = 3000
fall = 1
p2stateno = 10530
air.fall = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
fall.recover = 0
persistent = 0
envshake.time = 14
envshake.freq = 180
envshake.ampl = -4

[State 1411, VarSet]
type = VarSet
trigger1 = movehit && numtarget(3000)
var(16) = 12
persistent = 0
ignorehitpause = 1

[State -2, EnvColor];This will produce a flash a la KOF2K2
type = EnvColor
triggerall = var(21)
trigger1 = movehit
trigger1 = numtarget(3000)
value = 255,255,255
time = 1
under = 1
ignorehitpause = 1
persistent = 0

[State 220,2]
type = ChangeState
trigger1 = !animtime
value = 0
ctrl = 1

;----------------------------------------
; Shingo Kinsei Ore Shiki: Mu Shiki (KOF2002UM)
[Statedef 3100];Ok!
type    = S
movetype= A
physics = N
poweradd=  ifelse(var(51),0,-1000)
ctrl = 0
velset = 0
sprpriority = 2
juggle = 8
facep2 = 1

[State 1000, VarAdd]
type = PowerAdd
triggerall = !time
triggerall = var(33) && !var(51)
trigger1 = prevstateno = [1000,1999]
value = -1000
persistent = 0
ignorehitpause = 1

[State 300, End MAXMODE]
type = VarSet
trigger1 = !time
var(51) = 0
ignorehitpause = 1
[State 1000, VarSet]
type = VarSet
trigger1 = !time
var(23) = ifElse((helper(10371), var(0) = [1,3]),0,1)
[State 1000, VarSet]
type = VarSet
trigger1 = !time
var(54) = 0
[State 1000, VarSet]
type = VarSet
trigger1 = prevstateno = [1000,1999]
var(54) = 1

[State 1000, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0
value = 3100

[State 1000, VarAdd]
type = VarAdd
trigger1 = prevstateno = [1000,1999]
fvar(5) = -1000
persistent = 0
[State 3000, VarSet]
type = VarSet
trigger1 = time = 0 ;Superpause tick error fix.
var(6) = 26

[State 13000, EnvColor]
type = EnvColor
triggerall = var(21)
trigger1 = time = 1
value = 255,255,255
time = 4
under = 1
ignorehitpause = 1
persistent = 0

[State -2, PalFX]
type = PalFX
trigger1 = prevstateno = [1000,1999]
trigger1 = time < 17
time = 1
add = 255,255,255
sinadd = 0,0,0
invertall = 0
color = 256
ignorehitpause = 1
persistent = 2

[State 3000, AssertSpecial]
type = AssertSpecial
trigger1 = time = [1,29]
flag = noBG
flag2 = noFG

[State 1100, NotHitBy]
type = NotHitBy
trigger1 = time = [1,30]
value = SCA
[State 750, 1]
type = HitBy
trigger1 = animelemtime(5) < 0
value = SCA,NT,ST,HT

[State 6001, pause]
type = SuperPause
trigger1 = time = 1
time = 28
movetime = 28
anim = -1
darken = 0
sound = s3+(var(32)*2),10
p2defmul = 1

[State 6001, pause]
type = Explod
trigger1 = time = 1
anim = 15200-(var(31)*200)
pos = 14,-116
postype = p1
supermovetime = 9999999999999999
pausemovetime = 9999999999999999
supermove = 1
removetime = 28
sprpriority = -2
ownpal = 1
[State 6001, pause]
type = Explod
trigger1 = time = 1
anim = 15201-(var(31)*200)
pos = 14,-116
postype = p1
supermovetime = 9999999999999999
pausemovetime = 9999999999999999
supermove = 1
removetime = 28
sprpriority = 4
ownpal = 1

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 3000,0
channel = 0
persistent = 0

[State 1000, 6]
type = ChangeState
trigger1 = !animtime
value = stateno+1
ctrl = 0

;Fist 1
[Statedef 3101];Ok!
type    = S
movetype= A
physics = N
poweradd= 0
ctrl = 0
velset = 0
sprpriority = 2

[State 1000, ChangeAnim]
type = ChangeAnim
trigger1 = !time
value = 3101

[State 3201, Width]
type = Width
trigger1 = time
player = 16,0

[State 310, PosAdd]
type = PosAdd
trigger1 = animelem = 2
trigger2 = animelem = 3
trigger3 = animelem = 4
trigger4 = animelem = 5
trigger5 = animelem = 6
trigger6 = animelem = 7
x = 8
[State 310, PosAdd]
type = PosAdd
trigger1 = animelem = 8
trigger2 = animelem = 9
x = 16

[State 210, 1]
type = HitDef
triggerall = !var(55)
trigger1 = animelemtime(10) >= 0 && animelemtime(11) < 0
attr = S, HA
damage = floor(125*ifelse(var(56),1.25,1)),10
animtype = Hard
air.animtype = back
guardflag = MA
hitflag = MA
priority = 3, Hit
sparkno = s17002+(var(31)*10001)
sparkxy = -10, -70
hitsound = s3+(var(32)*2),9
guardsound = s3+(var(32)*2), 13
guard.sparkno = s17502+(var(31)*10000)
ground.type = Low
pausetime = 11,13
guard.pausetime = 11,12
ground.slidetime = 17
ground.hittime = 16
guard.hittime = 16
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity = 0
guard.velocity = 0
air.type = High
air.velocity =  -4.5,-7
fall.yvelocity = -3
air.hittime = 13
air.juggle = 0
getpower = 0,0
givepower = 16,16
nochainid = 1312
id = 3100
air.fall = 1
p2stateno = 1550
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
fall.recover = 0
persistent = 0

[State -2, EnvColor];This will produce a flash a la KOF2K2
type = EnvColor
triggerall = var(21)
trigger1 = movehit
trigger1 = numtarget(3100)
value = 255,255,255
time = 1
under = 1
ignorehitpause = 1
persistent = 0

[State 1000, 6]
type = ChangeState
trigger1 = !animtime
value = stateno+1
ctrl = 0

;Fist 2
[Statedef 3102];Ok!
type    = S
movetype= A
physics = N
poweradd= 0
ctrl = 0
velset = 0
sprpriority = 2

[State 1000, ChangeAnim]
type = ChangeAnim
trigger1 = !time
value = 3101

[State 3201, Width]
type = Width
trigger1 = time
player = 16,0

[State 310, PosAdd]
type = PosAdd
trigger1 = animelem = 2
trigger2 = animelem = 3
trigger3 = animelem = 4
trigger4 = animelem = 5
trigger5 = animelem = 6
trigger6 = animelem = 7
x = 8
[State 310, PosAdd]
type = PosAdd
trigger1 = animelem = 8
trigger2 = animelem = 9
x = 16

[State 210, 1]
type = HitDef
triggerall = !var(55)
trigger1 = animelemtime(10) >= 0 && animelemtime(11) < 0
attr = S, HA
damage = floor(58*ifelse(var(56),1.25,1)),10
animtype = Hard
air.animtype = back
guardflag = MA
hitflag = MAF
priority = 3, Hit
sparkno = s17002+(var(31)*10001)
sparkxy = -10, -70
hitsound = s3+(var(32)*2),9
guardsound = s3+(var(32)*2), 13
guard.sparkno = s17502+(var(31)*10000)
ground.type = Low
pausetime = 11,13
guard.pausetime = 11,12
ground.slidetime = 17
ground.hittime = 16
guard.hittime = 16
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity = 0
guard.velocity = 0
air.type = High
air.velocity =  -4.5,-7
fall.yvelocity = -3
air.hittime = 13
air.juggle = 0
getpower = 0,0
givepower = 16,16
nochainid = 1312
id = 3101
air.fall = 1
p2stateno = 1550
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
fall.recover = 0
persistent = 0

[State -2, EnvColor];This will produce a flash a la KOF2K2
type = EnvColor
triggerall = var(21)
trigger1 = movehit
trigger1 = numtarget(3101)
value = 255,255,255
time = 1
under = 1
ignorehitpause = 1
persistent = 0

[State 1000, 6]
type = ChangeState
trigger1 = !animtime
value = stateno+1
ctrl = 0

;Fist 3
[Statedef 3103];Ok!
type    = S
movetype= A
physics = N
poweradd= 0
ctrl = 0
velset = 0
sprpriority = 2

[State 1000, ChangeAnim]
type = ChangeAnim
trigger1 = !time
value = 3103

[State 310, PosAdd]
type = PosAdd
trigger1 = animelem = 1
trigger2 = animelem = 5
trigger3 = animelem = 6
trigger4 = animelem = 7
trigger5 = animelem = 12
trigger6 = animelem = 13
trigger7 = animelem = 14
trigger8 = animelem = 16
trigger9 = animelem = 17
x = 8

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 15
statetype = A

[State 1402, VelSet]
type = VelSet
trigger1 = animelemtime(15) >= 0 && animelemtime(21) < 1
x = (5*exp((-0.08248934360989325722859930675326)*(time-44)))
[State 1402, VelSet]
type = VelSet
trigger1 = animelemtime(21) = 1
x = 0
[State -2, Accel]
type = VelSet
trigger1 = animelem = 15
y = -6
[State -2, VelAdd]
type = VelAdd
trigger1 = animelemtime(15) > 0 
y = 0.42578125

[State 300, Land]
type = PlaySnd
trigger1 = animelem = 15
value = 12,4
channel = 2
[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 17
value = 3100,0
channel = 0
persistent = 0
[State 300, Land]
type = PlaySnd
trigger1 = animelem = 21
value = 4,2

[State 210, 1]
type = HitDef
triggerall = !var(55)
trigger1 = animelemtime(5) >= 0 && animelemtime(6) < 0
attr = S, HA
damage = floor(25*ifelse(var(56),1.25,1)),10
animtype = Hard
air.animtype = back
guardflag = MA
hitflag = MAF
priority = 3, Hit
sparkno = s17002+(var(31)*10001)
sparkxy = -10, -92
hitsound = s3+(var(32)*2),9
guardsound = s3+(var(32)*2), 13
guard.sparkno = s17502+(var(31)*10000)
ground.type = Low
pausetime = 11,13
guard.pausetime = 11,12
ground.slidetime = 17
ground.hittime = 16
guard.hittime = 16
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity = 0
guard.velocity = 0
air.type = High
air.velocity =  -4.5,-7
fall.yvelocity = -3
air.hittime = 13
air.juggle = 0
getpower = 0,0
givepower = 16,16
nochainid = 1312
id = 3102
air.fall = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
fall.recover = 0
persistent = 0
[State 210, 1]
type = HitDef
triggerall = !var(55)
trigger1 = animelemtime(7) >= 0 && animelemtime(8) < 0
attr = S, HA
damage = floor(8*ifelse(var(56),1.25,1)),10
animtype = Hard
air.animtype = back
guardflag = MA
hitflag = MAF
priority = 3, Hit
sparkno = s17002+(var(31)*10001)
sparkxy = -10, -60
hitsound = s3+(var(32)*2),9
guardsound = s3+(var(32)*2), 13
guard.sparkno = s17502+(var(31)*10000)
ground.type = High
pausetime = 11,13
guard.pausetime = 11,12
ground.slidetime = 17
ground.hittime = 16
guard.hittime = 16
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity = 0
guard.velocity = 0
air.type = High
air.velocity =  -4.5,-7
fall.yvelocity = -3
air.hittime = 13
air.juggle = 0
getpower = 0,0
givepower = 16,16
nochainid = 1312
id = 3103
air.fall = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
fall.recover = 0
persistent = 0
[State 210, 1]
type = HitDef
triggerall = !var(55)
trigger1 = animelemtime(12) >= 0 && animelemtime(13) < 0
attr = S, HA
damage = floor(8*ifelse(var(56),1.25,1)),10
animtype = Hard
air.animtype = back
guardflag = MA
hitflag = MAF
priority = 3, Hit
sparkno = s17002+(var(31)*10001)
sparkxy = -10, -92
hitsound = s3+(var(32)*2),9
guardsound = s3+(var(32)*2), 13
guard.sparkno = s17502+(var(31)*10000)
ground.type = Low
pausetime = 11,13
guard.pausetime = 11,12
ground.slidetime = 17
ground.hittime = 16
guard.hittime = 16
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity = 0
guard.velocity = 0
air.type = High
air.velocity =  -4.5,-7
fall.yvelocity = -3
air.hittime = 13
air.juggle = 0
getpower = 0,0
givepower = 16,16
nochainid = 1312
id = 3104
air.fall = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
fall.recover = 0
persistent = 0
[State 210, 1]
type = HitDef
triggerall = !var(55)
trigger1 = animelemtime(14) >= 0 && animelemtime(15) < 0
attr = S, HA
damage = floor(8*ifelse(var(56),1.25,1)),10
animtype = Hard
air.animtype = back
guardflag = MA
hitflag = MAF
priority = 3, Hit
sparkno = s17002+(var(31)*10001)
sparkxy = -10, -60
hitsound = s3+(var(32)*2),9
guardsound = s3+(var(32)*2), 13
guard.sparkno = s17502+(var(31)*10000)
ground.type = High
pausetime = 11,13
guard.pausetime = 11,12
ground.slidetime = 17
ground.hittime = 16
guard.hittime = 16
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity = 0
guard.velocity = 0
air.type = High
air.velocity =  -4.5,-7
fall.yvelocity = -3
air.hittime = 13
air.juggle = 0
getpower = 0,0
givepower = 16,16
nochainid = 1312
id = 3105
air.fall = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
fall.recover = 0
persistent = 0
[State 210, 1]
type = HitDef
triggerall = !var(55)
trigger1 = animelemtime(16) >= 0 && animelemtime(17) < 0
attr = A, HA
damage = floor(8*ifelse(var(56),1.25,1)),10
animtype = Hard
air.animtype = back
guardflag = MA
hitflag = MAF
priority = 3, Hit
sparkno = s17002+(var(31)*10001)
sparkxy = -20, -68
hitsound = s3+(var(32)*2),9
guardsound = s3+(var(32)*2), 13
guard.sparkno = s17502+(var(31)*10000)
ground.type = High
pausetime = 11,13
guard.pausetime = 11,12
ground.slidetime = 17
ground.hittime = 16
guard.hittime = 16
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity =-2,-17.25
guard.velocity = 0
air.type = High
air.velocity = -2,-17.25
fall.yvelocity = -3
air.hittime = 13
air.juggle = 0
getpower = 0,0
givepower = 16,16
id = 3106
fall = 1
p2stateno = 10030
fall.recover = 0
air.fall = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
fall.recover = 0
persistent = 0
[State 210, 1]
type = HitDef
triggerall = !var(55)
trigger1 = animelemtime(18) >= 0 && animelemtime(19) < 0
attr = A, HA
damage = floor(8*ifelse(var(56),1.25,1)),10
animtype = up
air.animtype = up
guardflag = MA
hitflag = MAF
priority = 4, Hit
sparkno = s17002+(var(31)*10001)
sparkxy = -10, -74
hitsound = s3+(var(32)*2),9
guardsound = s3+(var(32)*2), 13
guard.sparkno = s17502+(var(31)*10000)
ground.type = Low
pausetime = 15,17
guard.pausetime = 15,16
ground.slidetime = 17
ground.hittime = 16
guard.hittime = 16
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity =-2,-21
guard.velocity = -11.1796875
air.type = High
air.velocity =  -2,-21
fall.yvelocity = -3
air.hittime = 13
air.juggle = 0
getpower = 0,0
givepower = 16,16
nochainid = 1100
id = 3107
fall = 1
p2stateno = 10530
fall.recover = 0
air.fall = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
fall.recover = 0
persistent = 0
envshake.time = 14
envshake.freq = 180
envshake.ampl = -4

[State 1411, VarSet]
type = VarSet
trigger1 = movehit && numtarget(3107)
var(16) = 12
persistent = 0
ignorehitpause = 1

[State -2, EnvColor];This will produce a flash a la KOF2K2
type = EnvColor
triggerall = var(21)
trigger1 = movehit
trigger1 = numtarget(3102)
value = 255,255,255
time = 1
under = 1
ignorehitpause = 1
persistent = 0
[State -2, EnvColor];This will produce a flash a la KOF2K2
type = EnvColor
triggerall = var(21)
trigger1 = movehit
trigger1 = numtarget(3103)
value = 255,255,255
time = 1
under = 1
ignorehitpause = 1
persistent = 0
[State -2, EnvColor];This will produce a flash a la KOF2K2
type = EnvColor
triggerall = var(21)
trigger1 = movehit
trigger1 = numtarget(3104)
value = 255,255,255
time = 1
under = 1
ignorehitpause = 1
persistent = 0
[State -2, EnvColor];This will produce a flash a la KOF2K2
type = EnvColor
triggerall = var(21)
trigger1 = movehit
trigger1 = numtarget(3105)
value = 255,255,255
time = 1
under = 1
ignorehitpause = 1
persistent = 0
[State -2, EnvColor];This will produce a flash a la KOF2K2
type = EnvColor
triggerall = var(21)
trigger1 = movehit
trigger1 = numtarget(3106)
value = 255,255,255
time = 1
under = 1
ignorehitpause = 1
persistent = 0
[State -2, EnvColor];This will produce a flash a la KOF2K2
type = EnvColor
triggerall = var(21)
trigger1 = movehit
trigger1 = numtarget(3107)
value = 255,255,255
time = 1
under = 1
ignorehitpause = 1
persistent = 0

[State 1000, 6]
type = ChangeState
trigger1 = statetype = A
trigger1 = Vel Y + Pos Y >= 0
value = stateno+1
ctrl = 0

;Land
[Statedef 3104]
type = S
movetype = I
physics = S
poweradd= 0
ctrl = 0
velset = 0,0
sprpriority = 2

[State 1000, ChangeAnim]
type = ChangeAnim
trigger1 = !time
value = 3104

[State 5100, 10]
type = PlaySnd
trigger1 = !time 
value = 2+(var(32)*10),9

[State 852, PosSet]
type = PosSet
trigger1 = !time
y = 0

[State 5100, Explod]
type = Explod
trigger1 = !time
anim = 12000
pos = 0,0
postype = p1  ;p2,front,back,left,right
sprpriority = -4
ownpal = 1
[State 3000, EnvShake]
type = EnvShake
trigger1 = !time 
time = 14
freq = 180
ampl = -4
persistent = 0

[State 220,2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------
; Ge Shiki: Kake Hourin SDM (KOF2002UM)
[Statedef 3200];Ok!
type    = S
movetype= A
physics = N
poweradd=  ifelse(var(51),-1000,-3000)
ctrl = 0
velset = 0
sprpriority = 2
juggle = 8
facep2 = 1

[State 1000, VarAdd]
type = PowerAdd
triggerall = !time
triggerall = var(33)
triggerall = var(51) <= 0
trigger1 = prevstateno = [1000,1999]
value = -1000
persistent = 0
ignorehitpause = 1

[State 300, End MAXMODE]
type = VarSet
trigger1 = !time
var(51) = 0
[State 1000, VarSet]
type = VarSet
trigger1 = !time
var(54) = 0
[State 1000, VarSet]
type = VarSet
trigger1 = prevstateno = [1000,1999]
var(54) = 1

[State 1000, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0
value = 3200
[State 1000, ChangeAnim]
type = ChangeAnim
trigger1 = anim = 3200 && !animtime
value = 3201

[State 3000, StopSnd]
type = StopSnd
trigger1 = !time
channel = 27

[State 1000, VarAdd]
type = VarAdd
trigger1 = prevstateno = [1000,1999]
fvar(5) = -1000
persistent = 0
[State 3000, VarSet]
type = VarSet
trigger1 = time = 0 ;Superpause tick error fix.
var(6) = 26

[State 13000, EnvColor]
type = EnvColor
triggerall = var(21)
trigger1 = time = 1
value = 255,255,255
time = 4
under = 1
ignorehitpause = 1
persistent = 0

[State -2, PalFX]
type = PalFX
trigger1 = prevstateno = [1000,1999]
trigger1 = time < 17
time = 1
add = 255,255,255
sinadd = 0,0,0
invertall = 0
color = 256
ignorehitpause = 1
persistent = 2

[State 3000, AssertSpecial]
type = AssertSpecial
trigger1 = time = [1,29]
flag = noBG
flag2 = noFG
[State 1100, NotHitBy]
type = NotHitBy
trigger1 = time = [1,30]
value = SCA
[State 750, 1]
type = HitBy
trigger1 = anim = 3200
value = SCA,NT,ST,HT

[State 6001, pause]
type = SuperPause
trigger1 = time = 1
time = 28
movetime = 28
anim = -1
darken = 0
sound = s3,11+(var(32)*6)
p2defmul = 1

[State -3, dash]
type = PlaySnd
trigger1 = anim = 3201
trigger1 = animelem = 1
value = 2+(var(32)*10),8
loop = 1
channel = 27
[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 3000,0
channel = 0
persistent = 0

[State 6001, pause]
type = Explod
trigger1 = time = 1
anim = 15300-(var(31)*200)
pos = 12,-92
postype = p1
supermovetime = 9999999999999999
pausemovetime = 9999999999999999
supermove = 1
removetime = 28
sprpriority = -2
ownpal = 1
[State 6001, pause]
type = Explod
trigger1 = time = 1
anim = 15301-(var(31)*200)
pos = 12,-92
postype = p1
supermovetime = 9999999999999999
pausemovetime = 9999999999999999
supermove = 1
removetime = 28
sprpriority = 4
ownpal = 1

[State 3035, 1]
type = AfterImage
triggerall = var(31)
trigger1 = anim = 3201
time = -1
length = 4
timegap = 2
framegap = 1
palcolor = 0
trans = add1
palbright = 0,0,32;96,96,128
palpostbright = 0,0,0
;palcontrast = 96,64,160
paladd = 0,0,0
palmul = 1,1,1
persistent = 0
ignorehitpause = 1

[State 1402, VelSet]
type = VelSet
trigger1 = anim = 3201
trigger1 = animelem = 2
x = 8
persistent = 0

[State 1000, 6]
type = ChangeState
triggerall = anim = 3201
trigger1 = !animtime
trigger2 = P2BodyDist X <= 39
trigger3 = (helper(10371), var(0) = [1,3]) || (helper(10371), var(1) = [1,3]) 
trigger3 = animelemtime(1) > 0
value = stateno+1
ctrl = 0

;Attack
[Statedef 3201]
type = S
movetype = A
physics = N
poweradd= 0
ctrl = 0
velset = 0,0
sprpriority = 2

[State 1000, ChangeAnim]
type = ChangeAnim
trigger1 = !time
value = 3202

[State 3000, StopSnd]
type = StopSnd
trigger1 = !time
channel = 27

[State 310, PosAdd]
type = PosAdd
trigger1 = animelem = 1
x = 8
[State 1402, VelSet]
type = VelSet
trigger1 = animelemtime(5) < 2
x = (8*exp((-0.082489)*(time+1)))
[State -2, Accel]
type = VelSet
trigger1 = animelem = 5, = 1
x = 0

[State 3200, AfterImageTime]
type = AfterImageTime
trigger1 = movetype = I
time = 1

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 5
movetype = I

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 1100,0
channel = 0
persistent = 0

[State 210, 1]
type = HitDef
triggerall = !var(55)
trigger1 = animelemtime(4) >= 0 && animelemtime(5) < 0
attr = S, HA
damage = floor(308*ifelse(var(56),1.25,1)),10
animtype = up
air.animtype = up
guardflag = MA
hitflag = MAF
priority = 3, Hit
sparkno = s17002+(var(31)*10001)
sparkxy = -10, -44
hitsound = s2,6
guardsound = s3+(var(32)*2), 13
guard.sparkno = s17502+(var(31)*10000)
ground.type = Low
pausetime = 15,17
guard.pausetime = 15,16
ground.slidetime = 17
ground.hittime = 16
guard.hittime = 16
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity =-2,-21
guard.velocity = -11.1796875
air.type = High
air.velocity = -2,-21
fall.yvelocity = -3
air.hittime = 13
air.juggle = 0
getpower = 0,0
givepower = 16,16
nochainid = 1312
id = 3200
fall = 1
p2stateno = 10530
air.fall = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
fall.recover = 0
persistent = 0
envshake.time = 14
envshake.freq = 180
envshake.ampl = -4

[State 1411, VarSet]
type = VarSet
trigger1 = movehit && numtarget(3200)
var(16) = 12
persistent = 0
ignorehitpause = 1

[State -2, EnvColor];This will produce a flash a la KOF2K2
type = EnvColor
triggerall = var(21)
trigger1 = movehit
trigger1 = numtarget(3200)
value = 255,255,255
time = 1
under = 1
ignorehitpause = 1
persistent = 0

[State 220,2]
type = ChangeState
trigger1 = !animtime
value = 0
ctrl = 1

;----------------------------------------
;Shingo Kinsei Oreshiki: Kamukura (KOF2002UM)
[Statedef 3300];Ok!
type    = S
movetype= A
physics = N
poweradd= ifelse(var(51),-1000,-3000)
ctrl = 0
velset = 0
sprpriority = 2
juggle = 8
facep2 = 1

[State 1000, VarAdd]
type = PowerAdd
triggerall = !time
triggerall = var(33)
triggerall = var(51) <= 0
trigger1 = prevstateno = [1000,1999]
value = -1000
persistent = 0
ignorehitpause = 1
[State 1000, LIFE PENALTY]
type = PowerAdd
triggerall = !time
triggerall = life > 300
trigger1 = var(51)
value = -1000
persistent = 0
ignorehitpause = 1

[State 300, End MAXMODE]
type = VarSet
trigger1 = !time
var(51) = 0
[State 1000, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0
value = 3300

[State 1000, VarAdd]
type = VarAdd
trigger1 = prevstateno = [1000,1999]
fvar(5) = -1000
persistent = 0
[State 1000, VarSet]
type = VarSet
trigger1 = !time
var(54) = 0
[State 1000, VarSet]
type = VarSet
trigger1 = prevstateno = [1000,1999]
var(54) = 1

[State 13000, EnvColor]
type = EnvColor
trigger1 = animelem = 1
value = 255,255,255
time = 4
under = 1
ignorehitpause = 1
persistent = 0

[State -2, PalFX]
type = PalFX
trigger1 = prevstateno = [1000,1999]
trigger1 = time < 17
time = 1
add = 255,255,255
sinadd = 0,0,0
invertall = 0
color = 256
ignorehitpause = 1
persistent = 2

[State 3000, AssertSpecial]
type = AssertSpecial
trigger1 = time = [0,32-3]
flag = noBG
flag2 = noFG
[State 1100, NotHitBy]
type = NotHitBy
trigger1 = time = [0,32-3]
value = SCA
[State 750, 1]
type = HitBy
trigger1 = AnimElemTime(5) < 0
value = SCA,NT,ST,HT

[State 3000, VarSet]
type = VarSet
trigger1 = animelem = 1 ;Superpause tick error fix.
var(6) = 26

[State 6001, pause]
type = SuperPause
trigger1 = animelem = 1
time = 28
movetime = 28
anim = -1
darken = 0
sound = s3,11+(var(32)*4)
p2defmul = 1

[State 6001, pause]
type = Explod
trigger1 = animelem = 1
anim = 15400+(var(31)*100)
pos = 12,-92
postype = p1
supermovetime = 9999999999999999
pausemovetime = 9999999999999999
supermove = 1
removetime = 28
sprpriority = -2
ownpal = 1
[State 6001, pause]
type = Explod
trigger1 = animelem = 1
anim = 15401+(var(31)*100)
pos = 12,-92
postype = p1
supermovetime = 9999999999999999
pausemovetime = 9999999999999999
supermove = 1
removetime = 28
sprpriority = 4
ownpal = 1

[State 900, Grab Attempt] ; Taken from OrochiKOF97's Tutorial
type = HitDef
triggerall = p2stateno != 40 && p2stateno !=52 ; Cannot grab during jump start / jump land
triggerall = var(19) = 0 ; Opponent isn't in guarding state
trigger1 = AnimElem = 4
attr = S, HT
hitflag = M
priority = 3, Miss
sprpriority = 1
p2facing = 1
sparkno = -1
guard.sparkno = -1
numhits = 0
p1stateno = 3301
p2stateno = 3351
id = 3300

[State 1000, 6]
type = ChangeState
trigger1 = !animtime
value = 0
ctrl = 1

;Success
[Statedef 3301];Ok!
type    = S
movetype= A
physics = N
poweradd= 0
ctrl = 0
velset = 0
sprpriority = 2

[State 1000, ChangeAnim]
type = ChangeAnim
trigger1 = !time
value = 3301

[State 3201, Width]
type = Width
trigger1 = anim = 3301
edge = 40,0
player = 32,0
[State 3201, Width]
type = Width
trigger1 = anim = 3301
value = 8,0
[State 3201, PlayerPush]
type = PlayerPush
trigger1 = anim = 3301
value = 0
[State 3003, TargetBind]
type = TargetBind
trigger1 = anim = 3301
time = 1
pos = 32,0

[State 960, Explod]
type = Explod
trigger1 = animelem = 2
anim = 20001
pos = 2,-80
postype = p2  ;p2,front,back,left,right
removetime = -2
sprpriority = 3
[State 5100, 10]
type = PlaySnd
trigger1 = animelem = 2
value = 2+(var(32)*10), 1

[State -2, Helper]
type = Helper
triggerall = !numhelper(40001)
trigger1 = animelem = 2
helpertype = normal
name = "MAX2"
ID = 40001
stateno = 40001
pos = 160,120
postype = left    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1
[State -2, Helper]
type = Helper
triggerall = !numhelper(40003) && var(33)
trigger1 = animelem = 2
helpertype = normal
name = "H.Port"
ID = 40003
stateno = 40003
pos = 160,120
postype = left    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1
[State -2, Helper]
type = Helper
triggerall = !numhelper(40004) && var(33)
trigger1 = animelem = 2
helpertype = normal
name = "Player 1"
ID = 40004
stateno = 40004
pos = 160,120
postype = left    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1

[State 1000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 1000, 6]
type = ChangeState
trigger1 = !animtime
value = stateno+1
ctrl = 0

;Fist 1
[Statedef 3302];Ok!
type    = S
movetype= A
physics = N
poweradd= 0
ctrl = 0
velset = 0
sprpriority = 2

[State 1000, ChangeAnim]
type = ChangeAnim
trigger1 = !time
value = 3302

[State 3201, Width]
type = Width
trigger1 = time
player = 16,0
[State 1000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 300, Land]
type = PlaySnd
trigger1 = animelem = 3
value = 4,3
channel = 2

[State 310, PosAdd]
type = PosAdd
trigger1 = animelem = 4
trigger2 = animelem = 5
x = 8
[State 310, PosAdd]
type = PosAdd
trigger1 = animelem = 6
x = 6

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 1
value = 210,0
channel = 0
persistent = 0

[State 3035, 1]
type = AfterImage
triggerall = var(31)
trigger1 = animelem = 1
time = -1
length = 4
timegap = 2
framegap = 1
palcolor = 0
trans = add1
palbright = 0,0,32;96,96,128
palpostbright = 0,0,0
;palcontrast = 96,64,160
paladd = 0,0,0
palmul = 1,1,1
persistent = 0
ignorehitpause = 1

[State 210, 1]
type = HitDef
triggerall = !var(55)
trigger1 = animelemtime(5) >= 0 && animelemtime(6) < 0
attr = S, HA
damage = floor(58*ifelse(var(56),1.25,1)),10
animtype = Hard
air.animtype = back
guardflag = MA
hitflag = MAF
priority = 3, Hit
sparkno = s17002+(var(31)*10000)
sparkxy = -10, -44
hitsound = s3+(var(32)*2),3
guardsound = s3+(var(32)*2), 13
guard.sparkno = s17502+(var(31)*10000)
ground.type = Low
pausetime = 11,13
guard.pausetime = 11,12
ground.slidetime = 17
ground.hittime = 16
guard.hittime = 16
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity = 0
guard.velocity = 0
air.type = High
air.velocity =  -4.5,-7
fall.yvelocity = -3
air.hittime = 13
air.juggle = 0
getpower = 0,0
givepower = 16,16
nochainid = 1312
id = 3300
air.fall = 1
p2stateno = 1550
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
fall.recover = 0
persistent = 0
kill = 0
envshake.time = 14
envshake.freq = 180
envshake.ampl = -4

[State -2, EnvColor];This will produce a flash a la KOF2K2
type = EnvColor
triggerall = var(21)
trigger1 = movehit
trigger1 = numtarget(3300)
value = 255,255,255
time = 1
under = 1
ignorehitpause = 1
persistent = 0

[State 1000, 6]
type = ChangeState
trigger1 = !animtime
value = stateno+1
ctrl = 0

;Fist 2
[Statedef 3303];Ok!
type    = S
movetype= A
physics = N
poweradd= 0
ctrl = 0
velset = 0
sprpriority = 2

[State 1000, ChangeAnim]
type = ChangeAnim
trigger1 = !time
value = 3303

[State 3201, Width]
type = Width
trigger1 = time
player = 16,0
[State 1000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 310, PosAdd]
type = PosAdd
trigger1 = animelem = 2
trigger2 = animelem = 3
trigger3 = animelem = 4
trigger4 = animelem = 5
trigger5 = animelem = 6
trigger6 = animelem = 7
trigger7 = animelem = 13
trigger8 = animelem = 14
trigger9 = animelem = 15
trigger10 = animelem = 16
x = 8
[State 310, PosAdd]
type = PosAdd
trigger1 = animelem = 8
trigger2 = animelem = 9
x = 16
[State 310, PosAdd]
type = PosAdd
trigger1 = animelem = 17
trigger2 = animelem = 18
x = 6

[State 300, Land]
type = PlaySnd
trigger1 = animelem = 6
value = 4,3
channel = 2

[State 210, 1]
type = HitDef
triggerall = !var(55)
trigger1 = animelemtime(10) >= 0 && animelemtime(11) < 0
attr = S, HA
damage = floor(58*ifelse(var(56),1.25,1)),10
animtype = Hard
air.animtype = back
guardflag = MA
hitflag = MAF
priority = 3, Hit
sparkno = s17002+(var(31)*10000)
sparkxy = -10, -70
hitsound = s3+(var(32)*2),3
guardsound = s3+(var(32)*2), 13
guard.sparkno = s17502+(var(31)*10000)
ground.type = Low
pausetime = 15,17
guard.pausetime = 15,16
ground.slidetime = 17
ground.hittime = 16
guard.hittime = 16
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity = 0
guard.velocity = 0
air.type = High
air.velocity =  -4.5,-7
fall.yvelocity = -3
air.hittime = 13
air.juggle = 0
getpower = 0,0
givepower = 16,16
nochainid = 1312
id = 3301
air.fall = 1
p2stateno = 1550
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
fall.recover = 0
persistent = 0
envshake.time = 14
envshake.freq = 180
envshake.ampl = -4
kill = 0

[State -2, EnvColor];This will produce a flash a la KOF2K2
type = EnvColor
triggerall = var(21)
trigger1 = movehit
trigger1 = numtarget(3301)
value = 255,255,255
time = 1
under = 1
ignorehitpause = 1
persistent = 0
[State 1411, VarSet]
type = VarSet
trigger1 = movehit && numtarget(3301)
var(16) = 12
persistent = 0
ignorehitpause = 1

[State 1000, 6]
type = ChangeState
trigger1 = !animtime
value = stateno+1
ctrl = 0

;Fist 3
[Statedef 3304];Ok!
type    = S
movetype= A
physics = N
poweradd= 0
ctrl = 0
velset = 0
sprpriority = 2

[State 1000, ChangeAnim]
type = ChangeAnim
trigger1 = !time
value = 3304

[State 3201, Width]
type = Width
trigger1 = time
player = 16,0
[State 1000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 300, Land]
type = PlaySnd
trigger1 = animelem = 1
value = 4,3
channel = 2

[State 210, 1]
type = HitDef
triggerall = !var(55)
trigger1 = animelemtime(2) >= 0 && animelemtime(3) < 0
attr = S, HA
damage = floor(58*ifelse(var(56),1.25,1)),10
animtype = Hard
air.animtype = back
guardflag = MA
hitflag = MAF
priority = 3, Hit
sparkno = s17002+(var(31)*10000)
sparkxy = -10, -44
hitsound = s3+(var(32)*2),3
guardsound = s3+(var(32)*2), 13
guard.sparkno = s17502+(var(31)*10000)
ground.type = High
pausetime = 11,13
guard.pausetime = 11,12
ground.slidetime = 17
ground.hittime = 16
guard.hittime = 16
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity = 0
guard.velocity = 0
air.type = High
air.velocity =  -4.5,-7
fall.yvelocity = -3
air.hittime = 13
air.juggle = 0
getpower = 0,0
givepower = 16,16
nochainid = 1312
id = 3302
air.fall = 1
p2stateno = 1550
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
fall.recover = 0
persistent = 0
kill = 0

[State -2, EnvColor];This will produce a flash a la KOF2K2
type = EnvColor
triggerall = var(21)
trigger1 = movehit
trigger1 = numtarget(3302)
value = 255,255,255
time = 1
under = 1
ignorehitpause = 1
persistent = 0

[State 1000, 6]
type = ChangeState
trigger1 = !animtime
value = stateno+1
ctrl = 0

;Fist 4
[Statedef 3305];Ok!
type    = S
movetype= A
physics = N
poweradd= 0
ctrl = 0
velset = 0
sprpriority = 2

[State 1000, ChangeAnim]
type = ChangeAnim
trigger1 = !time
value = 3305

[State 3201, Width]
type = Width
trigger1 = time
player = 16,0
[State 1000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 6001, pause]
type = Explod
trigger1 = animelem = 76
anim = 15200-(var(31)*200)
pos = -12,-110
postype = p1
supermovetime = 9999999999999999
pausemovetime = 9999999999999999
supermove = 1
removetime = 28
sprpriority = -2
ownpal = 1
[State 6001, pause]
type = Explod
trigger1 = animelem = 76
anim = 15201-(var(31)*200)
pos = -12,-110
postype = p1
supermovetime = 9999999999999999
pausemovetime = 9999999999999999
supermove = 1
removetime = 28
sprpriority = 4
ownpal = 1

[State -3, dash]
type = PlaySnd
trigger1 = animelem = 76
value = s3+(var(32)*2),10
persistent = 0

[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 23
value = 3300,0
channel = 0
persistent = 0
[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 76
value = 3300,1
channel = 0
persistent = 0

[State 210, 1]
type = HitDef
triggerall = !var(55)
trigger1 = animelemtime(10) >= 0 && animelemtime(11) < 0
attr = S, HA
damage = floor(58*ifelse(var(56),1.25,1)),10
animtype = Hard
air.animtype = back
guardflag = MA
hitflag = MAF
priority = 3, Hit
sparkno = s17002+(var(31)*10000)
sparkxy = -10, -70
hitsound = s3+(var(32)*2),3
guardsound = s3+(var(32)*2), 13
guard.sparkno = s17502+(var(31)*10000)
ground.type = High
pausetime = 11,13
guard.pausetime = 11,12
ground.slidetime = 17
ground.hittime = 16
guard.hittime = 16
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity = 0
guard.velocity = 0
air.type = High
air.velocity =  -4.5,-7
fall.yvelocity = -3
air.hittime = 13
air.juggle = 0
getpower = 0,0
givepower = 16,16
nochainid = 1312
id = 3303
air.fall = 1
p2stateno = 3352 ;Dizzy
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
fall.recover = 0
persistent = 0
kill = 0

[State -2, EnvColor];This will produce a flash a la KOF2K2
type = EnvColor
triggerall = var(21)
trigger1 = movehit
trigger1 = numtarget(3303)
value = 255,255,255
time = 1
under = 1
ignorehitpause = 1
persistent = 0
[State 13000, EnvColor]
type = EnvColor
trigger1 = animelem = 76
value = 255,255,255
time = 4
under = 1
ignorehitpause = 1
persistent = 0

[State 1000, 6]
type = ChangeState
trigger1 = !animtime
value = stateno+1
ctrl = 0

;Fist 5
[Statedef 3306];Ok!
type    = S
movetype= A
physics = N
poweradd= 0
ctrl = 0
velset = 0
sprpriority = 2

[State 1000, ChangeAnim]
type = ChangeAnim
trigger1 = !time
value = 3306

[State 3201, Width]
type = Width
trigger1 = time
player = 16,0
[State 1000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 310, PosAdd]
type = PosAdd
trigger1 = animelem = 2
trigger2 = animelem = 3
trigger3 = animelem = 4
trigger4 = animelem = 5
trigger5 = animelem = 6
trigger6 = animelem = 7
trigger7 = animelem = 13
trigger8 = animelem = 14
x = 8
[State 310, PosAdd]
type = PosAdd
trigger1 = animelem = 8
trigger2 = animelem = 9
x = 16

[State 300, Land]
type = PlaySnd
trigger1 = animelem = 5
value = 4,3
channel = 2

[State 210, 1]
type = HitDef
triggerall = !var(55)
trigger1 = animelemtime(10) >= 0 && animelemtime(11) < 0
attr = S, HA
damage = floor(67*ifelse(var(56),1.25,1)),10
animtype = Hard
air.animtype = back
guardflag = MA
hitflag = MAF
priority = 3, Hit
sparkno = s17002+(var(31)*10000)
sparkxy = -10, -70
hitsound = s3+(var(32)*2),3
guardsound = s3+(var(32)*2), 13
guard.sparkno = s17502+(var(31)*10000)
ground.type = Low
pausetime = 11,13
guard.pausetime = 11,12
ground.slidetime = 17
ground.hittime = 16
guard.hittime = 16
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity = 0
guard.velocity = 0
air.type = High
air.velocity =  -4.5,-7
fall.yvelocity = -3
air.hittime = 13
air.juggle = 0
getpower = 0,0
givepower = 16,16
nochainid = 1312
id = 3304
air.fall = 1
p2stateno = 1550
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
fall.recover = 0
persistent = 0
envshake.time = 14
envshake.freq = 180
envshake.ampl = -4
kill = 0

[State -2, EnvColor];This will produce a flash a la KOF2K2
type = EnvColor
triggerall = var(21)
trigger1 = movehit
trigger1 = numtarget(3304)
value = 255,255,255
time = 1
under = 1
ignorehitpause = 1
persistent = 0

[State 1000, 6]
type = ChangeState
trigger1 = !animtime
value = stateno+1
ctrl = 0

;Fist 6
[Statedef 3307];Ok!
type    = S
movetype= A
physics = N
poweradd= 0
ctrl = 0
velset = 0
sprpriority = 2

[State 1000, ChangeAnim]
type = ChangeAnim
trigger1 = !time
value = 3307
[State 1000, NotHitBy]
type = NotHitBy
trigger1 = animelemtime(12)<0
value = SCA
time = 1

[State 310, PosAdd]
type = PosAdd
trigger1 = animelem = 3
trigger2 = animelem = 4
trigger3 = animelem = 5
trigger4 = animelem = 7
trigger5 = animelem = 8
x = 8

[State 200, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 8
statetype = A

[State 1402, VelSet]
type = VelSet
trigger1 = animelemtime(8) >= 0 && animelemtime(12) < 1
x = (5*exp((-0.08248934360989325722859930675326)*(time-15)))
[State 1402, VelSet]
type = VelSet
trigger1 = animelemtime(12) = 1
x = 0
[State -2, Accel]
type = VelSet
trigger1 = animelem = 8
y = -8
[State -2, VelAdd]
type = VelAdd
trigger1 = animelemtime(8) > 0 
y = 0.42578125

[State 300, Land]
type = PlaySnd
trigger1 = animelem = 8
value = 12,4
channel = 2
[State 1000, 1]
type = PlaySnd
trigger1 = animelem = 3
value = 3300,2
channel = 0
persistent = 0

[State 210, 1]
type = HitDef
triggerall = !var(55)
trigger1 = animelemtime(4) >= 0 && animelemtime(5) < 0
attr = S, HA
damage = floor(67*ifelse(var(56),1.25,1)),10
animtype = Hard
air.animtype = back
guardflag = MA
hitflag = MAF
priority = 3, Hit
sparkno = s17002+(var(31)*10000)
sparkxy = -10, -92
hitsound = s3+(var(32)*2),3
guardsound = s3+(var(32)*2), 13
guard.sparkno = s17502+(var(31)*10000)
ground.type = Low
pausetime = 11,13
guard.pausetime = 11,12
ground.slidetime = 17
ground.hittime = 16
guard.hittime = 16
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity = 0
guard.velocity = 0
air.type = High
air.velocity =  -4.5,-7
fall.yvelocity = -3
air.hittime = 13
air.juggle = 0
getpower = 0,0
givepower = 16,16
nochainid = 1312
id = 3305
air.fall = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
fall.recover = 0
persistent = 0
kill = 0
[State 210, 1]
type = HitDef
triggerall = !var(55)
trigger1 = animelemtime(6) >= 0 && animelemtime(7) < 0
attr = S, HA
damage = floor(67*ifelse(var(56),1.25,1)),10
animtype = Hard
air.animtype = back
guardflag = MA
hitflag = MAF
priority = 3, Hit
sparkno = s17002+(var(31)*10000)
sparkxy = -20, -68
hitsound = s3+(var(32)*2),3
guardsound = s3+(var(32)*2), 13
guard.sparkno = s17502+(var(31)*10000)
ground.type = High
pausetime = 11,13
guard.pausetime = 11,12
ground.slidetime = 17
ground.hittime = 16
guard.hittime = 16
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity =-2,-17.25
guard.velocity = 0
air.type = High
air.velocity = -2,-17.25
fall.yvelocity = -3
air.hittime = 13
air.juggle = 0
getpower = 0,0
givepower = 16,16
id = 3306
fall = 1
p2stateno = 10030
fall.recover = 0
air.fall = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
fall.recover = 0
persistent = 0
kill = 0
[State 210, 1]
type = HitDef
triggerall = !var(55)
trigger1 = animelemtime(9) >= 0 && animelemtime(10) < 0
attr = A, HA
damage = floor(67*ifelse(var(56),1.25,1)),10
animtype = diagup
air.animtype = diagup
guardflag = MA
hitflag = MAF
priority = 4, Hit
sparkno = s17002+(var(31)*10000)
sparkxy = -10, -114
hitsound = s3+(var(32)*2),3
guardsound = s3+(var(32)*2), 13
guard.sparkno = s17502+(var(31)*10000)
ground.type = Low
pausetime = 15,17
guard.pausetime = 15,16
ground.slidetime = 17
ground.hittime = 16
guard.hittime = 16
guard.slidetime = 17
guard.ctrltime = 24
ground.velocity = -19,-9
guard.velocity = -11.1796875
air.type = High
air.velocity = -19,-9
fall.yvelocity = -3
air.hittime = 13
air.juggle = 0
getpower = 0,0
givepower = 16,16
nochainid = 1100
id = 3307
fall = 1
p2stateno = 10200
fall.recover = 0
air.fall = 1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = 0.5
fall.recover = 0
persistent = 0
envshake.time = 14
envshake.freq = 180
envshake.ampl = -4
fall.envshake.time = 14
fall.envshake.freq = 180
fall.envshake.ampl = -4

[State 1411, VarSet]
type = VarSet
trigger1 = movehit && numtarget(3307)
var(16) = 12
persistent = 0
ignorehitpause = 1

[State -2, EnvColor];This will produce a flash a la KOF2K2
type = EnvColor
triggerall = var(21)
trigger1 = movehit
trigger1 = numtarget(3305)
value = 255,255,255
time = 1
under = 1
ignorehitpause = 1
persistent = 0
[State -2, EnvColor];This will produce a flash a la KOF2K2
type = EnvColor
triggerall = var(21)
trigger1 = movehit
trigger1 = numtarget(3306)
value = 255,255,255
time = 1
under = 1
ignorehitpause = 1
persistent = 0
[State -2, EnvColor];This will produce a flash a la KOF2K2
type = EnvColor
triggerall = var(21)
trigger1 = movehit
trigger1 = numtarget(3307)
value = 255,255,255
time = 1
under = 1
ignorehitpause = 1
persistent = 0

[State 1000, 6]
type = ChangeState
trigger1 = statetype = A
trigger1 = Vel Y + Pos Y >= 0
value = stateno+1
ctrl = 0

;Land
[Statedef 3308]
type = S
movetype = I
physics = S
poweradd= 0
ctrl = 0
velset = 0,0
sprpriority = 2

[State 1000, ChangeAnim]
type = ChangeAnim
trigger1 = !time
value = 3308
[State 3200, AfterImageTime]
type = AfterImageTime
trigger1 = movetype = I
time = 1

[State 300, Land]
type = PlaySnd
trigger1 = !time
value = 2+(var(32)*10),2

[State 852, PosSet]
type = PosSet
trigger1 = !time
y = 0

[State 220,2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1



[Statedef 3351];Ok!
type    = U
movetype= H
physics = S
ctrl = 0
velset = 0,0
[State 1000, ChangeAnim]
type = ChangeAnim2
trigger1 = !time
value = 3350
[State 3105, StateTypeSet]
type = StateTypeSet
trigger1 = Hitshakeover
statetype = S
[State 3250, NotHitBy]
type = NotHitBy
trigger1 = time < 20
value = SCA
time = 1
[State 3150, PosSet]
type = PosSet
trigger1 = hitshakeover
y = 0
[State 5001, 6]
type = SelfState
trigger1 = time = 50
value = 0
ctrl = 1
;Hit by
[Statedef 3352];Ok!
type    = S
movetype= H
physics = S
ctrl = 0
velset = 0,0
[State 3450, SelfState]
type = ChangeState
trigger1 = !alive
value = 10060
[State 1000, ChangeAnim]
type = ChangeAnim
trigger1 = !HitShakeOver
value = 5300
[State 3105, StateTypeSet]
type = StateTypeSet
trigger1 = Hitshakeover
statetype = S
[State 3150, PosSet]
type = PosSet
trigger1 = !time
y = 0
[State 5001, 6]
type = SelfState
trigger1 = time = 300
value = 0
ctrl = 1



;================================================================================
; ------- KOF Universal Custom States --------
;===============================================================================
;Aerial gethit I am fixing MUGEN's stupid SHIT.
;---------------------------------------------------------------------------
; Stand get-hit (shaking)
[Statedef 10000]
type    = S
movetype= H
physics = N
velset = 0,0

[State 5000, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5000, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5000, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5000, 5] ;State type gets set to aerial if getting hit up
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = Pos Y != 0
statetype = a

[State 5000, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 5000, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5000, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

[State 5000, 6]
type = SelfState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0 && !GetHitVar(fall)
value = 5001 ;Stand get-hit (knocked back)

[State 5000, 7]
type = ChangeState
trigger1 = HitShakeOver
value = 10010

;---------------------------------------------------------------------------
; Air get-hit (KOF)
[Statedef 10010]
type    = A
movetype= H
physics = N
ctrl = 0

[State 5030, 1]
type = ChangeAnim
trigger1 = Anim != [5000, 5199]
trigger1 = SelfAnimExist(5030)
value = 5030

[State 5030, 3]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 3030, VelMul]
type = VelAdd
trigger1 = time > 0
y = GetHitVar(yaccel)

[State 5030, 4]
type = SelfState
triggerall = !HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10;Const(movement.air.gethit.groundlevel)
value = 5040 ;HITA_RECOV

[State 5030, 5]
type = ChangeState
triggerall = HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10;Const(movement.air.gethit.groundlevel)
value = 10020 ;HITA_FALL

[State 5035, 1]
type = ChangeAnim
trigger1 = animtime = 0
trigger1 = SelfAnimExist(5035)
trigger1 = Anim != [5051,5059] ;Not if in hit up anim
trigger1 = Anim != 5090 ;Not if hit off ground anim
value = 5035
persistent = 0

;---------------------------------------------------------------------------
; Air get-hit (falling) (KOF)
[Statedef 10020]
type    = A
movetype= H
physics = N

[State 5050, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 5050

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2);ifelse(anim = 5050, Const720p(4), Const720p(-8))
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 3030, VelMul]
type = VelAdd
trigger1 = time > 0 
y = GetHitVar(yaccel)

[State 100050, NotHitBy]
type = NotHitBy
trigger1 = CanRecover
value = SCA
time = 1

[State 5050, 6]
type = SelfState
trigger1 = Vel Y + Pos Y >=0
;trigger1 = Vel Y > 0
;trigger1 = Pos Y >= ifelse((anim = [5051,5059]) || (anim = [5061,5069]), 0, 25)
value = 5100 ;Downed get-hit (hit ground from fall)

;----------------------------[2002 UM MAX2 BG]----------------------------------
[Statedef 40001]
anim = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noBG
flag2 = noFG

[State 4001, PalFXWiz]
type = PalFX
trigger1 = root, anim = 3305
trigger1 = root,animelem = 76 
time = 28
add = 0,0,0
mul = 0,0,0
sinadd = 0,0,0,1
invertall = 0
color = 256
persistent = 0

[State 40001, Tile #1-7]
type = Explod
triggerall = !numexplod(15600)
trigger1 = !time
anim = 15600
ID = 15600
pos = 0,0
postype = left  ;p2,front,back,left,right
removetime = 10
pausemovetime = -1
supermovetime = -1
scale = 1,1
sprpriority = -20
ignorehitpause = 1
bindtime = -1
persistent = 0

[State 40001, Tile #1-7]
type = Explod
triggerall = !numexplod(15601) < 2
trigger1 = !time
trigger2 = (time%10) = 0
anim = 15600
ID = 15601
pos = 320,0
postype = left  ;p2,front,back,left,right
removetime = 20
pausemovetime = -1
supermovetime = -1
scale = 1,1
sprpriority = -20
ignorehitpause = 1
bindtime = -1

[State 40001, Tile #2-6]
type = Explod
triggerall = !numexplod(15610)
trigger1 = !time
anim = 15601
ID = 15610
pos = 0,0
postype = left  ;p2,front,back,left,right
removetime = 20
pausemovetime = -1
supermovetime = -1
scale = 1,1
sprpriority = -20
ignorehitpause = 1
persistent = 0
bindtime = -1

[State 40001, Tile #2-6]
type = Explod
triggerall = !numexplod(15611) < 2
trigger1 = !time
trigger2 = (time%20) = 0
anim = 15601
ID = 15611
pos = 320,0
postype = left  ;p2,front,back,left,right
removetime = 40
pausemovetime = -1
supermovetime = -1
scale = 1,1
sprpriority = -20
ignorehitpause = 1
bindtime = -1

[State 40001, Tile #3-5]
type = Explod
triggerall = !numexplod(15620)
trigger1 = !time
anim = 15602
ID = 15620
pos = 0,0
postype = left  ;p2,front,back,left,right
removetime = 40
pausemovetime = -1
supermovetime = -1
scale = 1,1
sprpriority = -20
ignorehitpause = 1
persistent = 0
bindtime = -1

[State 40001, Tile #3-5]
type = Explod
triggerall = !numexplod(15621) < 2
trigger1 = !time
trigger2 = (time%40) = 0
anim = 15602
ID = 15621
pos = 320,0
postype = left  ;p2,front,back,left,right
removetime = 80
pausemovetime = -1
supermovetime = -1
scale = 1,1
sprpriority = -20
ignorehitpause = 1
bindtime = -1

[State 40001, Tile #4]
type = Explod
triggerall = !numexplod(15630)
trigger1 = !time
anim = 15603
ID = 15630
pos = 0,0
postype = left  ;p2,front,back,left,right
removetime = 80
pausemovetime = -1
supermovetime = -1
scale = 1,1
sprpriority = -20
ignorehitpause = 1
persistent = 0
bindtime = -1

[State 40001, Tile #4]
type = Explod
triggerall = !numexplod(15631) < 2
trigger1 = !time
trigger2 = (time%80) = 0
anim = 15603
ID = 15631
pos = 320,0
postype = left  ;p2,front,back,left,right
removetime = 160
pausemovetime = -1
supermovetime = -1
scale = 1,1
sprpriority = -20
ignorehitpause = 1
bindtime = -1

[State 21321, ModifyExplod]
type = ModifyExplod
trigger1 = root,var(6)
ID = 15600
scale = 0,0

[State 40002, ModifyExplod]
type = ModifyExplod
trigger1 = root,var(6)
id = 15601
scale = 0,0
[State 40002, ModifyExplod]
type = ModifyExplod
trigger1 = root,var(6)
id = 15610
scale = 0,0
[State 40002, ModifyExplod]
type = ModifyExplod
trigger1 = root,var(6)
id = 15611
scale = 0,0
[State 40002, ModifyExplod]
type = ModifyExplod
trigger1 = root,var(6)
id = 15620
scale = 0,0
[State 40002, ModifyExplod]
type = ModifyExplod
trigger1 = root,var(6)
id = 15621
scale = 0,0
[State 40002, ModifyExplod]
type = ModifyExplod
trigger1 = root,var(6)
id = 15630
scale = 0,0
[State 40002, ModifyExplod]
type = ModifyExplod
trigger1 = root,var(6)
id = 15631
scale = 0,0
[State 40002, ModifyExplod]
type = ModifyExplod
trigger1 = !root,var(6)
id = 15601
scale = 1,1
[State 40002, ModifyExplod]
type = ModifyExplod
trigger1 = !root,var(6)
id = 15610
scale = 1,1
[State 40002, ModifyExplod]
type = ModifyExplod
trigger1 = !root,var(6)
id = 15611
scale = 1,1
[State 40002, ModifyExplod]
type = ModifyExplod
trigger1 = !root,var(6)
id = 15620
scale = 1,1
[State 40002, ModifyExplod]
type = ModifyExplod
trigger1 = !root,var(6)
id = 15621
scale = 1,1
[State 40002, ModifyExplod]
type = ModifyExplod
trigger1 = !root,var(6)
id = 15630
scale = 1,1
[State 40002, ModifyExplod]
type = ModifyExplod
trigger1 = !root,var(6)
id = 15631
scale = 1,1

[State 40001, Glass Break]
type = ChangeState
trigger1 = root,movetype = H
trigger2 = root,stateno != [3300,3349]
trigger3 = root, stateno = 3307
trigger3 = root, animelemtime(9) = 1
value = stateno+1

;---------------------------------------------------------------------------
; HITA_RECOV (recovering in air, not falling)
[Statedef 8400]
type    = A
movetype= H
physics = N

[State 5040, 1]
type = SelfState
trigger1 = !Alive
value = 5050
[State 5040, SelfRecover]
type = SelfState
trigger1 = !time
value = 5040

;----------------------------------------------------------------------------------------------
; Guard Crush State (see statedef -3 for coding details)
;----------------------------------------------------------------------------------------------

[Statedef 9000]
type    = S
physics = S
anim = 8000 ; Character being guard crushed
ctrl = 0

[State 9000, Freeze]
type = Pause
trigger1 = Time = 0
time = 3
movetime = 3
ignorehitpause = 1

[State 9000, Flash]
type = Envcolor
triggerall = var(21)
trigger1 = Time = 2
value = 248,248,248
time = 3
under = 1
ignorehitpause = 1

[State 9000, Screen Shake]
type = EnvShake
trigger1 = Time = 5
time = 15
amp = -3

[State 9000, Guard Crush Explod if P1] ; "Guard Crush !" sprite
type = null
triggerall = numexplod(7250) <= 0 && teamside = 1
trigger1 = time = 0
anim = 7250
id   = 7250
pos = 0,110
postype = left
bindtime = -1
sprpriority = 2
supermove = 1
facing = 1
ontop = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 9000, Guard Crush Explod if P2]
type = null
triggerall = numexplod(7251) <= 0 && teamside = 2
trigger1 = time = 0
anim = 7251
id   = 7251
pos = -97,110
postype = right
bindtime = -1
sprpriority = 2
supermove = 1
facing = 1
ontop = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 9000, Guard Crush Var Reset]
type = VarSet
trigger1 = time = 0
var(11) = 0
ignorehitpause = 1

[State 9000, Get back]
type = Velset
trigger1 = time = [3,10]
x = -5
ignorehitpause = 1

[State 9000, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
ignorehitpause = 1

;==============================================================================;
;Helpers                                                                       ;
;==============================================================================;
;---------------------------[SYSTEM HELPERS]------------------------------------
;------------------[MOVEHIT TICK-WISE DETECTOR FOR HITSOUNDS]-------------------
; WE SUNK
[Statedef 247]
anim = 1

[State -2, VarSet]
type = VarAdd
trigger1 = root,movehit = 1
var(1) = 1

[State -2, VarSet]
type = VarSet
trigger1 = root,movehit = 2
trigger2 = root,hitpausetime = 0
var(1) = 0

[State -2, VarSet]
type = VarSet
trigger1 = 1;root,movecontact = 1 && var(2) = 0
var(2) = root,movecontact

[State -2, DTC]
type = DisplayToClipboard
trigger1 = NumHelper(247)
text = "MoveHit = %d MoveContact = %d"
params = Var(1), var(2)

;---------------------------------------------------------------------
; States that are always executed (use statedef -2)
;---------------------------------------------------------------------

[Statedef -2]


;================================================================================
; ------- CHIZURU compatibility --------
;===============================================================================
[State -2, PalFX]
type = PalFX
trigger1 = numprojid(131035)
trigger1 = gametime%2 = 1
time = 1
add = 0,0,92
sinadd = 0,0,0,0
color = 0
invertall = 0
color = 256
ignorehitpause = 1

;================================================================================
; ------- Gethit sound system by Scal --------
;===============================================================================
; Reset detection
[State -3, ResetVar]
type = VarSet
trigger1 = !Alive
var(34) = 0
ignorehitpause = 1

; Get enemy move type (normal, special or hyper)
[State -3, GetEnnemyMoveType]
type = VarSet
trigger1 = NumEnemy
trigger1 = Alive
trigger1 = StateNo = 5000 || StateNo = 5020 || StateNo = 5070 || StateNo = 10030 || StateNo = 10060 || StateNo = 10070 || StateNo = 10200
trigger1 = !Time 
var(34) = ifelse((Enemy, hitdefattr = SCA, NA, NP), 1, ifelse((Enemy, hitdefattr = SCA, SA, SP),2,0))
ignorehitpause = 1

; Normal / basic moves
;----------------------
; Non fall, weak
[State -3, LightGetHitNormalSound]
type = PlaySnd
triggerall = var(34) = 1 && Time = 1
triggerall = !(Random % 3)
triggerall = gethitvar(animtype)=0
trigger1 = StateNo = 5000
trigger2 = StateNo = 5010
value = 5000,0
channel = 1
ignorehitpause = 1

; Non fall, medium,hard
[State -3, MediumGetHitNormalSound]
type = PlaySnd
triggerall = var(34) = 1 && Time = 1
triggerall = !(Random % 3)
triggerall = gethitvar(animtype)=[1,2]
trigger1 = StateNo = 5000
trigger2 = StateNo = 5010
value = 5000,1
channel = 1
ignorehitpause = 1


; Fall or tripped
[State -3, FallOrTrippedGetHitNormalSound]
type = PlaySnd
triggerall = var(34) = 1 && Time = 1
triggerall = (Random % 2)
triggerall = gethitvar(animtype)=3
trigger1 = StateNo = 5000 
trigger2 = StateNo = 5070
trigger3 = StateNo = 5020
trigger4 = StateNo = 10030
trigger5 = StateNo = 10060
trigger6 = StateNo = 10064
trigger7 = StateNo = 10070
trigger8 = StateNo = 10200
value = 5000,1
channel = 1
ignorehitpause = 1

; Special moves
;---------------
; Non fall
[State -3, NonFallGetHitSpecialSound]
type = PlaySnd
triggerall = var(34) = 2 && Time = 1
triggerall = !(Random % 3)
trigger1 = StateNo = 5000
trigger2 = StateNo = 5010
value = 5000,2
channel = 1
ignorehitpause = 1

; Fall or tripped
[State -3, FallOrTrippedGetHitSpecialSound]
type = PlaySnd
triggerall = var(34) = 2 && Time = 0
triggerall = (Random % 2)
trigger1 = StateNo = 5000 
trigger2 = StateNo = 5070
trigger3 = StateNo = 5020
trigger4 = StateNo = 10030
trigger5 = StateNo = 10060
trigger6 = StateNo = 10064
trigger7 = StateNo = 10070
trigger8 = StateNo = 10200
value = 5000,3
channel = 1
ignorehitpause = 1

;================================================================================
; ------- Command buffering system by Vans --------
;===============================================================================
[State -2]
Type = Helper
Trigger1 = !NumHelper(10371)
helperType = normal
name = "Buffering - (head.pos)"
ID = 10371
pos = 0,0
posType = p1
facing = 1
StateNo = 10371
keyctrl = 1
ownpal = 1
supermoveTime = 65535
pausemoveTime = 65535

;================================================================================
; ------- Height fix by PotS --------
;===============================================================================
[State -3, Variable Height]
type=playerpush
triggerall= statetype=A && movetype!=H && numenemy
triggerall= p2bodydist x = [-(enemynear,const(size.ground.back) + enemynear,const(size.ground.front)), 0]
trigger1= p2statetype=S
trigger1= p2dist y >= (enemynear,const(size.height) - 12)
trigger2= p2statetype=C
trigger2= p2dist y >= (enemynear,const(size.height) - 28)
trigger3= p2statetype=L
trigger3= p2dist y >= (enemynear,const(size.height) - 12);>= 24
value=0
ignorehitpause=1

;================================================================================
; ------- Front corner fix --------
;===============================================================================
;To prevent switching sides while making combos.
[State -2, Width]
type = Width
triggerall = numenemy
trigger1 = facing != enemynear, facing
trigger1 = movetype != H
edge = 8,0
ignorehitpause = 1

;================================================================================
; ------- Dampening. pseudo-KOFXI style, PotS base --------
;===============================================================================
[State -2, Damage Dampener]; Scaling in action
type= attackmulset
triggerall = !var(33)
triggerall = var(36)
trigger1= numenemy
trigger1 = enemynear, gethitvar(hitcount) >= 3 && enemynear, gethitvar(hitcount) < 6
value= 0.75*ifelse(var(51),ifelse(var(36),0.7,0.56),1)
ignorehitpause= 1
[State -2, Damage Dampener]; Scaling in action
type= attackmulset
triggerall = !var(33)
triggerall = var(36)
trigger1= numenemy
trigger1 = enemynear, gethitvar(hitcount) >= 6 && enemynear, gethitvar(hitcount) < 9
value= 0.5*ifelse(var(51),ifelse(var(36),0.7,0.56),1)
ignorehitpause= 1
[State -2, Damage Dampener]; Scaling in action
type= attackmulset
triggerall = !var(33)
triggerall = var(36)
trigger1= numenemy
trigger1 = enemynear, gethitvar(hitcount) >= 10
value= 0.25*ifelse(var(51),ifelse(var(36),0.7,0.56),1)
ignorehitpause= 1
[State -2, Damage Dampener]; Full damage
type= attackmulset
triggerall = !var(33)
triggerall= numenemy
trigger1= enemynear,movetype!=H || (enemynear,stateno=[120,155])
trigger2 = enemynear, gethitvar(hitcount) < 3
trigger3 = !var(36) && !var(51)
value= 1.0*ifelse(var(51),ifelse(var(36),0.7,0.56),1)
ignorehitpause= 1

;================================================================================
; ------- DAMAGE SCALING KOF2002 Style, by KoopaKoot--------
;===============================================================================
[State -2, Scaling Check]
type = VarSet
triggerall = var(33)
trigger1 = 1
var(36) = 1
[State -2, Damage Dampener]; Hit
type= attackmulset
triggerall = movehit = 1
trigger1 = stateno = [200,499] 
trigger2 = stateno = [600,749] 
trigger3 = stateno = [800,990]
trigger4 = stateno = [1000,1999]
value= 0.38;*ifelse(var(51),0.63,1)
ignorehitpause= 1
persistent = 0

[State -2, Damage Dampener]; Reset
type= attackmulset
triggerall = animelemtime(1) = 1
trigger1 = (stateno = [200,499]) 
trigger2 = (stateno = [600,749]) 
trigger3 = (stateno = [800,990]) 
trigger4 = (stateno = [1000,3999])
value= 1.0*ifelse(var(51),0.63,1)
ignorehitpause= 1
persistent = 0

;================================================================================
; ------- '02 UM MAX Mode System by Vans --------
;===============================================================================
[State -2, VarSet]
type = VarSet
trigger1 = var(51) < 0
var(51) =  0
ignorehitpause = 1
[State -2, VarAdd]
type = VarAdd
trigger1 = var(51)
var(51) =  -1
ignorehitpause = 1

[State -2, PalFX]
type = PalFX
trigger1 = !var(50)
trigger1 = numhelper(70001) || numhelper(70002)
trigger1 =(GameTime%2) = 0
time = 1
add = 56,56,24
mul = 256,256,256
sinadd = 0,0,0
invertall = 0
color = 256
ignorehitpause = 1

[State -2, PalFX]
type = PalFX
triggerall = var(50)
trigger1 = var(50)%2 = 0
time = 1
add = 255,255,255
sinadd = 0,0,0
invertall = 0
color = 256
ignorehitpause = 1

;================================================================================
; ------- DTC --------
;===============================================================================
[State -2, DEBUG]
type = DisplayToClipboard
trigger1 = 1
text = "X = %f = Y=%f Juggle =%d BDist X = %f Ver. = %d";Buff = %d GNDTYPE = %d"
params = Vel X, Vel Y, var(55),backedgebodydist,var(23);var(4), gethitvar(groundtype)
ignorehitpause = 1

[State -2, DEBUG]
trigger1 = 1
type = AppendToClipboard
ignorehitpause = 1
text = "\nBy Vans. AICombo = %d AI = %d Strain = %d"
params = var(41), AILevel, numhelper
;jhun only
[State -2, VarSet]
type = VarSet
trigger1 = enemy,authorname = "Facu-96"
var(40) = 1


;================================================================================
; ------- Movehit Helper --------
;===============================================================================
[State -2, 0]
type = Helper
triggerall = !NumHelper(247)
trigger1 = !Time
helpertype = normal
name = "Movehit"
ID = 247
pos = 0,0
postype = p1
stateno = 247
keyctrl = 0

;================================================================================
; ------- Lightning Spark System --------
;===============================================================================

;================================================================================
; ------- Hitsounds and Explods --------
;===============================================================================
; -------- Sankuu Kyaku ??????! --------
[State 3303, Explod]
type = Explod
triggerall = numenemy
trigger1 = P2Stateno = 10062 && P2MoveType = H && enemynear, time < 2
trigger2 = P2Stateno = 10065 && P2MoveType = H && enemynear, time < 2
anim = 12001+(var(31)*10000)
pos = 0,0
postype = p2  ;p2,front,back,left,right
sprpriority = 2
ownpal = 1
persistent = 0

[State 3303, Explod]
type = Explod
triggerall = numenemy
trigger1 = P2Stateno = 10062 && P2MoveType = H && enemynear, time < 2
trigger2 = P2Stateno = 10065 && P2MoveType = H && enemynear, time < 2
anim = 12002+(var(31)*10000)
pos = 0,0
postype = p2  ;p2,front,back,left,right
sprpriority = 0
ownpal = 1
persistent = 0

[State 300, Land]
type = PlaySnd
triggerall = numenemy
trigger1 = P2Stateno = 10062 && P2MoveType = H && enemynear, time < 2
trigger2 = P2Stateno = 10065 && P2MoveType = H && enemynear, time < 2
value = 2+(var(32)*10),9
persistent = 0

[State 300, Slideland]
type = PlaySnd
triggerall = numenemy
trigger1 = P2Stateno = 10091 && P2MoveType = H && enemynear, time < 2
value = 2+(var(32)*10),11
persistent = 0

[State 3303, Explod]
type = Explod
triggerall = numenemy
trigger1 = P2Stateno = 10091 && P2MoveType = H && enemynear, time < 2
anim = 12004
pos = 0,0
postype = p2  ;p2,front,back,left,right
sprpriority = 3
ownpal = 1
facing = -1
persistent = 0

; -------- OTG --------
[State 3303, Explod]
type = Explod
triggerall = numenemy
trigger1 = P2Stateno = 10301 && P2MoveType = H && enemynear, time < 2
anim = 12001+(var(31)*10000)
pos = 0,18
postype = p2  ;p2,front,back,left,right
sprpriority = 2
ownpal = 1
persistent = 0

[State 3303, Explod]
type = Explod
triggerall = numenemy
trigger1 = P2Stateno = 10301 && P2MoveType = H && enemynear, time < 2
anim = 12002+(var(31)*10000)
pos = 0,18
postype = p2  ;p2,front,back,left,right
sprpriority = 0
ownpal = 1
persistent = 0

[State 300, Land]
type = PlaySnd
triggerall = numenemy
trigger1 = P2Stateno = 10302 && P2MoveType = H && enemynear, time < 2
value = 2+(var(32)*10),9
persistent = 0

;---Million bounce
[State 3303, Explod]
type = Explod
triggerall = numenemy
trigger1 = P2Stateno = 10202 && P2MoveType = H && enemynear, time < 2
anim = 12000
pos = 0,0
postype = p2  ;p2,front,back,left,right
sprpriority = -4
ownpal = 1
persistent = 0
[State 3303, Explod]
type = Explod
triggerall = numenemy
trigger1 = P2Stateno = 10204 && P2MoveType = H && enemynear, time < 2
anim = 12000
pos = 0,0
postype = p2  ;p2,front,back,left,right
sprpriority = -4
ownpal = 1
persistent = 0
[State 300, Land]
type = PlaySnd
triggerall = numenemy
trigger1 = P2Stateno = 10202 && P2MoveType = H && enemynear, time < 2
value = 2+(var(32)*10),5
persistent = 0
[State 300, Land]
type = PlaySnd
triggerall = numenemy
trigger1 = P2Stateno = 10204 && P2MoveType = H && enemynear, time < 2
value = 2+(var(32)*10),5
persistent = 0

; -------- Back Bounce --------
[State 3303, Explod]
type = Explod
triggerall = numenemy
triggerall = enemynear, animelemtime(1) = 1
trigger1 = P2stateno = 10163 && P2MoveType = H && enemynear, time < 2
anim = 12004
pos = 0,0
postype = p2  ;p2,front,back,left,right
sprpriority = 0
ownpal = 1
persistent = 0

[State 300, Land]
type = PlaySnd
triggerall = numenemy
triggerall = enemynear, animelemtime(1) = 1
trigger1 = P2stateno = 10163 && P2MoveType = H && enemynear, time < 2
value = 2+(var(32)*10),5
persistent = 0



;================================================================================
; ------- Slowmotion System By CCIronMugen & Scal --------
;===============================================================================
[State -2]
type = VarAdd
trigger1 = var(16)
trigger1 = (gametime%2) = 0
var(16) = -1
ignorehitpause = 1

[State -2]
type = Pause
triggerall = (gametime%2) = 0
trigger1 = var(16) 
time = 1
movetime = 0
ignorehitpause = 1
endcmdbuftime = 1
;================================================================================
; ------- KOF K.O. System by Vans --------
;===============================================================================
[State -2, Helper]
type = Helper
triggerall = !numhelper(50000) && !numhelper(50001)
triggerall = WinKO && var(24)
triggerall = movehit
trigger1 = stateno = [1000,1099]
trigger2 = stateno = [1300,1399]
trigger3 = stateno = [3200,3299]
trigger4 = stateno = [3400,3499]
helpertype = normal
name = "K.O."
ID = 50000
stateno = 50000
pos = 160,120
postype = left    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1
[State -2, Helper]
type = Helper
triggerall = !numhelper(50000) && !numhelper(50001)
triggerall = WinKO && var(24)
triggerall = movehit
trigger1 = stateno = [200,999]
trigger2 = stateno = [1000,1899]
trigger3 = stateno = [3000,3999]
helpertype = normal
name = "K.O."
ID = 50000
stateno = 50000
pos = 160,120
postype = left    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1

;================================================================================
; ------- AI Shit --------
;===============================================================================
[State -2, StopAI]
type = VarSet
triggerall = var(30) > 0 && !IsHelper
trigger1 = RoundState != 2
trigger2 = !Alive
var(30) = -2
IgnoreHitPause = 1

[State -2, Simplifier]
type = VarSet
triggerall = !IsHelper
trigger1 = var(30) = 1
trigger2 = var(59):=0
var(59) = 1
IgnoreHitPause = 1

;================================================================================
; ------- Jump stuff --------
;===============================================================================
[State 50, reset]
type = VarSet
trigger1 = stateno != [40,50]
var(2) = 0

;================================================================================
; ------- Enemy Taunt --------
;===============================================================================
[State -2, Taunt]
type = PowerAdd
triggerall = numenemy
trigger1 = (p2stateno = 195) && (enemy, statetime < 20)
trigger1 = var(1) != 1
value = 11

;================================================================================
; ------- No Air Guard --------
;===============================================================================
[State -2, AirGuard]
type = AssertSpecial
trigger1 = 1
flag = NoAirGuard
IgnoreHitPause = 1

;================================================================================
; ------- Throw Limitation by OrochiKOF97 --------
;===============================================================================
[State -2, Guard Var]
type = VarSet
trigger1 = stateno = [200,505] ; Non-Air basic moves states.
trigger1 = moveguarded > 0 ; This is the key : checks if opponent has guarded a basic attack
trigger2 = stateno = [600,710] ; Air Basic Moves
trigger2 = movecontact > 0 ; This includes both moveguarded & movehit as well
v = 19
value = 30
persistent = 0
ignorehitpause = 1

[State -2, Guard Var 2]
type = VarAdd
triggerall =!var(6)
trigger1 = var(19) > 0
var(19) = -1
ignorehitpause = 1

[State -2, Guard Var 3]
type = VarSet
triggerall = !var(6)
trigger1 = var(19) < 0
var(19) = 0
persistent = 0
ignorehitpause = 1


;================================================================================
; ------- KOF Lifebar Display by OrochiKOF97 --------
;===============================================================================
[State -2, Special]
type = AssertSpecial
trigger1 = roundstate = [0,1]
;trigger2 = roundstate = 4
;trigger3 = Ctrl = 0 && Anim = 0 && MoveType != H
flag = NoBarDisplay
ignorehitpause = 1

;================================================================================
; ---- Afterimage Remove Code by Warusaki, slightly modified by Mr. Fong ----
;===============================================================================
[State -2, Afterimage Remover]
type = AfterImageTime
triggerall = 1
trigger1 = MoveType = H
trigger2 = StateNo = [0,40]
trigger3 = stateno != 181
trigger3 = StateNo = [52,199]
trigger4 = (StateNo = [200,749]) && PrevstateNo != 50 && Prevstateno != 40
trigger5 = Stateno = [5000,5999]
time = 0

;================================================================================
; ------- NotHitBy fix by Caddie --------
;===============================================================================
[State -2, hitby]
type = hitby
trigger1 = life > 0
trigger1 = stateno = 5100 || stateno = 5110 || stateno = 5120
trigger1 = anim != 5120
value = SCA, NA, SA, HA, NP, SP, HP, NT, ST, HT
time = 1

;================================================================================
; ------- Cybaster Fix --------
;===============================================================================
[State -3, Cybaster fix]
type = StopSnd
trigger1 = stateno != 101
;Shingo only
trigger1 = stateno != 1500
trigger1 = stateno != 3000
trigger1 = stateno != 3200
channel = 27

;================================================================================
; ------- 2002 Only / WLS NEO --------
;===============================================================================
;      - I do _not_ make myself responsible for the changes made here -
;Compatibility with XI has been completely dropped do _not_ ask me to add it
;back.

[State -2, Mode]
type = null
trigger1 = (var(31) := 1)||e
trigger1 = (var(32) := 1)||e
trigger1 = (var(33) := 1)||e
trigger1 = (var(25) := 0)||e
trigger1 = (var(36) := 1)||e  ; 1 = Damage scaling ON!, 0 = OFF!

;================================================================================
; ------- Tick Fix --------
;===============================================================================
[State -2, CtrlSet]
type = CtrlSet
;Gethits
trigger1 = (stateno=52 || stateno=102 || stateno=107 || stateno=5120) && !animtime
trigger2 = (stateno=5001 || stateno=5011 || stateno=151 || stateno=153) && hitover
value = 1
[State -2, CtrlSet]
type = CtrlSet
triggerall = movetype = I
triggerall = statetype != A
triggerall = !animtime
;Basic moves
trigger1 = (stateno = [200,599])
;System moves
trigger2 = (stateno = [750,760])
;Special moves
;Shingo Only
trigger3 = !(stateno = 1010 && var(23) && var(5))
;-
trigger3 = (stateno = [1000,1999])
;Super moves
trigger4 = stateno = [3000,3200)
value = 1

;================================================================================
; ------- KOF Cornerpush System by Vans --------
;===============================================================================
[State -2, Superpause Check]
type = VarAdd
trigger1 = Var(6)
var(6) = -1

[State -2, Reset Time counter]
type = VarSet
trigger1 = movecontact = 1
var(12) = 0

[State -2, Accel]
type = VarSet
triggerall = roundstate = 2
triggerall = Var(6) <= 0
triggerall = numtarget >= 1
trigger1 = target, hitshakeover
fvar(6) = (target, gethitvar(xvel)*exp((-0.1886)*((var(12)))))

[State -2, Push]
type = PosAdd
triggerall = roundstate = 2
triggerall = !var(6)
triggerall = numtarget >= 1
triggerall = (target, BackEdgeBodyDist <= 0) || (target, FrontEdgeBodyDist <= 0)
triggerall = stateno != [900,949]
triggerall = stateno != [956,979]
triggerall = target,statetype != A
triggerall = target,statetype != L
triggerall = p2stateno!=10400 && p2movetype = H
trigger1 = statetype != A
x = ifelse(facing = -1,fvar(6),-fvar(6))

[State -2, Increase]
type = VarSet
triggerall = numtarget >= 1
triggerall = target, hitshakeover
trigger1 = Var(6) <= 0
trigger1 = var(12)
var(12) = var(12)+1

[State -2, Time counter]
type = VarSet
trigger1 = !var(12)
trigger1 = fvar(6)
var(12) = 1

[State -2, Freeze Pos During Superpause]
type = PosFreeze
trigger1 = Var(6)
value = 1

[State -2, Drop]
type = VarSet
triggerall = fvar(6)
trigger1 = !numtarget
trigger2 = projcontact = 1
trigger3 = movecontact = 1
fvar(6) = 0
ignorehitpause = 1

[State -2, TargetDrop]
type = TargetDrop
;Kyo Only
trigger1 = numhelper(7000)
trigger1 = helper(7000), numtarget


;================================================================================
; ------- Skillbar System by Vans --------
;===============================================================================
[State -2, Add Meter]
type = VarAdd
triggerall = !var(33)
triggerall = fvar(5) < 1000
trigger1 = roundstate != [0,1]
trigger1 = roundstate != [3,4]
trigger1 = !(Ctrl = 0 && Anim = 0 && MoveType != H)
fvar(5) = 1.3736263736263736263736263736264
ignorehitpause = 1

[State -2, Add Meter]
type = VarAdd
triggerall = !var(33)
triggerall = fvar(5) = [1000,2000)
trigger1 = roundstate != [0,1]
trigger1 = roundstate != [3,4]
trigger1 = !(Ctrl = 0 && Anim = 0 && MoveType != H)
fvar(5) = 0.68681318681318681318681318681319
ignorehitpause = 1

;Skill Bar
[State -2, Helper]
type = Helper
triggerall = !var(33)
triggerall = !NumHelper(70000)
trigger1 = roundstate >= 2
id = 70000
name = "skill bar"
pos = 0,300
postype = P1
stateno = 70000
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0
pausemovetime = 99999999999999
facing = facing*ifelse(teamside=1,1,-1)

;Skill Bar
[State -2, Helper]
type = Helper
triggerall = !var(33)
triggerall = !NumHelper(70001)
triggerall = roundstate >= 2
trigger1 = Var(58) = [1000,1001]
trigger2 = Var(58) = 1999
id = 70001
name = "skill bar playsnd"
pos = 0,300
postype = P1
stateno = 70001
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0
pausemovetime = 99999999999999
facing = facing*ifelse(teamside=1,1,-1)

;================================================================================
; ------- Juggle SPECIAL --------
;===============================================================================
; -------- Infinite => Loop --------
[State -2, Juggle SPECIAL]
type = VarSet
trigger1 = !var(55)
var(58) = 0
ignorehitpause = 1
[State -2, Juggle SPECIAL]
type = VarAdd
triggerall = numhelper(247)
triggerall = numtarget(7000)
trigger1 = numtarget(7000) && helper(247), var(1) = 1
var(58) = 1
ignorehitpause = 1
[State -2, Juggle SPECIAL]
type = VarSet
trigger1 = var(55) = 1
trigger1 = var(58) > 0 && var(58) < 12
var(55) = 0
ignorehitpause = 1
[State -2, Juggle SPECIAL]
type = VarSet
trigger1 = var(58) = 12
var(55) = 1
ignorehitpause = 1

;================================================================================
; ------- KOF Juggle System By Kira and L --------
;===============================================================================
; Basic, Command, and Special Juggling
[State -2, Limiter]
type = VarSet
triggerall = numhelper(247)
trigger1 = P2MoveType != H && P2StateType != A && P2StateNo != 5040
trigger2 = P2MoveType = H && var(56) && !var(55) && numtarget(980) && helper(247), var(1) = 1
trigger3 = p2statetype = L
var(55) = 0
ignorehitpause = 1
[State -2, Limiter]
type = VarSet
triggerall = !Var(55)
trigger1 = P2StateNo = 5040
trigger2 = P2MoveType = H && !var(56) && !var(55) && numtarget(980) && helper(247), var(1) = 1
var(55) = 1
ignorehitpause = 1
[State -2, SCal Reset]
type = VarSet
triggerall = var(54)
trigger1 = stateno != [3000,3999]
var(54) = 0
ignorehitpause = 1

[State -2, AirGuard]
type = AssertSpecial
trigger1 = 1
flag = NoJuggleCheck ;Believe in the juggling system.
IgnoreHitPause = 1

;================================================================================
; ------- COUNTER HIT (Based on Sander's Method) --------
;===============================================================================
[State -2, VarSet];Checks if opponent is in attack state
type = VarSet
triggerall = numenemy
trigger1 = enemy, movetype = a
var(56) = 1
ignorehitpause = 1

[State -2, VarSet];This resets the condition if counter not succesful and succesful
type = VarSet
triggerall = numenemy
trigger1 = enemy, movetype = i || var(57) >= 1  ;Enemy is Idle | Counter was Succesful
trigger2 = var(57) > 10 && enemy, movetype = h  ;10 ticks passed & enemy is on gethit state
var(56) = 0
ignorehitpause = 1

[State -2, VarSet];Counter Hit Succesful
type = VarSet
triggerall = var(56) = 1
trigger1 = movehit ;Counter Check Ok, Move Hit Succesfully.
trigger1 = stateno != [190,199] ;Does not activate during intros.
trigger1 = stateno != [900,979] ;Does not activate during throws.
trigger2 = projhit = 1  ;Counter Check Ok, Projectile Hit Succesfully.
;Iori Only
trigger3 = numhelper(7000)
trigger3 = helper(7000), numtarget
var(57) = 1
ignorehitpause = 1

[State -2, VarAdd];Counter Hit Timer
type = VarAdd
trigger1 = var(57) >= 1 ;Counter was succesful
var(57) = 1
ignorehitpause = 1

[State -2, VarSet];Counter Hit Reset
type = VarSet
trigger1 = var(57) >= 22 && movehit ;Reset if 22 ticks passed and move hit
trigger2 = p2movetype != h ;Reset if P2 is no longer in gethit state
trigger3 = movetype = h ;Reset if P1 is getting hit
trigger4 = var(57) >= 22 && projhit = 1 ;Reset if 22 ticks passed and projectile hit
var(57) = 0
ignorehitpause = 1

[State -2, AssertSpecial];This will award free juggles for Counter Hit.
type = AssertSpecial
trigger1 = var(57) > 0
flag = nojugglecheck

[State -2, EnvColor];This will produce a flash a la KOF2K2
type = EnvColor
triggerall = numenemy
triggerall = var(21)
triggerall = stateno != [190,199] ;Does not activate during intros.
triggerall = stateno != [900,979] ;Does not activate during throws.
triggerall = stateno != [3000,4000] ;Don't activate during Hyper Moves
triggerall = enemy, movetype = h ;Enemy was indeed HIT, otherwise this'd be retarded.
trigger1 = var(56) = 1 && movehit  ;Move hit, Ok
trigger2 = var(56) = 1 && projhit = 1 ;Projectile hit, Ok
trigger3 = numhelper(7000) && var(56) = 1
trigger3 = helper(7000), movehit 
value = 255,255,255
time = 1
under = 1
ignorehitpause = 1
persistent = 0

[State -2, Explod];Counter Explod for P1 Side.
type = Explod
triggerall = !var(31)
triggerall = numenemy
triggerall = var(56) = 1 && numexplod(57) = 0 && teamside = 1 ;Counter Ok, Explod has not played, P1 Side
triggerall = enemy, movetype = h ;Enemy was indeed HIT, otherwise this'd be retarded.
triggerall = stateno != [900,979] ;Does not activate during throws.
trigger1 = movehit ;Move hits
trigger2 = projhit = 1 ;Projectile Hits
trigger3 = numhelper(7000)
trigger3 = helper(7000), movehit 
anim = 13000
pos = 160,234
postype = left  ;p2,front,back,left,right
removetime = -2
supermove = 1
scale = 0.5,0.5
sprpriority = 0
id = 57
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = -1

[State -2, Explod];Counter Explod for P2 Side.
type = Explod
triggerall = !var(31)
triggerall = numenemy
triggerall = var(56) = 1 && numexplod(57) = 0 && teamside = 2 ;Counter Ok, Explod has not played, P2 Side
triggerall = enemy, movetype = h ;Enemy was indeed HIT, otherwise this'd be retarded.
triggerall = stateno != [900,979] ;Does not activate during throws.
trigger1 = movehit ;Move hits
trigger2 = projhit = 1 ;Projectile Hits
trigger3 = numhelper(7000)
trigger3 = helper(7000), movehit 
anim = 13001
pos = 160,234
postype = left  ;p2,front,back,left,right
removetime = -2
supermove = 1
scale = 0.5,0.5
sprpriority = 0
id = 57
bindtime = -1
ontop = 1
ownpal = 1
ignorehitpause = 1
pausemovetime = -1

[State -2, Explod];Counter Explod for P1 Side.
type = Explod
triggerall = var(31)
triggerall = numenemy
triggerall = var(56) = 1 && numexplod(57) = 0 && teamside = 1 ;Counter Ok, Explod has not played, P1 Side
triggerall = enemy, movetype = h ;Enemy was indeed HIT, otherwise this'd be retarded.
triggerall = stateno != [900,979] ;Does not activate during throws.
trigger1 = movehit ;Move hits
trigger2 = projhit = 1 ;Projectile Hits
trigger3 = numhelper(7000)
trigger3 = helper(7000), movehit 
anim = 24000
pos = 0,80+3 ;106 is the correct offset, +2 to be aligned with OrochiKOF's
postype = left  ;p2,front,back,left,right
removetime = -2
supermove = 1
sprpriority = 2
id = 57
bindtime = -1
ontop = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = -1

[State -2, Explod];Counter Explod for P2 Side.
type = Explod
triggerall = var(31)
triggerall = numenemy
triggerall = var(56) = 1 && numexplod(57) = 0 && teamside = 2 ;Counter Ok, Explod has not played, P2 Side
triggerall = enemy, movetype = h ;Enemy was indeed HIT, otherwise this'd be retarded.
triggerall = stateno != [900,979] ;Does not activate during throws.
trigger1 = movehit ;Move hits
trigger2 = projhit = 1 ;Projectile Hits
trigger3 = numhelper(7000)
trigger3 = helper(7000), movehit 
anim = 24001
pos = 0,80+3
postype = right  ;p2,front,back,left,right
removetime = -2
supermove = 1
sprpriority = 2
id = 57
bindtime = -1
ontop = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = -1

;================================================================================
; ------- DIZZY CODE --------
;===============================================================================
[State -2, reset Dizzy]
type = VarSet
trigger1 = RoundState = 0 || RoundState = 3 || (movetype = H &&  var(14) = 1 && stateno != 5250)
ignorehitpause = 1
var(13) = 0

[State -2, reset Dizzy]
type = VarSet
trigger1 = var(13) <= 0 && var(14) = 1
ignorehitpause = 1
var(14) = 0

[State -2, DIZZY CODE]
type = VarAdd
triggerall = numenemy
trigger1 = (var(13) = [1,999]) && movetype = H && enemy, hitdefattr = SCA, HA, HP
var(13) = -50
ignorehitpause = 1 

[State -2, DIZZY CODE]
type = VarAdd
trigger1 = (var(13) = [1,999]) && movetype = H && gethitvar(hitcount) >= 5 
var(13) = -20
ignorehitpause = 1 

[State -2, DIZZY CODE]
type = VarAdd
trigger1 = var(13) = [1,999]
var(13) = -1
ignorehitpause = 1 

[State -2, DIZZY CODE]
type = Varset
trigger1 = var(13) > 1000
var(13) = 1000
ignorehitpause = 1 
;----------------

;================================================================================
; ------- Cheap K.O. system By Warusaki3 --------
;===============================================================================
[State -2, 3]
type = ChangeState
trigger1 = !Alive
trigger1 = PrevStateNo = 130 || PrevStateNo = 131 || PrevStateNo = [150,153]
trigger1 = Stateno = [5000,5050]
value = 5950

[State -2,KO]
type = Varset
triggerall = StateNo = [120,159]
trigger1 = StateType = S
ignorehitpause = 1
fvar(1) = 0

[State -2,KO]
type = Varset
triggerall = StateNo = [120,159]
trigger1 = StateType = C
ignorehitpause = 1
fvar(1) = 1

[State -2,KO]
type = Varset
triggerall = StateNo = [120,159]
trigger1 = StateType = A
ignorehitpause = 1
fvar(1) = 2

;----------------------------------------------------------------------------------
; KO Voice
[State -2,AI]
type = VarSet
trigger1 = 1
ignorehitpause = 1
fvar(2) = 0

[State -2,AI]
type = VarSet
trigger1 = Anim = 5950 || StateNo = 5950
ignorehitpause = 1
fvar(2) = 1

[State -2,AI]
type = VarSet
trigger1 = movetype != H
trigger1 = roundstate = 2
ignorehitpause = 1
fvar(35) = 0

[State -2,AI]
type = VarSet
trigger1 = StateNo = 5000 || StateNo = 5020 || StateNo = 5070 || StateNo = 5080
trigger1 = roundstate = 2
trigger1 = Time = 0
ignorehitpause = 1
fvar(35) = GetHitVar(hitshaketime)

[State -2, KO]
type = PlaySnd
triggerall = var(10) != 1 && var(10) < 4
triggerall = roundstate = 3
trigger1 = !FVar(2) && !FVar(0)
trigger1 = FVar(36) = ifElse(!FVar(35),1,ifelse(FVar(35)>20,20,FVar(35)))
ignorehitpause = 1
value = S111, 0
[State -2, KO]
type = PlaySnd
triggerall = var(10) = 1
triggerall = roundstate = 3
trigger1 = !FVar(2) && !FVar(0)
trigger1 = FVar(36) = ifElse(!FVar(35),1,ifelse(FVar(35)>20,20,FVar(35)))
ignorehitpause = 1
value = S111, 1
[State -2, KO]
type = PlaySnd
triggerall = var(10) = 4
triggerall = roundstate = 3
trigger1 = !FVar(2) && !FVar(0)
trigger1 = FVar(36) = ifElse(!FVar(35),1,ifelse(FVar(35)>20,20,FVar(35)))
ignorehitpause = 1
value = S111, 2
[State -2, KO]
type = PlaySnd
triggerall = var(10) = 5
triggerall = roundstate = 3
trigger1 = !FVar(2) && !FVar(0)
trigger1 = FVar(36) = ifElse(!FVar(35),1,ifelse(FVar(35)>20,20,FVar(35)))
ignorehitpause = 1
value = S111, 3

[State -2, KO]
type = PlaySnd
triggerall = var(10) != 1 && var(10) < 4
triggerall = roundstate = 3
triggerall = FVar(2)
trigger1 = Anim = 5950 && AnimElemTime(1) = 2
ignorehitpause = 1
value = S5950, 0
[State -2, KO]
type = PlaySnd
triggerall = var(10) = 1
triggerall = roundstate = 3
triggerall = FVar(2)
trigger1 = Anim = 5950 && AnimElemTime(1) = 2
ignorehitpause = 1
value = S111, 1
[State -2, KO]
type = PlaySnd
triggerall = var(10) >= 4
triggerall = roundstate = 3
triggerall = FVar(2)
trigger1 = Anim = 5950 && AnimElemTime(1) = 2
ignorehitpause = 1
value = S5950, 1

[State -2,KO]
type = Varadd
trigger1 = !Alive
ignorehitpause = 1
fvar(36) = 1

[State -2,KO]
type = Varset
trigger1 = Alive
ignorehitpause = 1
fvar(36) = 0

[State -2, 1]
type = VarSet
triggerall = numenemy
trigger1 = (enemynear,authorname="warusaki3"&&enemynear,name="cvsgouki"&&enemynear,var(13))
trigger2 = (enemynear,authorname="SUMI"&&enemynear,name="Destrudo Ryu"&&enemynear,var(16)=1)
trigger3 = (enemynear,authorname="warusaki3"&&enemynear,name="cvsrugal"&&enemynear,var(13))
trigger4 = (enemynear,authorname="warusaki3"&&enemynear,name="cvsryu"&&enemynear,var(13))
trigger5 = (enemynear,authorname="warusaki3"&&enemynear,name="cvsg_rugal"&&enemynear,var(13))
trigger6 = (enemynear,authorname="warusaki3"&&enemynear,name="cvsgeese"&&enemynear,var(13))
trigger7 = (enemynear,authorname="warusaki3"&&enemynear,name="cvssakura"&&enemynear,var(13))
fvar(0) = 1

[State -2, 1]
type = VarSet
triggerall = numenemy
trigger1 = (enemynear,authorname="warusaki3"&&enemynear,name="cvsgouki"&&enemynear,var(13)=0)
trigger2 = (enemynear,authorname="SUMI"&&enemynear,name="Destrudo Ryu"&&enemynear,var(16)=0)
trigger3 = (enemynear,authorname="warusaki3"&&enemynear,name="cvsrugal"&&enemynear,var(13)=0)
trigger4 = (enemynear,authorname="warusaki3"&&enemynear,name="cvsryu"&&enemynear,var(13)=0)
trigger5 = (enemynear,authorname="warusaki3"&&enemynear,name="cvsg_rugal"&&enemynear,var(13)=0)
trigger6 = (enemynear,authorname="warusaki3"&&enemynear,name="cvsgeese"&&enemynear,var(13)=0)
trigger7 = (enemynear,authorname="warusaki3"&&enemynear,name="cvssakura"&&enemynear,var(13)=0)
fvar(0) = 0

;----------------------------------------------------------------------
; States that are executed when in self's state file (use statedef -3)
;----------------------------------------------------------------------

[Statedef -3]

;================================================================================
; ------- Roundstate stance management by Scal --------
;===============================================================================

[State -3, NoWalk]
type = AssertSpecial
trigger1 = RoundState > 2
flag = noWalk

[State -3, Corner];ZOMG STOLEN FROM IRON
type = Velset
trigger1 = FrontEdgeDist < 10 && vel x > 0.1
x = 0.1

[State -3,STOP]
type = StopSnd
trigger1 = stateno != 195
trigger1 = stateno != 0
channel = 19

;---------------------- Integer variable list ----------------------

; var(0):= 12500, 12501, 12502, 12503, 12504, 12505, 12506, 12507, 12508, 12509, 12510, 12511, 12512, 12513, 12514, 12520, 40003, 50000, 70001, 7000, 10371
; var(1):= 247, 12503, 12504, 12508, 12509, 12513, 12514, 12520, 7000, 10371
; var(2):= 247, -2, 40, 52, 10371
; var(3):= 40, 10371
; var(4):= 40, 100, 5050, 5071, 10371
; var(5):= 1010, 1600, 10371
; var(6):= 3000, 3100, 3200, 3300, -2, 10371
; var(7):= 10371
; var(8):= 10371
; var(9):= 10371
;var(10):= 10371
;var(11):= 9000, 10371
;var(12):= -2, 10371
;var(13):= -2, 10371
;var(14):= -2, 10371
;var(15):= 7000, 10371
;var(16):= 1010, 1600, 3001, 3103, 3201, 3303, 3307, -2, 7000, 10371
;var(17):= 10371
;var(19):= -2
;var(20):= 5900, 10371
;var(21):= 5900, 10371
;var(22):= 10371
;var(23):= 1100, 1400, 1500, 1600, 3000, 3100, 10371
;var(24):= 5900, 10371
;var(25):= -2, 10371
;var(26):= 101, 10371
;var(27):= 5900, 10371
;var(30):= -2, 5900
;var(31):= -2
;var(32):= -2
;var(33):= -2
;var(34):= -2
;var(36):= -2
;var(40):= -2, 10371
;var(41):= 10371
;var(42):= 10371
;var(43):= 10371
;var(44):= 10371
;var(50):= -1
;var(51):= 3000, 3100, 3200, 3300, -2, 70001, -1
;var(53):= -1
;var(54):= 3000, 3100, 3200, 3300, -2
;var(55):= 200, 205, 210, 215, 300, 305, 310, 315, 400, 405, 500, 505, 600, 610, 700, 710, 800, 1000, 1010, 1100, 1200, 1400, 1503, 1600, -2, 7000
;var(56):= -2
;var(57):= -2
;var(58):= -2
;var(59):= -2

;---------------------- Float variable list ----------------------

; fvar(0):= -2, 10371
; fvar(1):= -2, 10371
; fvar(2):= -2
; fvar(5):= 3000, 3100, 3200, 3300, -2
; fvar(6):= -2
; fvar(8):= 910, 960
;fvar(11):= 10371
;fvar(12):= 10371
;fvar(22):= 10371
;fvar(23):= 10371
;fvar(35):= -2
;fvar(36):= -2




