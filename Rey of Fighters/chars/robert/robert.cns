;=====================================
;### ### ### ### ### ###
;# # # # # # #   # #  #
;### # # ### ### ###  #
;##  # # # # #   ##   #
;# # ### ### ### # #  #
;=====================================
;ROBERT GARCIA
;Created by: CIRIO
;website:    cirio.cjb.net
;email:      cirio@rome.com
;updated by: Jerzy
;website:    http://newmwo.foroactivo.com/
;=====================================
[Data]
life = 1000          ;Amount of life to start with
power = 3000
attack = 100         ;100% attack power (more is stronger)
defence = 100        ;100% defensive power (more is stronger)
fall.defence_up = 90 ;Def goes up by 50% everytime player is hit on ground
liedown.time = 45    ;Time player takes before getting up from HIT_LIEDOWN
airjuggle = 15       ;Can do 14 points of juggling
sparkno = -1         ;Default spark number
guard.sparkno = -1    ;Default guard spark number
volume = 0
IntPersistIndex=1
FloatPersistIndex=0
KO.echo = 0          ;1 to enable echo on KO

[Size]
xscale = 1           ;Horizontal scaling factor.
yscale = 1           ;Vertical scaling factor.
ground.back = 16     ;Player width (back, ground)
ground.front = 16    ;Player width (front, ground)
air.back = 16        ;Player width (back, air)
air.front = 16       ;Player width (front, air)
z.width = 3          ;Player width (into and out)
attack.width = 0     ;Default attack width: back, front
attack.dist = 160    ;Default attack distance
proj.attack.dist = 90;Default attack distance for projectiles
head.pos = -16, -106    ;Approximate position of head
mid.pos = -15, -73     ;Approximate position of midsection

[Velocity]
walk.fwd  = 3            ;Walk forward
walk.back = -3          ;Walk backward
run.fwd  = 6.3               ;Run forward (x, y)  - if y<0, player will hop
run.back = -6,-4          ;Run backward (x, y) - if y=0, player will run
jump.neu = 0,-9.9        ;Neutral jumping velocity (x, y)
jump.back = -3.1,-9.9     ;Jump back Speed (x, y)
jump.fwd = 3.1,-9.9      ;Jump forward Speed (x, y)
runjump.fwd = 3.5,-9.7   ;.

[Movement]
;airjump.num = 0       ;Number of air jumps allowed (opt)
;airjump.height = 35   ;Minimum distance from ground before you can air jump (opt)
yaccel = .56         ;Vertical acceleration
stand.friction = .85  ;Friction coefficient when standing
crouch.friction = .82 ;Friction coefficient when crouching

;====================================
;INITIALIZE
[Statedef 5900]
type = S

[State 5900, 1] ;Clear all int variables
type = VarRangeSet
trigger1 = roundno = 1
value = 0

[State 5900, 2] ;Clear all float variables
type = VarRangeSet
trigger1 = roundno = 1
fvalue = 0

; INTRO
[State 5900, 3] ;Intro
type = ChangeState
trigger1 = roundno = 1
trigger2 = teammode = turns
trigger2 = roundno > 1
trigger2 = roundsexisted <= 0
trigger2 = roundstate = 0
value = 191

[State 5900, 3] ;Intro
type = ChangeState
triggerall = teammode = turns
triggerall = roundno > 1
triggerall = roundstate = 0
trigger1 = p2Name = "Takuma Sakazaki" || p4Name = "Takuma Sakazaki"
trigger2 = p2Name = "Takuma" || p4Name = "Takuma"
trigger3 = p2Name = "Yuri Sakazaki" || p4Name = "Yuri Sakazaki"
trigger4 = p2Name = "Yuri" || p4Name = "Yuri"
trigger5 = p2Name = "Ryo Sakazaki" || p4Name = "Ryo Sakazaki"
trigger6 = p2Name = "Ryo" || p4Name = "Ryo"
trigger7 = p2Name = "Marco Rodriguez" || p4Name = "Marco Rodriguez"
trigger8 = p2Name = "Marco" || p4Name = "Marco"
trigger9 = p2Name = "Yuri98" || p4Name = "Yuri98"
value = 192

[State 5900, 3] ;Intro
type = ChangeState
triggerall = teammode = turns
triggerall = roundno > 1
triggerall = roundstate = 0
trigger1 = p2Name = "Kensou" || p4Name = "Kensou"
trigger2 = p2Name = "Sie Kensou" || p4Name = "Sie Kensou"
trigger3 = p2Name = "Kensou Sie" || p4Name = "Kensou Sie"
value = 193

[State 5900, 3] ;Intro
type = ChangeState
triggerall = teammode = turns
triggerall = roundno > 1
triggerall = roundstate = 0
trigger1 = p2Name = "Mr.Karate" || p4Name = "Mr.Karate"
trigger2 = p2Name = "MrKarate" || p4Name = "MrKarate"
value = 194

;VAR RESETS
[State 5900, reset]
type = VarSet
trigger1 = RoundState = 0 
trigger2 = RoundState = 3
var(3) = 0

;VAR RESETS
[State 5900, reset]
type = VarSet
trigger1 = RoundState = 0 
trigger2 = RoundState = 3
var(7) = 0

;VAR RESETS
[State 5900, reset]
type = VarSet
trigger1 = RoundState = 0 
trigger2 = RoundState = 3
var(10) = 0

;VAR RESETS
[State 5900, reset]
type = VarSet
trigger1 = RoundState = 0 
trigger2 = RoundState = 3
var(15) = 0

;VAR RESETS
[State 5900, reset]
type = VarSet
trigger1 = RoundState = 0 
trigger2 = RoundState = 3
var(16) = 0

;VAR RESETS
[State 5900, reset]
type = VarSet
trigger1 = RoundState = 0 
trigger2 = RoundState = 3
var(19) = 0

;-------------------------------------------------------------------
; RUN_FWD
[Statedef 100]
type = S
physics = S
anim = 100

[State 100, 1]
type = VelSet
trigger1 = time > 3
x = const(velocity.run.fwd.x)

; Play sound when running
[State 100, 2]
type = PlaySnd
trigger1 = Time = 1;mod = 71,3;start playing from time = 0,then play again for every 71 more ticks
value = S1,1
channel = 20
loop = 1

[State 100, 3]
type = ChangeState
triggerall = time >= 12
trigger1 = var(9) != 1
trigger1 = Command != "holdfwd"
value = 101
ctrl = 1

;AI MODIFICATION(no use yet)
[State 100, 4]
type = ChangeState
triggerall = var(9) = 1
triggerall = time > 12
triggerall = p2movetype != H
trigger1 = P2BodyDist x <= 10
trigger2 = P2MoveType = A
value = 101
ctrl = 1

[State 100, 5]
type = AssertSpecial
trigger1 = 1
flag = NoWalk


;------------------------------------
; Run end to Stand
[Statedef 101]
type = S
physics = S
velset = 0,0
ctrl = 1

;Stop channel 20's sound when button fwd is release
[State 100, 3]
type = StopSnd
trigger1 = time = 0
channel = 20;running snd

[State 101, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = anim != 101
value    = 101

[State 101, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;--------------------------------------------------------
;Hop FWD (start)
[Statedef 102]
type = S
physics = S
anim = 102
velset = 0
ctrl = 0

[State 102, NOTHITBY]
type = nothitby
trigger1 = 1
value = SC, NT, ST, HT

[State 102, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 103
;----------------------------
;Hop Fwd (in the air)
[Statedef 103]
type = A
physics = N
anim = 103

[State 103, 1]
type = VelSet
trigger1 = Time = 0
x = 6
y = -4

[State 103, 2]
type = PlaySnd
trigger1 = Time = 0
value = 1,9

[State 103, 3]
type = VelAdd
trigger1 = Time > 0
y = .51

[State 103, 4]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 107
;---------------------------------

;Hop back (start)
[Statedef 105]
type = S
physics = S
anim = 105
velset = 0
ctrl = 0

[State 105, NOTHITBY]
type = nothitby
trigger1 = 1
value = SC, NT, ST, HT

[State 105, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 106

;----------------------------

;Hop back (in the air)
[Statedef 106]
type = A
physics = N
anim = 106

[State 105, 1]
type = VelSet
trigger1 = Time = 0
x = const(velocity.run.back.x)
y = const(velocity.run.back.y)

[State 106, 2]
type = PlaySnd
trigger1 = Time = 0
value = 1,2

[State 106, 3]
type = veladd
trigger1 = time = 10
x = .06

[State 106, 3]
type = VelAdd
trigger1 = Time > 2
y = .79

[State 106, 4]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 107

;---------------------------------

; Dashing back (landing)
[Statedef 107]
type = S
physics = S
anim = 107
velset = 0,0

[State 107, 1]
type = PosSet
trigger1 = Time = 0
y = 0

[State 107, 2]
type = PlaySnd
trigger1 = Time = 0
value = 1,5

[State 107, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;--------------------------------
;$$$$$$$$$$$$$$$$$$$$$$
; Overide Common States
;$$$$$$$$$$$$$$$$$$$$$$
; HIT_FALLRECOVER (on the ground)(Safe Fall)
[Statedef 5201]
type    = S
movetype= H
physics = S
anim = 5200
ctrl = 0

[State 700, 1]
type = PlaySnd
trigger1 = Time = 0
value = 3,13
channel = 0

[State 5201, 1] ;Turn if not facing opponent
type = Turn
trigger1 = Time = 0
trigger1 = P2Dist X < -5

[State 5201, 2]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5201, 2.1]
type = VelSet
trigger1 = Time >= 0
trigger1 = Time <= 12
x = -4

[State 5201, 3]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5201, 4]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 5201, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; JUMP_UP START
[Statedef 40]
type    = S
physics = S
anim = 40
ctrl = 0

[State 40, NOTHITBY]
type = nothitby
trigger1 = 1
value = SC, NT, ST, HT

[State 40, AI]
type = VarSet
triggerall = var(9) = 1
trigger1 = time = 0
trigger1 = p2bodydist x > 0
var(8) = 2

[State 40, 4]
type = VarSet
trigger1 = Time = 0
var(8) = 0

[State 40, 5]
type = VarSet
trigger1 = Command = "holdfwd"
trigger1 = var(8) != 2
var(8) = 1

[State 40, 6]
type = VarSet
trigger1 = Command = "holdback"
trigger1 = var(8) != -2
var(8) = -1

[State 40, 7]
type = VarSet
triggerall = Time = 0
triggerall = Command = "holdfwd"
trigger1 = Command = "longjump"
trigger2 = PrevStateNo = 100 ;RUN_FWD
var(8) = 2

[State 40, 8]
type = VarSet
trigger1 = Time = 0
trigger1 = Command = "holdback"
trigger1 = Command = "longjump"
var(8) = -2

;make sure running snd is off
[State 40, 9]
type = StopSnd
trigger1 = Time = 0
channel = 20;running snd

[State 40, 10]
type = ChangeState
triggerall = AnimTime = 0
trigger1 = var(8) != 0
trigger1 = var(8) != 1
trigger1 = var(8) != -1
trigger1 = Command = "holdup"
trigger2 = Command != "holdup"
value = 201

[State 40, 11]
type = VelSet
trigger1 = AnimTime = 0
x = IfElse(var(8)= 0, Const(velocity.jump.neu.x), IfElse(var(8)>0, Const(velocity.jump.fwd.x), Const(velocity.jump.back.x)))
y = Const(velocity.jump.y)

[State 40, 13]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
; Jump Up
[Statedef 50]
type    = A
physics = A

[State 50, CTRL LIMITTER] ;Can't attack after recovery
type = ctrlset
trigger1 = Time = 0
trigger1 = prevstateno = 5040
trigger1 = prevstateno = 5210
value = 0

[State 50, PLAYSND] ; Play sound when jumping (Light)
type = PlaySnd
trigger1 = Time = 0
value = 1,3
volume = 60

[State 50, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 42, 43))

[State 50, 3]
type = ChangeAnim
trigger1 = Vel y > -2
trigger1 = SelfAnimExist(anim + 3)
persistent = 0
value = Anim + 3

;---------------------------------------------------------------------------
; JUMP_UP (short)
[Statedef 201]
type    = A
physics = A
anim = 41
velset = 0, -7.5
ctrl = 1

[State 201, CTRL LIMITTER] ;Can't attack after recovery
type = ctrlset
trigger1 = Time = 0
trigger1 = prevstateno = 5040
trigger1 = prevstateno = 5210
value = 0

[State 201, 1] ; Play sound when jumping (Light)
type = PlaySnd
trigger1 = Time = 0
trigger1 = var(8) != -2
trigger1 = var(8) != 2
value = 1,3
volume = 60

[State 201, 2] ; Play sound when jumping (Shadow)
type = PlaySnd
triggerall = Time = 0
trigger1 = var(8) = -2
trigger2 = var(8) = 2
value = 1,4
volume = 10

[State 201, 3] ; Shadows
type = Afterimage
triggerall = Time = 0
trigger1 = var(8) = -2
trigger2 = var(8) = 2
time = 14
PalBright = 0, 0, 0
PalContrast =  250,250,250
PalAdd = 0, 0, 0
PalMul = 1,1,1
Length = 7
FrameGap = 3

[State 201, 4] ; Shadows off
type = Afterimage
trigger1 = Time = 15
time = 0

[State 201, PUSH]
type = playerpush
triggerall = anim = 41
triggerall = p2statetype != A
triggerall = animelem = 2, >= 0
triggerall = animelem = 5, <= 0
trigger1 = var(8) = -2
trigger2 = var(8) = 2
value = 0

[State 201, BackJump]
type = VelSet
triggerall = var(9) = 1 
trigger1 = Time = 0 && (p2bodydist x = [-30,-1])
trigger2 = Time = 0 && backedgebodydist <= 100
y = -8.5
x = -3.8

[State 201, FwdJmp]
type = VelSet
triggerall = var(9) = 1 
trigger1 = Time = 0 && (p2bodydist x = [60,85])
y = -7.5
x = 3.4

[State 201, UpJmp]
type = VelSet
triggerall = var(9) = 1 
trigger1 = Time = 0 && (p2bodydist x = [0,60])
y = -7.5
x = ifelse(random<=400,3.4,0)

[State 201, 5]
type = VelSet
trigger1 = Time = 0
trigger1 = command = "holdup"
y = -9.75

[State 201, 6]
type = VelSet
trigger1 = Time = 0
trigger1 = Var(8) = 1
x = 3.4

[State 201, 7]
type = VelSet
trigger1 = Time = 0
trigger1 = Var(8) = 2
x = 3.9

[State 201, 8]
type = VelSet
trigger1 = Time = 0
trigger1 = Var(8) = -1
x = -3.4

[State 201, 9]
type = VelSet
trigger1 = Time = 0
trigger1 = Var(8) = -2
x = -3.8

[State 201, 10]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = Vel X = 0
trigger1 = Command = "holdup"
value = 41

[State 201, 11] ;Short
type = ChangeAnim
trigger1 = Time = 0
trigger1 = Vel X = 0
trigger1 = Command != "holdup"
value = 201

[State 201, 12]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = Vel X > 0
trigger1 = Command = "holdup"
value = 42

[State 201, 13] ;Short
type = ChangeAnim
trigger1 = Time = 0
trigger1 = Vel X > 0
trigger1 = Command != "holdup"
value = 202

[State 201, 14]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = Vel X < 0
trigger1 = Command = "holdup"
value = 43

[State 201, 15] ;Short
type = ChangeAnim
trigger1 = Time = 0
trigger1 = Vel X < 0
trigger1 = Command != "holdup"
value = 201

;---------------------------------------------------------------------------
; Jump Land
[Statedef 52]
type    = S
physics = S
anim = 47
ctrl = 1
facep2 = 1


[State 52, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

;Play sound when landing
[State 52, 3]
type = PlaySnd
trigger1 = Time = 0
value = 1,5
volume = 60

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;------------------------------------------------------------------------------

; SGUARDHIT (shaking)
[Statedef 150]
type    = S
movetype= H
physics = N
velset = 0,0

[State 150, 1]
type = ChangeAnim
trigger1 = 1
value = 150


[State 150, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 151

[State 150, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 3


;---------------------------------------------------------------------------

; CGUARDHIT (shaking)
[Statedef 152]
type    = C
movetype= H
physics = N
velset = 0,0

[State 152, 1]
type = ChangeAnim
trigger1 = 1
value = 151


[State 152, 3]
type = ChangeState
trigger1 = HitShakeOver
value = 153

[State 152, 4]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4

;---------------------------------------------------------------------------
; HITA_RECOV (recovering in air, not falling)
[Statedef 5040]
type    = A
movetype= H
physics = N
ctrl = 0

[State 5040, 1]
type = ChangeState
trigger1 = !Alive
value = 5050

[State 5040, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim != 5040
trigger2 = Time = 0
trigger2 = Anim != 5035
value = 5040

[State 5040, 3]
type = CtrlSet
trigger1 = 1
value = 0

[State 5040, 4]
type = StateTypeSet
trigger1 = HitOver
movetype = I

[State 5040, 5]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5040, 6]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52 ;JUMPLAND
ctrl = 1

;----------------------------------------------------------------------
; HIT_TRIP (shaking)
[Statedef 5070]
type    = A
movetype= H
physics = N
velset = 0,0

[State 5070, 1]
type = ChangeAnim 
trigger1 = 1
value = 5070

[State 5070, 2]
type = ChangeState
trigger1 = var(37) > 0
trigger1 = time = 0
value = 5000
ctrl = 0

[State 5070, 2]
type = ChangeState
trigger1 = var(37) <= 0
trigger1 = HitShakeOver
value = 5071

[State 5070, 3]
type = ForceFeedback
trigger1 = Time = 0
time = 12
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; HIT_TRIP2 (fall through air)
[Statedef 5071]
type    = A
movetype= H
physics = N

[State 5071, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 5071, 2] ;Acceleration
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5050, 4] ;Recover near ground
type = ChangeState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "roll"
value = 5200 ;HITFALL_RECOVER

;[State 5050, 5]; Disable SFZ Recovery in mid air
;type = ChangeState
;triggerall = Vel Y > -1
;triggerall = alive
;triggerall = CanRecover
;trigger1 = Command = "recovery"
;value = 5210 ;HITFALL_AIRRECOVER

[State 5071, 3] ;Hit ground
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 15
type = ChangeState
value = 5100

;---------------------------------------------------------------------------
; HITG_SHAKE
[Statedef 5000]
type    = S
movetype= H
physics = N
velset = 0,0
ctrl = 0

;------------------------------------------------------------

[State 5000, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = IfElse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5000, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = var(37) > 0
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5002

[State 5000, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = var(37) > 0
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5002

[State 5000, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = var(37) <= 0
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5000, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = var(37) <= 0
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = Anim

[State 5000, 5] ;State type gets set to aerial if getting hit up
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 && GetHitVar(fall)
trigger2 = Pos Y != 0
type = a

[State 5000, 6]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0
trigger2 = Time >= Floor(GetHitVar(hittime) * 0.3)
trigger2 = life > 0
trigger2 = var(37) > 0
value = 5001 ;HITG_SLIDE

[State 5000, 7]
type = ChangeState
triggerall = HitShakeOver
trigger1 = var(37) <= 0
trigger2 = life <= 0
value = 5030

[State 5000, FFB Light]
type = ForceFeedback
trigger1 = Anim = 5000
trigger2 = Anim = 5010
persistent = 0
time = 6
waveform = square

[State 5000, FFB Medium]
type = ForceFeedback
trigger1 = Anim = 5001
trigger2 = Anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5000, FFB Hard]
type = ForceFeedback
trigger1 = Anim = 5012
trigger2 = Anim = 5002
trigger3 = Anim = 5030
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;--------------------------------------------------------------------------
; HITG_SLIDE
[Statedef 5001]
type    = S
movetype= H
physics = S

[State 5001, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5001, 2]
type = ChangeAnim
trigger1 = var(37) <= 0
trigger1 = AnimTime = 0
value = 5005 + GetHitVar(animtype) + (GetHitVar(groundtype)=2)*10

[State 5001, 3] ;Stop sliding back
type = VelMul
trigger1 = Time >= GetHitVar(slidetime)
x = .6

[State 5001, 4]
type = VelSet
trigger1 = HitOver
x = 0

[State 5001, 5]
type = DefenceMulSet
trigger1 = HitOver
value = 1

[State 5001, 6]
type = ChangeState
trigger1 = var(37) > 0
trigger1 = Time >= Floor(GetHitVar(hittime) * 0.3)
value = 0
ctrl = 1

[State 5001, 6]
type = ChangeState
trigger1 = var(37) <= 0
trigger1 = HitOver
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; HITC_SHAKE
[Statedef 5010]
type    = C
movetype= H
physics = N
velset = 0,0

;----------------------------------------
[State 5010, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = 5020 + GetHitVar(animtype)

[State 5010, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = var(37) <= 0
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5010, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = var(37) <= 0
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5010, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = Anim

[State 5010, 5]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0
trigger2 = Time >= Floor(GetHitVar(hittime) * 0.3)
trigger2 = life > 0
trigger2 = var(37) > 0
value = 5011 ;HITC_SLIDE

[State 5010, 6]
type = ChangeState
triggerall = HitShakeOver
trigger1 = var(37) <= 0
trigger2 = life <= 0
value = 5030

[State 5010, FFB Light]
type = ForceFeedback
trigger1 = Anim = 5020
persistent = 0
time = 6
waveform = square

[State 5010, FFB Medium]
type = ForceFeedback
trigger1 = Anim = 5021
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5010, FFB Hard]
type = ForceFeedback
trigger1 = Anim = 5022
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; HITC_SLIDE
[Statedef 5011]
type    = C
movetype= H
physics = C

[State 5011, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5011, 2]
type = ChangeAnim
trigger1 = var(37) <= 0
trigger1 = AnimTime = 0
value = 5025 + GetHitVar(animtype)

[State 5011, 3] ;Stop sliding back
type = VelMul
trigger1 = Time >= GetHitVar(slidetime)
x = .6

[State 5011, 4]
type = VelSet
trigger1 = HitOver
x = 0

[State 5011, 5]
type = DefenceMulSet
trigger1 = HitOver
value = 1

[State 5011, 6]
type = ChangeState
trigger1 = var(37) > 0
trigger1 = Time >= Floor(GetHitVar(hittime) * 0.3)
value = 11
ctrl = 1

[State 5011, 6]
type = ChangeState
trigger1 = var(37) <= 0
trigger1 = HitOver
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; HITA_SHAKE
[Statedef 5020]
type    = A
movetype= H
physics = N
velset = 0,0
ctrl = 0

;------------------------------------------------------------
[State 5020, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = IfElse((GetHitVar(airtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5020, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5020, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5020, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = Anim

[State 5020, 5]
type = ChangeState
trigger1 = HitShakeOver
value = 5030
ctrl = 0

[State 5820, FFB Light]
type = ForceFeedback
trigger1 = Anim = 5000
trigger2 = Anim = 5010
persistent = 0
time = 6
waveform = square

[State 5020, FFB Medium]
type = ForceFeedback
trigger1 = Anim = 5001
trigger2 = Anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5020, FFB Hard]
type = ForceFeedback
trigger1 = Anim = 5012
trigger2 = Anim = 5002
trigger3 = Anim = 5030
trigger4 = Anim = [5051,5059]
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; HIT_BOUNCE (hit ground)
[Statedef 5100]
type    = L
movetype= H
physics = N
ctrl = 0

; Play "ouch" when landing on back
[State 5100, ouch]
type = PlaySnd
trigger1 = life > 0
trigger1 = Time = 0
value = 1,8
volume = 70

[State 5100, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
trigger1 = Vel x > 1
x = 1

[State 5100, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5100, Var] ;Save fall velocity
type = VarSet
trigger1 = Time = 0
;trigger1 = GetHitVar(fall.yvel) = 0
sysvar(1) = floor(vel y)

[State 5100, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = Time = 0
trigger1 = (anim != [5051,5059]) && (anim != [5061,5069])
trigger2 = !SelfAnimExist(5100 + (anim % 10))
value = 5100

[State 5100, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (anim = [5051,5059]) || (anim = [5061,5069])
trigger1 = SelfAnimExist(5100 + (anim % 10))
value = 5100 + (anim % 10)

[State 5100, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5100, 5]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5100, 6] ;Reduce speed
type = VelMul
trigger1 = Time = 0
x = 0.75

[State 5100, 7]
type = ChangeState
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
value = 5110 ;HIT_LIEDOWN

[State 5100, 8]
type = GameMakeAnim
trigger1 = Time = 1
value = 60 + (SysVar(1) > 5) + (SysVar(1) > 14)
pos = 0, 0
under = SysVar(1) <= 10

[State 5100, 9]
type = HitFallDamage
trigger1 = Time = 3

[State 5100, 10]
type = PlaySnd
trigger1 = Time = 1
;value = F7, 0 ;Hit ground
value = F7, (SysVar(1) > 5) + (SysVar(1) > 14)

[State 5100, 11]
type = PosFreeze
trigger1 = 1

[State 5100, 12]
type = ChangeState
trigger1 = AnimTime = 0
value = 5101

[State 5100, 13]
type = ForceFeedback
trigger1 = Time = 0
waveform = sinesquare
ampl = 128,-3,-.2,.005
time = 20

;---------------------------------------------------------------------------
; HIT_GETUP
[Statedef 5120]
type    = L
movetype= I
physics = N
ctrl = 0

[State 5120, 1a] ;Get up anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim != [5111,5119]
trigger2 = !SelfAnimExist(5120 + (anim % 10))
value = 5120

[State 5120, 1b] ;Get up anim (for hit up/diag-up)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = [5111,5119]
trigger1 = SelfAnimExist(5120 + (anim % 10))
value = 5120 + (anim % 10)

[State 5120, 2]
type = VelSet
trigger1 = Time = 0
x = 0

[State 5120, 3]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 5120, 4]
type = HitFallSet
trigger1 = AnimTime = 0
value = 1

[State 5120, 5] ;Can't be thrown right after getting up
type = NotHitBy
trigger1 = AnimTime = 0
value = , NT,ST,HT
time = 12

[State 5120, 6] ;Can't be hit right after getting up (short time)
type = NotHitBy
trigger1 = AnimTime = 0
value2 = SCA
time = 3

[State 5120, 7]
type = ChangeState
trigger1 = var(11) >= 1000
trigger1 = AnimTime = 0
value = 5250
ctrl = 0

[State 5120, 7]
type = ChangeState
trigger1 = var(11) < 1000
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; HIT_LIEDEAD
[Statedef 5150]
type    = L
movetype= H
physics = N
sprpriority = -3

[State 5150, 1] ;Normal anim
type = ChangeAnim
triggerall = Time = 0
triggerall = SelfAnimExist(5140)
trigger1 = (anim != [5111,5119]) && (anim != [5171,5179])
trigger2 = !SelfAnimExist(5140 + (anim % 10))
value = 5140

[State 5150, 3] ;Hit up type anim
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (anim = [5111,5119]) || (anim = [5171,5179])
trigger1 = SelfAnimExist(5140 + (anim % 10))
value = 5140 + (anim % 10)

[State 5150, 4] ;Match over anim
type = ChangeAnim
persistent = 0
;trigger1 = Time = 0
trigger1 = MatchOver = 1
trigger1 = Anim = [5140,5149]
trigger1 = SelfAnimExist(anim+10)
value = anim+10

[State 5150, 5] ;Switch to 5110 if liedead anim does not exist
type = ChangeAnim
trigger1 = Time = 0
trigger1 = Anim != [5140,5159]
trigger1 = Anim != [5110,5119]
value = 5110

[State 5150, 6] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 5150, 7] ;Friction
type = VelSet
trigger1 = Vel x < .05
persistent = 0
x = 0

[State 5150, 8]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; HIT SHAKE
[Statedef 671]
type    = A
movetype= H
physics = N
velset = 0,0

[State 671, 1] 
type = ChangeAnim2
trigger1 = Time = 0
value = 671

[State 671, 2] ;Freeze anim
type = ChangeAnim2
trigger1 = Time > 0
value = anim

[State 671, 3]
type = ChangeState
trigger1 = HitShakeOver
value = 672

[State 671, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; FALL
[Statedef 672]
type    = A
movetype= H
physics = N

[State 672, 1]
type = VelAdd;Gravity
trigger1 = 1
y = GetHitVar(yaccel)

[State 672, 2]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 672, 1] 
type = ChangeAnim2
trigger1 = Time = 0
value = 672

[State 672, 2]
type = ChangeState
trigger1 = vel y > 0 && pos y >= 0
value = 673

;---------------------------------------------------------------------------
;SMASH
[Statedef 673]
type    = L
movetype= H
physics = N
velset = 0,0

[State 673, 9]
type = HitFallDamage
trigger1 = Time = 3

[State 673, EnvShake]
type = EnvShake
trigger1 = time = 0
time = 12
ampl = -5
freq = 180

[State 673, posset] 
type = posset 
trigger1 = Time = 0
y = 0

[State 673, posset] 
type = posadd 
trigger1 = Time = 0
x = -20

[State 673, 1] 
type = ChangeAnim2
trigger1 = Time = 0
value = 673

[State 673, 2]
type = changestate
trigger1 = animtime = 0
value = 674

[State 673, 3]
type = GameMakeAnim
trigger1 = Time = 0
value = 61
pos = 0, 0
under = SysVar(1) <= 10

[State 673, 4]
type = PlaySnd
trigger1 = Time = 1
;value = F7, 0 ;Hit ground
value = F7, (SysVar(1) > 5) + (SysVar(1) > 14)

[State 673, 5]
type = ForceFeedback
trigger1 = time = 0
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
;Bounce
[Statedef 674]
type    = L
movetype= H
physics = N
velset = -1,-6

[State 673, posset] 
type = posadd 
trigger1 = animelem = 2
y = -10
x = -5

[State 674, Gravity] 
type = Veladd
trigger1 = Time > 0
y = .5

[State 674, 1] 
type = ChangeAnim2
trigger1 = Time = 0
value = 674

[State 674, 2]
type = selfstate
trigger1 = vel y > 0 && pos y >= -10
value = 5110

;$$$$$$$$$$$$$$$$$$$$$$
;Rolls & Dodge
;$$$$$$$$$$$$$$$$$$$$$$
;Roll (forwards)
[Statedef 700]
type = S
movetype = I
physics = N
anim = 700
poweradd = 0
velset = 0,0
ctrl = 0

[State 700, PowerAdd]
type = PowerAdd
triggerall = Time = 0
trigger1 = Prevstateno = 150
trigger2 = Prevstateno = 151
value = -1000

[State 700, Palfx]
type = Palfx
triggerall = Time = 0
trigger1 = Prevstateno = 150
trigger2 = Prevstateno = 151
time = 5
add = 230,230,230

[State 700, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 5,0
channel = 0

[State 700, 2]
type = HitBy
trigger1 = AnimElem = 6, <=2
value = SCA, NT, ST, HT

[State 700, AFTER]
type = AfterImage
trigger1 = animelem = 2
time = 10
PalBright = 0, 0, 0
PalContrast =  250,250,250
PalAdd = 0, 0, 0
PalMul = 1,1,1
Length = 6
FrameGap = 2

[State 700, 5]
type = SprPriority
trigger1 = Time = 8
value = -1

[State 700, 6]
type = VelSet
trigger1 = AnimElem = 3
x = 5.7

[State 700, 7]
type = VelAdd
trigger1 = AnimElem = 3, >= 0
trigger1 = AnimElem = 7, < 0
x = -.10

[State 700, 8]
type = VelSet
trigger1 = AnimElem = 7,>=0
x = 0

[State 700, 9]
type = PlayerPush
trigger1 = Time < 25
value = 0

[State 700, 10]
type = PlayerPush
trigger1 = Time >= 25
value = 1

[State 700, 11]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;Roll (BAck)
[Statedef 701]
type = S
movetype = I
physics = N
anim = 701
poweradd = 0
velset = 0,0
ctrl = 0

[State 710, Poweradd]
type = Poweradd
triggerall = Time = 0
trigger1 = Prevstateno = 150
trigger2 = Prevstateno = 151
value = -1000

[State 710, Palfx]
type = Palfx
triggerall = Time = 0
trigger1 = Prevstateno = 150
trigger2 = Prevstateno = 151
time = 5
add = 230,230,230

[State 700, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 5,0
channel = 0

[State 701, 2]
type = HitBy
trigger1 = AnimElem = 6, <=2
value = SCA, NT, ST, HT

[State 701, 3]
type = VarSet
trigger1 = Time = 0
var(1) = 0

[State 701, AFTER]
type = AfterImage
trigger1 = animelem = 2
time = 10
PalBright = 0, 0, 0
PalContrast =  250,250,250
PalAdd = 0, 0, 0
PalMul = 1,1,1
Length = 6
FrameGap = 2

[State 701, 5]
type = SprPriority
trigger1 = Time = 8
value = -1

[State 700, 6]
type = VelSet
trigger1 = AnimElem = 3
x = -5.7

[State 700, 7]
type = VelAdd
trigger1 = AnimElem = 3, >= 0
trigger1 = AnimElem = 7, < 0
x = .10

[State 700, 8]
type = VelSet
trigger1 = AnimElem = 7,>=0
x = 0

[State 701, 9]
type = PlayerPush
trigger1 = Time < 25
value = 0

[State 701, 10]
type = PlayerPush
trigger1 = Time >= 25
value = 1

[State 701, 11]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;===================================================
;Roll (BAck) COUNTER
[Statedef 710]
type = S
movetype = I
physics = N
anim = 704
velset = 0,0
ctrl = 0

[State 710, 1]
type = SuperPause
trigger1 = Time = 0
persistent = 1
ignorehitpause
time = 1
pos = -7,-90
poweradd = -1000
movetime = 1
darken = 0
anim = -1


[State 710, 1]
type = PlaySnd
trigger1 = Time = 0
value = 5,1
volume = 0
channel = 0

[State 710, 2]
type = HitBy
trigger1 = AnimElem = 9, <=5
value = SCA, NT, ST, HT

[State 710, AFTER]
type = AfterImage
trigger1 = Time = 3
time = 30
trans = add1
timegap = 2
framegap = 1
length = 4

[State 710, 5]
type = SprPriority
trigger1 = Time = 8
value = -1

[State 700, 6]
type = VelSet
trigger1 = AnimElem = 4
x = -5.7

[State 700, 7]
type = VelAdd
trigger1 = AnimElem = 4, >= 0
trigger1 = AnimElem = 8, < 0
x = .10

[State 700, 8]
type = VelSet
trigger1 = AnimElem = 8,>=0
x = 0

[State 710, 9]
type = PlayerPush
trigger1 = Time < 25
value = 0

[State 710, 10]
type = PlayerPush
trigger1 = Time >= 25
value = 1

[State 710, 11]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;Roll (forwards) COUNTER
[Statedef 711]
type = S
movetype = I
physics = N
anim = 705
velset = 0,0
ctrl = 0

[State 711, SP]
type = SuperPause
trigger1 = Time = 0
persistent = 1
ignorehitpause
time = 1
pos = -7,-90
poweradd = -1000
movetime = 1
darken = 0
anim = -1

[State 711, 1]
type = PlaySnd
trigger1 = Time = 0
value = 5,1
volume = 0
channel = 0

[State 711, 2]
type = HitBy
trigger1 = animelem = 10, <=4
value = SCA, NT, ST, HT

[State 701, AFTER]
type = AfterImage
trigger1 = Time = 3
time = 30
trans = add1
timegap = 2
framegap = 1
length = 4

[State 711, 5]
type = SprPriority
trigger1 = Time = 8
value = -1

[State 700, 6]
type = VelSet
trigger1 = AnimElem = 4
x = 5.7

[State 700, 7]
type = VelAdd
trigger1 = AnimElem = 4, >= 0
trigger1 = AnimElem = 8, < 0
x = -.10

[State 711, 8]
type = VelSet
trigger1 = AnimElem = 8,>=0
x = 0

[State 711, 9]
type = PlayerPush
trigger1 = Time < 25
value = 0

[State 711, 10]
type = PlayerPush
trigger1 = Time >= 25
value = 1

[State 711, 11]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Standing knockdown attack counter
[Statedef 712]
type = S
movetype = A
physics = S
anim = 712
juggle = 15
velset = 0,0
ctrl = 0

[State 712,1]
type = NotHitBy
trigger1 = time <= 9
value = SCA

[State 712, AFTER]
type = AfterImage
trigger1 = Time = 4
time = 7
PalBright = 0, 0, 0
PalContrast =  250,250,250
PalAdd = 0, 0, 0
PalMul = 1,1,1
Length = 9
FrameGap = 3

[State 280, Posadd1]
type = posadd
trigger1 = AnimElem = 4
x = 8

[State 280, Posadd1]
type = posadd
trigger1 = AnimElem = 4,=1
x = 7

[State 712, SP]
type = SuperPause
trigger1 = Time = 0
persistent = 0
ignorehitpause
time = 3
pos = -7,-90
poweradd = -1000
movetime = 0
darken = 0
anim = S999999999

[State 260, 1]
type = PlaySnd
trigger1 = Time = 4
value = 8,0
channel = 0

[State 260, 2]
type = PlaySnd
trigger1 = Time = 2
value = s0,2

[State 712, 5]
type = HitDef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = p2stateno != [1014,1019]
trigger1 = AnimElem = 5
attr = S, NA
damage = 10
hitflag = MAF
guardflag = MA
animtype = Hard
ground.animtype = low
pausetime = 11,13
sparkno = S8010
guard.sparkno = S8110
sparkxy = -1,-48
hitsound = S250,0
guardsound = S201,1
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -4,-8
air.velocity = -4,-7
air.cornerpush.veloff = -0
ground.cornerpush.veloff = -0
guard.velocity = -11
fall = 1
fall.recovertime = 35
guard.velocity = -12
getpower = 0,0
givepower = 21,21
fall.yvelocity = -3.4
guard.pausetime = 11,11
guard.slidetime = 22
;guard.hittime = 44
;guard.ctrltime = 44
yaccel = .55


[State 712, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;--------------------------------------------------------------------------------

;Intros,Taunt,Wins
[Statedef 191]
type = S
physics = S
ctrl = 0
velset = 0,0

[State 191, reset]
type = varset
trigger1 = p2Name = "Takuma Sakazaki" || p4Name = "Takuma Sakazaki"
trigger2 = p2Name = "Takuma" || p4Name = "Takuma"
trigger3 = p2Name = "Yuri Sakazaki" || p4Name = "Yuri Sakazaki"
trigger4 = p2Name = "Yuri" || p4Name = "Yuri"
trigger5 = p2Name = "Ryo Sakazaki" || p4Name = "Ryo Sakazaki"
trigger6 = p2Name = "Ryo" || p4Name = "Ryo"
trigger7 = p2Name = "Marco Rodriguez" || p4Name = "Marco Rodriguez"
trigger8 = p2Name = "Marco" || p4Name = "Marco"
trigger9 = p2Name = "Yuri98" || p4Name = "Yuri98"
trigger10 = p2Name = "Ryo_XI" || p4Name = "Ryo_XI"
var(6) = 1

[State 191, reset]
type = varset
trigger1 = p2Name = "Kensou" || p4Name = "Kensou"
trigger2 = p2Name = "Sie Kensou" || p4Name = "Sie Kensou"
trigger3 = p2Name = "Kensou Sie" || p4Name = "Kensou Sie"
var(5) = 1

[State 191, reset]
type = varset
trigger1 = p2Name = "Mr.Karate" || p4Name = "Mr.Karate"
trigger2 = p2Name = "MrKarate" || p4Name = "MrKarate"
var(12) = 1

[State 191, 1] ; Intro Kyokugen
type = Changestate
trigger1 = var(6)
value = 192
ctrl = 0

[State 191, 1] ; Intro Kensou
type = Changestate
trigger1 = var(5)
value = 193
ctrl = 0

[State 191, 1] ; Intro Mr.Karate
type = Changestate
trigger1 = var(12)
value = 194
ctrl = 0

[State 191, 3] ; Alternate Intro
type = Changestate
trigger1 = time = 0
value = 190
ctrl = 0

; Alternate Intro
[Statedef 190]
type = S
physics = S
ctrl = 0
anim = 190
velset = 0,0

[State 190, 1] ;Intro not yet over
type = AssertSpecial
trigger1 = Time = [0,169]
flag = Intro

[State 190, 2]
type = Playsnd
trigger1 = animelem = 2
trigger2 = animelem = 7
value = 190,3
channel = 1

[State 190, 2]
type = Playsnd
trigger1 = animelem = 13
value = 190,1
channel = 0

[State 190, 3]
type = Changestate
trigger1 = Time >= 169
value = 0

;------------------------------------------------------------------------
; Intro vs Kyokugen
[Statedef 192]
type = S
physics = S
ctrl = 0
anim = 192
velset = 0,0

[State 192, 1] ;Intro not yet over
type = AssertSpecial
trigger1 = Time = [0,234]
flag = Intro

[State 192, 3]
type = Changestate
trigger1 = Time >= 234
value = 0

; Intro vs Kensou
[Statedef 193]
type = S
physics = S
ctrl = 0
anim = 193
velset = 0,0

[State 193, 1] ;Intro not yet over
type = AssertSpecial
trigger1 = Time = [0,240]
flag = Intro

[State 193, 2]
type = Playsnd
trigger1 = animelem = 9
value = 190,2
channel = 0

[State 193, 3]
type = Changestate
trigger1 = Time >= 240
value = 0

; Intro vs Mr.Karate
[Statedef 194]
type = S
physics = S
ctrl = 0
anim = 194
velset = 0,0

[State 193, 1] ;Intro not yet over
type = AssertSpecial
trigger1 = Time = [0,258]
flag = Intro

[State 193, 3]
type = Changestate
trigger1 = Time >= 258
value = 0



;---------------------------------------------------------------------------
; Time over
[Statedef 170]
type = S
anim = 170

[State 170, 1]
type = AssertSpecial
trigger1 = Time = [0,280]
flag = RoundNotOver

;---------------------------------------------------------------------------
; Taunt
[Statedef 195]
type = S
movetype = I
physics = S
anim = 195
velset = 0,0
ctrl = 0

[State 195, SND1]
type = PlaySnd
trigger1 = Time = 2
value = 195,2
channel = 0

[State 195, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------------------------------
; Win
[Statedef 180]
type = S
velset = 0

[State 180, 7]
type = ChangeState
trigger1 = var(6)
value = 184

[State 180, 1]
type = VarRandom
trigger1 = Time = 0
v = 2
range = 0,99

[State 180, 7]
type = ChangeState
trigger1 = Var(2) = [81,99]
value = 186

[State 180, 7]
type = ChangeState
trigger1 = Var(2) = [61,80]
value = 185

[State 180, 8]
type = ChangeState
trigger1 = Var(2) = [41,60]
value = 182

[State 180, 9]
type = ChangeState
trigger1 = Var(2) = [21,40]
value = 183

[State 180, 11]
type = ChangeState
trigger1 = Var(2) = [0,20]
value = 181

;------------------------------------------------------------

; Win pose A
[Statedef 181]
type = S
anim = 180

[State 181, 1]
type = PlaySnd
trigger1 = AnimElem = 6
value = 181,1
channel = 0

[State 181, 1]
type = AssertSpecial
trigger1 = Time = [0,100]
flag = RoundNotOver


; Win pose B
[Statedef 182]
type = S
anim = 181

[State 182, 2]
type = PlaySnd
trigger1 = AnimElem = 7
value = 181,3
channel = 1

[State 182, 2]
type = PlaySnd
trigger1 = AnimElem = 10
value = 6,1
channel = 1

[State 182, 4]
type = Helper
trigger1 = AnimElem = 7
ID = 1391
pos = -44,-102
postype = p1
stateno = 1391
name = "coin"
helpertype = normal
keyctrl = 0
ownpal = 1

;Coin
[Statedef 1391]
type = A
anim = 1391
physics = N
velset = 0,-7

[State 1391, 1]
type = VelAdd
trigger1 = Time >= 0
y = .37


[State 1391, 2]
type = DestroySelf
trigger1 = time = 37


; Win pose C
[Statedef 183]
type = S
anim = 182

[State 183, 1]
type = AssertSpecial
trigger1 = Time = [0,100]
flag = RoundNotOver

[State 183, 2]
type = PlaySnd
trigger1 = AnimElem = 5
value = 181,5
channel = 0


; Win pose D
[Statedef 185]
type = S
anim = 184

[State 184, 1]
type = AssertSpecial
trigger1 = Time = [0,200]
flag = RoundNotOver

[State 182, 2]
type = PlaySnd
trigger1 = AnimElem = 7
value = 181,3
channel = 1

[State 182, 4]
type = Helper
trigger1 = AnimElem = 7
ID = 1392
pos = -44,-102
postype = p1
stateno = 1392
name = "coin"
helpertype = normal
keyctrl = 0
ownpal = 1

;Coin
[Statedef 1392]
type = A
anim = 1391
physics = N
velset = 0,0

[State 182, 2]
type = PlaySnd
trigger1 = time = 48
value = 181,4
channel = 1

[State 1392, 1]
type = Sprpriority
trigger1 = Time = 0
value = 5

[State 1392, 1]
type = Velset
trigger1 = Time = 0
y = -7

[State 1392, 1]
type = VelAdd
trigger1 = Time <= 48
y = .37

[State 1392, 1]
type = Velset
trigger1 = Time = 48
y = 0

[State 1392, 1]
type = Velset
trigger1 = Time = 49
x = 3
y = -1

[State 1392, 1]
type = VelAdd
trigger1 = Time >= 49
y = .37

[State 1392, 1]
type = Velset
trigger1 = Time = 55
y = 0

[State 1392, 1]
type = Velset
trigger1 = Time = 56
x = 2
y = -1

[State 1392, 1]
type = VelAdd
trigger1 = Time >= 63
y = -.37

[State 1392, 1]
type = Velset
trigger1 = Time = 63
x = 0
y = 0

[State 1392, 1]
type = Changeanim
trigger1 = Time = 63
value = 1392

; Win pose VS Kyokugen
[Statedef 184]
type = S
anim = 183

[State 184, 1]
type = AssertSpecial
trigger1 = Time = [0,150]
flag = RoundNotOver

[State 184, 2]
type = PlaySnd
trigger1 = AnimElem = 6
value = s0,2
channel = 1


; Win pose E
[Statedef 186]
type = S
anim = 185

[State 183, 1]
type = AssertSpecial
trigger1 = Time = [0,100]
flag = RoundNotOver

[State 183, 2]
type = PlaySnd
trigger1 = AnimElem = 4
value = 181,2
channel = 0

;========================================
;THROWS
;========================================
;Throw Y
[Statedef 350]
type    = S
movetype= A
physics = S
juggle  = 15
velset = 0,0
ctrl = 0
anim = 350
sprpriority = 5

[State 350, 2]
type = HitDef
trigger1 = var(4)<=0
Trigger1 = Time = 0
attr = S, NT          
hitflag = M-          
priority = 4, Miss    
sparkno = -1          
sprpriority = 1  
hitsound = -1
p2facing = 1          
p1stateno = 351       
p2stateno = 352    
fall = 1   
ground.velocity = -4,-8
yaccel = .5
fall.yvelocity = -3.4

[State 350, 3]
type = ChangeState
trigger1 = MoveContact = 0
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;Success
[Statedef 351] 
type    = S
movetype= A
physics = S
anim = 351
sprpriority = 2

[State 351, 1]
type = Width
trigger1 = animelem = 3, < 0
edge = 50,20

[State 351, 1]
type = Width
trigger1 = animelem = 3, >= 0
edge = 0,0

[State 2725, Posadd1]
type = Velset
trigger1 = animelem = 9, =10
y = -7.7

[State 2725, Posadd1]
type = Veladd
trigger1 = time > 33
y = 0.43

[State 2725, Posadd1]
type = Posadd
trigger1 = time > 33
x = -2

[State 351, 2]
type = Explod
trigger1 = AnimElem = 9, =1
id = 8020
anim = 8020
pos = 52,-64
sprpriority = 5
ownpal = 1
removeongethit = 1

[State 301, Bind1]
type = TargetBind
trigger1 = AnimElem = 1
pos = 32, 0
time = 1

[State 301, Wave]
type = PlaySnd
trigger1 = AnimElem = 6;, =1
value = 200,5

[State 301, Hit]
type = PlaySnd
trigger1 = AnimElem = 9, =2
value = 250,0

[State 301, DAMAGE]
type = targetlifeadd
Trigger1 = AnimElem = 9, =1
value = -140

[State 301, Voice Snd]
type = PlaySnd
trigger1 = AnimElem = 7, =1
value = 5,0
channel = 0

[State 301, Cancel Var]
type = varset
Trigger1 = Time = [0,7]
trigger1 = target, command = "x" || target, command = "y" || target, command = "a" || target, command = "b"
var(7) = 1

[State 301, Cancel]
type = changestate
Trigger1 = Time = [5,7]
trigger1 = var(7) = 1
value = 355

[State 301, Cancel]
type = targetstate
Trigger1 = Time = [5,7]
trigger1 = var(7) = 1
value = 306

[State 301, Cancel Var]
type = varset
Trigger1 = animtime = 0
var(7) = 0


[State 301, 2]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 354


;LAND
[Statedef 354]
type = S
movetype = A
physics = S
anim = 354
velset = 0,0
juggle = 0
ctrl = 0

[State 354, 1]
type = posset
trigger1 = Time = 0
y = 0

[State 354, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;(GRABBED)
[Statedef 352]
type    = A
movetype= H ;Get hit
physics = N
sprpriority = -2
ctrl = 0
velset = 0,0

[State 2730, 2]
type = velset
Trigger1 = Time = 0
value = 0,0


[State 2730, SB]
type = Screenbound
Trigger1 = 1
value = 0

[State 2730, 2]
type = ChangeAnim2
Trigger1 = Time = 0
value = 352

[State 2730, liftoff]
type = Changestate
Trigger1 = AnimTime = 0
value = 1300
ctrl = 0

;Throw B
;---------------------------------------------------------------------------
;GrabB
[Statedef 360]
type    = S
movetype= A
physics = S
juggle  = 15
velset = 0,0
ctrl = 0
anim = 360
sprpriority = 5

[State 360, 2]
type = HitDef
trigger1 = var(4)<=0
Trigger1 = Time = 0
attr = S, NT          
hitflag = M-          
priority = 4, Miss    
sparkno = -1          
sprpriority = 1  
hitsound = -1
p2facing = 1          
p1stateno = 361       
p2stateno = 362    
fall = 1   
ground.velocity = -4,-7
yaccel = .5
fall.yvelocity = -3.4

[State 360, 3]
type = ChangeState
trigger1 = MoveContact = 0
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;Success
[Statedef 361] 
type    = S
movetype= A
physics = S
anim = 361
sprpriority = 2

[State 361, Turn]
type = Turn
Trigger1 = animelem = 8

[State 351, 1]
type = Width
trigger1 = animelem = 3, < 0
edge = 50,20

[State 351, 1]
type = Width
trigger1 = animelem = 3, >= 0
edge = 0,0

[State 301, 2]
type = Explod
trigger1 = AnimElem = 2
id = 8030
anim = 8030
pos = 52,-72
sprpriority = 3
ownpal = 1
removeongethit = 1
removetime = 11

[State 301, Bind1]
type = TargetBind
trigger1 = AnimElem = 1
pos = 48, 0
time = 1

[State 301, Bind2]
type = TargetBind
trigger1 = AnimElem = 2
pos = 48, 0
time = 1

[State 301, Bind3]
type = TargetBind
trigger1 = AnimElem = 3
pos = 50, -97
time = 1

[State 301, Bind4]
type = TargetBind
trigger1 = AnimElem = 4
pos = 40, -85
time = 1

[State 301, Bind5]
type = TargetBind
trigger1 = AnimElem = 5
pos = 14, -106
time = 1

[State 301, Bind6]
type = TargetBind
trigger1 = AnimElem = 6
pos = -25, -79
time = 1

[State 301, Bind6]
type = TargetBind
trigger1 = AnimElem = 7
pos = -64, 0
time = 1

[State 361, EnvShake]
type = EnvShake
trigger1 = AnimElem = 7
time = 12
ampl = -6
freq = 90

[State 301, Crunchy]
type = PlaySnd
trigger1 = AnimElem = 7
value = 6,2

[State 301, DAMAGE]
type = targetlifeadd
Trigger1 = AnimElem = 7
value = -140

[State 301, Grab Snd]
type = PlaySnd
trigger1 = AnimElem = 2
volume = 10
value = 6,1

[State 301, Voice Snd]
type = PlaySnd
trigger1 = AnimElem = 6
value = 8,0
channel = 0

[State 301, Cancel Var]
type = varset
Trigger1 = Time = [0,7]
trigger1 = target, command = "x" || target, command = "y" || target, command = "a" || target, command = "b"
var(7) = 1

[State 301, Cancel]
type = changestate
Trigger1 = Time = [5,7]
trigger1 = var(7) = 1
value = 355

[State 301, Cancel]
type = targetstate
Trigger1 = Time = [5,7]
trigger1 = var(7) = 1
value = 306

[State 301, Cancel Var]
type = varset
Trigger1 = animtime = 0
var(7) = 0


[State 301, end]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;(GRABBED)
[Statedef 362]
type    = A
movetype= H ;Get hit
physics = N
sprpriority = -1
ctrl = 0
velset = 0,0

[State 2730, 2]
type = velset
Trigger1 = Time = 0
value = 0,0

[State 313, 1] 
type = turn
trigger1 = animelem = 6


[State 361, 1]
type = Width
trigger1 = time >= 0
edge = 0,0

[State 362, 1]
type = ScreenBound
Trigger1 = Time >= 0
value = 0

[State 362, 2]
type = ChangeAnim2
Trigger1 = Time = 0
value = 362

[State 302, liftoff]
type = changestate
Trigger1 = AnimTime = 0
value = 363
ctrl = 0

;SMASH
[Statedef 363]
type    = L
movetype= H
physics = N
sprpriority = 0
velset = 0,0

[State 355, Cancel]
type = turn
Trigger1 = time = 0

[State 353, posset] 
type = posset 
trigger1 = Time = 0
y = 0


[State 353, 1] 
type = ChangeAnim2
trigger1 = Time = 0
value = 363

[State 353, 2]
type = changestate
trigger1 = animtime = 0
value = 364

[State 353, 3]
type = GameMakeAnim
trigger1 = Time = 0
value = 61
pos = 0, 0
under = SysVar(1) <= 10

[State 353, 4]
type = PlaySnd
trigger1 = Time = 1
;value = F7, 0 ;Hit ground
value = F7, (SysVar(1) > 5) + (SysVar(1) > 14)
volume = 100

[State 353, 5]
type = ForceFeedback
trigger1 = time = 0
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;Bounce
[Statedef 364]
type    = L
movetype= H
physics = N
velset = 4.5,-5.5

[State 354, Var] ;Get fall velocity
type = VarSet
trigger1 = Time = 1
sysvar(4) = floor(vel x)

[State 354, posset] 
type = posadd 
trigger1 = animelem = 2
y = -10
x = -5

[State 354, Gravity] 
type = Veladd
trigger1 = Time > 0
y = .5

[State 354, 1] 
type = ChangeAnim2
trigger1 = Time = 0
value = 501

[State 354, 2]
type = selfstate
trigger1 = vel y > 0 && pos y >= -10
value = 5100;1320
ctrl = 0


;P1 Miss
[Statedef 355]
type    = S
movetype= I ;Get hit
physics = S
velset = -12,0
anim = 355
ctrl = 0

[State 355, Cancel]
type = targetstate
Trigger1 = time = 0
value = 306

[State 355, MD]
type = makedust
Trigger1 = 1
pos = 0,0
spacing = 3

[State 351, Cancel Var]
type = varset
Trigger1 = animtime = 0
var(7) = 0


[State 351, Cancel Snd]
type = PlaySnd
trigger1 = AnimElem = 3
value = 250,0

[State 355, END]
type = changestate
Trigger1 = AnimTime = 0
value = 0
ctrl = 1


;P2 Counter
[Statedef 306]
type    = S
movetype= I ;Get hit
physics = S
velset = 0,0
ctrl = 0

[State 356, ANIM1]
type = changeanim
trigger1 = selfanimexist(306)
Trigger1 = time = 0
value = 306

[State 356, ANIM2]
type = changeanim
trigger1 = !selfanimexist(306)
trigger1 = selfanimexist(200)
Trigger1 = Time = 0
value = 200

[State 356, END]
type = selfstate
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;========================================
;BASIC ATTACKS
;========================================
;Standing Light Punch
[Statedef 200]
type = S
movetype = A
physics = S
anim = 200
velset = 0,0
juggle = 10
poweradd = 0
hitcountpersist = 1
ctrl = 0

[State 260, 1]
type = PlaySnd
trigger1 = Time = 4
trigger1 = Random < 750
value = 5,0
channel = 0

[State 260, 2]
type = PlaySnd
trigger1 = Time = 2
value = s0,0

[State 200, 3]
type = HitDef
trigger1 = (p2stateno != [5020,5040])
trigger1 = p2stateno != [1014,1019]
trigger1 = p2stateno != [154,155]
trigger1 = AnimElem = 2
attr = S, NA
animtype = light
damage = 49
priority = 7, Hit
guardflag = MA
pausetime = 13,13
sparkno = S8000
guard.sparkno = S8100
sparkxy = 0,-78
hitsound = S210,0
guardsound = S201,1
ground.type = low
ground.slidetime = 9
ground.hittime = 9
ground.velocity = -6.5
air.velocity = -3.5,-6
guard.velocity = -6.5
air.cornerpush.veloff = -0
getpower = 60,60
givepower = 21,21
guard.pausetime = 11,11
guard.slidetime = 10
;guard.hittime = 20
;guard.ctrltime = 20
air.juggle = 15
yaccel = .5
fall.yvelocity = -3.4

[State 200, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;Standing Light Punch (close)
[Statedef 210]
type = S
movetype = A
physics = S
anim = 210
velset = 0,0
juggle = 10
poweradd = 0
hitcountpersist = 1
ctrl = 0

[State 260, 1]
type = PlaySnd
trigger1 = Time = 4
trigger1 = Random < 750
value = 5,0
channel = 0

[State 260, 2]
type = PlaySnd
trigger1 = Time = 2
value = s0,0

[State 210, 3]
type = HitDef
trigger1 = (p2stateno != [5020,5040])
trigger1 = p2stateno != [1014,1019]
trigger1 = p2stateno != [154,155]
trigger1 = AnimElem = 3
attr = S, NA
animtype = light
damage = 40
priority = 7, Hit
guardflag = MA
pausetime = 13,13
sparkno = S8000
guard.sparkno = S8100
sparkxy = -4,-92
hitsound = S210,0
guardsound = S201,1
ground.type = high
ground.slidetime = 9
ground.hittime = 9
ground.velocity = -6.5
air.velocity = -3.5,-6
guard.velocity = -6.5
getpower = 60,60
givepower = 21,21
guard.pausetime = 11,11
guard.slidetime = 10
;guard.hittime = 20
;guard.ctrltime = 20
air.cornerpush.veloff = -0
air.juggle = 15
yaccel = .5
fall.yvelocity = -3.4

[State 210, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Standing light kick
[Statedef 220]
type = S
movetype = A
physics = S
anim = 220
velset = 0,0
juggle = 10
poweradd = 0
ctrl = 0

[State 260, 1]
type = PlaySnd
trigger1 = Time = 4
trigger1 = Random < 750
value = 5,0
channel = 0

[State 260, 2]
type = PlaySnd
trigger1 = Time = 2
value = s0,2

[State 220, 3]
type = HitDef
trigger1 = (p2stateno != [5020,5040])
trigger1 = p2stateno != [1014,1019]
trigger1 = p2stateno != [154,155]
trigger1 = AnimElem = 3
attr = S, NA
animtype = light
hitflag = MAF
damage = 58
guardflag = MA
pausetime = 13,13
priority = 7, Hit
sparkno = S8000
guard.sparkno = S8100
sparkxy = -11,-48
hitsound = S220,0
guardsound = S201,1
ground.type = high
ground.slidetime = 9
ground.hittime = 9
ground.velocity = -6.5
air.velocity = -3.5,-6
airguard.velocity = -3.5,-1
air.cornerpush.veloff = -0
guard.pausetime = 11,11
guard.slidetime = 10
;guard.hittime = 20
;guard.ctrltime = 20
getpower = 60,60
givepower = 21,21
air.juggle = 15
yaccel = .5
fall.yvelocity = -3.4

[State 220, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Standing light kick (close)
[Statedef 230]
type = S
movetype = A
physics = S
anim = 230
velset = 0,0
juggle = 10
poweradd = 0
ctrl = 0

[State 260, 1]
type = PlaySnd
trigger1 = Time = 4
trigger1 = Random < 750
value = 5,0
channel = 0

[State 260, 2]
type = PlaySnd
trigger1 = Time = 2
value = s0,2

[State 230, 3]
type = HitDef
trigger1 = (p2stateno != [5020,5040])
trigger1 = p2stateno != [1014,1019]
trigger1 = p2stateno != [154,155]
trigger1 = AnimElem = 3
attr = S, NA
animtype = light
hitflag = MA
damage = 58
guardflag = L
pausetime = 13,13
priority = 7, Hit
sparkno = S8000
guard.sparkno = S8100
sparkxy = -1,-20
hitsound = S220,0
guardsound = S201,1
ground.type = low
ground.slidetime = 9
ground.hittime = 9
ground.velocity = -6.5
air.velocity = -3.5,-6
airguard.velocity = -3.5,-1
air.cornerpush.veloff = -0
guard.pausetime = 11,11
guard.slidetime = 10
;guard.hittime = 20
;guard.ctrltime = 20
getpower = 60,60
givepower = 21,21
air.juggle = 15
yaccel = .5
fall.yvelocity = -3.4

[State 230, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Standing hard punch
[Statedef 240]
type = S
movetype = A
physics = S
anim = 240
juggle = 10
velset = 0,0
poweradd = 0
ctrl = 0

[State 240, 1]
type = PlaySnd
trigger1 = Time = 4
value = 8,0
channel = 0

[State 240, 2]
type = PlaySnd
trigger1 = Time = 2
value = s0,1

[State 240, 4]
type = HitDef
trigger1 = ifelse(var(16) > 1, p2stateno != 5040,(p2stateno != [5020,5040]))
trigger1 = p2stateno != [1014,1019]
trigger1 = p2stateno != [154,155]
trigger1 = AnimElem = 4
attr = S, NA
animtype = hard
damage = 117
guardflag = MA
hitflag = MAF
pausetime = 13,13
sparkno = S8010
guard.sparkno = S8110
sparkxy = -13,-100
hitsound = S230,0
guardsound = S201,1
ground.type = high
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -12
air.velocity = -3.5,-6
airguard.velocity = -4,-6
guard.velocity = -12
ground.cornerpush.veloff = -18.5
air.cornerpush.veloff = -0
guard.cornerpush.veloff = -18.5
getpower = 125,125
givepower = 21,21
guard.pausetime = 11,11
guard.slidetime = 18
;guard.hittime = 36
;guard.ctrltime = 36
fall = 0
yaccel = .5
fall.yvelocity = -3.4

[State 240, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Standing hard punch (close)
[Statedef 250]
type = S
movetype = A
physics = S
anim = 250
juggle = 10
velset = 0,0
poweradd = 0
ctrl = 0

[State 250, 1]
type = PlaySnd
trigger1 = Time = 4
value = 8,0
channel = 0

[State 250, 2]
type = PlaySnd
trigger1 = Time = 2
value = s0,1

[State 250, 4]
type = HitDef
trigger1 = ifelse(var(16) > 1, p2stateno != 5040,(p2stateno != [5020,5040]))
trigger1 = p2stateno != [1014,1019]
trigger1 = p2stateno != [154,155]
trigger1 = AnimElem = 4
attr = S, NA
animtype = hard
damage = 88
guardflag = MA
hitflag = MAF
pausetime = 11,13
sparkno = S8010
guard.sparkno = S8110
sparkxy = 0,-74
hitsound = S230,0
guardsound = S201,1
ground.type = Low
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -12
air.velocity = -3.5,-6
airguard.velocity = -4,-6
guard.velocity = -12
ground.cornerpush.veloff = -18.5
air.cornerpush.veloff = -0
guard.cornerpush.veloff = -18.5
getpower = 125,125
givepower = 21,21
guard.pausetime = 11,11
guard.slidetime = 18
;guard.hittime = 36
;guard.ctrltime = 36
fall = 0
yaccel = .5
fall.yvelocity = -3.4

[State 250, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Standing hard kick
[Statedef 260]
type = S
movetype = A
physics = S
anim = 260
juggle = 10
poweradd = 0
velset = 0,0
ctrl = 0

[State 260, 1]
type = PlaySnd
trigger1 = Time = 4
value = 8,0
channel = 0

[State 260, 2]
type = PlaySnd
trigger1 = Time = 2
value = s0,3

[State 260, 4]
type = HitDef
trigger1 = ifelse(var(16) > 1, p2stateno != 5040,(p2stateno != [5020,5040]))  
trigger1 = p2stateno != [154,155]
trigger1 = p2stateno != [1014,1019]
trigger1 = AnimElem = 4
attr = S, NA
animtype = hard
damage = 127
guardflag = MA
hitflag = MAF
pausetime = 13,13
sparkno = S8010
guard.sparkno = S8110
sparkxy = 0,-78
hitsound = S240,0
guardsound = S201,1
ground.type = low
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -12.3
air.velocity = -3.5,-6
air.cornerpush.veloff = -0
airguard.velocity = -4,-6
getpower = 125,125
givepower = 21,21
air.juggle = 15
guard.pausetime = 11,11
guard.slidetime = 18
;guard.hittime = 36
;guard.ctrltime = 36
yaccel = .5
fall.yvelocity = -3.4


[State 260, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Standing High Kick (close)
[Statedef 270]
type = S
movetype = A
physics = S
anim = 270
velset = 0,0
poweradd = 0
juggle = 10
ctrl = 0

[State 260, 1]
type = PlaySnd
trigger1 = Time = 4
value = 8,0
channel = 0

[State 260, 2]
type = PlaySnd
trigger1 = Time = 2
value = s0,3

[State 270, 3]
type = HitDef
trigger1 = ifelse(var(16) > 1, p2stateno != 5040,(p2stateno != [5020,5040]))  
trigger1 = p2stateno != [154,155]
trigger1 = p2stateno != [1014,1019]
trigger1 = AnimElem = 3
attr = S, NA
animtype = Hard
damage = 78
hitflag = MAF
guardflag = MA
pausetime = 11,13
sparkno = S8010
guard.sparkno = S8110
sparkxy = -4,-100
hitsound = S240,0
guardsound = S201,1
priority = 7, Hit
ground.type = high
ground.slidetime = 9
ground.hittime = 17
ground.velocity = -6.5
air.velocity = -3.5,-6
air.cornerpush.veloff = -0
airguard.velocity = -3.5,-1
guard.pausetime = 11,11
guard.slidetime = 10
;guard.hittime = 20
;guard.ctrltime = 20
getpower = 65,65
givepower = 21,21
yaccel = .5
fall.yvelocity = -3.4

[State 270, 3]
type = HitDef
trigger1 = ifelse(var(16) > 1, p2stateno != 5040,(p2stateno != [5020,5040]))  
trigger1 = p2stateno != [154,155]
trigger1 = p2stateno != [1014,1019]
trigger1 = AnimElem = 4
attr = S, NA
animtype = Hard
damage = 29
hitflag = MAF
guardflag = MA
pausetime = 11,13
sparkno = S8010
guard.sparkno = S8110
sparkxy = 9,-76
hitsound = S240,0
guardsound = S201,1
priority = 7, Hit
ground.type = high
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -12.3
air.velocity = -3.5,-6
air.cornerpush.veloff = -0
airguard.velocity = -4,-6
getpower = 65,65
givepower = 21,21
guard.pausetime = 11,11
guard.slidetime = 18
;guard.hittime = 36
;guard.ctrltime = 36
yaccel = .5
fall.yvelocity = -3.4

[State 270, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Standing knockdown attack
[Statedef 280]
type = S
movetype = A
physics = S
poweradd = 0
juggle = 15
velset = 0,0
anim = 280
ctrl = 0

[State 280, PowerAdd]
type = PowerAdd
trigger1 = Prevstateno = [150,151]
trigger1 = Time = 0
value = -1000

[State 280, NotHitBy]
type = NotHitBy
trigger1 = Prevstateno = [150,151]
trigger1 = 1
value = SCA

[state 280, Posset]
type = Posset
trigger1 = Time = 0
y = 0

[State 280, Palfx]
type = Palfx
trigger1 = Prevstateno = [150,151]
trigger1 = Time = 7
time = 3
add = 230,230,230

[State 260, 1]
type = PlaySnd
trigger1 = Time = 4
trigger1 = Random < 750
value = 8,0
channel = 0

[State 260, 2]
type = PlaySnd
trigger1 = Time = 0
value = s0,4

[State 280, 5]
type = HitDef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = p2stateno != [1014,1019]
trigger1 = AnimElem = 5
attr = S, NA
damage = 137
hitflag = MAF
guardflag = MA
animtype = Hard
ground.animtype = low
pausetime = 11,13
sparkno = S8010
guard.sparkno = S8110
sparkxy = -1,-48
hitsound = S250,0
guardsound = S201,1
ground.type = high
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -4,-8
ground.cornerpush.veloff = -0
air.velocity = -4,-7
air.cornerpush.veloff = -0
guard.velocity = -11
guard.pausetime = 11,11
guard.slidetime = 22
getpower = 125,125
givepower = 21,21
fall = 1
fall.recovertime = 35
fall.yvelocity = -3.4
;guard.hittime = 44
;guard.ctrltime = 44
yaccel = .55

[State 280, Posadd1]
type = posadd
trigger1 = AnimElem = 4
trigger2 = Animelem = 5
x = 8


[State 280, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Crouching light punch
[Statedef 400]
type = C
movetype = A
physics = C
anim = 400
velset = 0,0
juggle = 10
poweradd = 0
ctrl = 0

[State 260, 1]
type = PlaySnd
trigger1 = Time = 4
trigger1 = Random < 750
value = 5,0
channel = 0

[State 260, 2]
type = PlaySnd
trigger1 = Time = 2
value = s0,0

[State 400, 3]
type = HitDef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = p2stateno != [1004,1009]
trigger1 = p2stateno != [1014,1019]
trigger1 = AnimElem = 2
attr = C, NA
animtype = light
damage = 49
guardflag = M
hitflag = MA
priority = 7, Hit
pausetime = 11,13
sparkno = S8000
guard.sparkno = S8100
sparkxy = -1,-48
hitsound = S210,0
guardsound = S201,1
ground.type = low
ground.slidetime = ifelse((var(40)>0||var(37)>0),18,9)
ground.hittime = ifelse((var(40)>0||var(37)>0),18,9)
ground.velocity = -6.3
air.velocity = -3.5,-6
air.cornerpush.veloff = -0
airguard.velocity = -2.5,-1
getpower = 60,60
givepower = 21,21
guard.pausetime = 11,11
guard.slidetime = 10
;guard.hittime = 20
;guard.ctrltime = 20
yaccel = .5
fall.yvelocity = -3.4

[State 400, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;Crouching light kick
[Statedef 420]
type = C
movetype = A
physics = C
anim = 420
juggle = 10
poweradd = 0
velset = 0
ctrl = 0

[State 260, 1]
type = PlaySnd
trigger1 = Time = 4
trigger1 = Random < 750
value = 5,0
channel = 0

[State 260, 2]
type = PlaySnd
trigger1 = Time = 2
value = s0,2

[State 420, 3]
type = HitDef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = p2stateno != [1004,1009]
trigger1 = p2stateno != [1014,1019]
trigger1 = AnimElem = 2
attr = C, NA
animtype = light
damage = 58
guardflag = L
hitflag = MA
priority = 7, Hit
pausetime = 11,13
sparkno = S8000
guard.sparkno = S8100
sparkxy = 0,-8
hitsound = S220,0
guardsound = S201,1
ground.type = low
ground.slidetime = ifelse((var(40)>0||var(37)>0),18,9)
ground.hittime = ifelse((var(40)>0||var(37)>0),18,9)
ground.velocity = -6.3
air.velocity = -3.5,-6
air.cornerpush.veloff = -0
airguard.velocity = -2.5,-1
getpower = 60,60
givepower = 21,21
guard.pausetime = 11,11
guard.slidetime = 10
;guard.hittime = 20
;guard.ctrltime = 20
yaccel = .5
fall.yvelocity = -3.4

[State 420, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

; Crouching hard punch
[Statedef 440]
type = C
movetype = A
physics = C
anim = 440
velset = 0
juggle = 10
poweradd = 0
ctrl = 0

[State 250, 1]
type = PlaySnd
trigger1 = Time = 4
value = 8,0
channel = 0

[State 250, 2]
type = PlaySnd
trigger1 = Time = 2
value = s0,1

[State 440, 3]
type = HitDef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = p2stateno != [1014,1019]
trigger1 = p2stateno != [1014,1019]
trigger1 = AnimElem = 3
attr = C, NA
animtype = hard
damage = 107
guardflag = M
hitflag = MAF
pausetime = 11,13
sparkno = S8010
guard.sparkno = S8110
sparkxy = -4,-90
hitsound = S230,0
guardsound = S201,1
ground.type = High
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -12
air.velocity = -3.5,-6
airguard.velocity = -4,-1.5
guard.velocity = -12.3
ground.cornerpush.veloff = -18
air.cornerpush.veloff = -0
guard.cornerpush.veloff = -18
getpower = 125,125
givepower = 21,21
guard.pausetime = 11,11
guard.slidetime = 18
;guard.hittime = 36
;guard.ctrltime = 36
yaccel = .5
fall.yvelocity = -3.4

[State 440, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

; Crouching hard kick
[Statedef 460]
type = C
movetype = A
physics = C
anim = 460
juggle = 14
poweradd = 0
velset = 0
ctrl = 0

[State 460, 1]
type = PlaySnd
trigger1 = Time = 4
value = 8,0
channel = 0

[State 460, 2]
type = PlaySnd
trigger1 = Time = 2
value = s0,3

[State 460, 3]
type = HitDef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = p2stateno != [1014,1019]
trigger1 = p2stateno != [1004,1009]
trigger1 = AnimElem = 3
attr = C, NA
animtype = Hard
damage = 127
hitflag = MA
guardflag = L
pausetime = 11,13
sparkno = S8010
guard.sparkno = S8110
sparkxy = 0,-14
hitsound = S240,0
guardsound = S201,1
ground.type = trip
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -3,-7
ground.cornerpush.veloff = -0
guard.cornerpush.veloff = -18
air.velocity = -3.5,-6
airguard.velocity = -4,-1.7
air.cornerpush.veloff = -0
guard.velocity = -12
fall = 1
fall.recovertime = 20
getpower = 125,125
givepower = 21,21
fall.yvelocity = -3.5
guard.pausetime = 11,11
guard.slidetime = 18
;guard.hittime = 36
;guard.ctrltime = 36
yaccel = .55

[State 460, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1


;---------------------------
;JUMP ATTACKS
;---------------------------
;Jumping light punch Neutral
[Statedef 600]
type = A
movetype = A
physics = A
poweradd = 0
juggle = 10
anim = 600
ctrl = 0

[State 260, 1]
type = PlaySnd
trigger1 = Time = 4
trigger1 = Random < 750
value = 5,0
channel = 0

[State 260, 2]
type = PlaySnd
trigger1 = Time = 2
value = s0,0

[State 600, 3]
type = HitDef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = p2stateno != [1014,1019]
trigger1 = AnimElem = 2
attr = A, NA
animtype = light
damage = 49
priority = 7, Hit
guardflag = HA
hitflag = MAF
pausetime = 11,13
sparkno = S8000
guard.sparkno = S8100
sparkxy = 5,-43
hitsound = S210,0
guardsound = S201,1
ground.type = low
ground.slidetime = 9
ground.hittime = 9
ground.velocity = -6.1
air.velocity = -3.5,-6
airguard.velocity = -2.5,-1
guard.velocity = -6.1
ground.cornerpush.veloff = -8
air.cornerpush.veloff = -0
guard.cornerpush.veloff = -8
getpower = 60,60
givepower = 21,21
guard.pausetime = 11,11
guard.slidetime = 10
;guard.hittime = 20
;guard.ctrltime = 20
yaccel = .6
fall.yvelocity = -3.4

[State 600, Throw Limitter]
type = VarSet
trigger1 = var(15) <= 0
trigger1 = movehit
var(5) = 15
persistent = 0


;Jumping light punch
[Statedef 610]
type = A
movetype = A
physics = A
poweradd = 0
juggle = 10
anim = 610
ctrl = 0

[State 610, 1]
type = PlaySnd
trigger1 = Time = 4
trigger1 = Random < 750
value = 5,0
channel = 0

[State 610, 2]
type = PlaySnd
trigger1 = Time = 2
value = s0,0

[State 610, 3]
type = HitDef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = p2stateno != [1014,1019]
trigger1 = AnimElem = 2
attr = A, NA
animtype = light
damage = 39
priority = 7, Hit
guardflag = HA
hitflag = MAF
pausetime = 11,13
sparkno = S8000
guard.sparkno = S8100
sparkxy = -4,-43
hitsound = S210,0
guardsound = S201,1
ground.type = low
ground.slidetime = 9
ground.hittime = 9
ground.velocity = -6.1
air.velocity = -3.5,-6
airguard.velocity = -2.5,-1
guard.velocity = -6.1
ground.cornerpush.veloff = -8
air.cornerpush.veloff = -0
guard.cornerpush.veloff = -8
getpower = 60,60
givepower = 21,21
guard.pausetime = 11,11
guard.slidetime = 10
;guard.hittime = 20
;guard.ctrltime = 20
yaccel = .6
fall.yvelocity = -3.4

[State 610, Throw Limitter]
type = VarSet
trigger1 = var(15) <= 0
trigger1 = movehit
var(5) = 15
persistent = 0


;Jumping light kick Neutral
[Statedef 620]
type = A
movetype = A
physics = A
anim = 620
poweradd = 0
juggle = 10
ctrl = 0

[State 260, 1]
type = PlaySnd
trigger1 = Time = 4
trigger1 = Random < 750
value = 5,0
channel = 0

[State 260, 2]
type = PlaySnd
trigger1 = Time = 2
value = s0,2

[State 620, 3]
type = HitDef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = p2stateno != [1014,1019]
trigger1 = AnimElem = 2
attr = A, NA
animtype = light
priority = 7, Hit
damage = 58
hitflag = MAF
guardflag = HA
priority = 7, Hit
pausetime = 11,13
sparkno = S8000
guard.sparkno = S8100
sparkxy = -4,-45
hitsound = S220,0
guardsound = S201,1
ground.type = low
ground.slidetime = 9
ground.hittime = 9
ground.velocity = -6.1
air.velocity = -3.5,-6
airguard.velocity = -2.5,-1
guard.velocity = -6.1
ground.cornerpush.veloff = -8
air.cornerpush.veloff = -0
guard.cornerpush.veloff = -8
getpower = 60,60
givepower = 21,21
guard.pausetime = 11,11
guard.slidetime = 10
;guard.hittime = 20
;guard.ctrltime = 20
yaccel = .6
fall.yvelocity = -3.4

[State 610, Throw Limitter]
type = VarSet
trigger1 = var(15) <= 0
trigger1 = movehit
var(5) = 15
persistent = 0

;Jumping light kick
[Statedef 630]
type = A
movetype = A
physics = A
anim = 630
poweradd = 0
juggle = 10
ctrl = 0

[State 260, 1]
type = PlaySnd
trigger1 = Time = 4
trigger1 = Random < 750
value = 5,0
channel = 0

[State 260, 2]
type = PlaySnd
trigger1 = Time = 2
value = s0,2

[State 620, 3]
type = HitDef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = p2stateno != [1014,1019]
trigger1 = AnimElem = 2
attr = A, NA
animtype = light
priority = 7, Hit
damage = 49
hitflag = MAF
guardflag = HA
priority = 7, Hit
pausetime = 11,13
sparkno = S8000
guard.sparkno = S8100
sparkxy = -4,-45
hitsound = S220,0
guardsound = S201,1
ground.type = low
ground.slidetime = 9
ground.hittime = 9
ground.velocity = -6.1
air.velocity = -3.5,-6
airguard.velocity = -2.5,-1
guard.velocity = -6.1
ground.cornerpush.veloff = -8
air.cornerpush.veloff = -0
guard.cornerpush.veloff = -8
getpower = 60,60
givepower = 21,21
guard.pausetime = 11,11
guard.slidetime = 10
;guard.hittime = 20
;guard.ctrltime = 20
yaccel = .6
fall.yvelocity = -3.4

[State 620, Throw Limitter]
type = VarSet
trigger1 = var(15) <= 0
trigger1 = movehit
var(5) = 15
persistent = 0



;Jumping hard punch Neutral
[Statedef 640]
type = A
movetype = A
physics = A
poweradd = 0
juggle = 9
anim = 640
ctrl = 0

[State 250, 1]
type = PlaySnd
trigger1 = Time = 4
value = 8,0
channel = 0

[State 250, 2]
type = PlaySnd
trigger1 = Time = 2
value = s0,1

[State 640, 3]
type = HitDef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = p2stateno != [1014,1019]
trigger1 = AnimElem = 2
attr = A, NA
animtype = light
damage = 98
hitflag = MAF
guardflag = HA
pausetime = 11,13
sparkno = S8010
guard.sparkno = S8110
sparkxy = -5,-43
hitsound = S230,0
guardsound = S201,1
ground.type = low
ground.slidetime = 9
ground.hittime = 9
ground.velocity = -6.1
air.velocity = -3.5,-6
airguard.velocity = -3,-1.5
guard.velocity = -6.3
ground.cornerpush.veloff = -6
air.cornerpush.veloff = -0
guard.cornerpush.veloff = -6
getpower = 125,125
givepower = 21,21
guard.pausetime = 11,11
guard.slidetime = 17
;guard.hittime = 20
;guard.ctrltime = 20
yaccel = .6
fall.yvelocity = -3.4

[State 630, Throw Limitter]
type = VarSet
trigger1 = var(15) <= 0
trigger1 = movehit
var(5) = 15
persistent = 0


;Jumping hard punch
[Statedef 650]
type = A
movetype = A
physics = A
poweradd = 0
juggle = 9
anim = 650
ctrl = 0

[State 250, 1]
type = PlaySnd
trigger1 = Time = 4
value = 8,0
channel = 0

[State 250, 2]
type = PlaySnd
trigger1 = Time = 2
value = s0,1

[State 650, 3]
type = HitDef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = p2stateno != [1014,1019]
trigger1 = AnimElem = 2
attr = A, NA
animtype = light
damage = 88
hitflag = MAF
guardflag = HA
pausetime = 11,13
sparkno = S8010
guard.sparkno = S8110
sparkxy = -5,-43
hitsound = S230,0
guardsound = S201,1
ground.type = low
ground.slidetime = 9
ground.hittime = 9
ground.velocity = -6.1
air.velocity = -3.5,-6
airguard.velocity = -3,-1.5
guard.velocity = -6.3
ground.cornerpush.veloff = -6
air.cornerpush.veloff = -0
guard.cornerpush.veloff = -6
getpower = 125,125
givepower = 21,21
guard.pausetime = 11,11
guard.slidetime = 17
;guard.hittime = 20
;guard.ctrltime = 20
yaccel = .6
fall.yvelocity = -3.4

[State 650, Throw Limitter]
type = VarSet
trigger1 = var(15) <= 0
trigger1 = movehit
var(5) = 15
persistent = 0



;Jumping hard kick Neutral
[Statedef 660]
type = A
movetype = A
physics = A
poweradd = 0
juggle = 9
anim = 660
ctrl = 0

[State 250, 1]
type = PlaySnd
trigger1 = Time = 4
value = 8,0
channel = 0

[State 250, 2]
type = PlaySnd
trigger1 = Time = 2
value = s0,3

[State 660, 3]
type = HitDef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = p2stateno != [1014,1019]
trigger1 = AnimElem = 3
attr = A, NA
animtype = light
damage = 98
hitflag = MAF
guardflag = HA
pausetime = 11,13
sparkno = S8010
guard.sparkno = S8110
sparkxy = 0,-45
hitsound = S240,0
guardsound = S201,1
ground.type = low
ground.slidetime = 9
ground.hittime = 9
ground.velocity = -6.1
air.velocity = -3.5,-6
airguard.velocity = -3,-1.5
guard.velocity = -6.1
ground.cornerpush.veloff = -6
air.cornerpush.veloff = -0
guard.cornerpush.veloff = -6
getpower = 125,125
givepower = 21,21
guard.pausetime = 11,11
guard.slidetime = 17
;guard.hittime = 20
;guard.ctrltime = 20
yaccel = .6
fall.yvelocity = -3.4

[State 660, Throw Limitter]
type = VarSet
trigger1 = var(15) <= 0
trigger1 = movehit
var(5) = 15
persistent = 0

;Jumping hard kick
[Statedef 670]
type = A
movetype = A
physics = A
poweradd = 0
juggle = 9
anim = 670
ctrl = 0

[State 250, 1]
type = PlaySnd
trigger1 = Time = 4
value = 8,0
channel = 0

[State 250, 2]
type = PlaySnd
trigger1 = Time = 2
value = s0,3

[State 670, 3]
type = HitDef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = p2stateno != [1014,1019]
trigger1 = AnimElem = 3
attr = A, NA
animtype = light
damage = 98
hitflag = MAF
guardflag = HA
pausetime = 11,13
sparkno = S8010
guard.sparkno = S8110
sparkxy = -4,-45
hitsound = S240,0
guardsound = S201,1
ground.type = low
ground.slidetime = 9
ground.hittime = 9
ground.velocity = -6.1
air.velocity = -3.5,-6
airguard.velocity = -3,-1.5
guard.velocity = -6.1
ground.cornerpush.veloff = -6
air.cornerpush.veloff = -0
guard.cornerpush.veloff = -6
getpower = 125,125
givepower = 21,21
guard.pausetime = 11,11
guard.slidetime = 17
;guard.hittime = 20
;guard.ctrltime = 20
yaccel = .6
fall.yvelocity = -3.4

[State 670, Throw Limitter]
type = VarSet
trigger1 = var(15) <= 0
trigger1 = movehit
var(5) = 15
persistent = 0

; Jumping knockdown attack
[Statedef 680]
type = A
movetype = A
physics = A
poweradd = 0
juggle = 15
anim = 680
ctrl = 0

[State 260, 1]
type = PlaySnd
trigger1 = Time = 4
trigger1 = Random < 750
value = 8,0
channel = 0

[State 260, 2]
type = PlaySnd
trigger1 = Time = 1
value = s0,4

[State 660, 3]
type = HitDef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = p2stateno != [1014,1019]
trigger1 = AnimElem = 5
attr = A, NA
hitflag = MAF
animtype = HARD
damage = 88
guardflag = MA
pausetime = 11,13
sparkno = S8010
guard.sparkno = S8110
ground.type = low
sparkxy = -4,-50
hitsound = S250,0
guardsound = S201,1
ground.velocity = -4,-8
air.velocity = -4,-7
airguard.velocity = -2.5,-1
fall = 1
fall.recover = 1
fall.recovertime = 35
ground.slidetime = 17
ground.hittime = 17
guard.velocity = -12
guard.slidetime = 17
getpower = 125,125
givepower = 21,21
air.juggle = 15
guard.pausetime = 11,11
guard.slidetime = 22
;guard.hittime = 44
;guard.ctrltime = 44
fall.yvelocity = -3.4
yaccel = .5

; Jumping knockdown attack
[Statedef 681]
type = A
movetype = A
physics = A
poweradd = 0
juggle = 15
anim = 681
ctrl = 0

[State 260, 1]
type = PlaySnd
trigger1 = Time = 4
trigger1 = Random < 750
value = 8,0
channel = 0

[State 260, 2]
type = PlaySnd
trigger1 = Time = 1
value = s0,4

[State 660, 3]
type = HitDef
trigger1 = (p2stateno != [5020,5040])
trigger1 = p2stateno != [154,155]
trigger1 = p2stateno != [1014,1019]
trigger1 = Time = 0
attr = A, NA
hitflag = MAF
animtype = HARD
damage = 88
guardflag = MA
pausetime = 11,13
sparkno = S8010
guard.sparkno = S8110
ground.type = low
sparkxy = -4,-50
hitsound = S250,0
guardsound = S201,1
ground.velocity = -4,-8
air.velocity = -4,-7
airguard.velocity = -2.5,-1
fall = 1
fall.recover = 1
fall.recovertime = 35
ground.slidetime = 17
ground.hittime = 17
guard.velocity = -12
guard.slidetime = 17
getpower = 125,125
givepower = 21,21
air.juggle = 15
guard.pausetime = 11,11
guard.slidetime = 22
;guard.hittime = 44
;guard.ctrltime = 44
fall.yvelocity = -3.4
yaccel = .5


; Jumping knockdown attack Short
[Statedef 689]
type = A
movetype = A
physics = A
poweradd = 0
juggle = 15
anim = 689
ctrl = 0

[State 289, 1]
type = PlaySnd
trigger1 = Time = 4
trigger1 = Random < 750
value = 8,0
channel = 0

[State 289, 2]
type = PlaySnd
trigger1 = Time = 1
value = s0,4

[State 689, 3]
type = HitDef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = p2stateno != [1014,1019]
trigger1 = AnimElem = 5
attr = A, NA
hitflag = MAF
animtype = HARD
damage = 88
guardflag = MA
pausetime = 11,13
sparkno = S8010
guard.sparkno = S8110
ground.type = low
sparkxy = -4,-50
hitsound = S250,0
guardsound = S201,1
ground.velocity = -4,-8
air.velocity = -4,-7
airguard.velocity = -2.5,-1
fall = 1
fall.recover = 1
fall.recovertime = 35
ground.slidetime = 17
ground.hittime = 17
guard.velocity = -12
guard.slidetime = 17
getpower = 125,125
givepower = 21,21
air.juggle = 15
guard.pausetime = 11,11
guard.slidetime = 22
;guard.hittime = 44
;guard.ctrltime = 44
fall.yvelocity = -3.4
yaccel = .5

;==========================================
;SUPPORT ATTACKS
;=========================================
;Back Punch
[Statedef 320]
type = S
movetype = A
physics = S
anim = 320
velset = 0,0
juggle = 0
ctrl = 0

[State 320, 1]
type = PlaySnd
trigger1 = animelem = 3
value = 8,0
channel = 0

[State 320, 3]
type = HitDef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = p2stateno != [1004,1009]
trigger1 = p2stateno != [1014,1019]
trigger1 = AnimElem = 6
attr = S, NP
animtype = Medium
damage = 78,10
hitflag = MA
guardflag = MA
pausetime = 12,12
sparkno = S8010
guard.sparkno = S8110
sparkxy = 4,-100
hitsound = S230,0
guardsound = S201,1
priority = 7, Hit
ground.type = Low
ground.slidetime = 17
ground.hittime = 17
ground.velocity = 0,-10.65
air.velocity = 0,-10.65
airguard.velocity = -4,-5
ground.cornerpush.veloff = -0
air.cornerpush.veloff = -0
guard.cornerpush.veloff = -14
guard.velocity = -12
guard.slidetime = 17
guard.hittime = 17
getpower = 140,140
givepower = 21,21
yaccel = .47
fall.yvelocity = -3.4
fall = 1
p2getp1state = 1
p2stateno = 1004


[State 320, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1



;Forward Light Kick
[Statedef 310]
type = S
movetype = A
physics = S
anim = 310
velset = 0,0
juggle = 1
ctrl = 0

[State 310, 1]
type = PlaySnd
trigger1 = time = 2
value = 8,0
channel = 0

[State 310, 2]
type = PlaySnd
trigger1 = animelem = 5
value = s0,2

[State 310, Posadd1]
type = posadd
trigger1 = AnimElem = 3
trigger2 = Animelem = 4
trigger3 = Animelem = 5
trigger4 = Animelem = 6
trigger5 = Animelem = 8
x = 8

[State 310, 3]
type = HitDef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = p2stateno != [1014,1019]
trigger1 = p2stateno != [1004,1009]
trigger1 = p2statetype != A
trigger1 = AnimElem = 6
attr = S, NA
animtype = Medium
damage = 78
hitflag = MA
guardflag = MA
pausetime = 11,13
sparkno = S8010
guard.sparkno = S8110
sparkxy = 4,-90
hitsound = S240,0
guardsound = S201,1
priority = 7, Hit
ground.type = High
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -12
air.velocity = -3.5,-7.46
airguard.velocity = -4,-5
ground.cornerpush.veloff = -13
air.cornerpush.veloff = -0
guard.cornerpush.veloff = -13
guard.velocity = -12
guard.slidetime = 17
guard.hittime = 17
getpower = 140,140
givepower = 21,21
yaccel = .5
fall.yvelocity = -3.4
air.fall = 1

[State 310, 3]
type = HitDef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = p2stateno != [1014,1019]
trigger1 = Numproj = 0
trigger1 = p2Dist Y <= -6
trigger1 = p2statetype = A
trigger1 = AnimElem = 6
attr = S, NA
animtype = Medium
damage = 78
hitflag = MAF
guardflag = MA
pausetime = 11,13
sparkno = S8010
guard.sparkno = S8110
sparkxy = 4,-100
hitsound = S240,0
guardsound = S201,1
priority = 7, Hit
ground.type = High
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -12
air.velocity = -3.5,-7.46
airguard.velocity = -4,-5
ground.cornerpush.veloff = -13
air.cornerpush.veloff = -0
guard.cornerpush.veloff = -13
guard.velocity = -12
guard.slidetime = 17
guard.hittime = 17
getpower = 140,140
givepower = 21,21
yaccel = .5
fall.yvelocity = -3.4
air.fall = 1
p2getp1state = 1
p2stateno = 1004


[State 310, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1





;Forward Light Punch
[Statedef 300]
type = S
movetype = A
physics = S
anim = 300
velset = 0,0
juggle = 8
ctrl = 0

[State 300, 1]
type = PlaySnd
trigger1 = time = 2
value = 8,0
channel = 0

[State 300, 2]
type = PlaySnd
trigger1 = animelem = 5
value = s0,2

[State 300, 1]
type = StateTypeSet
trigger1 = animelem = 4
statetype = A
physics = S

[State InitVel]
type = VelSet
trigger1 = time >= 7
X = 4

[State InitVel]
type = VelSet
trigger1 = time = 7
Y = -3.13333344459534

[State Accel]
type = VelAdd 
trigger1 = time >= 7
Y = 0.333333343267441


[State 310, 3]
type = HitDef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = p2stateno != [1014,1019]
trigger1 = p2statetype = A
trigger1 = AnimElem = 6
attr = S, NP
animtype = Medium
damage = 78
hitflag = MA
guardflag = H
pausetime = 12,12
sparkno = S8010
guard.sparkno = S8110
sparkxy = -14,-76
hitsound = S240,0
guardsound = S201,1
priority = 7, Hit
ground.type = Low
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -12
air.velocity = -3.5,-7.46
airguard.velocity = -4,-5
ground.cornerpush.veloff = -14
air.cornerpush.veloff = -0
guard.cornerpush.veloff = -14
guard.velocity = -12
guard.slidetime = 17
guard.hittime = 17
getpower = 140,140
givepower = 21,21
yaccel = .5
fall.yvelocity = -3.4
air.fall = 1
p2getp1state = 1
p2stateno = 1014

[State 310, 3]
type = HitDef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = p2stateno != [1014,1019]
trigger1 = p2statetype != A
trigger1 = AnimElem = 6
attr = S, NP
animtype = Medium
damage = 78
hitflag = MA
guardflag = H
pausetime = 12,12
sparkno = S8010
guard.sparkno = S8110
sparkxy = -14,-76
hitsound = S240,0
guardsound = S201,1
priority = 7, Hit
ground.type = Low
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -12
air.velocity = -3.5,-7.46
airguard.velocity = -4,-5
ground.cornerpush.veloff = -14
air.cornerpush.veloff = -0
guard.cornerpush.veloff = -14
guard.velocity = -12
guard.slidetime = 17
guard.hittime = 17
getpower = 140,140
givepower = 21,21
yaccel = .5
fall.yvelocity = -3.4
air.fall = 1
air.juggle = 8

[State 310, 2]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 301

;LAND
[Statedef 301]
type = S
movetype = A
physics = S
anim = 301
velset = 0,0
juggle = 0
ctrl = 0

[State 301, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;Crouch forward Light Kick
[Statedef 330]
type = C
movetype = A
physics = C
anim = 330
velset = 0,0
juggle = 10
ctrl = 0

[State 330, 1]
type = PlaySnd
trigger1 = time = 2
value = 8,0
channel = 0

[State 330, 2]
type = PlaySnd
trigger1 = animelem = 4
trigger2 = animelem = 8
value = s0,2

[State 310, Posadd1]
type = Velset
trigger1 = AnimElem >= 8
x = 9

[State 310, Posadd1]
type = Velset
trigger1 = AnimElem = 10,1
x = 0

[State 330, 3]
type = HitDef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = p2stateno != [1014,1019]
trigger1 = AnimElem = 5
attr = S, NP
animtype = Medium
damage = 78
hitflag = MA
guardflag = L
pausetime = 12,12
sparkno = S8010
guard.sparkno = S8110
sparkxy = -11,-44
hitsound = S240,0
guardsound = S201,1
priority = 7, Hit
ground.type = Low
ground.slidetime = 17
ground.hittime = 17
ground.velocity = 0
air.velocity = -3.5,-6
airguard.velocity = -4,-5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = -0
guard.cornerpush.veloff = 0
guard.velocity = 0
guard.slidetime = 17
guard.hittime = 17
getpower = 83,83
givepower = 21,21
yaccel = .5
fall.yvelocity = -3.4
air.fall = 1

[State 330, 3]
type = HitDef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = p2stateno != [1014,1019]
trigger1 = AnimElem = 9
attr = S, NP
animtype = Medium
damage = 29
hitflag = MA
guardflag = L
pausetime = 12,12
sparkno = S8010
guard.sparkno = S8110
sparkxy = 3,-36
hitsound = S240,0
guardsound = S201,1
priority = 7, Hit
ground.type = Low
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -4,-8
air.velocity = -4,-7.46
airguard.velocity = -4,-5
ground.cornerpush.veloff = -14
air.cornerpush.veloff = -0
guard.cornerpush.veloff = -14
guard.velocity = -12
guard.slidetime = 17
guard.hittime = 17
getpower = 83,83
givepower = 21,21
yaccel = .5
fall.yvelocity = -3.4
fall = 1


[State 330, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1


;-------------------
;Cancel Forward
;-------------------
;Forward Light Punch Cancel
[Statedef 305]
type = S
movetype = A
physics = S
anim = 300
velset = 0,0
juggle = 8
ctrl = 0

[State 305, 1]
type = PlaySnd
trigger1 = time = 2
value = 8,0
channel = 0

[State 305, 2]
type = PlaySnd
trigger1 = animelem = 5
value = s0,2

[State 300, 1]
type = StateTypeSet
trigger1 = animelem = 4
statetype = A
physics = S

[State InitVel]
type = VelSet
trigger1 = time >= 7
X = 4

[State InitVel]
type = VelSet
trigger1 = time = 7
Y = -3.13333344459534

[State Accel]
type = VelAdd 
trigger1 = time >= 7
Y = 0.333333343267441


[State 310, 3]
type = HitDef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = p2stateno != [1014,1019]
trigger1 = p2statetype = A
trigger1 = AnimElem = 6
attr = S, NP
animtype = Medium
damage = 78
hitflag = MA
guardflag = M
pausetime = 10,12
sparkno = S8010
guard.sparkno = S8110
sparkxy = -14,-76
hitsound = S240,0
guardsound = S201,1
priority = 7, Hit
ground.type = Low
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -12
air.velocity = -3.5,-7.46
airguard.velocity = -4,-5
ground.cornerpush.veloff = -5;-14
air.cornerpush.veloff = -0
guard.cornerpush.veloff = -5;14
guard.velocity = -12
guard.slidetime = 17
guard.hittime = 17
getpower = 140,140
givepower = 21,21
yaccel = .5
fall.yvelocity = -3.4
air.fall = 1
p2getp1state = 1
p2stateno = 1014

[State 310, 3]
type = HitDef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = p2stateno != [1014,1019]
trigger1 = p2statetype != A
trigger1 = AnimElem = 6
attr = S, NP
animtype = Medium
damage = 78
hitflag = MA
guardflag = M
pausetime = 10,12
sparkno = S8010
guard.sparkno = S8110
sparkxy = -14,-76
hitsound = S240,0
guardsound = S201,1
priority = 7, Hit
ground.type = Low
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -12
air.velocity = -3.5,-7.46
airguard.velocity = -4,-5
ground.cornerpush.veloff = -5;-14
air.cornerpush.veloff = -0
guard.cornerpush.veloff = -5;-14
guard.velocity = -12
guard.slidetime = 17
guard.hittime = 17
getpower = 140,140
givepower = 21,21
yaccel = .5
fall.yvelocity = -3.4
air.fall = 1
air.juggle = 8

[State 310, 2]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 301

;LAND
[Statedef 301]
type = S
movetype = A
physics = S
anim = 301
velset = 0,0
juggle = 0
ctrl = 0

[State 301, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;Forward Light Kick Cancel
[Statedef 311]
type = S
movetype = A
physics = S
anim = 310
velset = 0,0
juggle = 1
ctrl = 0

[State 310, 1]
type = PlaySnd
trigger1 = time = 2
value = 8,0
channel = 0

[State 310, 2]
type = PlaySnd
trigger1 = animelem = 5
value = s0,2

[State 310, Posadd1]
type = posadd
trigger1 = AnimElem = 3
trigger2 = Animelem = 4
trigger3 = Animelem = 5
trigger4 = Animelem = 6
trigger5 = Animelem = 8
x = 8

[State 310, 3]
type = HitDef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = p2stateno != [1014,1019]
trigger1 = p2statetype != A
trigger1 = AnimElem = 6
attr = S, NP
animtype = Medium
damage = 78
hitflag = MA
guardflag = MA
pausetime = 11,13
sparkno = S8010
guard.sparkno = S8110
sparkxy = 4,-100
hitsound = S240,0
guardsound = S201,1
priority = 7, Hit
ground.type = High
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -12
air.velocity = -3.5,-7.46
airguard.velocity = -4,-5
ground.cornerpush.veloff = -14
air.cornerpush.veloff = -0
guard.cornerpush.veloff = -14
guard.velocity = -12
guard.slidetime = 17
guard.hittime = 17
getpower = 140,140
givepower = 21,21
yaccel = .5
fall.yvelocity = -3.4
air.fall = 1

[State 310, 3]
type = HitDef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = p2stateno != [1014,1019]
trigger1 = p2statetype = A
trigger1 = AnimElem = 6
attr = S, NP
animtype = Medium
damage = 78
hitflag = MA
guardflag = MA
pausetime = 11,13
sparkno = S8010
guard.sparkno = S8110
sparkxy = 4,-100
hitsound = S240,0
guardsound = S201,1
priority = 7, Hit
ground.type = High
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -12
air.velocity = -3.5,-7.46
airguard.velocity = -4,-5
ground.cornerpush.veloff = -14
air.cornerpush.veloff = -0
guard.cornerpush.veloff = -14
guard.velocity = -12
guard.slidetime = 17
guard.hittime = 17
getpower = 140,140
givepower = 21,21
yaccel = .5
fall.yvelocity = -3.4
air.fall = 1
p2getp1state = 1
p2stateno = 1004


[State 310, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;Crouch forward Light Kick
[Statedef 335]
type = C
movetype = A
physics = C
anim = 330
velset = 0,0
juggle = 8
ctrl = 0

[State 330, 1]
type = PlaySnd
trigger1 = time = 2
value = 8,0
channel = 0

[State 330, 2]
type = PlaySnd
trigger1 = animelem = 4
trigger2 = animelem = 8
value = s0,2

[State 310, Posadd1]
type = Velset
trigger1 = AnimElem >= 8
x = 9

[State 310, Posadd1]
type = Velset
trigger1 = AnimElem = 10,1
x = 0

[State 330, 3]
type = HitDef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = p2stateno != [1014,1019]
trigger1 = AnimElem = 5
attr = S, NP
animtype = Medium
damage = 78
hitflag = MA
guardflag = M
pausetime = 12,12
sparkno = S8010
guard.sparkno = S8110
sparkxy = -11,-44
hitsound = S240,0
guardsound = S201,1
priority = 7, Hit
ground.type = Low
ground.slidetime = 17
ground.hittime = 17
ground.velocity = 0
air.velocity = -3.5,-6
airguard.velocity = -4,-5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = -0
guard.cornerpush.veloff = 0
guard.velocity = 0
guard.slidetime = 17
guard.hittime = 17
getpower = 83,83
givepower = 21,21
yaccel = .5
fall.yvelocity = -3.4
air.fall = 1

[State 330, 3]
type = HitDef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = p2stateno != [1014,1019]
trigger1 = AnimElem = 9
attr = S, NP
animtype = Medium
damage = 29
hitflag = MA
guardflag = M
pausetime = 12,12
sparkno = S8010
guard.sparkno = S8110
sparkxy = 3,-36
hitsound = S240,0
guardsound = S201,1
priority = 7, Hit
ground.type = Low
ground.slidetime = 17
ground.hittime = 19
ground.velocity = -12,0
air.velocity = -4,-7.46
airguard.velocity = -4,-5
ground.cornerpush.veloff = -14
air.cornerpush.veloff = -0
guard.cornerpush.veloff = -14
guard.velocity = -12
guard.slidetime = 17
guard.hittime = 17
getpower = 83,83
givepower = 21,21
yaccel = .5
fall.yvelocity = -3.4
fall = 0
air.fall = 1

[State 330, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;==========================================
;SPECIAL ATTACKS
;==========================================
;Weak Kouken
[Statedef 1000]
type = S
movetype = A
physics = S
anim = 1000
velset = 0, 0
poweradd = 60
ctrl = 0

[State 1000, snd1]
type = PlaySnd
trigger1 = Time = 4
value = 3,5
channel = 0

[State 1000, snd2]
type = PlaySnd
trigger1 = AnimElem = 12
value = 200,6

[State 1000, 4]
type = Projectile
trigger1 = AnimElem = 12,1
attr = S, SP
projID = 2000
projanim = 2000
projhitanim = 2010
offset = 32,0
velocity = 4
ownpal = 1
damage = 98,10
animtype = Hard
hitflag = MAFP
guardflag = MA
pausetime = 0,12
sparkno = S8020
guard.sparkno = S8120
sparkxy = -19,-73
hitsound   = S230,0
guardsound = S201,2
ground.type = high
ground.slidetime = 17
ground.hittime  = 17
air.hittime = 17
ground.velocity = -12.3
guard.velocity = -12
;guard.ctrltime = 39
;guard.hittime = 39
air.animtype = Back
air.velocity = -4,-7
air.fall = 1
air.juggle = 8
getpower = 125,125
givepower = 30,10
yaccel = .5
fall.yvelocity = -3.4

[State 2000, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;Strong Kouken
[Statedef 1001]
type = S
movetype = A
physics = S
anim = 1001
velset = 0, 0
poweradd = 60
ctrl = 0

[State 1001, snd1]
type = PlaySnd
trigger1 = Time = 4
value = 3,5
channel = 0

[State 1001, snd2]
type = PlaySnd
trigger1 = AnimElem = 12
value = 200,6

[State 1001, 4]
type = Projectile
trigger1 = AnimElem = 12,1
attr = S, SP
projID = 2000
projanim = 2000
projhitanim = 2010
offset = 32,-8
velocity = 7
ownpal = 1
damage = 117,10
animtype = Hard
hitflag = MAFP
guardflag = MA
pausetime = 0,12
sparkno = S8020
guard.sparkno = S8120
sparkxy = -20,-77
hitsound   = S230,0
guardsound = S201,2
ground.type = high
ground.slidetime = 18
ground.hittime  = 18
air.hittime = 18
ground.velocity = -12.3
guard.velocity = -12
;guard.ctrltime = 39
;guard.hittime = 39
air.animtype = Back
air.velocity = -4,-7
air.fall = 1
air.juggle = 8
getpower = 125,125
givepower = 30,10
yaccel = .5
fall.yvelocity = -3.4

[State 2001, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;Weak Upper cut
[Statedef 1100]
type = S
movetype = A
physics = S
anim = 1100
velset = 0, 0
poweradd = 60
ctrl = 0
juggle = 14

[State 300, 1]
type = PosAdd
trigger1 = animelem = 2
x = 8

[State 1100, snd1]
type = PlaySnd
trigger1 = animelem = 2
value = s8,0
channel = 0

[State 1100, snd2]
type = PlaySnd
trigger1 = time = 2
value = 200,10

[State 320, 3]
type = HitDef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [1014,1019]
trigger1 = p2stateno != [154,155]
trigger1 = AnimElem = 2
attr = S, NP
animtype = Medium
damage = 88,10
hitflag = MAF
guardflag = M
pausetime = 12,12
sparkno = S8020
guard.sparkno = S8110
sparkxy = -2,-48
hitsound = S251,0
guardsound = S201,2
priority = 7, Hit
ground.type = Low
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -2,-11
air.velocity = -2,-11
airguard.velocity = -4,-5
ground.cornerpush.veloff = -0
air.cornerpush.veloff = -0
guard.cornerpush.veloff = -0
guard.velocity = -12
guard.slidetime = 17
;guard.hittime = 17
getpower = 45,45
givepower = 50,20
yaccel = .47
fall.yvelocity = -3.4
fall = 1
fall.recovertime = 50

[State 2500, 2]
type = ChangeState
trigger1 = Movecontact
trigger1 = power >= 2000
trigger1 = command = "Haohshoukoken1"
value = 3000


[State 2500, 2]
type = ChangeState
trigger1 = Movecontact
trigger1 = power >= 2000
trigger1 = command = "Haohshoukoken2"
value = 3010

[State 2500, 2]
type = ChangeState
trigger1 = Movecontact
trigger1 = power >= 2000
trigger1 = command = "Kuzuryuusen1" || command = "Kuzuryuusen2"
value = 3200

[State 2500, 2]
type = ChangeState
trigger1 = Movecontact
trigger1 = power >= 3000
trigger1 = command = "Ryuuko Ranbu3"
value = 3500


[State 2500, 2]
type = ChangeState
trigger1 = Movecontact
trigger1 = power >= 2000
trigger1 = command = "Ryuuko Ranbu1"
value = 3100


[State 2500, 2]
type = ChangeState
trigger1 = Movecontact
trigger1 = power >= 2000
trigger1 = command = "Ryuuko Ranbu2"
value = 3101

[State 1100, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 1101


;Weak Upper cut Up
[Statedef 1101]
type = A
movetype = A
physics = S
anim = 1101
velset = 0,0
poweradd = 0
ctrl = 0
juggle = 14

[State InitVel]
type = posadd
trigger1 = time = 0
trigger2 = time = 2
trigger3 = time = 3
trigger4 = time = 4
trigger5 = time = 5
trigger6 = time = 6
trigger7 = time = 7
trigger8 = time = 9
trigger9 = time = 11
x = 1

[State InitVel]
type = posadd
trigger1 = time = 1
x = 2



[State InitVel]
type = posadd
trigger1 = time = 0
y = -6

[State InitVel]
type = posadd
trigger1 = time = 1
trigger2 = time = 2
trigger3 = time = 3
y = -5

[State InitVel]
type = posadd
trigger1 = time = 4
y = -4

[State InitVel]
type = posadd
trigger1 = time = 5
trigger2 = time = 6
trigger3 = time = 7
y = -3

[State InitVel]
type = posadd
trigger1 = time = 8
y = -2

[State InitVel]
type = posadd
trigger1 = time = 9
trigger2 = time = 10
trigger3 = time = 11
y = -1

[State 320, 3]
type = HitDef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [1014,1019]
trigger1 = p2stateno != [154,155]
trigger1 = AnimElem = 1
attr = S, NP
animtype = Medium
damage = 88,10
hitflag = MAF
guardflag = M
pausetime = 12,12
sparkno = S8020
guard.sparkno = S8110
sparkxy = -2,-48
hitsound = S251,0
guardsound = S201,2
priority = 7, Hit
ground.type = Low
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -2,-11
air.velocity = -2,-11
airguard.velocity = -4,-5
ground.cornerpush.veloff = -0
air.cornerpush.veloff = -0
guard.cornerpush.veloff = -0
guard.velocity = -12
guard.slidetime = 17
;guard.hittime = 17
getpower = 45,45
givepower = 50,20
yaccel = .5
fall.yvelocity = -3.4
fall = 1
p2getp1state = 1
p2stateno = 1014

[State 1100, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 1102

;Go down
[Statedef 1102]
type = A
movetype = A
physics = S
anim = 1102
velset = 0,0
juggle = 0
ctrl = 0

[State Accel]
type = Veladd
trigger1 = time >= 0
y = .6

[State 1102, 2]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1103

;LAND
[Statedef 1103]
type = S
movetype = A
physics = S
anim = 1103
velset = 0,0
juggle = 0
ctrl = 0

[State 1081, 1]
type = posset
trigger1 = Time = 0
y = 0

[State 1103, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;Strong Upper cut
[Statedef 1110]
type = S
movetype = A
physics = S
anim = 1110
poweradd = 60
velset = 0,0
ctrl = 0
juggle = 7

[State 1110,1]
type = NotHitBy
trigger1 = time > 1 && time < 8
value = SCA

[State 300, 1]
type = PosAdd
trigger1 = animelem = 3
x = 8

[State 1100, snd1]
type = PlaySnd
trigger1 = animelem = 3
value = s8,0
channel = 0

[State 1100, snd2]
type = PlaySnd
trigger1 = time = 3
value = 200,10

[State 320, 3]
type = Hitdef
trigger1 = (p2stateno != [5020,5040])
trigger1 = p2stateno != [1014,1019]
trigger1 = p2stateno != [154,155]
trigger1 = p2statetype != A
trigger1 = Numproj = 0
trigger1 = AnimElem = 3
attr = S, NP
animtype = Medium
damage = 68,10
hitflag = MAF
guardflag = M
pausetime = 12,13
sparkno = S8020
guard.sparkno = S8110
sparkxy = -2,-48
hitsound = S251,0
guardsound = S201,2
priority = 7, Hit
ground.type = Low
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -12
air.velocity = -2,-9
airguard.velocity = -4,-10
ground.cornerpush.veloff = -14
air.cornerpush.veloff = -0
guard.cornerpush.veloff = -14
guard.velocity = -12
guard.slidetime = 17
;guard.hittime = 17
getpower = 45,45
givepower = 50,20
yaccel = .5
fall.yvelocity = -3.4
air.fall = 1
fall.recovertime = 40

[State 320, 3]
type = Hitdef
trigger1 = (p2stateno != [5020,5040])
trigger1 = p2stateno != [1014,1019]
trigger1 = p2stateno != [154,155]
trigger1 = AnimElem = 3
trigger1 = Numproj = 0
trigger1 = p2statetype = A
attr = S, NP
animtype = Medium
damage = 68,10
hitflag = MAF
guardflag = M
pausetime = 12,13
sparkno = S8020
guard.sparkno = S8110
sparkxy = -2,-48
hitsound = S251,0
guardsound = S201,2
priority = 7, Hit
ground.type = Low
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -12
air.velocity = -2,-9
airguard.velocity = -4,-10
ground.cornerpush.veloff = -10
air.cornerpush.veloff = -0
guard.cornerpush.veloff = -10
guard.velocity = -12
guard.slidetime = 17
;guard.hittime = 17
getpower = 45,45
givepower = 50,20
yaccel = .5
fall.yvelocity = -3.4
air.fall = 1
p2stateno = 1004
p2getp1state = 1
fall.recovertime = 40

[State 2500, 2]
type = ChangeState
trigger1 = Movecontact
trigger1 = power >= 2000
trigger1 = command = "Haohshoukoken1"
value = 3000


[State 2500, 2]
type = ChangeState
trigger1 = Movecontact
trigger1 = power >= 2000
trigger1 = command = "Haohshoukoken2"
value = 3010

[State 2500, 2]
type = ChangeState
trigger1 = Movecontact
trigger1 = power >= 2000
trigger1 = command = "Kuzuryuusen1" || command = "Kuzuryuusen2"
value = 3200

[State 2500, 2]
type = ChangeState
trigger1 = Movecontact
trigger1 = power >= 3000
trigger1 = command = "Ryuuko Ranbu3"
value = 3500

[State 2500, 2]
type = ChangeState
trigger1 = Movecontact
trigger1 = power >= 2000
trigger1 = command = "Ryuuko Ranbu1"
value = 3100


[State 2500, 2]
type = ChangeState
trigger1 = Movecontact
trigger1 = power >= 2000
trigger1 = command = "Ryuuko Ranbu2"
value = 3101

[State 1100, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 1111




;Strong Upper cut Up
[Statedef 1111]
type = A
movetype = A
physics = S
anim = 1111
velset = 0,0
poweradd = 0
ctrl = 0
juggle = 7


[State InitVel]
type = posadd
trigger1 = time = 0
trigger2 = time = 1
trigger3 = time = 2
x = 7

[State InitVel]
type = posadd
trigger1 = time = 3
x = 6

[State InitVel]
type = posadd
trigger1 = time = 4
trigger2 = time = 6
x = 5

[State InitVel]
type = posadd
trigger1 = time = 5
trigger2 = time = 8
x = 4

[State InitVel]
type = posadd
trigger1 = time = 7
trigger2 = time = 9
trigger3 = time = 10
x = 3

[State InitVel]
type = posadd
trigger1 = time = 11
trigger2 = time = 12
trigger3 = time = 13
trigger4 = time = 14
trigger5 = time = 15
x = 2

[State InitVel]
type = posadd
trigger1 = time = 16
trigger2 = time = 17
trigger3 = time = 18
x = 1

[State InitVel]
type = posadd
trigger1 = time = 0
trigger2 = time = 1
trigger3 = time = 2
y = -8

[State InitVel]
type = posadd
trigger1 = time = 3
y = -7

[State InitVel]
type = posadd
trigger1 = time = 4
trigger2 = time = 5
trigger3 = time = 6
y = -6

[State InitVel]
type = posadd
trigger1 = time = 7
y = -5

[State InitVel]
type = posadd
trigger1 = time = 8
trigger2 = time = 9
trigger3 = time = 10
y = -4

[State InitVel]
type = posadd
trigger1 = time = 11
y = -3

[State InitVel]
type = posadd
trigger1 = time = 12
trigger2 = time = 13
trigger3 = time = 14
y = -2

[State InitVel]
type = posadd
trigger1 = time = 15
trigger2 = time = 16
y = -1

[State 320, 3]
type = HitDef
trigger1 = p2stateno != [154,155]
trigger1 = p2stateno != [1014,1019]
trigger1 = (p2stateno != [5020,5040])
trigger1 = AnimElem = 1
trigger1 = Numproj = 0
attr = S, NP
animtype = Medium
damage = 68,10
hitflag = MAF
guardflag = M
pausetime = 12,12
sparkno = S8020
guard.sparkno = S8110
sparkxy = -11,-90
hitsound = S251,0
guardsound = S201,2
priority = 7, Hit
ground.type = Low
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -2,-11
air.velocity = -2,-11
airguard.velocity = -4,-11
ground.cornerpush.veloff = -0
air.cornerpush.veloff = -0
guard.cornerpush.veloff = -0
guard.velocity = -12
guard.slidetime = 17
;guard.hittime = 17
getpower = 90,90
givepower = 50,20
yaccel = .5
fall.yvelocity = -3.4
fall = 1
fall.recovertime = 40
p2getp1state = 1
p2stateno = 1014

[State 1100, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 1102

;Go down
[Statedef 1102]
type = A
movetype = A
physics = S
anim = 1102
velset = 0,0.53
juggle = 0
ctrl = 0

[State Accel]
type = Veladd
trigger1 = time >= 0
y = .6

[State 1102, 2]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1113


;LAND
[Statedef 1113]
type = S
movetype = A
physics = S
anim = 1113
velset = 0,0
juggle = 0
ctrl = 0

[State 1113, 1]
type = posset
trigger1 = Time = 0
y = 0

[State 1113, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1



;Weak Air Hien 
[Statedef 1200]
type = A
movetype = A
physics = S
anim = 1200
velset = 0,0
poweradd = 90
ctrl = 0
juggle = 15

;Get rid of trailing anims when Hien
[State 1200, 3]
type = AfterImageTime
trigger1 = time = 0
time = 0

[State 1200, snd1]
type = PlaySnd
trigger1 = time = 2
value = 3,4
channel = 0

[State 1200, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 1201
ctrl = 0


;Go down
[Statedef 1201]
type = A
movetype = A
physics = S
anim = 1201
velset = 0,0
poweradd = 0
ctrl = 0
juggle = 9

[State Accel]
type = VelSet
trigger1 = time = 0
x = 3.90
y = 9.33

[State Accel]
type = Veladd
trigger1 = time >= 0
x = 0.82
y = 0

[State 1201, snd2]
type = PlaySnd
trigger1 = time = 1
value = 200,4

[State 320, 3]
type = HitDef
trigger1 = p2stateno != 5040
trigger1 = p2stateno != [154,155]
trigger1 = p2stateno != [1014,1019]
trigger1 = AnimElem = 1
attr = S, SP
animtype = Medium
damage = 136,10
hitflag = MAF
guardflag = M
pausetime = 8,12
sparkno = S8020
guard.sparkno = S8110
sparkxy = -18,-20
hitsound = S251,0
guardsound = S201,2
priority = 7, Hit
ground.type = Low
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -4,-8
air.velocity = -4,-8
airguard.velocity = -4,-5
ground.cornerpush.veloff = -0
air.cornerpush.veloff = -0
guard.cornerpush.veloff = -0
guard.velocity = -12
guard.slidetime = 17
;guard.hittime = 17
getpower = 106,106
givepower = 50,20
yaccel = .5
fall.yvelocity = -3.4
air.juggle = 15
p2getp1state = 1
p2stateno = 1014
fall = 1

[State 1201, 2]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1202

;LAND
[Statedef 1202]
type = S
movetype = A
physics = S
anim = 1202
velset = 5.11,0;1.75
juggle = 0
ctrl = 0


[State 1202, 1]
type = posset
trigger1 = Time = 0
y = 0

[State 1202, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1



;Strong Air Hien 
[Statedef 1210]
type = A
movetype = A
physics = S
anim = 1210
velset = 0,0
poweradd = 90
ctrl = 0
juggle = 15

;Get rid of trailing anims when Hien
[State 1200, 3]
type = AfterImageTime
trigger1 = time = 0
time = 0

[State 1210, snd1]
type = PlaySnd
trigger1 = time = 2
value = 3,4
channel = 0

[State 1210, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 1211
ctrl = 0


;Go down
[Statedef 1211]
type = A
movetype = A
physics = S
anim = 1211
velset = 0,0
poweradd = 0
ctrl = 0
juggle = 9

[State Accel]
type = VelSet
trigger1 = time >= 0
x = 7.01
y = 7.07

[State Friction]
type = VelMul 
trigger1 = 1
X = 1.00178563594818

[State 1211, snd2]
type = PlaySnd
trigger1 = time = 1
value = 200,4

[State 1211, 3]
type = HitDef
trigger1 = p2stateno != 5040
trigger1 = p2stateno != [154,155]
trigger1 = p2stateno != [1014,1019]
trigger1 = AnimElem = 1
attr = S, SP
animtype = Medium
damage = 136,10
hitflag = MAF
guardflag = M
pausetime = 8,12
sparkno = S8020
guard.sparkno = S8110
sparkxy = -18,-20
hitsound = S251,0
guardsound = S201,2
priority = 7, Hit
ground.type = Low
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -4,-8
air.velocity = -4,-8
airguard.velocity = -4,-5
ground.cornerpush.veloff = -0
air.cornerpush.veloff = -0
guard.cornerpush.veloff = -0
guard.velocity = -12
guard.slidetime = 17
;guard.hittime = 17
getpower = 106,106
givepower = 50,20
yaccel = .5
fall.yvelocity = -3.4
p2getp1state = 1
p2stateno = 1014
fall = 1
air.juggle = 15

[State 1201, 2]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1212

;LAND
[Statedef 1212]
type = S
movetype = A
physics = S
anim = 1212
velset = 3.739,0
juggle = 0
ctrl = 0


[State Accel]
type = VelAdd 
trigger1 = 1
X = 0.384615391492844

[State Friction]
type = VelMul 
trigger1 = 1
X = 0.892307698726654

[State 1212, 1]
type = posset
trigger1 = Time = 0
y = 0

[State 1212, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;-----------------------------------------------------------------------------
[Statedef 1250]
type = A
movetype = A
physics = S
anim = 1200
velset = 0,0
poweradd = 90
ctrl = 0
juggle = 15

;Get rid of trailing anims when Hien
[State 1200, 3]
type = AfterImageTime
trigger1 = time = 0
time = 0

[State 1200, snd1]
type = PlaySnd
trigger1 = time = 2
value = 3,4
channel = 0

[State 1200, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 1251
ctrl = 0

;Go down
[Statedef 1251]
type = A
movetype = A
physics = S
anim = 1201
velset = 0,0
poweradd = 0
ctrl = 0
juggle = 9

[State Accel]
type = VelSet
trigger1 = time = 0
x = 3.90
y = 9.33

[State Accel]
type = Veladd
trigger1 = time >= 0
x = 0.82
y = 0

[State 1201, snd2]
type = PlaySnd
trigger1 = time = 1
value = 200,4

[State 320, 3]
type = HitDef
triggerall = P2statetype != A
trigger1 = p2stateno != 5040
trigger1 = p2stateno != [154,155]
trigger1 = p2stateno != [1014,1019]
trigger1 = AnimElem = 1
attr = S, SP
animtype = Medium
damage = 136,10
hitflag = MAF
guardflag = M
pausetime = 8,12
sparkno = S8020
guard.sparkno = S8110
sparkxy = -18,-20
hitsound = S251,0
guardsound = S201,2
priority = 7, Hit
ground.type = Low
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -4,0
air.velocity = -4,-8
airguard.velocity = -4,-5
ground.cornerpush.veloff = -0
air.cornerpush.veloff = -0
guard.cornerpush.veloff = -0
guard.velocity = -12
guard.slidetime = 17
;guard.hittime = 17
getpower = 106,106
givepower = 50,20
yaccel = .5
air.juggle = 15
fall = 0

[State 320, 3]
type = HitDef
triggerall = P2statetype = A
trigger1 = p2stateno != 5040
trigger1 = p2stateno != [154,155]
trigger1 = p2stateno != [1014,1019]
trigger1 = AnimElem = 1
attr = S, SP
animtype = Medium
damage = 136,10
hitflag = MAF
guardflag = M
pausetime = 8,12
sparkno = S8020
guard.sparkno = S8110
sparkxy = -18,-20
hitsound = S251,0
guardsound = S201,2
priority = 7, Hit
ground.type = Low
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -4,0
air.velocity = -4,-8
airguard.velocity = -4,-5
ground.cornerpush.veloff = -0
air.cornerpush.veloff = -0
guard.cornerpush.veloff = -0
guard.velocity = -12
guard.slidetime = 17
;guard.hittime = 17
getpower = 106,106
givepower = 50,20
yaccel = .5
air.juggle = 15
fall = 1

[State 1201, 2]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1202

;------------------------------------------------------------------------------
;Strong Air Hien
[Statedef 1260]
type = A
movetype = A
physics = S
anim = 1210
velset = 0,0
poweradd = 90
ctrl = 0
juggle = 15

;Get rid of trailing anims when Hien
[State 1200, 3]
type = AfterImageTime
trigger1 = time = 0
time = 0

[State 1210, snd1]
type = PlaySnd
trigger1 = time = 2
value = 3,4
channel = 0

[State 1210, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 1261
ctrl = 0

;Go down
[Statedef 1261]
type = A
movetype = A
physics = S
anim = 1211
velset = 0,0
poweradd = 0
ctrl = 0
juggle = 9

[State Accel]
type = VelSet
trigger1 = time >= 0
x = 7.01
y = 7.07

[State Friction]
type = VelMul
trigger1 = 1
X = 1.00178563594818

[State 1211, snd2]
type = PlaySnd
trigger1 = time = 1
value = 200,4

[State 1211, 3]
type = HitDef
triggerall = P2statetype != A
trigger1 = p2stateno != 5040
trigger1 = p2stateno != [154,155]
trigger1 = p2stateno != [1014,1019]
trigger1 = AnimElem = 1
attr = S, SP
animtype = Medium
damage = 136,10
hitflag = MAF
guardflag = M
pausetime = 8,12
sparkno = S8020
guard.sparkno = S8110
sparkxy = -18,-20
hitsound = S251,0
guardsound = S201,2
priority = 7, Hit
ground.type = Low
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -4,0
air.velocity = -4,-8
airguard.velocity = -4,-5
ground.cornerpush.veloff = -0
air.cornerpush.veloff = -0
guard.cornerpush.veloff = -0
guard.velocity = -12
guard.slidetime = 17
;guard.hittime = 17
getpower = 106,106
givepower = 50,20
yaccel = .5
air.juggle = 15
fall = 0

[State 1211, 3]
type = HitDef
triggerall = P2statetype = A
trigger1 = p2stateno != 5040
trigger1 = p2stateno != [154,155]
trigger1 = p2stateno != [1014,1019]
trigger1 = AnimElem = 1
attr = S, SP
animtype = Medium
damage = 136,10
hitflag = MAF
guardflag = M
pausetime = 8,12
sparkno = S8020
guard.sparkno = S8110
sparkxy = -18,-20
hitsound = S251,0
guardsound = S201,2
priority = 7, Hit
ground.type = Low
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -4,0
air.velocity = -4,-8
airguard.velocity = -4,-5
ground.cornerpush.veloff = -0
air.cornerpush.veloff = -0
guard.cornerpush.veloff = -0
guard.velocity = -12
guard.slidetime = 17
;guard.hittime = 17
getpower = 106,106
givepower = 50,20
yaccel = .5
air.juggle = 15
fall = 1

[State 1201, 2]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1212

;------------------------------------------------------------------------------
;SUPREME DANCE
[Statedef 1400]
type = S
movetype = A
physics = S
anim = 1400
velset = 0,0
poweradd = 0
ctrl = 0
juggle = 0

[State 3100,1]
type = NotHitBy
trigger1 = time < 9
value = SCA

[State 1300, snd1]
type = PlaySnd
trigger1 = Time = 4
value = 8,0
channel = 0


[State 1300, snd2]
type = PlaySnd
trigger1 = AnimElem = 5
trigger2 = AnimElem = 11
trigger3 = AnimElem = 18
trigger4 = AnimElem = 24
value = s0,2

[State 310, Posadd1]
type = posadd
trigger1 = AnimElem = 23
trigger2 = Animelem = 24
trigger3 = Animelem = 25
trigger4 = Animelem = 27
x = 8

[State 1300, hit1]
type = HitDef
trigger1 = ifelse(var(16) > 1, p2stateno != 5040,(p2stateno != [5020,5040]))  
trigger1 = p2stateno != [154,155]
trigger1 = AnimElem = 6
attr = S, NA
animtype = hard
damage = 20
guardflag = 
hitflag = MAF
pausetime = 3,3
sparkno = S8020
guard.sparkno = S8110
sparkxy = -6,-92
hitsound = s240,0
guardsound = S201,2
ground.type = high
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0,0
air.velocity = -3.5,-6
air.cornerpush.veloff = -0
airguard.velocity = -4,-7
getpower = 90,90
givepower = 21,21
air.juggle = 15
guard.pausetime = 2,2
guard.slidetime = 0
;guard.hittime = 36
;guard.ctrltime = 36
yaccel = .5
air.fall = 1
fall.yvelocity = -3.4


[State 1300, hit2]
type = HitDef
trigger1 = ifelse(var(16) > 1, p2stateno != 5040,(p2stateno != [5020,5040]))  
trigger1 = p2stateno != [154,155]
trigger1 = AnimElem = 12
attr = S, NA
animtype = hard
damage = 20,10
guardflag = M
hitflag = MAF
pausetime = 3,3
sparkno = S8020
guard.sparkno = S8110
sparkxy = -3,-43
hitsound = s240,0
guardsound = S201,2
ground.type = low
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0,0
air.velocity = -3.5,-6
air.cornerpush.veloff = -0
airguard.velocity = -4,-7
getpower = 90,90
givepower = 21,21
air.juggle = 15
guard.pausetime = 2,2
guard.slidetime = 0
;guard.hittime = 36
;guard.ctrltime = 36
yaccel = .5
air.fall = 1
fall.yvelocity = -3.4


[State 1300, hit3]
type = HitDef
trigger1 = ifelse(var(16) > 1, p2stateno != 5040,(p2stateno != [5020,5040]))  
trigger1 = p2stateno != [154,155]
trigger1 = AnimElem = 19
attr = S, NA
animtype = hard
damage = 20,10
guardflag = M
hitflag = MAF
pausetime = 3,3
sparkno = S8020
guard.sparkno = S8110
sparkxy = 4,-44
hitsound = s240,0
guardsound = S201,2
ground.type = low
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0,0
air.velocity = -3.5,-6
air.cornerpush.veloff = -0
airguard.velocity = -4,-7
getpower = 90,90
givepower = 21,21
air.juggle = 15
guard.pausetime = 2,2
guard.slidetime = 0
;guard.hittime = 36
;guard.ctrltime = 36
yaccel = .5
air.fall = 1
fall.yvelocity = -3.4

[State 1300, hit]
type = HitDef
trigger1 = ifelse(var(16) > 1, p2stateno != 5040,(p2stateno != [5020,5040]))  
trigger1 = p2stateno != [154,155]
trigger1 = AnimElem = 25
attr = S, NA
animtype = hard
damage = 20,10
guardflag = M
hitflag = MA
pausetime = 3,3
sparkno = S8020
guard.sparkno = S8110
sparkxy = 0,-80
hitsound = s240,0
guardsound = S201,2
ground.type = Low
ground.slidetime = 0
ground.hittime = 17
ground.velocity = -2.1,-10.5
air.velocity = -2.1,-10.5
air.cornerpush.veloff = -0
airguard.velocity = -2.2,-1
getpower = 90,90
givepower = 21,21
air.juggle = 15
guard.pausetime = 2,2
guard.slidetime = 0
;guard.hittime = 36
;guard.ctrltime = 36
yaccel = .47
fall.yvelocity = -3.4
fall = 1
p2getp1state = 1
p2stateno = 1004


[State 1300, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------------------------------------------------
[Statedef 1450]
type = S
movetype = A
physics = S
velset = 0,0
ctrl = 0
anim = 1450

[State 1450, NotHitBy]
type = NotHitBy
trigger1 = time < 9
value = SCA

[State 1450, PlaySnd]
type = PlaySnd
trigger1 = Time = 4
value = 8,0
channel = 0

[State 1450, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 5
trigger2 = AnimElem = 11
value = s0,2

[State 1450, PosAdd]
type = PosAdd
trigger1 = AnimElem = 1
x = 8

[State 1450, PosAdd]
type = PosAdd
trigger1 = AnimElem = 2
trigger2 = Animelem = 3
x = 10

[State 1450, PosAdd]
type = PosAdd
trigger1 = AnimElem = 4
trigger2 = AnimElem = 5
trigger3 = AnimElem = 6
trigger7 = AnimElem = 7
trigger8 = AnimElem = 8
trigger9 = AnimElem = 9
x = 8

[State 1450, PosAdd]
type = PosAdd
trigger1 = AnimElem = 9
x = 20

[State 1450, PosAdd]
type = PosAdd
trigger1 = AnimElem = 10
x = 10

[State 1450, PosAdd]
type = PosAdd
trigger1 = AnimElem = 11
trigger2 = AnimElem = 12
trigger3 = AnimElem = 13
x = 8

[State 1450, PosAdd]
type = PosAdd
trigger1 = AnimElem = 14
x = 15

[State 1450, HitDef]
type = HitDef
trigger1 = ifelse(var(16) > 1, p2stateno != 5040,(p2stateno != [5020,5040]))
trigger1 = p2stateno != [154,155]
trigger1 = AnimElem = 3
attr = S, NA
animtype = hard
damage = 20
guardflag =
hitflag = MAF
pausetime = 7,8
sparkno = S8020
guard.sparkno = S8110
sparkxy = -15,-72
hitsound = s240,0
guardsound = S201,2
ground.type = high
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0,0
air.velocity = -3.5,-6
air.cornerpush.veloff = -0
airguard.velocity = -4,-7
getpower = 90,90
givepower = 21,21
air.juggle = 15
guard.pausetime = 2,2
guard.slidetime = 0
;guard.hittime = 36
;guard.ctrltime = 36
yaccel = .5
air.fall = 1
fall.yvelocity = -3.4
kill = 0

[State 1450, HitDef]
type = HitDef
trigger1 = ifelse(var(16) > 1, p2stateno != 5040,(p2stateno != [5020,5040]))
trigger1 = p2stateno != [154,155]
trigger1 = AnimElem = 10
attr = S, NA
animtype = hard
damage = 20,10
guardflag = M
hitflag = MAF
pausetime = 7,8
sparkno = S8020
guard.sparkno = S8110
sparkxy = -30,-75
hitsound = s240,0
guardsound = S201,2
ground.type = low
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0,0
air.velocity = -3.5,-6
air.cornerpush.veloff = -0
airguard.velocity = -4,-7
getpower = 90,90
givepower = 21,21
air.juggle = 15
guard.pausetime = 2,2
guard.slidetime = 0
;guard.hittime = 36
;guard.ctrltime = 36
yaccel = .5
air.fall = 1
fall.yvelocity = -3.4
kill = 0

[State 1450, HitDef]
type = HitDef
trigger1 = ifelse(var(16) > 1, p2stateno != 5040,(p2stateno != [5020,5040]))
trigger1 = p2stateno != [154,155]
trigger1 = AnimElem = 17
attr = S, NA
animtype = hard
damage = 20,10
guardflag = M
hitflag = MA
pausetime = 7,8
sparkno = S8020
guard.sparkno = S8110
sparkxy = -30,-90
hitsound = s250,0
guardsound = S201,2
ground.type = Low
ground.slidetime = 0
ground.hittime = 17
ground.velocity = -2.1,-10.5
air.velocity = -2.1,-10.5
air.cornerpush.veloff = -0
airguard.velocity = -2.2,-1
getpower = 90,90
givepower = 21,21
air.juggle = 15
guard.pausetime = 2,2
guard.slidetime = 0
;guard.hittime = 36
;guard.ctrltime = 36
yaccel = .47
fall.yvelocity = -3.4
fall = 1
p2getp1state = 1
p2stateno = 1004

[State 1450, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;------------------------------------------------------------------------------
;Gen ei Weak
[Statedef 1500]
type = S
movetype = A
physics = S
anim = 1500
velset = 0,0
ctrl = 0
juggle = 14
poweradd = 106

[State 2602, snd1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 3,6
channel = 0

[State 2602, 1]
type = PlaySnd
trigger1 = AnimElem = 5
trigger2 = AnimElem = 8
trigger3 = AnimElem = 11
trigger4 = AnimElem = 14
trigger5 = AnimElem = 17
trigger6 = AnimElem = 20
trigger7 = AnimElem = 23
trigger8 = AnimElem = 26
trigger9 = AnimElem = 29
trigger10 = AnimElem = 32
value = 200,3
channel = 3

[State 2602, 1]
type = HitDef
triggerall = p2stateno != [1014,1019]
triggerall = (p2stateno != [5020,5040])
triggerall = p2stateno != [154,155]
trigger1 = AnimElem = 5
trigger2 = AnimElem = 8
trigger3 = AnimElem = 11
trigger4 = AnimElem = 14
trigger5 = AnimElem = 17
trigger6 = AnimElem = 20
trigger7 = AnimElem = 23
trigger8 = AnimElem = 26
trigger9 = AnimElem = 29
trigger10 = AnimElem = 32
attr = S, SA
damage = 0,0
animtype = Hard
guardflag = M
hitflag = MAF
pausetime = 2,0
priority = 5,miss
sparkno = S8020
guard.sparkno = S8120
sparkxy = 2, -78
hitsound = S9999,9
guardsound = S201,2
ground.type = Low
ground.slidetime = 10
ground.hittime  = 18
guard.velocity = -18.5
air.velocity = -4,-3
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -18.5
p1stateno = 1550
p2stateno = 1560
p2facing = 1
snap = 40,0

[State 2602, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;Gen ei Strong
[Statedef 1510]
type = S
movetype = A
physics = S
anim = 1510
velset = 0
ctrl = 0
juggle = 14
poweradd = 106

[State 2600, snd1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 3,6
channel = 0

[State 2602, 1]
type = PlaySnd
trigger1 = AnimElem = 5
trigger2 = AnimElem = 8
trigger3 = AnimElem = 11
trigger4 = AnimElem = 14
trigger5 = AnimElem = 17
trigger6 = AnimElem = 20
trigger7 = AnimElem = 23
trigger8 = AnimElem = 26
trigger9 = AnimElem = 29
trigger10 = AnimElem = 32
trigger11 = AnimElem = 35
trigger12 = AnimElem = 38
trigger13 = AnimElem = 41
trigger14 = AnimElem = 44
trigger15 = AnimElem = 47
trigger16 = AnimElem = 50
trigger17 = AnimElem = 53
trigger18 = AnimElem = 56
trigger19 = AnimElem = 59
trigger20 = AnimElem = 62
value = 200,3
channel = 2

[State 2600, 1]
type = HitDef
triggerall = p2stateno != [1014,1019]
triggerall = (p2stateno != [5020,5040])
triggerall = p2stateno != [154,155]
trigger1 = AnimElem = 5
trigger2 = AnimElem = 8
trigger3 = AnimElem = 11
trigger4 = AnimElem = 14
trigger5 = AnimElem = 17
trigger6 = AnimElem = 20
trigger7 = AnimElem = 23
trigger8 = AnimElem = 26
trigger9 = AnimElem = 29
trigger10 = AnimElem = 32
trigger11 = AnimElem = 35
trigger12 = AnimElem = 38
trigger13 = AnimElem = 41
trigger14 = AnimElem = 44
trigger15 = AnimElem = 47
trigger16 = AnimElem = 50
trigger17 = AnimElem = 53
trigger18 = AnimElem = 56
trigger19 = AnimElem = 59
trigger20 = AnimElem = 62
attr = S, SA
damage = 0,0
animtype = Hard
guardflag = M
hitflag = MAF
pausetime = 2,0
priority = 5,miss
sparkno = S8020
guard.sparkno = S8120
sparkxy = 2, -78
hitsound = S999999,0
guardsound = S201,2
ground.type = Low
ground.slidetime = 10
ground.hittime  = 18
guard.velocity = -18.5
air.velocity = -4,-3
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -18.5
p1stateno = 1550
p2stateno = 1560
p2facing = 1
snap = 40,0

[State 2600, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------------------------------------------------
;SUCCEED
[Statedef 1550]
type = S
movetype = A
physics = S
anim = 1550
poweradd = 0

[State 2601, 1]
type = HitAdd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 5
trigger3 = AnimElem = 8
trigger4 = AnimElem = 11
trigger5 = AnimElem = 14
trigger6 = AnimElem = 17
trigger7 = AnimElem = 20
trigger8 = AnimElem = 23
trigger9 = AnimElem = 26
trigger10= AnimElem = 29
trigger11= AnimElem = 32
value = 1

[State 2601, 1]
type = PowerAdd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 5
trigger3 = AnimElem = 8
trigger4 = AnimElem = 11
trigger5 = AnimElem = 14
trigger6 = AnimElem = 17
trigger7 = AnimElem = 20
trigger8 = AnimElem = 23
trigger9 = AnimElem = 26
trigger10= AnimElem = 29
trigger11= AnimElem = 32
value = 30


[State 2601, 1]
type = TargetLifeAdd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 5
trigger3 = AnimElem = 8
trigger4 = AnimElem = 11
trigger5 = AnimElem = 14
trigger6 = AnimElem = 17
trigger7 = AnimElem = 20
trigger8 = AnimElem = 23
trigger9 = AnimElem = 26
trigger10= AnimElem = 29
trigger11= AnimElem = 32
value = -10
kill = 0

[State 1056, 1]
type = PlaySnd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 5
trigger3 = AnimElem = 8
trigger4 = AnimElem = 11
trigger5 = AnimElem = 14
trigger6 = AnimElem = 17
trigger7 = AnimElem = 20
trigger8 = AnimElem = 23
trigger9 = AnimElem = 26
trigger10= AnimElem = 29
trigger11= AnimElem = 32
value = 230,0
channel = 2

[State 1056, 1]
type = Explod
trigger1 = AnimElem = 2
trigger2 = AnimElem = 5
trigger3 = AnimElem = 8
anim = 8020
pos = 40,-24
sprpriority = 5
ownpal = 1

[State 1056, 1]
type = Explod
trigger1 = AnimElem = 11
trigger2 = AnimElem = 14
trigger3 = AnimElem = 17
anim = 8020
pos = 40,-63
sprpriority = 5
ownpal = 1

[State 1056, 1]
type = Explod
trigger1 = AnimElem = 20
trigger2 = AnimElem = 23
trigger3 = AnimElem = 26
trigger4 = AnimElem = 29
trigger5 = AnimElem = 32
anim = 8020
pos = 40,-80
sprpriority = 5
ownpal = 1

[State 2601, 1]
type = HitDef
trigger1 = AnimElem = 39
attr = S, SA
damage = 88,0
animtype = Diagup
guardflag = M
hitflag = MAF
getpower = 30,0
pausetime = 21,21
sparkno = S8020
guard.sparkno = S8120
sparkxy = -40, -116
hitsound = S251,0
guardsound = S200,4
ground.type = Low
ground.slidetime = 10
ground.hittime  = 18
ground.velocity = -6,-8
air.velocity = -6,-8
fall = 1
fall.recovertime = 40
yaccel = .5
envshake.time = 16
envshake.ampl = -4
envshake.freq = 90

[State 2601, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;Hit By Gen ei
[Statedef 1560]
type = A
movetype = H
physics = N
velset = 0,0
ctrl = 0

[State 1560, 2]
type = ChangeAnim2
trigger1 = Time = 0
value = 1560

[State 1560, 2]
type = velset
trigger1 = Time = 2
y = -.42


;Hien Shippuu Kyaku (Weak)
[Statedef 1600]
type = S
movetype = A
physics = S
anim = 1600
ctrl = 0
velset = 0, 0
poweradd = 142
juggle = 14

[State Posadd]
type = posadd
trigger1 = animelem = 2
x = 8

[State 2810, snd1]
type = PlaySnd
trigger1 = animelem = 1, =1
value = 3,11
channel = 0

[State 2801,1]
type = ChangeState
trigger1 = AnimTime = 0
value = 1601

;Go
[Statedef 1601]
type = A
movetype = A
physics = N
anim = 1601
velset = 3, -3.8

[State Accel]
type = Veladd
trigger1 = time >= 0
y = .29

[State 1601, snd1]
type = PlaySnd
trigger1 = animelem = 10
value = 3,12
channel = 0

[State 1601, eff]
type = PlaySnd
trigger1 = animelem = 1, =1
trigger2 = animelem = 5, =1
trigger3 = animelem = 9, =1
value = 200,3
channel = 2

[State 1601, 4]
type = HitDef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = p2stateno != [1014,1019]
trigger1 = AnimElem = 2
attr = S, NA
animtype = hard
damage = 40,10
guardflag = M
hitflag = MAF
pausetime = 8,13
sparkno = S8020
guard.sparkno = S8120
sparkxy = -20,-51
hitsound = S240
guardsound = S201,2
ground.type = High
ground.cornerpush.veloff = -0
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -12.3
air.velocity = -3.5,-6
air.cornerpush.veloff = -0
airguard.velocity = -4,-6
getpower = 60,60
givepower = 21,21
air.juggle = 15
guard.pausetime = 8,13
guard.slidetime = 18
;guard.hittime = 36
;guard.ctrltime = 36
yaccel = .5
air.fall = 1
fall.yvelocity = -3.4

[State 1601, 4]
type = HitDef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = p2stateno != [1014,1019]
trigger1 = AnimElem = 6
attr = S, NA
animtype = hard
damage = 40,10
guardflag = M
hitflag = MAF
pausetime = 8,13
sparkno = S8020
guard.sparkno = S8120
sparkxy = -20,-64
hitsound = S240
guardsound = S201,2
ground.type = High
ground.cornerpush.veloff = -0
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -12.3
air.velocity = -3.5,-6
air.cornerpush.veloff = -0
airguard.velocity = -4,-6
getpower = 60,60
givepower = 21,21
air.juggle = 15
guard.pausetime = 8,13
guard.slidetime = 18
;guard.hittime = 36
;guard.ctrltime = 36
yaccel = .5
air.fall = 1
fall.yvelocity = -3.4

[State 1601, 4]
type = HitDef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = p2stateno != [1014,1019]
trigger1 = AnimElem = 10
attr = S, NA
animtype = hard
damage = 40,10
guardflag = M
hitflag = MA
pausetime = 8,13
sparkno = S8020
guard.sparkno = S8120
sparkxy = -20,-64
hitsound = S240
guardsound = S201,2
ground.type = High
ground.cornerpush.veloff = -0
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -4,-8
air.velocity = -4,-7
air.cornerpush.veloff = -0
airguard.velocity = -4,-6
getpower = 60,60
givepower = 21,21
air.juggle = 15
guard.pausetime = 8,13
guard.slidetime = 17
;guard.hittime = 36
;guard.ctrltime = 36
yaccel = .53
fall = 1
fall.yvelocity = -3.4

[State 1601, 2]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1602

;LAND
[Statedef 1602]
type = S
movetype = A
physics = S
anim = 1602
velset = 0,0
juggle = 0
ctrl = 0

[State 1602, 1]
type = PlaySnd
trigger1 = Time = 0
value = 1,5

[State 1602, 2]
type = posset
trigger1 = Time = 0
y = 0

[State 1602, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------------------------------------------------
;Hien Shippuu Kyaku (Strong)
[Statedef 1610]
type = S
movetype = A
physics = S
anim = 1610
ctrl = 0
velset = 0, 0
poweradd = 142
juggle = 14

[State Posadd]
type = posadd
trigger1 = animelem = 2
x = 8

[State 1610, snd1]
type = PlaySnd
trigger1 = animelem = 1, =1
value = 3,11
channel = 0

[State 1610,1]
type = ChangeState
trigger1 = AnimTime = 0
value = 1611

;Go
[Statedef 1611]
type = A
movetype = A
physics = N
anim = 1611
velset = 4, -4.85
;juggle = 0

[State Accel]
type = Veladd
trigger1 = time >= 0
y = .29

[State 1611, snd1]
type = PlaySnd
trigger1 = animelem = 10
value = 3,12
channel = 0

[State 1611, eff]
type = PlaySnd
trigger1 = animelem = 1, =1
trigger2 = animelem = 5, =1
trigger3 = animelem = 9, =1
trigger4 = animelem = 13, =1
value = 200,3
channel = 2

[State 1611, 4]
type = HitDef
trigger1 = (p2stateno != [5020,5029])  
trigger1 = (p2stateno != [5031,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = p2stateno != [1014,1019]
trigger1 = AnimElem = 2
attr = A, SA
animtype = hard
damage = 40,10
guardflag = M
hitflag = MAF
pausetime = 8,13
sparkno = S8020
guard.sparkno = S8120
sparkxy = -20,-71
hitsound = S240
guardsound = S201,2
ground.type = High
ground.cornerpush.veloff = -0
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -12.3
air.velocity = -3.5,-6
air.cornerpush.veloff = -0
airguard.velocity = -4,-6
getpower = 60,60
givepower = 21,21
guard.pausetime = 8,13
guard.slidetime = 18
;guard.hittime = 36
;guard.ctrltime = 36
air.fall = 1
yaccel = .5
fall.yvelocity = -3.4

[State 1611, 4]
type = HitDef
trigger1 = (p2stateno != [5020,5029])  
trigger1 = (p2stateno != [5031,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = p2stateno != [1014,1019]
trigger1 = AnimElem = 6
attr = A, SA
animtype = hard
damage = 40,10
guardflag = M
hitflag = MAF
pausetime = 8,13
sparkno = S8020
guard.sparkno = S8120
sparkxy = -20,-71
hitsound = S240
guardsound = S201,2
ground.type = High
ground.cornerpush.veloff = -0
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -12.3
air.velocity = -3.5,-6
air.cornerpush.veloff = -0
airguard.velocity = -4,-6
getpower = 60,60
givepower = 21,21
guard.pausetime = 8,13
guard.slidetime = 18
;guard.hittime = 36
;guard.ctrltime = 36
air.fall = 1
yaccel = .5
fall.yvelocity = -3.4

[State 1611, 4]
type = HitDef
trigger1 = (p2stateno != [5020,5029])  
trigger1 = (p2stateno != [5031,5040])    
trigger1 = p2stateno != [154,155]
trigger1 = p2stateno != [1014,1019]
trigger1 = AnimElem = 10
attr = A, SA
animtype = hard
damage = 40,10
guardflag = M
hitflag = MAF
pausetime = 8,13
sparkno = S8020
guard.sparkno = S8120
sparkxy = -20,-73
hitsound = S240
guardsound = S201,2
ground.type = High
ground.cornerpush.veloff = -0
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -12.3
air.velocity = -3.5,-6
air.cornerpush.veloff = -0
airguard.velocity = -4,-6
getpower = 60,60
givepower = 21,21
guard.pausetime = 8,13
guard.slidetime = 18
;guard.hittime = 36
;guard.ctrltime = 36
air.fall = 1
yaccel = .5
fall.yvelocity = -3.4

[State 1611, 4]
type = HitDef
trigger1 = (p2stateno != [5020,5029])  
trigger1 = (p2stateno != [5031,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = p2stateno != [1014,1019]
trigger1 = AnimElem = 14
attr = A, SA
animtype = hard
damage = 40,10
guardflag = M
hitflag = MA
pausetime = 8,13
sparkno = S8020
guard.sparkno = S8120
sparkxy = -20,-64
hitsound = S240
guardsound = S201,2
ground.type = High
ground.cornerpush.veloff = -0
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -4,-8
air.velocity = -4,-7
air.cornerpush.veloff = -0
airguard.velocity = -4,-6
getpower = 60,60
givepower = 21,21
guard.pausetime = 8,13
guard.slidetime = 18
;guard.hittime = 36
;guard.ctrltime = 36
yaccel = .53
fall = 1
fall.yvelocity = -3.4

[State 1611, 2]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1612

;LAND
[Statedef 1612]
type = S
movetype = A
physics = S
anim = 1612
velset = 0,0
juggle = 0
ctrl = 0

[State 1612, 1]
type = PlaySnd
trigger1 = Time = 0
value = 1,5

[State 1612, 2]
type = posset
trigger1 = Time = 0
y = 0

[State 1612, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;=====================================
;HYPER ATTACKS
;=====================================
;Weak Haou Shikou Ken 
[Statedef 3000]
type = S
movetype = A
physics = S
velset = 0,0
ctrl = 0
anim = 3000
juggle = 15

;SPECIAL CANCEL 
[State 3000, PowerAdd]
type = Poweradd
triggerall = time = 0
trigger1 = prevstateno = 1100 || prevstateno = 1110
value = -1000

[State 3000, PALFX]
type = PalFX
triggerall = timemod = 2,0 && time <= 13
trigger1 = prevstateno = 1100 || prevstateno = 1110
ignorehitpause = 1
time = 1
add = 255,255,255
sinadd = -100,-100,-100, 1
ignorehitpause = 1


[State 3000, SparkSound]
type = PlaySnd
trigger1 = time = 2
value = s9,0
channel = 1

[State 3000, Voice]
type = PlaySnd
trigger1 = time = 3
value = 3,7
channel = 0

[State 3000, env]
type = EnvColor
trigger1 = Time = 2
value = 255,255,255
time = 4
under = 1

[State 3000, env2]
type = EnvColor
trigger1 = Time = 6
value = 0,0,0
time = 24
under = 1

[State 3000, Super Pause]
type = SuperPause
trigger1 = animelem = 1
movetime = 29
poweradd = -1000
time = 29
anim = -1
;p2defmul = 1
darken = 0

[State 3100, 1]
type = AssertSpecial
trigger1 = Time = [2,29]
flag = noFG
flag2= noBG

[State 3000, Explod]
type = Explod
trigger1 = Time = 2
anim = 8500
pos = 6,-98
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermove = 1
scale = 1,1
sprpriority = -1

[State 3000, Explod]
type = Explod
trigger1 = Time = 2
anim = 8510
pos = 6,-98
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermove = 1
scale = 1,1
sprpriority = 9


[State 3000, snd]
type = PlaySnd
trigger1 = AnimElem = 7,2
value = 200,7

[State 3000, 1]
type = Projectile
trigger1 = AnimElem = 7,1
projanim = 2004
projhitanim = 2011
projID = 2004
velocity = 4,0
offset = 80,0
attr = S, HP
damage = 274, 20
animtype = up
guardflag = M
pausetime = 0,12
priority = 20, Hit
projpriority = 20
sparkno = S8020
guard.sparkno = S8120
sparkxy = 26, -100
hitsound = s250,0
guardsound = s201,2
ground.type = high
ground.slidetime = 17
ground.hittime  = 17
air.hittime = 18
ground.velocity = -5,-7
air.velocity = -5,-7
guard.velocity = -12
;guard.ctrltime = 39
;guard.hittime = 39
fall = 1
fall.recover = 1
air.juggle = 15
yaccel = .5
getpower = 0,0
givepower = 30,10


[State 3000, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;Strong Haou Shikou Ken 
[Statedef 3010]
type = S
movetype = A
physics = S
ctrl = 0
velset = 0,0
anim = 3010
juggle = 15

;SPECIAL CANCEL 
[State 3000, PowerAdd]
type = Poweradd
triggerall = time = 0
trigger1 = prevstateno = 1100 || prevstateno = 1110
value = -1000

[State 3000, PALFX]
type = PalFX
triggerall = timemod = 2,0 && time <= 13
trigger1 = prevstateno = 1100 || prevstateno = 1110
ignorehitpause = 1
time = 1
add = 255,255,255
sinadd = -100,-100,-100, 1
ignorehitpause = 1

[State 3010, SparkSound]
type = PlaySnd
trigger1 = time = 2
value = s9,0
channel = 1

[State 3010, Voice]
type = PlaySnd
trigger1 = time = 3
value = 3,7
channel = 0

[State 3010, env]
type = EnvColor
trigger1 = Time = 2
value = 255,255,255
time = 4
under = 1

[State 3010, env2]
type = EnvColor
trigger1 = Time = 6
value = 0,0,0
time = 24
under = 1

[State 3010, Super Pause]
type = SuperPause
trigger1 = animelem = 1
movetime = 29
poweradd = -1000
time = 29
anim = -1
;p2defmul = 1
darken = 1

[State 3010, 1]
type = AssertSpecial
trigger1 = Time = [2,29]
flag = noFG
flag2= noBG

[State 3010, Explod]
type = Explod
trigger1 = Time = 2
anim = 8500
pos = 6,-98
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermove = 1
scale = 1,1
sprpriority = -1

[State 3010, Explod]
type = Explod
trigger1 = Time = 2
anim = 8510
pos = 6,-98
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermove = 1
scale = 1,1
sprpriority = 9


[State 3010, snd]
type = PlaySnd
trigger1 = AnimElem = 7,2
value = 200,7

[State 3010, 1]
type = Projectile
trigger1 = AnimElem = 7,1
trigger1 = p2stateno != [1004,1009]
projanim = 2004
projhitanim = 2011
projID = 2004
velocity = 7,0
offset = 80,0
attr = S, HP
damage = 274, 20
animtype = up
guardflag = M
pausetime = 0,12
priority = 20, Hit
projpriority = 20
sparkno = S8020
guard.sparkno = S8120
sparkxy = 26, -100
hitsound = s250,0
guardsound = s201,2
ground.type = high
ground.slidetime = 17
ground.hittime  = 17
air.hittime = 18
ground.velocity = -5,-7
air.velocity = -5,-7
guard.velocity = -12
;guard.ctrltime = 39
;guard.hittime = 39
fall = 1
fall.recover = 1
air.juggle = 15
yaccel = .5
getpower = 0,0
givepower = 30,10


[State 3010, 1]
type = Projectile
trigger1 = AnimElem = 7,1
trigger1 = p2stateno = [1004,1009]
projanim = 2004
projhitanim = 2011
projID = 2004
velocity = 7,0
offset = 80,0
attr = S, HP
damage = 274, 20
animtype = up
guardflag = M
pausetime = 0,12
priority = 20, Hit
projpriority = 20
sparkno = S8020
guard.sparkno = S8120
sparkxy = 26, -100
hitsound = s250,0
guardsound = s201,2
ground.type = high
ground.slidetime = 17
ground.hittime  = 17
air.hittime = 18
ground.velocity = -5,-7
air.velocity = -5,-7
guard.velocity = -12
;guard.ctrltime = 39
;guard.hittime = 39
fall = 1
fall.recover = 1
air.juggle = 16
yaccel = .5
getpower = 0,0
givepower = 30,10

[State 3010, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;Ryuuko Ranbu (WEAK)
[Statedef 3100]
type = S
movetype = A
physics = S
anim = 3100
velset = 0,0
ctrl = 0
juggle = 14
poweradd = 0

;SPECIAL CANCEL 
[State 3000, PowerAdd]
type = Poweradd
triggerall = time = 0
trigger1 = prevstateno = 1100 || prevstateno = 1110
value = -1000

[State 3000, PALFX]
type = PalFX
triggerall = timemod = 2,0 && time <= 13
trigger1 = prevstateno = 1100 || prevstateno = 1110
ignorehitpause = 1
time = 1
add = 255,255,255
sinadd = -100,-100,-100, 1
ignorehitpause = 1


[State 3000, SparkSound]
type = PlaySnd
trigger1 = time = 2
value = s9,0
channel = 1

[State 3000, SparkSound]
type = PlaySnd
trigger1 = animelem = 7, =1
value = 200,9
channel = 1

[State 3000, Voice]
type = PlaySnd
trigger1 = time = 3
value = 3,8
channel = 0

[State 3000, env]
type = EnvColor
trigger1 = Time = 2
value = 255,255,255
time = 4
under = 1

[State 3000, env2]
type = EnvColor
trigger1 = Time = 6
value = 0,0,0
time = 24
under = 1

[State 3000, Super Pause]
type = SuperPause
trigger1 = animelem = 1
movetime = 29
poweradd = -1000
time = 29
anim = -1
;p2defmul = 1
darken = 1

[State 3100, 1]
type = AssertSpecial
trigger1 = Time = [2,29]
flag = noFG
flag2= noBG

[State 3100, Explod]
type = Explod
trigger1 = Time = 2
anim = 8500
pos = 6,-98
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermove = 1
scale = 1,1
sprpriority = -1

[State 3000, Explod]
type = Explod
trigger1 = Time = 2
anim = 8510
pos = 6,-98
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermove = 1
scale = 1,1
sprpriority = 9

[State 3100, 1]
type = AfterImage
trigger1 = AnimElem = 7
time = 200
length = 8
framegap = 3
palcolor = 0
trans = add1
palbright = 106,106,138
palcontrast = 96,64,160
paladd = 0,0,0
palmul = 1,1,1

[State 3100,1]
type = NotHitBy
trigger1 = time <= 45
value = SCA


[State 3100, 1]
type = StateTypeSet
trigger1 = AnimElem = 7
statetype = A
physics = N

[State 3100, 1]
type = velset
trigger1 = AnimElem = 7
x = 10
y = -.80;95

[State 3100, 1]
type = veladd
trigger1 = AnimElem = 7,> 0
y = .125

[State 3200, Hitdef]
type = HitDef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = p2stateno != [1004,1009]
trigger1 = roundstate = 2
trigger1 = AnimElem = 7, =1
attr = S, HA
hitflag = MA
animtype = hard
damage = 0,0
guardflag = M
pausetime = 2,1
guard.pausetime = 2,12
sparkno = S8020
guard.sparkno = S8120
sparkxy = 19,-84
hitsound = S999999
guardsound = S201,2
ground.type = low
ground.slidetime = 10
ground.hittime = 17
ground.velocity = 0,0
air.velocity = 0
airguard.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
snap = 55,0
yaccel = .5
p2facing = 1
p1stateno = 3150
p2getp1stateno = 1
p2stateno = 3103
kill = 0

[State 3100, 2]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
trigger2 = moveguarded
value = 3102


;Ryuuko Ranbu (STRONG)
[Statedef 3101]
type = S
movetype = A
physics = S
anim = 3101
velset = 0,0
ctrl = 0
juggle = 14

;SPECIAL CANCEL 
[State 3000, PowerAdd]
type = Poweradd
triggerall = time = 0
trigger1 = prevstateno = 1100 || prevstateno = 1110
value = -1000

[State 3000, PALFX]
type = PalFX
triggerall = timemod = 2,0 && time <= 13
trigger1 = prevstateno = 1100 || prevstateno = 1110
ignorehitpause = 1
time = 1
add = 255,255,255
sinadd = -100,-100,-100, 1
ignorehitpause = 1

[State 3000, SparkSound]
type = PlaySnd
trigger1 = time = 2
value = s9,0
channel = 1

[State 3000, SparkSound]
type = PlaySnd
trigger1 = animelem = 7, =1
value = 200,9
channel = 1

[State 3000, Voice]
type = PlaySnd
trigger1 = time = 3
value = 3,8
channel = 0

[State 3000, env]
type = EnvColor
trigger1 = Time = 2
value = 255,255,255
time = 4
under = 1

[State 3000, env2]
type = EnvColor
trigger1 = Time = 6
value = 0,0,0
time = 24
under = 1

[State 3000, Super Pause]
type = SuperPause
trigger1 = animelem = 1
movetime = 29
poweradd = -1000
time = 29
anim = -1
;p2defmul = 1
darken = 1

[State 3100, 1]
type = AssertSpecial
trigger1 = Time = [2,29]
flag = noFG
flag2= noBG

[State 3101, Explod]
type = Explod
trigger1 = Time = 2
anim = 8500
pos = 6,-98
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermove = 1
scale = 1,1
sprpriority = -1

[State 3001, Explod]
type = Explod
trigger1 = Time = 2
anim = 8510
pos = 6,-98
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermove = 1
scale = 1,1
sprpriority = 9


[State 3100, 1]
type = AfterImage
trigger1 = AnimElem = 7
time = 200
length = 8
framegap = 3
palcolor = 0
trans = add1
palbright = 106,106,138
palcontrast = 96,64,160
paladd = 0,0,0
palmul = 1,1,1

[State 3100,1]
type = NotHitBy
trigger1 = time <= 39
value = SCA

[State 3100, 1]
type = StateTypeSet
trigger1 = AnimElem = 7
statetype = A
physics = N

[State 3109, 1]
type = velset
trigger1 = AnimElem = 7
x = 10
y = -1.70;94

[State 3109, 1]
type = veladd
trigger1 = AnimElem = 7,> 0
y = .133

[State 3109, Hitdef]
type = HitDef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = p2stateno != [1004,1009]
trigger1 = roundstate = 2
trigger1 = AnimElem = 7, =1
attr = S, HA
hitflag = MA
animtype = hard
damage = 0,0
guardflag = M
pausetime = 2,1
guard.pausetime = 2,12
sparkno = S8020
guard.sparkno = S8120
sparkxy = 19,-84
hitsound = S9999999
guardsound = S201,2
ground.type = low
ground.slidetime = 10
ground.hittime = 17
ground.velocity = 0,0
air.velocity = 0
airguard.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
snap = 55,0
yaccel = .5
p2facing = 1
p1stateno = 3150
p2getp1stateno = 1
p2stateno = 3103
kill = 0

[State 3109, 2]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
trigger2 = moveguarded
value = 3123


;Ryuuko Ranbu (MISS) Weak
[Statedef 3102]
type = S
movetype = A
physics = N
anim = 3102
velset = 0,0

[State 3102, 1]
type = AfterImageTime
trigger1 = Time = 0
time = 0

[State 3102, 1]
type = posset
trigger1 = Time = 0
y = 0

[State InitVel]
type = posadd
trigger1 = time = 0
trigger2 = time = 1
x = 7

[State InitVel]
type = posadd
trigger1 = time = 2
x = 5

[State InitVel]
type = posadd
trigger1 = time = 3
trigger2 = time = 4
trigger3 = time = 5
x = 4

[State InitVel]
type = posadd
trigger1 = time = 6
trigger2 = time = 8
trigger3 = time = 9
trigger4 = time = 11
x = 2

[State InitVel]
type = posadd
trigger1 = time = 7
trigger2 = time = 4
x = 3

[State InitVel]
type = posadd
trigger1 = time = 10
trigger2 = time = 12
trigger3 = time = 13
x = 1

[State 3102, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1




;Ryuuko Ranbu (MISS) Strong
[Statedef 3123]
type = S
movetype = A
physics = N
anim = 3103
velset = 0,0

[State 3122, 2KStyleSDM]
type = Bgpalfx
trigger1 = 1
trigger1 = PrevStateNo = 3500
invertall = 1
time = 2
mul = 120,120,120
ignorehitpause = 1

[State 3102, 1]
type = AfterImageTime
trigger1 = Time = 0
time = 0

[State 3102, 1]
type = posset
trigger1 = Time = 0
y = 0

[State InitVel]
type = posadd
trigger1 = time = 0
trigger2 = time = 1
x = 7

[State InitVel]
type = posadd
trigger1 = time = 2
x = 5

[State InitVel]
type = posadd
trigger1 = time = 3
trigger2 = time = 4
trigger3 = time = 5
x = 4

[State InitVel]
type = posadd
trigger1 = time = 6
trigger2 = time = 8
trigger3 = time = 9
x = 2

[State InitVel]
type = posadd
trigger1 = time = 7
x = 3

[State InitVel]
type = posadd
trigger1 = time = 10
trigger2 = time = 11
trigger3 = time = 12
trigger4 = time = 13
trigger5 = time = 15
x = 1

[State InitVel]
type = posadd
trigger1 = time = 14
x = 0

[State 3102, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;Fight
[Statedef 3150]
type = S
movetype = A
physics = N
velset = 0,0
juggle = 0
anim = 3150
ctrl = 0

[State 3000, Voice]
type = PlaySnd
trigger1 = time = 1
value = 3,9
channel = 0

[State 3103, 1]
type = AfterImageTime
trigger1 = Time = 0
time = 0

[State 3100, 1]
type = AfterImage
trigger1 = AnimElem = 50, =1
time = 200
length = 8
framegap = 3
palcolor = 0
trans = add1
palbright = 106,106,138
palcontrast = 96,64,160
paladd = 0,0,0
palmul = 1,1,1

[State 3103, 1]
type = posset
trigger1 = Time = 0
y = 0

[State 3103, 1]
type = velset
trigger1 = Time = 0
y = 0
x = 2

[State 3103, 1]
type = velset
trigger1 = animelem = 47
x = 0

[State 3100,1]
type = NotHitBy
trigger1 = time >= 0
value = SCA

[State 3100,1]
type = width
trigger1 = time >= 0
value = 25

[State 300, 1]
type = PosAdd
trigger1 = animelem = 54
x = 8

[State 1100, snd1]
type = PlaySnd
trigger1 = animelem = 54
value = 181,5
channel = 0

[State 3103, snd]
type = PlaySnd
triggerall = movehit
trigger1 = AnimElem = 2
trigger2 = AnimElem = 4
trigger3 = AnimElem = 7
trigger4 = AnimElem = 11
trigger5 = AnimElem = 15
trigger6 = AnimElem = 18
trigger7 = AnimElem = 21
trigger8 = AnimElem = 25
trigger9 = AnimElem = 28
trigger10 = AnimElem = 34
trigger11 = AnimElem = 41
trigger12 = AnimElem = 47
value = ifelse(random < 249,210,ifelse(random < 333,220,ifelse(random < 499,230,240)))
channel = 2

[State 3103, 1]
type = BGPalFX
triggerall = movehit
trigger1 = AnimElem = 2, =1
trigger2 = AnimElem = 4, =1
trigger3 = AnimElem = 7, =1
trigger4 = AnimElem = 11, =1
trigger5 = AnimElem = 15, =1
trigger6 = AnimElem = 18, =1
trigger7 = AnimElem = 21, =1
trigger8 = AnimElem = 25, =1
trigger9 = AnimElem = 28, =1
trigger10 = AnimElem = 34, =1
trigger11 = AnimElem = 41, =1
trigger12 = AnimElem = 47, =1
time = 1
add = 255,255,255

[State 3103, Lp]
type = HitDef
trigger1 = AnimElem = 2
attr = S, HA
hitflag = MAF
animtype = hard
damage = 19,10
guardflag = M
pausetime = 1,1
sparkno = S8020
guard.sparkno = S8120
sparkxy = -3,-98
hitsound = S9999999999
guardsound = S201,2
ground.type = High
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
snap = 45,0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0

[State 3103, Lp2]
type = HitDef
trigger1 = AnimElem = 4
attr = S, HA
hitflag = MAF
animtype = hard
damage = 19,10
guardflag = M
pausetime = 1,1
sparkno = S8020
guard.sparkno = S8120
sparkxy = -3,-98
hitsound = S9999999999
guardsound = S201,2
ground.type = High
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0

[State 3103, hp]
type = HitDef
trigger1 = AnimElem = 7
attr = S, HA
hitflag = MAF
animtype = hard
damage = 19,10
guardflag = M
pausetime = 1,1
sparkno = S8020
guard.sparkno = S8120
sparkxy = 2,-64
hitsound = S9999999999
guardsound = S201,2
ground.type = High
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0

[State 3103, lk]
type = HitDef
trigger1 = AnimElem = 11
attr = S, HA
hitflag = MAF
animtype = hard
damage = 19,10
guardflag = M
pausetime = 1,1
sparkno = S8020
guard.sparkno = S8120
sparkxy = 2,-64
hitsound = S9999999999
guardsound = S201,2
ground.type = low
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0


[State 3103, hpc]
type = HitDef
trigger1 = AnimElem = 15
attr = S, HA
hitflag = MAF
animtype = hard
damage = 19,10
guardflag = M
pausetime = 1,1
sparkno = S8020
guard.sparkno = S8120
sparkxy = 2,-64
hitsound = S9999999999
guardsound = S201,2
ground.type = High
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0


[State 3103, chp]
type = HitDef
trigger1 = AnimElem = 18
attr = S, HA
hitflag = MAF
animtype = hard
damage = 19,10
guardflag = M
pausetime = 1,1
sparkno = S8020
guard.sparkno = S8120
sparkxy = 2,-64
hitsound = S9999999999
guardsound = S201,2
ground.type = low
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0


[State 3103, hp]
type = HitDef
trigger1 = AnimElem = 21
attr = S, HA
hitflag = MAF
animtype = hard
damage = 19,10
guardflag = M
pausetime = 1,1
sparkno = S8020
guard.sparkno = S8120
sparkxy = 2,-64
hitsound = S9999999999
guardsound = S201,2
ground.type = High
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0


[State 3103, lk]
type = HitDef
trigger1 = AnimElem = 25
attr = S, HA
hitflag = MAF
animtype = hard
damage = 19,10
guardflag = M
pausetime = 1,1
sparkno = S8020
guard.sparkno = S8120
sparkxy = 2,-64
hitsound = S9999999999
guardsound = S201,2
ground.type = low
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0


[State 3103, lkc]
type = HitDef
trigger1 = AnimElem = 28
attr = S, HA
hitflag = MAF
animtype = hard
damage = 19,10
guardflag = M
pausetime = 1,1
sparkno = S8020
guard.sparkno = S8120
sparkxy = -2,-22
hitsound = S9999999999
guardsound = S201,2
ground.type = High
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0

[State 3103, hk]
type = HitDef
trigger1 = AnimElem = 34
attr = S, HA
hitflag = MAF
animtype = hard
damage = 19,10
guardflag = M
pausetime = 1,1
sparkno = S8020
guard.sparkno = S8120
sparkxy = 2,-64
hitsound = S9999999999
guardsound = S201,2
ground.type = High
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0

[State 3103, hkc]
type = HitDef
trigger1 = AnimElem = 41
attr = S, HA
hitflag = MAF
animtype = hard
damage = 19,10
guardflag = M
pausetime = 1,1
sparkno = S8020
guard.sparkno = S8120
sparkxy = 2,-64
hitsound = S9999999999
guardsound = S201,2
ground.type = low
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0

[State 3103, hk]
type = HitDef
trigger1 = AnimElem = 47
attr = S, HA
hitflag = MAF
animtype = hard
damage = 19,10
guardflag = M
pausetime = 1,1
sparkno = S8020
guard.sparkno = S8120
sparkxy = 2,-64
hitsound = S9999999999
guardsound = S201,2
ground.type = High
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0
air.velocity = 0,7
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0


[State 3103, hp]
type = HitDef
trigger1 = AnimElem = 54
attr = S, HA
hitflag = MA
animtype = hard
damage = 50,10
guardflag = M
pausetime = 13,13
sparkno = S8020
guard.sparkno = S8120
sparkxy = -6,-64
hitsound = S251,0
guardsound = S201,2
ground.type = low
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0

[State 300, 1]
type = PosAdd
trigger1 = animelem = 54
x = 8

[State 1100, snd1]
type = PlaySnd
trigger1 = animelem = 54
value = 181,5
channel = 0

[State 3103, 3]
type = ChangeState
trigger1 = AnimTime = 0
ctrl = 0
value = 3151

; Upper cut Up
[Statedef 3151]
type = A
movetype = A
physics = S
anim = 3151
velset = 0,0
poweradd = 0
ctrl = 0
juggle = 0

[State 3151,1]
type = VelSet
trigger1 = time = 0
Y = -9.39
x = 4.41

[State 3151,2]
type = VelAdd 
trigger1 = time >= 0
Y = 0.39

[State 320, 3]
type = HitDef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = AnimElem = 1,1
attr = S, HP
animtype = Up
damage = 50,10
hitflag = MAF
guardflag = M
pausetime = 11,12
sparkno = S8020
guard.sparkno = S8110
sparkxy = -5,-64
hitsound = S251,0
guardsound = S201,2
priority = 7, Hit
ground.type = Low
ground.slidetime = 17
ground.hittime = 17
ground.velocity = 0,-12
air.velocity = 0,-12
airguard.velocity = -4,-5
ground.cornerpush.veloff = -0
air.cornerpush.veloff = -0
guard.cornerpush.veloff = -0
guard.velocity = -12
guard.slidetime = 17
;guard.hittime = 17
getpower = 45,45
givepower = 50,20
yaccel = .53
fall.yvelocity = -3.6
fall = 1
fall.recovertime = 50

[State 1100, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 3152

;Go down
[Statedef 3152]
type = A
movetype = A
physics = S
anim = 3152
velset = 0,0
juggle = 0
ctrl = 0

[State 3103, 1]
type = AfterImageTime
trigger1 = Time = 0
time = 0

[State Accel]
type = VelAdd
trigger1 = time >= 0
y = .54

[State 1102, 2]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 3153

;LAND
[Statedef 3153]
type = S
movetype = A
physics = S
anim = 3153
velset = 0,0
juggle = 0
ctrl = 0

[State 52, 3]
type = PlaySnd
trigger1 = Time = 0
value = 1,5
volume = 60

[State 1081, 1]
type = posset
trigger1 = Time = 0
y = 0

[State 1103, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;Hyper Punch
[Statedef 3200]
type = S
movetype = A
physics = S
velset = 0,0
ctrl = 0
anim = 3200
juggle = 7

;SPECIAL CANCEL 
[State 3000, PowerAdd]
type = Poweradd
triggerall = time = 0
trigger1 = prevstateno = 1100 || prevstateno = 1110
value = -1000

[State 3000, PALFX]
type = PalFX
triggerall = timemod = 2,0 && time <= 13
trigger1 = prevstateno = 1100 || prevstateno = 1110
ignorehitpause = 1
time = 1
add = 255,255,255
sinadd = -100,-100,-100, 1
ignorehitpause = 1

[State 3100,1]
type = NotHitBy
trigger1 = time <= 31
value = SCA

[State 3200, SparkSound]
type = PlaySnd
trigger1 = time = 2
value = s9,0
channel = 1

[State 3200, Voice]
type = PlaySnd
trigger1 = animelem = 8
value = s8,0
channel = 0

[State 3200, env]
type = EnvColor
trigger1 = Time = 2
value = 255,255,255
time = 4
under = 1

[State 3200, env2]
type = EnvColor
trigger1 = Time = 6
value = 0,0,0
time = 24
under = 1

[State 3000, Super Pause]
type = SuperPause
trigger1 = animelem = 1
movetime = 29
poweradd = -1000
time = 29
anim = -1
;p2defmul = 1
darken = 1

[State 3200, 1]
type = AssertSpecial
trigger1 = Time = [2,29]
flag = noFG
flag2= noBG

[State 3200, Explod]
type = Explod
trigger1 = Time = 2
anim = 8500
pos = 32,-102
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermove = 1
scale = 1,1
sprpriority = -1

[State 3200, Explod]
type = Explod
trigger1 = Time = 2
anim = 8510
pos = 32,-102
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermove = 1
scale = 1,1
sprpriority = 9

[State 3000, 1]
type = AfterImage
trigger1 = AnimElem = 9
time = 5
length = 8
framegap = 3
palcolor = 0
trans = add1
palbright = 106,106,138
palcontrast = 96,64,160
paladd = 0,0,0
palmul = 1,1,1

[State 3000, snd]
type = PlaySnd
trigger1 = AnimElem = 10
value = s0,2


[State 320, 3]
type = HitDef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = p2stateno != [1014,1019]
trigger1 = AnimElem = 12
attr = S, HP
animtype = Hard
damage = 0,0
hitflag = MA
guardflag = M
pausetime = 28,28
guard.pausetime = 12,12
sparkno = S8020
guard.sparkno = S8120
sparkxy = -5,-100
hitsound = S251,0
guardsound = S201,2
priority = 7, Hit
ground.type = Low
ground.slidetime = 17
ground.hittime = 17
ground.velocity = 0,0
air.velocity = 0,0
airguard.velocity = -4,-5
ground.cornerpush.veloff = -0
air.cornerpush.veloff = -0
guard.cornerpush.veloff = -14
guard.velocity = -12
guard.slidetime = 17
;guard.hittime = 17
getpower = 0,0
givepower = 50,20
yaccel = .47
fall.yvelocity = -3.4
fall = 0
envshake.time = 16
envshake.ampl = -4
envshake.freq = 90
forcestand = 1
hitonce = 1
kill = 0
p2facing = 1


[State 3000, 3]
type = ChangeState
trigger1 = movehit = 1
value = 3210
ctrl = 0

[State 3000, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Up
[Statedef 3210]
type = S
movetype = A
physics = S
anim = 3210
velset = 0,0
poweradd = 0
ctrl = 0
juggle = 0

[State 3200, Voice]
type = PlaySnd
trigger1 = animelem = 5
value = s8,0
channel = 0

[State 1081, 1]
type = TargetBind
trigger1 = time = 0
pos = 40,0

[State 1081, 1]
type = Targetstate
trigger1 = time = 0
value = 5000


[State 1081, 1]
type = posadd
trigger1 = animelem = 6
x = 8

[State 3103, 1]
type = BGPalFX
triggerall = movehit
trigger1 = AnimElem = 6
time = 1
add = 255,255,255

[State 3100, 1]
type = AfterImage
trigger1 = AnimElem = 1
time = 200
length = 8
framegap = 3
palcolor = 0
trans = add1
palbright = 106,106,138
palcontrast = 96,64,160
paladd = 0,0,0
palmul = 1,1,1

[State 3103, hp]
type = HitDef
trigger1 = AnimElem = 6
attr = S, HA
hitflag = MA
animtype = hard
damage = 40,10
guardflag = M
pausetime = 45,45
sparkno = S8020
guard.sparkno = S8120
sparkxy = -6,-64
hitsound = S250,0
guardsound = S201,2
ground.type = low
ground.slidetime = 0
ground.hittime = 30
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
envshake.time = 16
envshake.ampl = -4
envshake.freq = 90


[State 3103, 3]
type = ChangeState
trigger1 = AnimTime = 0
ctrl = 0
value = 3211


; Upper cut Up
[Statedef 3211]
type = A
movetype = A
physics = S
anim = 3211
velset = 0,0
poweradd = 0
ctrl = 0
juggle = 7

[State 3200, Voice]
type = PlaySnd
trigger1 = time =0
value = 181,5
channel = 0

[State 3151,1]
type = VelSet
trigger1 = time = 0
Y = -10.28


[State 3151,1]
type = VelSet
trigger1 = time <=19
x = 1.789

[State 3151,2]
type = VelAdd 
trigger1 = time >= 0
Y = 0.454

[State 3103, 1]
type = BGPalFX
triggerall = movehit
trigger1 = AnimElem = 1
trigger2 = AnimElem = 3
trigger3 = AnimElem = 5
time = 1
add = 255,255,255

[State 3102, 1]
type = AfterImageTime
trigger1 = animelem = 9
time = 0


[State 3103, hp]
type = HitDef
trigger1 = AnimElem = 1
trigger2 = AnimElem = 3
trigger3 = AnimElem = 5
attr = S, HA
hitflag = MAF
animtype = Up
damage = 40,10
guardflag = M
pausetime = 2,2
sparkno = S8020
guard.sparkno = S8120
sparkxy = -6,-64
hitsound = S250,0
guardsound = S201,2
ground.type = low
ground.slidetime = 0
ground.hittime = 30
ground.velocity = 0,-12
air.velocity = 0,-12
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 1
yaccel = .5
kill = 1

[State 3103, hp]
type = HitDef
trigger1 = AnimElem = 7
attr = S, HA
hitflag = MAF
animtype = Up
damage = 40,10
guardflag = M
pausetime = 27,27
sparkno = S8020
guard.sparkno = S8120
sparkxy = -6,-64
hitsound = S250,0
guardsound = S201,2
ground.type = low
ground.slidetime = 0
ground.hittime = 30
ground.velocity = -2.5,-12
air.velocity = -2.5,-12
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 1
yaccel = .55
kill = 1
;air.juggle = 14
envshake.time = 16
envshake.ampl = -4
envshake.freq = 90
fall.recovertime = 70
p2getp1state = 1
p2stateno = 1014

[State 1102, 2]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 3212

;LAND
[Statedef 3212]
type = S
movetype = A
physics = S
anim = 3212
velset = 0,0
juggle = 0
ctrl = 0

[State 1081, 1]
type = posset
trigger1 = Time = 0
y = 0

[State 1103, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;=====================================
;MAX HYPER ATTACKS
;=====================================
;Ryuuko Ranbu (MAX)
[Statedef 3500]
type = S
movetype = A
physics = S
anim = 3500
velset = 0, 0
ctrl = 0
juggle = 14
poweradd = 0

;SPECIAL CANCEL 
[State 3000, PowerAdd]
type = Poweradd
triggerall = time = 0
trigger1 = prevstateno = 1100 || prevstateno = 1110
value = -1000

[State 3000, PALFX]
type = PalFX
triggerall = timemod = 2,0 && time <= 13
trigger1 = prevstateno = 1100 || prevstateno = 1110
ignorehitpause = 1
time = 1
add = 255,255,255
sinadd = -100,-100,-100, 1
ignorehitpause = 1

;Dream Cancel Effect
[State 1000, Explod]
type = Explod
triggerall = time = 0
trigger1 = prevstateno = 3150
trigger2 = prevstateno = 3850
trigger3 = prevstateno = 3702
anim = 8803
pos = 0,70
postype = Left
removetime = -2
bindtime = 50
pausemove = 1
supermove = 1
scale = .5,.5
sprpriority = 50
ownpal = 1

[State 1000, Explod]
type = Explod
triggerall = time = 0
trigger1 = prevstateno = 3150
trigger2 = prevstateno = 3850
trigger3 = prevstateno = 3702
anim = 8804
pos = -5,69
postype = Left
removetime = -2
bindtime = 65
pausemove = 1
supermove = 1
scale = 1.5,1
sprpriority = 51
ownpal = 1

[State 1000, Explod]
type = Explod
triggerall = time = 0
trigger1 = prevstateno = 3150
trigger2 = prevstateno = 3850
trigger3 = prevstateno = 3702
anim = 8805
pos = -150,69
postype = Left
removetime = -2
facing = 1
vfacing = 1
bindtime = 65
pausemove = 1
supermove = 1
scale = 1.5,1
sprpriority = 49
ownpal = 1
trans = addalpha
alpha = 256, 135

[State 3000, SparkSound]
type = PlaySnd
trigger1 = time = 2
value = s9,1
channel = 1

[State 3000, SparkSound]
type = PlaySnd
trigger1 = animelem = 6, =1
value = 200,9
channel = 1

[State 3000, Voice]
type = PlaySnd
trigger1 = time = 3
value = 3,8
channel = 0

[State 3000, env]
type = null;EnvColor
trigger1 = Time = 2
value = 255,255,255
time = 4
under = 1

[State 3000, env2]
type = null;EnvColor
trigger1 = Time = 6
value = 0,0,0
time = 24
under = 1

[State 3000, AssertSpecial]
type = AssertSpecial
trigger1 = animelem = 1
flag = noBG
flag2 = noFG

[State 3000, Super Pause]
type = SuperPause
trigger1 = animelem = 1
movetime = 29
poweradd = -2000
time = 29
anim = -1
;p2defmul = 1
darken = 0

[State 3100, 1]
type = AssertSpecial
trigger1 = Time = [2,29]
flag = noFG
flag2= noBG

[State 3500, Explod]
type = Explod
trigger1 = Time = 2
anim = 8600
pos = 6,-98
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermove = 1
scale = 1,1
sprpriority = -1

[State 3500, Explod]
type = Explod
trigger1 = Time = 2
anim = 8610
pos = 6,-98
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermove = 1
scale = 1,1
sprpriority = 9

[State 3100, 1]
type = AfterImage
trigger1 = AnimElem = 6
time = 200
length = 8
framegap = 3
palcolor = 0
trans = add1
palbright = 106,106,138
palcontrast = 96,64,160
paladd = 0,0,0
palmul = 1,1,1

[State 3100,1]
type = NotHitBy
trigger1 = time <= 41
value = SCA


[State 3100, 1]
type = StateTypeSet
trigger1 = AnimElem = 6
statetype = A
physics = N

[State 3100, 1]
type = velset
trigger1 = AnimElem = 6
x = 10
y = -.80;95

[State 3100, 1]
type = veladd
trigger1 = AnimElem = 6,> 0
y = .125

[State 3200, Hitdef]
type = HitDef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = p2stateno != [1004,1009]
trigger1 = roundstate = 2
trigger1 = AnimElem = 6
attr = S, HA
hitflag = MA
animtype = hard
damage = 0,0
guardflag = M
pausetime = 2,1
guard.pausetime = 2,12
sparkno = S8020
guard.sparkno = S8120
sparkxy = 19,-84
hitsound = S999999
guardsound = S201,2
ground.type = low
ground.slidetime = 10
ground.hittime = 17
ground.velocity = 0,0
air.velocity = 0
airguard.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
snap = 55,0
yaccel = .5
p2facing = 1
p1stateno = 3550
p2getp1stateno = 1
p2stateno = 3103
kill = 0

[State 3100, 2]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
trigger2 = moveguarded
value = 3102


;Fight
[Statedef 3550]
type = S
movetype = A
physics = N
velset = 0,0
juggle = 0
anim = 3550
ctrl = 0

[State 3000, Voice]
type = PlaySnd
trigger1 = time = 1
value = 3,9
channel = 0


[State 3103, 1]
type = AfterImageTime
trigger1 = Time = 0
time = 0

[State 3103, 1]
type = posset
trigger1 = Time = 0
y = 0

[State 3103, 1]
type = velset
trigger1 = Time = 0
y = 0
x = 2

[State 3103, 1]
type = velset
trigger1 = animelem = 77
x = 0

[State 3100,1]
type = NotHitBy
trigger1 = time >= 0
value = SCA

[State 3100,1]
type = width
trigger1 = time >= 0
value = 25

[State 300, 1]
type = PosAdd
trigger1 = animelem = 87
x = 8



[State 3103, snd]
type = PlaySnd
triggerall = movehit
trigger1 = AnimElem = 2
trigger2 = AnimElem = 4
trigger3 = AnimElem = 7
trigger4 = AnimElem = 11
trigger5 = AnimElem = 15
trigger6 = AnimElem = 18
trigger7 = AnimElem = 21
trigger8 = AnimElem = 25
trigger9 = AnimElem = 30
trigger10 = AnimElem = 35
trigger11 = AnimElem = 41
trigger12 = AnimElem = 51
trigger13 = AnimElem = 55
trigger14 = AnimElem = 58
trigger15 = AnimElem = 64
trigger16 = AnimElem = 70
trigger17 = AnimElem = 71
trigger18 = AnimElem = 77
trigger19 = AnimElem = 84
trigger20 = AnimElem = 87
value = ifelse(random < 249,210,ifelse(random < 333,220,ifelse(random < 499,230,240)))
channel = 2

[State 3103, 1]
type = BGPalFX
triggerall = movehit
trigger1 = AnimElem = 2, =1
trigger2 = AnimElem = 4, =1
trigger3 = AnimElem = 7, =1
trigger4 = AnimElem = 11, =1
trigger5 = AnimElem = 15, =1
trigger6 = AnimElem = 18, =1
trigger7 = AnimElem = 21, =1
trigger8 = AnimElem = 25, =1
trigger9 = AnimElem = 30, =1
trigger10 = AnimElem = 35, =1
trigger11 = AnimElem = 41, =1
trigger12 = AnimElem = 51, =1
trigger13 = AnimElem = 55, =1
trigger14 = AnimElem = 58, =1
trigger15 = AnimElem = 64, =1
trigger16 = AnimElem = 70, =1
trigger17 = AnimElem = 71, =1
trigger18 = AnimElem = 77, =1
trigger19 = AnimElem = 84, =1
trigger20 = AnimElem = 87, =1
time = 1
add = 255,255,255


[State 3103, Lp]
type = HitDef
trigger1 = AnimElem = 2
attr = S, HA
hitflag = MAF
animtype = hard
damage = 19,10
guardflag = M
pausetime = 1,1
sparkno = S8020
guard.sparkno = S8120
sparkxy = -3,-98
hitsound = S9999999999
guardsound = S201,2
ground.type = High
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
snap = 45,0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0

[State 3103, Lp2]
type = HitDef
trigger1 = AnimElem = 4
attr = S, HA
hitflag = MAF
animtype = hard
damage = 19,10
guardflag = M
pausetime = 1,1
sparkno = S8020
guard.sparkno = S8120
sparkxy = -3,-98
hitsound = S9999999999
guardsound = S201,2
ground.type = High
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0


[State 3103, hp]
type = HitDef
trigger1 = AnimElem = 7
attr = S, HA
hitflag = MAF
animtype = hard
damage = 19,10
guardflag = M
pausetime = 1,1
sparkno = S8020
guard.sparkno = S8120
sparkxy = 2,-64
hitsound = S9999999999
guardsound = S201,2
ground.type = low
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0


[State 3103, lk]
type = HitDef
trigger1 = AnimElem = 11
attr = S, HA
hitflag = MAF
animtype = hard
damage = 19,10
guardflag = M
pausetime = 1,1
sparkno = S8020
guard.sparkno = S8120
sparkxy = 2,-64
hitsound = S9999999999
guardsound = S201,2
ground.type = high
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0


[State 3103, hpc]
type = HitDef
trigger1 = AnimElem = 15
attr = S, HA
hitflag = MAF
animtype = hard
damage = 19,10
guardflag = M
pausetime = 1,1
sparkno = S8020
guard.sparkno = S8120
sparkxy = 2,-64
hitsound = S9999999999
guardsound = S201,2
ground.type = low
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0



[State 3103, chp]
type = HitDef
trigger1 = AnimElem = 18
attr = S, HA
hitflag = MAF
animtype = hard
damage = 19,10
guardflag = M
pausetime = 1,1
sparkno = S8020
guard.sparkno = S8120
sparkxy = 2,-64
hitsound = S9999999999
guardsound = S201,2
ground.type = high
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0


[State 3103, hp]
type = HitDef
trigger1 = AnimElem = 21
attr = S, HA
hitflag = MAF
animtype = hard
damage = 19,10
guardflag = M
pausetime =1,1
sparkno = S8020
guard.sparkno = S8120
sparkxy = 2,-64
hitsound = S9999999999
guardsound = S201,2
ground.type = low
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0



[State 3103, lkc]
type = HitDef
trigger1 = AnimElem = 25
attr = S, HA
hitflag = MAF
animtype = hard
damage = 19,10
guardflag = M
pausetime = 1,1
sparkno = S8020
guard.sparkno = S8120
sparkxy = 2,-22
hitsound = S9999999999
guardsound = S201,2
ground.type = high
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0



[State 3103, Rhk]
type = HitDef
trigger1 = AnimElem = 30
attr = S, HA
hitflag = MAF
animtype = hard
damage = 19,10
guardflag = M
pausetime = 1,1
sparkno = S8020
guard.sparkno = S8120
sparkxy = 2,-64
hitsound = S9999999999
guardsound = S201,2
ground.type = low
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0



[State 3103, Flk]
type = HitDef
trigger1 = AnimElem = 35
attr = S, HA
hitflag = MAF
animtype = hard
damage = 19,10
guardflag = M
pausetime = 1,1
sparkno = S8020
guard.sparkno = S8120
sparkxy = 2,-64
hitsound = S9999999999
guardsound = S201,2
ground.type = High
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0


[State 3103, hk]
type = HitDef
trigger1 = AnimElem = 41
attr = S, HA
hitflag = MAF
animtype = hard
damage = 19,10
guardflag = M
pausetime = 1,1
sparkno = S8020
guard.sparkno = S8120
sparkxy = 2,-64
hitsound = S9999999999
guardsound = S201,2
ground.type = low
ground.slidetime = 0
ground.hittime = 25
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0



[State 3103, Rhk]
type = HitDef
trigger1 = AnimElem = 51
attr = S, HA
hitflag = MAF
animtype = hard
damage = 19,10
guardflag = M
pausetime = 1,1
sparkno = S8020
guard.sparkno = S8120
sparkxy = 2,-64
hitsound = S9999999999
guardsound = S201,2
ground.type = low
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0


[State 3103, hkc]
type = HitDef
trigger1 = AnimElem = 55
attr = S, HA
hitflag = MAF
animtype = hard
damage = 19,10
guardflag = M
pausetime = 1,1
sparkno = S8020
guard.sparkno = S8120
sparkxy = 2,-64
hitsound = S9999999999
guardsound = S201,2
ground.type = high
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0


[State 3103, lk]
type = HitDef
trigger1 = AnimElem = 58
attr = S, HA
hitflag = MAF
animtype = hard
damage = 19,10
guardflag = M
pausetime = 1,1
sparkno = S8020
guard.sparkno = S8120
sparkxy = 2,-64
hitsound = S9999999999
guardsound = S201,2
ground.type = low
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0



[State 3103, Rhk]
type = HitDef
trigger1 = AnimElem = 64
attr = S, HA
hitflag = MAF
animtype = hard
damage = 19,10
guardflag = M
pausetime = 1,1
sparkno = S8020
guard.sparkno = S8120
sparkxy = 2,-64
hitsound = S9999999999
guardsound = S201,2
ground.type = High
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0



[State 3103, hkc]
type = HitDef
trigger1 = AnimElem = 70
attr = S, HA
hitflag = MAF
animtype = hard
damage = 19,10
guardflag = M
pausetime = 1,1
sparkno = S8020
guard.sparkno = S8120
sparkxy = -3,-104
hitsound = S9999999999
guardsound = S201,2
ground.type = low
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0


[State 3103, hkc]
type = HitDef
trigger1 = AnimElem = 71
attr = S, HA
hitflag = MAF
animtype = hard
damage = 19,10
guardflag = M
pausetime = 1,1
sparkno = S8020
guard.sparkno = S8120
sparkxy = 2,-64
hitsound = S9999999999
guardsound = S201,2
ground.type = low
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0


[State 3103, hk]
type = HitDef
trigger1 = AnimElem = 77
attr = S, HA
hitflag = MAF
animtype = hard
damage = 19,10
guardflag = M
pausetime = 1,1
sparkno = S8020
guard.sparkno = S8120
sparkxy = 2,-64
hitsound = S9999999999
guardsound = S201,2
ground.type = High
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0
air.velocity = 0,7
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0


[State 3103, chp]
type = HitDef
trigger1 = AnimElem = 84
trigger1 = roundstate = 2
attr = S, HA
hitflag = MA
animtype = hard
damage = 19,10
guardflag = M
pausetime = 1,1
sparkno = S8020
guard.sparkno = S8120
sparkxy = 5,-89
hitsound = S9999999999
guardsound = S201,2
ground.type = low
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0




[State 3103, hp]
type = HitDef
trigger1 = AnimElem = 87
trigger1 = roundstate = 2
attr = S, HA
hitflag = MA
animtype = hard
damage = 19,10
guardflag = M
pausetime = 11,11
sparkno = S8020
guard.sparkno = S8120
sparkxy = -6,-64
hitsound = S9999999999
guardsound = S201,2
ground.type = low
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0


[State 3103, 3]
type = ChangeState
trigger1 = AnimTime = 0
ctrl = 0
value = 3551



; Upper cut Up
[Statedef 3551]
type = A
movetype = A
physics = S
anim = 3551
velset = 0,0
poweradd = 0
ctrl = 0
juggle = 0

[State 3103, snd]
type = PlaySnd
trigger1 = roundstate = 2
trigger1 = AnimElem = 1
value = ifelse(random < 249,210,ifelse(random < 333,220,ifelse(random < 499,230,240)))
channel = 2

[State 3103, 1]
type = BGPalFX
triggerall = movehit
trigger1 = AnimElem = 1,=2
time = 1
add = 255,255,255

[State 3151,1]
type = VelSet
trigger1 = time = 0
Y = -5.871
x = 0.666

[State 3151,1]
type = VelSet
trigger1 = time <=9
x = 0.666

[State 3151,2]
type = VelAdd 
trigger1 = time >= 0
Y = 0.454


[State 3151,1]
type = null;VelSet
trigger1 = time = 9
x = 0

[State 3103, hp]
type = HitDef
trigger1 = AnimElem = 1, =1
trigger1 = roundstate = 2
attr = S, HA
hitflag = MA
animtype = hard
damage = 19,10
guardflag = M
pausetime = 2,7
sparkno = S8020
guard.sparkno = S8120
sparkxy = -6,-64
hitsound = S9999999999
guardsound = S201,2
ground.type = low
ground.slidetime = 0
ground.hittime = 30
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0

[State 1102, 2]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 3552



; Upper cut Land
[Statedef 3552]
type = A
movetype = A
physics = S
anim = 3552
velset = 0,0
poweradd = 0
ctrl = 0
juggle = 0

[State 3103, snd]
type = PlaySnd
trigger1 = AnimElem = 3
value = 251,0
channel = 2

[State 1100, snd1]
type = PlaySnd
trigger1 = roundstate = 2
trigger1 = animelem = 3
value = 181,5
channel = 0

[State 1081, 1]
type = posset
trigger1 = Time = 0
y = 0

[State 1081, 1]
type = posadd
trigger1 = animelem = 3
x = 8

[State 3103, 1]
type = BGPalFX
triggerall = movehit
trigger1 = AnimElem = 3, =1
time = 1
add = 255,255,255


[State 3103, hp]
type = HitDef
trigger1 = AnimElem = 3
trigger1 = roundstate = 2
attr = S, HA
hitflag = MA
animtype = hard
damage = 19,10
guardflag = M
pausetime = 5,5
sparkno = S8020
guard.sparkno = S8120
sparkxy = -6,-64
hitsound = S999999999,1
guardsound = S201,2
ground.type = low
ground.slidetime = 0
ground.hittime = 30
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0


[State 3103, 3]
type = ChangeState
trigger1 = AnimTime = 0
ctrl = 0
value = 3553


; Upper cut Up
[Statedef 3553]
type = A
movetype = A
physics = S
anim = 3553
velset = 0,0
poweradd = 0
ctrl = 0
juggle = 14

[State 3103, snd]
type = PlaySnd
triggerall = movehit
trigger1 = AnimElem = 1, =1
trigger2 = AnimElem = 3
trigger3 = AnimElem = 5
trigger4 = AnimElem = 7
value = 251,0
channel = 2

[State 3151,1]
type = VelSet
trigger1 = time = 0
Y = -10.28


[State 3151,1]
type = VelSet
trigger1 = time <=19
x = 1.789

[State 3151,2]
type = VelAdd 
trigger1 = time >= 0
Y = 0.454

[State 3103, 1]
type = BGPalFX
triggerall = movehit
trigger1 = AnimElem = 1, =1
trigger2 = AnimElem = 3, =1
trigger3 = AnimElem = 5, =1
time = 1
add = 255,255,255

[State 3100, 1]
type = AfterImage
trigger1 = AnimElem = 1
time = 200
length = 8
framegap = 3
palcolor = 0
trans = add1
palbright = 106,106,138
palcontrast = 96,64,160
paladd = 0,0,0
palmul = 1,1,1

[State 3102, 1]
type = AfterImageTime
trigger1 = animelem = 9
time = 0

[State 3103, hp]
type = HitDef
trigger1 = AnimElem = 1
trigger2 = AnimElem = 3
trigger3 = AnimElem = 5
attr = S, HA
hitflag = MAF
animtype = Up
damage = 19,10
guardflag = M
pausetime = 3,3
sparkno = S8020
guard.sparkno = S8120
sparkxy = -6,-104
hitsound = S9999999999
guardsound = S201,2
ground.type = low
ground.slidetime = 0
ground.hittime = 30
ground.velocity = 0,-12
air.velocity = 0,-12
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 1
yaccel = .5
kill = 0
air.juggle = 0

[State 3103, hp]
type = HitDef
trigger1 = roundstate = 2
trigger1 = AnimElem = 7
attr = S, HA
hitflag = MAF
animtype = Up
damage = 19,10
guardflag = M
pausetime = 27,29
sparkno = S8020
guard.sparkno = S8120
sparkxy = -6,-104
hitsound = S9999999999
guardsound = S201,2
ground.type = low
ground.slidetime = 0
ground.hittime = 30
ground.velocity = -2.5,-12
air.velocity = -2.5,-12
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 1
yaccel = .6
kill = 1
air.juggle = 14
envshake.time = 16
envshake.ampl = -4
envshake.freq = 90
fall.recovertime = 65
p2getp1state = 1
p2stateno = 1014

[State 1102, 2]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 3554

;LAND
[Statedef 3554]
type = S
movetype = A
physics = S
anim = 3554
velset = 0,0
juggle = 0
ctrl = 0

[State 1081, 1]
type = posset
trigger1 = Time = 0
y = 0

[State 1103, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;=====================================
;HIDDEN HYPER ATTACKS
;=====================================
;HSDM
[Statedef 3600]
type = S
movetype = A
physics = S
anim = 3600
velset = 0,0
ctrl = 0
juggle = 14

[State 3600, Helper]
type = Helper
trigger1 = AnimElem = 6
id = 8920
name = "MAX2 CARTEL"
pos = 0,0
postype = Left
stateno = 8920
helpertype = normal
pausemovetime = 1
keyctrl = 0
ownpal = 1

[State 3600, Helper]
type = Helper
trigger1 = animelem = 9
id = 8900
name = "MAX2 BACKGROUND"
pos = 0,0
postype = p2
stateno = 8900
helpertype = normal
pausemovetime = 0
keyctrl = 0
ownpal = 1

[State 3000, SparkSound]
type = PlaySnd
trigger1 = animelem = 6,=1
value = s9,2
channel = 1

[State 3000, SparkSound]
type = PlaySnd
trigger1 = animelem = 21, =1
value = 200,9
channel = 1

[State 3000, Voice]
type = PlaySnd
trigger1 = animelem = 1
value = 3,8
channel = 0

[State 3000, env]
type = EnvColor
trigger1 = animelem = 6, =2
value = 255,255,255
time = 4
under = 1

[State 3000, env2]
type = EnvColor
trigger1 = animelem = 6, =6
value = 0,0,0
time = 40;24
under = 1

[State 3000, Super Pause]
type = SuperPause
trigger1 = animelem = 6
movetime = 29
poweradd = -2000
time = 29
anim = -1
;p2defmul = 1
darken = 1

[State 3100, 1]
type = AssertSpecial
trigger1 = Time = [12,39]
flag = noFG
flag2= noBG


[State 3600, Explod]
type = Explod
trigger1 = animelem = 6, =2
anim = 8700
pos = 10,-70
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermove = 1
scale = 1,1
sprpriority = -1

[State 3600, Explod]
type = Explod
trigger1 = animelem = 6, =2
anim = 8710
pos = 10,-70
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermove = 1
scale = 1,1
sprpriority = 9

[State 3100, 1]
type = AfterImage
trigger1 = AnimElem = 21
time = 200
length = 8
framegap = 3
palcolor = 0
trans = add1
palbright = 106,106,138
palcontrast = 96,64,160
paladd = 0,0,0
palmul = 1,1,1

[State 3100,1]
type = NotHitBy
trigger1 = time <= 70
value = SCA



[State 3100, 1]
type = StateTypeSet
trigger1 = AnimElem = 21
statetype = A
physics = N

[State 3100, 1]
type = velset
trigger1 = AnimElem = 21
x = 10
y = -.80;95

[State 3100, 1]
type = veladd
trigger1 = AnimElem = 21,> 0
y = .125

[State 3200, Hitdef]
type = HitDef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = p2stateno != [1004,1009]
trigger1 = roundstate = 2
trigger1 = AnimElem = 21
attr = S, HA
hitflag = MA
animtype = hard
damage = 0,0
guardflag = 
pausetime = 2,1
guard.pausetime = 2,12
sparkno = S8020
guard.sparkno = S8120
sparkxy = 19,-84
hitsound = S999999
guardsound = S201,2
ground.type = low
ground.slidetime = 10
ground.hittime = 17
ground.velocity = 0,0
air.velocity = 0
airguard.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
snap = 55,0
yaccel = .5
p2facing = 1
p1stateno = 3650
p2getp1stateno = 1
p2stateno = 3103
kill = 0

[State 3100, 2]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
trigger2 = moveguarded
value = 3109


;Fight
[Statedef 3650]
type = S
movetype = A
physics = N
velset = 0,0
juggle = 0
anim = 3650
ctrl = 0

[State 3000, Voice]
type = PlaySnd
trigger1 = time = 1
value = 3,9
channel = 0


[State 3103, 1]
type = AfterImageTime
trigger1 = Time = 0
time = 0

[State 3103, 1]
type = posset
trigger1 = Time = 0
y = 0

[State 3103, 1]
type = velset
trigger1 = animelem = 77
x = 0

[State 3100,1]
type = NotHitBy
trigger1 = time >= 0
value = SCA

[State 3100,1]
type = width
trigger1 = time >= 0
value = 25

[State 310, Posadd1]
type = posadd
trigger1 = AnimElem = 97
trigger2 = Animelem = 98
trigger3 = Animelem = 99
trigger4 = Animelem = 100
x = 8


[State 3103, snd]
type = PlaySnd
triggerall = movehit
trigger1 = AnimElem = 2
trigger2 = AnimElem = 4
trigger3 = AnimElem = 8
trigger4 = AnimElem = 12
trigger5 = AnimElem = 17
trigger6 = AnimElem = 23
trigger7 = AnimElem = 27
trigger8 = AnimElem = 31
trigger9 = AnimElem = 37
trigger10 = AnimElem = 45
trigger11 = AnimElem = 48
trigger12 = AnimElem = 54
value = ifelse(random < 249,210,ifelse(random < 333,220,ifelse(random < 499,230,240)))
channel = 2

[State 3103, snd]
type = PlaySnd
triggerall = movehit
trigger1 = AnimElem = 60
trigger2 = AnimElem = 63
trigger3 = AnimElem = 66
trigger4 = AnimElem = 69
trigger5 = AnimElem = 72
trigger6 = AnimElem = 75
trigger7 = AnimElem = 78
trigger8 = AnimElem = 81
trigger9 = AnimElem = 84
trigger10 = AnimElem = 87
trigger11 = AnimElem = 90
trigger12 = AnimElem = 100
value = 250,0
channel = 2

[State 3103, 1]
type = BGPalFX
triggerall = movehit
trigger1 = AnimElem = 2,=1
trigger2 = AnimElem = 4,=1
trigger3 = AnimElem = 8,=1
trigger4 = AnimElem = 12,=1
trigger5 = AnimElem = 17,=1
trigger6 = AnimElem = 23,=1
trigger7 = AnimElem = 27,=1
trigger8 = AnimElem = 31,=1
trigger9 = AnimElem = 37,=1
trigger10 = AnimElem = 45,=1
trigger11 = AnimElem = 48,=1
trigger12 = AnimElem = 54,=1
time = 1
add = 255,255,255


[State 3000, Voice]
type = PlaySnd
trigger1 = animelem = 57
value = 3,6
channel = 0

[State 3100, 1]
type = AfterImage
trigger1 = AnimElem = 105
time = 200
length = 8
framegap = 3
palcolor = 0
trans = add1
palbright = 106,106,138
palcontrast = 96,64,160
paladd = 0,0,0
palmul = 1,1,1

[State 240, 1]
type = PlaySnd
trigger1 = animelem = 100
trigger2 = animelem = 107
value = 8,0
channel = 0

[State 3103, Lp]
type = HitDef
trigger1 = AnimElem = 2
attr = S, HA
hitflag = MAF
animtype = hard
damage = 20,10
guardflag = M
pausetime = 1,1
sparkno = S8020
guard.sparkno = S8120
sparkxy = -3,-98
hitsound = S9999999999
guardsound = S201,2
ground.type = High
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
snap = 45,0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0


[State 3103, Lp2]
type = HitDef
trigger1 = AnimElem = 4
trigger2 = AnimElem = 27
trigger3 = AnimElem = 45
attr = S, HA
hitflag = MAF
animtype = hard
damage = 20,10
guardflag = M
pausetime = 1,1
sparkno = S8020
guard.sparkno = S8120
sparkxy = -3,-98
hitsound = S9999999999
guardsound = S201,2
ground.type = High
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0

[State 3103, lkc]
type = HitDef
trigger1 = AnimElem = 8
attr = S, HA
hitflag = MAF
animtype = hard
damage = 20,10
guardflag = M
pausetime = 1,1
sparkno = S8020
guard.sparkno = S8120
sparkxy = 2,-22
hitsound = S9999999999
guardsound = S201,2
ground.type = high
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0


[State 3103, hp]
type = HitDef
trigger1 = AnimElem = 12
trigger2 = AnimElem = 48
attr = S, HA
hitflag = MAF
animtype = hard
damage = 20,10
guardflag = M
pausetime = 1,1
sparkno = S8020
guard.sparkno = S8120
sparkxy = 2,-64
hitsound = S9999999999
guardsound = S201,2
ground.type = low
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0


[State 3103, chp]
type = HitDef
trigger1 = AnimElem = 17
trigger2 = AnimElem = 31
attr = S, HA
hitflag = MAF
animtype = hard
damage = 20,10
guardflag = M
pausetime = 1,1
sparkno = S8020
guard.sparkno = S8120
sparkxy = 2,-64
hitsound = S9999999999
guardsound = S201,2
ground.type = high
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0

[State 3103, hkc]
type = HitDef
trigger1 = AnimElem = 23
attr = S, HA
hitflag = MAF
animtype = hard
damage = 20,10
guardflag = M
pausetime = 1,1
sparkno = S8020
guard.sparkno = S8120
sparkxy = 2,-64
hitsound = S9999999999
guardsound = S201,2
ground.type = low
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0


[State 3103, Rhk]
type = HitDef
trigger1 = AnimElem = 37
trigger2 = AnimElem = 54
attr = S, HA
hitflag = MAF
animtype = hard
damage = 20,10
guardflag = M
pausetime = 1,1
sparkno = S8020
guard.sparkno = S8120
sparkxy = 2,-64
hitsound = S9999999999
guardsound = S201,2
ground.type = low
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0



[State 3103, 1000leg]
type = HitDef
trigger1 = AnimElem = 60
trigger2 = AnimElem = 63
trigger3 = AnimElem = 66
attr = S, HA
hitflag = MAF
animtype = hard
damage = 10,10
guardflag = M
pausetime = 0,1
sparkno = S8020
guard.sparkno = S8120
sparkxy = 2,-26
hitsound = S9999999999
guardsound = S201,2
ground.type = Low
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0


[State 3103, 1000leg]
type = HitDef
trigger1 = AnimElem = 69
trigger2 = AnimElem = 72
trigger3 = AnimElem = 75
attr = S, HA
hitflag = MAF
animtype = hard
damage = 10,10
guardflag = M
pausetime = 0,1
sparkno = S8020
guard.sparkno = S8120
sparkxy = 2,-64
hitsound = S9999999999
guardsound = S201,2
ground.type = Low
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0


[State 3103, 1000leg]
type = HitDef
trigger1 = AnimElem = 78
trigger2 = AnimElem = 81
trigger3 = AnimElem = 84
trigger4 = AnimElem = 87
trigger5 = AnimElem = 90
attr = S, HA
hitflag = MAF
animtype = hard
damage = 10,10
guardflag = M
pausetime = 0,1
sparkno = S8020
guard.sparkno = S8120
sparkxy = 2,-97
hitsound = S9999999999
guardsound = S201,2
ground.type = Low
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0


[State 320, 3]
type = HitDef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = AnimElem = 100
attr = S, NP
animtype = UP
damage = 10,10
hitflag = MA
guardflag = MA
pausetime = 0,1
sparkno = S8020
guard.sparkno = S8120
sparkxy = 4,-64
hitsound = S230,0
guardsound = S201,1
priority = 7, Hit
ground.type = Low
ground.slidetime = 17
ground.hittime = 17
ground.velocity = 0,-10.65
air.velocity = 0,-10.65
airguard.velocity = -4,-5
ground.cornerpush.veloff = -0
air.cornerpush.veloff = -0
guard.cornerpush.veloff = -0
guard.velocity = -12
guard.slidetime = 17
;guard.hittime = 17
getpower = 107,107
givepower = 50,20
yaccel = .47
fall.yvelocity = -3.4
fall = 1
p2getp1state = 1
p2stateno = 1004
kill = 0


[State 320, 3]
type = HitDef
trigger1 = (p2stateno != [5020,5040])  
trigger1 = p2stateno != [154,155]
trigger1 = AnimElem = 112
attr = S, NP
animtype = Hard
damage = 40,10
hitflag = MAF
guardflag = M
pausetime = 30,30
guard.pausetime = 12,12
sparkno = S8020
guard.sparkno = S8120
sparkxy = -5,-100
hitsound = S251,0
guardsound = S201,2
priority = 7, Hit
ground.type = Low
ground.slidetime = 17
ground.hittime = 17
ground.velocity = 0,0
air.velocity = 0,0
airguard.velocity = -4,-5
ground.cornerpush.veloff = -0
air.cornerpush.veloff = -0
guard.cornerpush.veloff = -0
guard.velocity = -12
guard.slidetime = 17
;guard.hittime = 17
getpower = 0,0
givepower = 50,20
yaccel = .47
fall.yvelocity = -3.4
fall = 0
forcestand = 1
hitonce = 1
kill = 0
air.juggle = 0
envshake.time = 16
envshake.ampl = -4
envshake.freq = 90


[State 1103, 5]
type = ChangeState
trigger1 = movehit = 1
trigger1 = animelem = 112 = 1
value = 3651
ctrl = 0

[State 1103, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 3651
ctrl = 0

; Up
[Statedef 3651]
type = S
movetype = A
physics = S
anim = 3651
velset = 0,0
poweradd = 0
ctrl = 0
juggle = 0

[State 3651, Explod]
type = Explod
trigger1 = Time = 15
anim = 6000
pos = 30,-90
postype = p1
ontop = 1
ownpal = 1
bindtime = 1
supermovetime = 9999
supermove = 1
ignorehitpause = 1
sprpriority = 4
persistent = 0

[State 3651, PlaySnd]
type = PlaySnd
trigger1 = Time = 13
value = S9,4

[State 1081, 1]
type = TargetBind
trigger1 = time = 0
pos = 40,0

[State 1081, 1]
type = Targetstate
trigger1 = time = 0
value = 5000

[State 1081, 1]
type = Targetvelset
trigger1 = time = 0
x = 0
y = 0


[State 1081, 1]
type = posadd
trigger1 = animelem = 6
x = 8

[State 3103, 1]
type = BGPalFX
triggerall = movehit
trigger1 = AnimElem = 6
time = 1
add = 255,255,255

[State 240, 1]
type = PlaySnd
trigger1 = animelem = 6
value = 8,0
channel = 0

[State 3100, 1]
type = AfterImage
trigger1 = AnimElem = 1
time = 200
length = 8
framegap = 3
palcolor = 0
trans = add1
palbright = 106,106,138
palcontrast = 96,64,160
paladd = 0,0,0
palmul = 1,1,1

[State 3103, hp]
type = HitDef
trigger1 = AnimElem = 6
attr = S, HA
hitflag = MA
animtype = hard
damage = 40,10
guardflag = M
pausetime = 45,47
sparkno = S8020
guard.sparkno = S8120
sparkxy = -6,-64
hitsound = S251,0
guardsound = S201,2
ground.type = low
ground.slidetime = 0
ground.hittime = 30
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
kill = 0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
envshake.time = 16
envshake.ampl = -4
envshake.freq = 90


[State 3103, 3]
type = ChangeState
trigger1 = AnimTime = 0
ctrl = 0
value = 3652

; Upper cut Up
[Statedef 3652]
type = A
movetype = A
physics = S
anim = 3652
velset = 0,0
poweradd = 0
ctrl = 0
juggle = 14

[State 3006, Helper]
type = Helper
trigger1 = AnimElem = 1
name = "MAX3END"
stateno = 8910
ID = 8910
helpertype = normal
pos = 0,0
postype = front
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0
size.yscale = 1.025

[State 3103, snd]
type = PlaySnd
trigger1 = AnimElem = 1
trigger2 = AnimElem = 3
trigger3 = AnimElem = 5
value = 251,0
channel = 2

[State 3151,1]
type = VelSet
trigger1 = time = 0
Y = -6


[State 3151,1]
type = VelSet
trigger1 = time <=19
x = 2.5

[State 3151,2]
type = VelAdd 
trigger1 = time >= 0
Y = 0.3

[State 3103, 1]
type = BGPalFX
triggerall = movehit
trigger1 = AnimElem = 1, =1
trigger2 = AnimElem = 3, =1
trigger3 = AnimElem = 5, =1
time = 1
add = 255,255,255

[State 3103, Rrospark]
type = Explod
triggerall = NumExplod(1390) < 5
triggerall = Random < 1000
trigger1 = MoveHit = 1
trigger2 = MoveHit = 1
trigger3 = MoveHit = 1
trigger4 = MoveHit = 1
trigger5 = MoveHit = 1
anim = 1390
ID = 1390
sprpriority = 2
postype = p2
pos = -5,-50
random = 100,100
bindtime = 1

[State 3100, 1]
type = AfterImage
trigger1 = AnimElem = 1
time = 200
length = 8
framegap = 3
palcolor = 0
trans = add1
palbright = 106,106,138
palcontrast = 96,64,160
paladd = 0,0,0
palmul = 1,1,1

[State 3102, 1]
type = AfterImageTime
trigger1 = animelem = 7
time = 0

[State 3103, hp]
type = HitDef
trigger1 = AnimElem = 1
trigger2 = AnimElem = 3
attr = S, HA
hitflag = MAF
animtype = Up
damage = 35,10
guardflag = M
pausetime = 2,2
sparkno = S8020
guard.sparkno = S8120
sparkxy = -6,-104
hitsound = S9999999999
guardsound = S201,2
ground.type = low
ground.slidetime = 0
ground.hittime = 30
ground.velocity = 0,-13
air.velocity = 0,-13
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 1
yaccel = .5
kill = 0
air.juggle = 0
palfx.time = 56
palfx.add = 40,-70,-200
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1

[State 3103, hp]
type = HitDef
trigger1 = AnimElem = 5
attr = S, HA
hitflag = MAF
animtype = Up
damage = 35,10
guardflag = M
pausetime = 2,2
sparkno = S8020
guard.sparkno = S8120
sparkxy = -6,-104
hitsound = S9999999999
guardsound = S201,2
ground.type = low
ground.slidetime = 0
ground.hittime = 30
ground.velocity = -2.5,-13.5
air.velocity = -2.5,-13.5
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 1
yaccel = .6
kill = 1
air.juggle = 14
palfx.time = 55
palfx.add = 40,-70,-200
palfx.sinadd = 40,30,0,10
palfx.color = 0
palfx.invertall = 1
fall.recovertime = 50
p2getp1state = 1
p2stateno = 1014


[State 1102, 2]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 3653

;LAND
[Statedef 3653]
type = S
movetype = A
physics = S
anim = 3653
velset = 0,0
juggle = 0
ctrl = 0

[State 1081, 1]
type = posset
trigger1 = Time = 0
y = 0

[State 1103, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;==========================================
;EXTRA OVERIDES
;=====================================
;FOR SUPREME DANCE
; HITA_SHAKE
[Statedef 1004]
type    = A
movetype= H
physics = N
velset = 0,0

[State 1004, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(airtype) = 1),5000,5010) + GetHitVar(animtype)

[State 1004, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5012

[State 1004, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 1004, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 1004, 5]
type = ChangeState
trigger1 = HitShakeOver
value = 1008

[State 1004, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 1004, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 1004, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
trigger4 = anim = [5051,5059]
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; HITA_UP (initial going up)
[Statedef 1008]
type    = A
movetype= H
physics = N
ctrl = 0

[State 1008, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = anim= 5012
value = 5030

[State 1008, 1]
type = VelAdd;Gravity
trigger1 = 1
y = GetHitVar(yaccel)

[State 1008, 2]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 1008, 4]
type = ChangeState
triggerall = HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 1006 ;HITA_FALL

[State 1008, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 1005 ;HITA_UP (transition)

;---------------------------------------------------------------------------

;---------------------------------------------------------------------------
; HITA_UP_T (transition)
[Statedef 1005]
type    = A
movetype= H
physics = N

[State 1005, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5035)
trigger1 = Anim != [5051,5059] ;Not if in hit up anim
trigger1 = Anim != 5090 ;Not if hit off ground anim
value = 5035

[State 1005, 2]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 1005, 4]
type = ChangeState
triggerall = HitFall
trigger1 = HitOver  ;Hit is over
trigger2 = AnimTime = 0 ;Anim is over
trigger3 = Vel Y > 0    ;Hit ground
trigger3 = Pos Y >= 10  ;.
trigger4 = Time = 0     ;No transition anim
trigger4 = Anim != 5035 ;.
value = 1006 ;HITA_FALL

;---------------------------------------------------------------------------

; HITA_FALL (knocked up, falling)
[Statedef 1006]
type    = A
movetype= H
physics = N

[State 1006, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 5050

[State 1006, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 1006, 3] ;Gravity
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 1006, 4] ;Recover near ground
type = SelfState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
trigger1 = Command = "roll"
value = 5200 ;HITFALL_RECOVER

[State 1006, 0fall]
type = HitFallSet
trigger1 = Time = 0
value = 0

[State 1006, 6]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= ifelse((anim = [5051,5059]) || (anim = [5061,5069]), 0, 0)
value = 5100 ;HIT_BOUNCE

;---------------------------------------------------------------------------
; HITA_SHAKE
[Statedef 1007]
type    = A
movetype= H
physics = N
velset = 0,0

[State 1007, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(airtype) = 1),5000,5010) + GetHitVar(animtype)

[State 1007, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 1007, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 1007, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 1007, 5]
type = ChangeState
trigger1 = HitShakeOver
value = 1009

[State 1007, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 1007, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 1007, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
trigger4 = anim = [5051,5059]
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------

;---------------------------------------------------------------------------
; HITA_UP (initial going up)
[Statedef 1009]
type    = A
movetype= H
physics = N
ctrl = 0

[State 1006, 0fall]
type = HitFallSet
trigger1 = Time = 0
value = 0

[State 1008, 1]
type = VelAdd;Gravity
trigger1 = 1
y = GetHitVar(yaccel)

[State 1008, 2]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 1008, 4]
type = Changestate
triggerall = HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 1006 ;HITA_FALL

[State 1008, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 1005 ;HITA_UP (transition)


;FOR F Punch
; HITA_SHAKE
[Statedef 1014]
type    = A
movetype= H
physics = N
velset = 0,0

[State 1014, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(airtype) = 1),5000,5010) + GetHitVar(animtype)

[State 1014, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5012

[State 1014, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 1014, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 1014, 5]
type = ChangeState
trigger1 = HitShakeOver
value = 1018

[State 1014, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 1014, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 1014, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
trigger4 = anim = [5051,5059]
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; HITA_UP (initial going up)
[Statedef 1018]
type    = A
movetype= H
physics = N
ctrl = 0

[State 1018, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = anim= 5012
value = 5030

[State 1018, 1]
type = VelAdd;Gravity
trigger1 = 1
y = GetHitVar(yaccel)

[State 1018, 2]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 1018, 4]
type = ChangeState
triggerall = HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 1016 ;HITA_FALL

[State 1018, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 1015 ;HITA_UP (transition)

;---------------------------------------------------------------------------

;---------------------------------------------------------------------------
; HITA_UP_T (transition)
[Statedef 1015]
type    = A
movetype= H
physics = N

[State 1015, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5035)
trigger1 = Anim != [5051,5059] ;Not if in hit up anim
trigger1 = Anim != 5090 ;Not if hit off ground anim
value = 5035

[State 1015, 2]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 1015, 4]
type = ChangeState
triggerall = HitFall
trigger1 = HitOver  ;Hit is over
trigger2 = AnimTime = 0 ;Anim is over
trigger3 = Vel Y > 0    ;Hit ground
trigger3 = Pos Y >= 10  ;.
trigger4 = Time = 0     ;No transition anim
trigger4 = Anim != 5035 ;.
value = 1016 ;HITA_FALL

;---------------------------------------------------------------------------

; HITA_FALL (knocked up, falling)
[Statedef 1016]
type    = A
movetype= H
physics = N

[State 1016, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 5050

[State 1016, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 1016, 3] ;Gravity
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 1016, 4] ;Recover near ground
type = SelfState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
trigger1 = Command = "roll"
value = 5200 ;HITFALL_RECOVER

[State 1016, 0fall]
type = HitFallSet
trigger1 = Time = 0
value = 0

[State 1016, 6]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= ifelse((anim = [5051,5059]) || (anim = [5061,5069]), 0, 0)
value = 5100 ;HIT_BOUNCE

;---------------------------------------------------------------------------
; HITA_SHAKE
[Statedef 1017]
type    = A
movetype= H
physics = N
velset = 0,0

[State 1017, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(airtype) = 1),5000,5010) + GetHitVar(animtype)

[State 1017, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 1017, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 1017, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 1017, 5]
type = ChangeState
trigger1 = HitShakeOver
value = 1019

[State 1017, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 1017, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 1017, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
trigger4 = anim = [5051,5059]
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------

;---------------------------------------------------------------------------
; HITA_UP (initial going up)
[Statedef 1019]
type    = A
movetype= H
physics = N
ctrl = 0

[State 1006, 0fall]
type = HitFallSet
trigger1 = Time = 0
value = 0

[State 1008, 1]
type = VelAdd;Gravity
trigger1 = 1
y = GetHitVar(yaccel)

[State 1008, 2]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 1008, 4]
type = Changestate
triggerall = HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 1016 ;HITA_FALL

[State 1018, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 1015 ;HITA_UP (transition)


;----------------------------------------
; HITG_SHAKE BY Ryuuko Ranbu
[Statedef 3103]
type    = S
movetype= H
physics = N
velset = 0,0

[State 3104, 4]
type = posset
trigger1 = Time >= 0
y = 0

[State 3104, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)

[State 3104, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 3104, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) 

[State 3104, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 3104, 6]
type = ChangeState
trigger1 = HitShakeOver
value = 3105

[State 3104, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 3104, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 3104, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

[Statedef 3104]
type    = S
movetype= H
physics = N
velset = 0,0


[State 3104, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)

[State 3104, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 3104, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) 

[State 3104, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 3104, 6]
type = ChangeState
trigger1 = HitShakeOver
value = 3105

[State 3104, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 3104, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 3104, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
persistent = 0
time = 15
waveform = sinesquare
ampl = 140


; HITG_SLIDE
[Statedef 3105]
type    = S
movetype= H
physics = S

[State 3105, 1]
type = Hitfallset
trigger1 = Time = 0
value = 0

[State 3105, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 3105, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = SelfAnimExist(5005 + GetHitVar(animtype) + (GetHitVar(groundtype)=2)*10)
value = 5005 + GetHitVar(animtype) + (GetHitVar(groundtype)=2)*10

[State 3105, 3] ;Stop sliding back
type = VelMul
trigger1 = Time >= GetHitVar(slidetime)
x = .6

[State 3105, 4]
type = VelSet
trigger1 = HitOver
x = 0

[State 3105, 5]
type = DefenceMulSet
trigger1 = HitOver
value = 1

[State 3105, 6]
type = SelfState
trigger1 = HitOver
value = 0
ctrl = 1


; HITG_SHAKE DIZZY
[Statedef 3106]
type    = S
movetype= H
physics = N
velset = 0,0

[State 3106, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)

[State 3106, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 3106, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 3106, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 3106, 6]
type = ChangeState
trigger1 = HitShakeOver
value = 3107

[State 3106, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 3106, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 3106, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
persistent = 0
time = 15
waveform = sinesquare
ampl = 140


; HITG_SLIDE
[Statedef 3107]
type    = S
movetype= H
physics = S

[State 3107, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 3107, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
value = 5005 + GetHitVar(animtype) + (GetHitVar(groundtype)=2)*10

[State 3107, 3] ;Stop sliding back
type = VelMul
trigger1 = Time >= GetHitVar(slidetime)
x = .6

[State 3107, 4]
type = VelSet
trigger1 = HitOver
x = 0

[State 3107, 5]
type = DefenceMulSet
trigger1 = HitOver
value = 1

[State 3107, 6]
type = ChangeState
trigger1 = HitOver
value = 3108
ctrl = 0


;---------------------------------------------------------------------------
; Dizzy
[Statedef 3108]
type    = S
movetype= H
physics = N
velset = 0,0

[State 3108, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
value = 5300

[State 3108, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = selfstate
trigger1 = Time >= 180
value = 5100
ctrl = 0

[State 3108, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 3108, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 3108, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
persistent = 0
time = 15
waveform = sinesquare
ampl = 140


;Ryuuko Ranbu (MISS) Weak
[Statedef 3109]
type = S
movetype = A
physics = N
anim = 3102
velset = 0,0

[State 3109, Helper]
type = Helper
trigger1 = animelem = 1
name = "MAX3END"
stateno = 8910
ID = 8910
helpertype = normal
pos = 0,0
postype = front
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0
size.yscale = 1.025

[State 3102, 1]
type = AfterImageTime
trigger1 = Time = 0
time = 0

[State 3102, 1]
type = posset
trigger1 = Time = 0
y = 0

[State InitVel]
type = posadd
trigger1 = time = 0
trigger2 = time = 1
x = 7

[State InitVel]
type = posadd
trigger1 = time = 2
x = 5

[State InitVel]
type = posadd
trigger1 = time = 3
trigger2 = time = 4
trigger3 = time = 5
x = 4

[State InitVel]
type = posadd
trigger1 = time = 6
trigger2 = time = 8
trigger3 = time = 9
trigger4 = time = 11
x = 2

[State InitVel]
type = posadd
trigger1 = time = 7
trigger2 = time = 4
x = 3

[State InitVel]
type = posadd
trigger1 = time = 10
trigger2 = time = 12
trigger3 = time = 13
x = 1

[State 3102, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


; HITA_SHAKE
[Statedef 1300]
type    = A
movetype= H
physics = N
velset = 0,0

[State 1300, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(airtype) = 1),5000,5010) + GetHitVar(animtype)

[State 1300, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 1300, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 1300, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 4
value = anim

[State 1300, 5]
type = ChangeState
trigger1 = HitShakeOver
value = 1305

[State 1300, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 1300, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 1300, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 1305
trigger4 = anim = [5051,5059]
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;-----------------------------------------------------
; HITA_UP (initial going up)
[Statedef 1305]
type    = A
movetype= H
physics = N
ctrl = 0

[State 1305, 1]
type = VelAdd;Gravity
trigger1 = 1
y = GetHitVar(yaccel)

[State 1305, 2]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 1305, 3]
type = Selfstate
triggerall = !HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 5040 ;HITA_RECOV

[State 1305, 4]
type = ChangeState
triggerall = HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 1315 ;HITA_FALL

[State 1305, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 1310 ;HITA_UP (transition)

;---------------------------------------------------------------------------

;---------------------------------------------------------
; HITA_UP_T (transition)
[Statedef 1310]
type    = A
movetype= H
physics = N

[State 1310, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5035)
trigger1 = Anim != [5051,5059] ;Not if in hit up anim
trigger1 = Anim != 5090 ;Not if hit off ground anim
value = 5035

[State 1310, 2]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 1310, 3]
type = Selfstate
triggerall = !HitFall
trigger1 = HitOver  ;Hit is over
trigger2 = AnimTime = 0 ;Animation over
trigger3 = Vel Y > 0    ;Hit ground
trigger3 = Pos Y >= 10  ;.
trigger4 = Time = 0     ;No transition anim
trigger4 = Anim != 5035 ;.
value = 5040 ;HITA_RECOV

[State 1310, 4]
type = ChangeState
triggerall = HitFall
trigger1 = HitOver  ;Hit is over
trigger2 = AnimTime = 0 ;Anim is over
trigger3 = Vel Y > 0    ;Hit ground
trigger3 = Pos Y >= 10  ;.
trigger4 = Time = 0     ;No transition anim
trigger4 = Anim != 5035 ;.
value = 1315 ;HITA_FALL

;----------------------------------------------------
; HITA_FALL (knocked up, falling)
[Statedef 1315]
type    = A
movetype= H
physics = N

[State 1315, Var] ;Get fall velocity
type = VarSet
trigger1 = Time = 1
sysvar(4) = floor(vel x)

[State 1315, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 5050

[State 1315, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 1315, 3] ;Gravity
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 1315, 4] ;Recover near ground
type = Selfstate
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "roll"
value = 5200 ;HITFALL_RECOVER

;[State 1315; Recover in mid air
;type = Selfstate
;triggerall = Vel Y > -1
;triggerall = alive
;triggerall = CanRecover
;trigger1 = Command = "recovery"
;value = 5210 ;HITFALL_AIRRECOVER

[State 1315, 6]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= ifelse((anim = [5051,5059]) || (anim = [5061,5069]), 0, 25)
value = 1320 ;HIT_Ground

;---------------------------------------------------------------------------

; HIT_Ground
[Statedef 1320]
type    = L
movetype= H
physics = N

[State 1320, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = vel x > 1
x = 1

[State 1320, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 1320, Var] ;Save fall velocity
type = VarSet
trigger1 = Time = 0
;trigger1 = GetHitVar(fall.yvel) = 0
sysvar(1) = floor(vel y)

[State 1320, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = (anim != [5051,5059]) && (anim != [5061,5069])
trigger2 = !SelfAnimExist(5100 + (anim % 10))
value = 5100

[State 1320, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
trigger1 = time = 0
trigger1 = (anim = [5051,5059]) || (anim = [5061,5069])
trigger1 = SelfAnimExist(5100 + (anim % 10))
value = 5100 + (anim % 10)

[State 1320, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1320, 5]
type = VelSet
trigger1 = Time = 0
y = 0

[State 1320, 6] ;Reduce speed
type = VelMul
trigger1 = Time = 0
x = 0.75

[State 1320, 8]
type = GameMakeAnim
trigger1 = Time = 1
;value = 61
;pos = 0, 0
;under = 1
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 10

[State 1320, 9]
type = HitFallDamage
trigger1 = Time = 3

[State 1320, 10]
type = PlaySnd
trigger1 = Time = 1
;value = F7, 0 ;Hit ground
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 1320, 11]
type = PosFreeze
trigger1 = 1

[State 1320, 12]
type = ChangeState
trigger1 = AnimTime = 0
value = 1325

[State 1320, 13]
type = ForceFeedback
trigger1 = Time = 0
waveform = sinesquare
ampl = 128,-3,-.2,.005
time = 20

;----------------------------------------------------------

;---------------------------------------------------------------------------
; HIT_BOUNCE (bounce into air)
[Statedef 1325]
type    = L
movetype= H
physics = N

[State 1325, 1] ;Coming hit ground anim (normal)
type = Nothitby
trigger1 = 1
value = SCA

[State 1325, 1] ;Coming hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim != [5101,5109]
trigger2 = !SelfAnimExist(5160 + (anim % 10))
value = 5160

[State 1325, 2] ;Coming hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = [5101,5109]
trigger1 = SelfAnimExist(5160 + (anim % 10))
value = 5160 + (anim % 10)

[State 1325, 3]
type = HitFallVel
trigger1 = GetHitVar(fall.yvel) != 0
trigger1 = Time = 0

[State 1325, VEl]
type = Velset
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
x = sysvar(4)
y = -3.7

[State 1325, 4]
type = PosSet
trigger1 = Time = 0
y = 20

[State 1325, 5] ;Acceleration
type = VelAdd
trigger1 = 1
y = .4

[State 1325, 6] ;Hit ground
trigger1 = time > 5
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 12
type = ChangeState
value = 1330

;---------------------------------------------------------------------------
; HIT_LIEDOWN
[Statedef 1330]
type    = L
movetype= H
physics = N

[State 1330, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 1330, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
trigger1 = SelfAnimExist(5110 + (anim % 10))
trigger1 = anim = [5081,5089]
value = 5110 + (anim % 10)

[State 1330, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim != [5161,5169]
trigger2 = !SelfAnimExist(5170 + (anim % 10))
value = 5170

[State 1330, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim = [5161,5169]
trigger1 = SelfAnimExist(5170 + (anim % 10))
value = 5170 + (anim % 10)

[State 1330, 4]
type = HitFallDamage
trigger1 = Time = 0

[State 1330, 5]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1330, Var] ;Get fall velocity
type = VarSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) != 0
sysvar(1) = floor(vel y)

[State 1330, 6]
type = PlaySnd
trigger1 = Time = 0
trigger1 = !SysVar(0)
;value = F7, 0 ;Hit ground
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 1330, 7]
type = GameMakeAnim
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 10

[State 1330, 8]
type = VelSet
trigger1 = Time = 0
y = 0

[State 1330, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = anim = [5171,5179]
triggerall = SelfAnimExist(5110 + (anim % 10))
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110 + (anim % 10)

[State 1330, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111,5119]
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110

[State 1330, 11] ;If just died
type = SelfState
triggerall = !alive
triggerall = time >= 50
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = Anim = [5110,5119]
value = 5150

[State 1330, GETUP]
type = SelfState
triggerall = alive
trigger1 = time >= 10
value = 5120

[State 1330, 12]
type = VarSet
trigger1 = SysVar(0)
trigger1 = Time = 0
sysvar(0) = 0

[State 1330, 13] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 1330, 14]
type = ForceFeedback
trigger1 = alive
trigger1 = Time = 0
time = 8
ampl = 240
waveform = sine

[State 1330, 15]
type = ForceFeedback
trigger1 = !alive
trigger1 = Time = 0
ampl = 200, 7, -.467
time = 30
waveform = sine

;---------------------------------------------------------------------------
; HITL_SHAKE
[Statedef 1335]
type    = A
movetype= H
physics = N
velset = 0,0

[State 1335, 1] ;Set default anim
type = VarSet
trigger1 = time = 0
sysvar(2) = ifelse (GetHitVar(yvel) = 0, 5080, 5090)

[State 1335, 2]
type = VarAdd
trigger1 = time = 0
trigger1 = (anim = [5081,5089]) || (anim = [5111,5119])
trigger1 = SelfAnimExist(sysvar(2) + (anim % 10))
sysvar(2) = anim % 10

[State 1335, 3] ;If 5090 doesn't exist, default to 5030
type = VarSet
trigger1 = time = 0
trigger1 = sysvar(2) = 5090
trigger1 = !SelfAnimExist(5090)
sysvar(2) = 5030

[State 1335, 3] ;Freeze
type = ChangeAnim
trigger1 = 1
value = sysvar(2)

[State 1335, 5]
type = ChangeState
trigger1 = HitShakeOver
value = 1305 ;HITA_UP

;------------------------------------------------------------------------------
[Statedef 1700]
type = S
movetype= A
physics = S
juggle = 3
velset = 0,0
ctrl = 0
anim = 1010
poweradd = 60

[State 1700, PlaySnd]
type = PlaySnd
trigger1 = Time = 4
value = 3,5

[State 1700, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 5
value = 200,6

[State 1700, Projectile]
type = Projectile
trigger1 = AnimElem = 6
projanim = 1012
projhitanim = 2010
projremovetime = 21
offset = 32,0
projpriority = 1
projshadow = -1
velocity = 7
attr = S, SP
damage = 98,10
animtype = Hard
guardflag = MA
hitflag = MAFP
pausetime = 0,10
sparkno = S8020
guard.sparkno = S8120
sparkxy = 25,-73
hitsound = S230,0
guardsound = S201,2
ground.type = High
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -12
guard.velocity = -12
air.animtype = Back
air.velocity = -3,-5
air.juggle = 8
;yaccel = .5
fall.yvelocity = -3.4

[State 1700, ChangeState]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1

;------------------------------------------------------------------------------
[Statedef 1710]
type = S
movetype= A
physics = S
juggle = 3
velset = 0,0
ctrl = 0
anim = 1010
poweradd = 60

[State 1710, PlaySnd]
type = PlaySnd
trigger1 = Time = 4
value = 3,5

[State 1710, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 5
value = 200,6

[State 1710, Projectile]
type = Projectile
trigger1 = AnimElem = 6
projanim = 1012
projhitanim = 2010
offset = 32,0
projpriority = 1
projshadow = -1
velocity = 7
attr = S, SP
damage = 117,10
animtype = Hard
guardflag = MA
hitflag = MAFP
pausetime = 0,10
sparkno = S8020
guard.sparkno = S8120
sparkxy = 25,-73
hitsound = S230,0
guardsound = S201,2
ground.type = High
ground.slidetime = 17
ground.hittime = 17
ground.velocity = -12
guard.velocity = -12
air.animtype = Back
air.velocity = -3,-5
air.juggle = 8
yaccel = .5
fall.yvelocity = -3.4

[State 1710, ChangeState]
type = ChangeState
trigger1 = Animtime = 0
value = 0
ctrl = 1

;------------------------------------------------------------------------------
[Statedef 1800]
type = S
movetype= A
physics = S
juggle = 6
velset = 0,0
ctrl = 0
anim = 1800
poweradd = 100
sprpriority = 3

[State 1800, NotHitBy]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 5

[State 1800, PlaySnd]
type = PlaySnd
trigger1 = Time = 2
value = s3,2

[State 1800, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = s200,5

[State 1800, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
statetype = A

[State 1800, VelSet]
type = VelSet
trigger1 = AnimElemtime(4) >= 0
x = 2

[State 1800, VelSet]
type = VelSet
trigger1 = AnimElem = 4
y = -7

[State 1800, VelAdd]
type = VelAdd
trigger1 = Time >= 11
y = .45

[State 1800, HitDef]
type = HitDef
triggerall = P2statetype != A
trigger1 = AnimElem = 5
attr = A, SA
hitflag = MAF
guardflag = MA
animtype = Up
priority = 3, hit
damage = 100,10
pausetime = 9,10
sparkno = S8020
guard.sparkno = s8120
sparkxy = -10, -65
hitsound = S250,0
guardsound = S201,1
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -5.5,-6.3
air.velocity = -5.2,-4.3
air.type = High
air.hittime = 12
fall = 1

[State 1800, HitDef]
type = HitDef
triggerall = P2statetype = A
trigger1 = AnimElem = 6
attr = A, SA
hitflag = MAF
guardflag = MA
animtype = Up
priority = 3, hit
damage = 95,10
pausetime = 8, 10
sparkno = S8020
guard.sparkno = s8120
sparkxy = -10, -65
hitsound = S250,0
guardsound = S201,1
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -5.5,-6.3
air.velocity = -5.2,-4.3
air.type = High
air.hittime = 12
fall = 1

[State 1800, ChangeState]
type = ChangeState
trigger1 = Animtime = 0
value = 3152
ctrl = 0

;------------------------------------------------------------------------------
[Statedef 1850]
type = S
movetype= A
physics = S
juggle = 6
velset = 0,0
ctrl = 0
anim = 1800
poweradd = 100
sprpriority = 3

[State 1850, NotHitBy]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 5

[State 1850, PlaySnd]
type = PlaySnd
trigger1 = Time = 2
value = s3,2

[State 1850, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = s200,5

[State 1850, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
statetype = A

[State 1850, VelSet]
type = VelSet
trigger1 = AnimElemtime(4) >= 0
x = 2

[State 1850, VelSet]
type = VelSet
trigger1 = AnimElem = 4
y = -10

[State 1850, VelAdd]
type = VelAdd
trigger1 = Time >= 11
y = .45

[State 1850, HitDef]
type = HitDef
triggerall = P2statetype != A
trigger1 = AnimElem = 3
attr = A, SA
hitflag = MAF
guardflag = MA
animtype = Hard
priority = 3, Hit
damage = 65,10
pausetime = 8,10
sparkno = S8020
guard.sparkno = s8120
sparkxy = -10,-65
hitsound = S250,0
guardsound = S201,1
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -2.5
air.hittime = 12
air.velocity = -2.5,-7.5
kill = 0

[State 1850, HitDef]
type = HitDef
triggerall = P2statetype != A
trigger1 = AnimElem = 5
attr = A, SA
hitflag = MAF
guardflag = MA
animtype = Up
priority = 3, hit
damage = 95,10
pausetime = 8, 10
sparkno = S8020
guard.sparkno = s8120
sparkxy = -10, -65
hitsound = S250,0
guardsound = S201,1
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -5.5,-6.3
air.velocity = -5.2,-4.3
air.type = High
air.hittime = 12
fall = 1

[State 1850, HitDef]
type = HitDef
triggerall = P2statetype = A
trigger1 = AnimElem = 6
attr = A, SA
hitflag = MAF
guardflag = MA
animtype = Up
priority = 3, hit
damage = 95,10
pausetime = 8, 10
sparkno = S8020
guard.sparkno = s8120
sparkxy = -10, -65
hitsound = S250,0
guardsound = S201,1
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -5.5,-6.3
air.velocity = -5.2,-4.3
air.type = High
air.hittime = 12
fall = 1

[State 1850, ChangeState]
type = ChangeState
trigger1 = Animtime = 0
value = 3152
ctrl = 0

;------------------------------------------------------------------------------
[Statedef 3700]
type = S
movetype= A
physics = S
velset = 0,0
ctrl = 0
anim = 3700

[State 3700, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
value = SCA
time = 5

[State 3700, PosAdd]
type = PosAdd
trigger1 = AnimElem = 3
x = 10

[State 3700, SuperPause]
type = SuperPause
trigger1 = Time = 2
time = 29
anim = -1
sound = s9,0
poweradd = -1000
darken = 0

[State 3700, Envcolor]
type = Envcolor
trigger1 = time = 2
persistent = 0
ignorehitpause = 1
value = 0, 0, 0
time = 28
under = 1
supermove = 1

[State 3700, Explod]
type = Explod
trigger1 = Time = 2
anim = 8500
pos = 7,-48
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermove = 1
scale = 1,1
sprpriority = -1

[State 3700, Explod]
type = Explod
trigger1 = Time = 2
anim = 8510
pos = 7,-48
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermove = 1
scale = 1,1
sprpriority = 9

[State 3700, AfterImage]
type = AfterImage
trigger1 = Time = 3
Trans = Add1
time = 2

[State 3700, AfterImageTime]
type = AfterImageTime
trigger1 = Time = [3,10]
time = 2

[State 3700, ChangeState]
type = ChangeState
trigger1 = Animtime = 0
value = 3701

;---------------------------------------------------------------------------
[Statedef 3701]
type = S
movetype = A
physics = N
ctrl = 0
anim = 3701

[State 3700, PlaySnd]
type = PlaySnd
trigger1 = Time = 2
value = s3,10

[State 3700, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = s300,1

[State 3701, Velset]
type = Velset
trigger1 = time = 0
x = 6

[State 3701, VelMul]
type = VelMul
trigger1 = AnimElem = 3, >=0
x = .1

[State 3701, AfterImage]
type = AfterImage
trigger1 = Time = 3
Trans = Add1
time = 2

[State 3701, AfterImageTime]
type = AfterImageTime
trigger1 = Time = [3,10]
time = 2

[State 3701, HitDef]
type = HitDef
trigger1 = Time = 0
attr = S, SA
priority = 6
damage = 55,10
animtype = Hard
hitflag = MAF
guardflag = M
pausetime = 4,7
sparkxy = -10,-80
sparkno = S8020
guard.sparkno = S8120
hitsound   = S240,0
guardsound =  S201,1
ground.type = High
ground.slidetime = 12
ground.hittime  = 18
ground.velocity = -4,0
air.velocity = -3,0
kill = 0

[State 3701, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 3702

;---------------------------------------------------------------------------
[Statedef 3702]
type = S
movetype = A
physics = N
ctrl = 0
anim = 3702

[State 3702, VelSet]
type = VelSet
trigger1 = AnimElem = 1
x = 3.2

[State 3702, VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = 4.5

[State 3702, AfterImage]
type = AfterImage
trigger1 = Time = 1
Trans = Add1
time = 2

[State 3702, AfterImageTime]
type = AfterImageTime
trigger1 = Time = [1,11]
time = 2

[State 3702, HitDef]
type = HitDef
trigger1 = Time = 0
attr = S, SA
priority = 6
damage = 55,10
animtype = Hard
hitflag = MAF
guardflag = M
pausetime = 4,7
sparkxy = -10,-80
sparkno = S8020
guard.sparkno = S8120
hitsound   = S240,0
guardsound =  S201,1
ground.type = High
ground.slidetime = 13
ground.hittime  = 18
ground.velocity = -4,0
air.velocity = -4,0
kill = 0

[State 3702, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 3703

;---------------------------------------------------------------------------
[Statedef 3703]
type = S
movetype = A
physics = S
ctrl = 0
anim = 3703

[State 3703, HitDef]
type = HitDef
trigger1 = AnimElem = 2
attr = S, SA
priority = 6
damage = 55,10
animtype = Hard
hitflag = MAF
guardflag = M
pausetime = 10,9
sparkxy = -10,-80
sparkno = S8020
guard.sparkno = S8120
hitsound = S240,0
guardsound =  S201,1
ground.type = High
ground.slidetime = 13
ground.hittime  = 18
ground.velocity = -2,-14
air.velocity = -2,-14
fall = 1
fall.recover = 0
kill = 0

[State 3703, StateTypeSet]
type = StateTypeSet
trigger1 = Animelem = 3
statetype = A

[State 3703, VelSet]
type = VelSet
trigger1 = Animelem = 3
y = -8
x = 6

[State 3703, VelSet]
type = VelSet
trigger1 = Animelem = 8
y = -8
x = 5

[State 3703, VelAdd]
type = VelAdd
trigger1 = Time >= 6
y = 0.39

[State 3703, HitDef]
type = HitDef
trigger1 = AnimElem = 6
attr = A, SA
priority = 6
damage = 55,10
animtype = Up
hitflag = MAF
guardflag = M
pausetime = 5,5
sparkxy = -10,-80
sparkno = S8020
guard.sparkno = S8120
hitsound = S240,0
guardsound =  S201,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = -4,-7
air.velocity = -4,-7
fall = 1
fall.recover = 0
kill = 0

[State 3702, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 8
value = S200,12

[State 3703, HitDef]
type = HitDef
trigger1 = AnimElem = 11
attr = A, SA
priority = 6
damage = 55,10
animtype = Up
hitflag = MAF
guardflag = M
pausetime = 20,21
sparkxy = -10,-80
sparkno = S8020
guard.sparkno = S8120
hitsound = S250,0
guardsound =  S201,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = -2,-9
air.velocity = -2,-9
fall = 1
fall.recover = 0
envshake.time = 35
envshake.ampl = -6

[State 3703, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 3152

;------------------------------------------------------------------------------
[Statedef 3800]
type = S
movetype = A
physics = S
anim = 3100
velset = 0,0
ctrl = 0
juggle = 14

;Super Cancel Effect
[State 3800, Explod]
type = Explod
triggerall = time = 0
trigger1 = prevstateno = 310
anim = 8800
pos = 65,70
postype = Left
removetime = -2
bindtime = 50
pausemove = 1
supermove = 1
scale = .5,.5
sprpriority = 50
ownpal = 1

[State 3800, Explod]
type = Explod
triggerall = time = 0
trigger1 = prevstateno = 310
anim = 8801
pos = -5,69
postype = Left
removetime = -2
bindtime = 65
pausemove = 1
supermove = 1
scale = 1.5,1
sprpriority = 51
ownpal = 1

[State 3800, Explod]
type = Explod
triggerall = time = 0
trigger1 = prevstateno = 310
anim = 8802
pos = -150,69
postype = Left
removetime = -2
facing = 1
vfacing = 1
bindtime = 65
pausemove = 1
supermove = 1
scale = 1.5,1
sprpriority = 49
ownpal = 1
trans = addalpha
alpha = 256, 135

;SPECIAL CANCEL
[State 3800, PowerAdd]
type = Poweradd
triggerall = time = 0
trigger1 = prevstateno = 1100 || prevstateno = 1110
value = -1000

[State 3800, PALFX]
type = PalFX
triggerall = timemod = 2,0 && time <= 13
trigger1 = prevstateno = 1100 || prevstateno = 1110
ignorehitpause = 1
time = 1
add = 255,255,255
sinadd = -100,-100,-100, 1
ignorehitpause = 1

[State 3800, SparkSound]
type = PlaySnd
trigger1 = time = 2
value = s9,0
channel = 1

[State 3800, SparkSound]
type = PlaySnd
trigger1 = animelem = 7, =1
value = 200,9
channel = 1

[State 3800, Voice]
type = PlaySnd
trigger1 = time = 3
value = 3,8
channel = 0

[State 3800, env]
type = EnvColor
trigger1 = Time = 2
value = 255,255,255
time = 4
under = 1

[State 3800, env2]
type = EnvColor
trigger1 = Time = 6
value = 0,0,0
time = 24
under = 1

[State 3800, Super Pause]
type = SuperPause
trigger1 = animelem = 1
movetime = 29
poweradd = -1000
time = 29
anim = -1
;p2defmul = 1
darken = 0

[State 3800, AssertSpecial]
type = AssertSpecial
trigger1 = Time = [2,29]
flag = noFG
flag2= noBG

[State 3800, Explod]
type = Explod
trigger1 = Time = 2
anim = 8500
pos = 6,-98
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermove = 1
scale = 1,1
sprpriority = -1

[State 3800, Explod]
type = Explod
trigger1 = Time = 2
anim = 8510
pos = 6,-98
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermove = 1
scale = 1,1
sprpriority = 9

[State 3800, 1]
type = AfterImage
trigger1 = AnimElem = 7
time = 200
length = 8
framegap = 3
palcolor = 0
trans = add1
palbright = 106,106,138
palcontrast = 96,64,160
paladd = 0,0,0
palmul = 1,1,1

[State 3800,1]
type = NotHitBy
trigger1 = time <= 45
value = SCA

[State 3800, 1]
type = StateTypeSet
trigger1 = AnimElem = 7
statetype = A
physics = N

[State 3800, 1]
type = velset
trigger1 = AnimElem = 7
x = 10
y = -.80;95

[State 3800, 1]
type = veladd
trigger1 = AnimElem = 7,> 0
y = .125

[State 3800, Hitdef]
type = HitDef
trigger1 = (p2stateno != [5020,5040])
trigger1 = p2stateno != [154,155]
trigger1 = p2stateno != [1004,1009]
trigger1 = roundstate = 2
trigger1 = AnimElem = 7, =1
attr = S, HA
hitflag = MA
animtype = hard
damage = 0,0
guardflag = M
pausetime = 2,1
guard.pausetime = 2,12
sparkno = S8020
guard.sparkno = S8120
sparkxy = 19,-84
hitsound = S999999
guardsound = S201,2
ground.type = low
ground.slidetime = 10
ground.hittime = 17
ground.velocity = 0,0
air.velocity = 0
airguard.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
snap = 55,0
yaccel = .5
p2facing = 1
p1stateno = 3850
p2getp1stateno = 1
p2stateno = 3103
kill = 0

[State 3800, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
trigger2 = moveguarded
value = 3102

;------------------------------------------------------------------------------
[Statedef 3801]
type = S
movetype = A
physics = S
anim = 3101
velset = 0,0
ctrl = 0
juggle = 14

;Super Cancel Effect
[State 3801, Explod]
type = Explod
triggerall = time = 0
trigger1 = prevstateno = 310
anim = 8800
pos = 65,70
postype = Left
removetime = -2
bindtime = 50
pausemove = 1
supermove = 1
scale = .5,.5
sprpriority = 50
ownpal = 1

[State 3801, Explod]
type = Explod
triggerall = time = 0
trigger1 = prevstateno = 310
anim = 8801
pos = -5,69
postype = Left
removetime = -2
bindtime = 65
pausemove = 1
supermove = 1
scale = 1.5,1
sprpriority = 51
ownpal = 1

[State 3801, Explod]
type = Explod
triggerall = time = 0
trigger1 = prevstateno = 310
anim = 8802
pos = -150,69
postype = Left
removetime = -2
facing = 1
vfacing = 1
bindtime = 65
pausemove = 1
supermove = 1
scale = 1.5,1
sprpriority = 49
ownpal = 1
trans = addalpha
alpha = 256, 135

;SPECIAL CANCEL
[State 3000, PowerAdd]
type = Poweradd
triggerall = time = 0
trigger1 = prevstateno = 1100 || prevstateno = 1110
value = -1000

[State 3000, PALFX]
type = PalFX
triggerall = timemod = 2,0 && time <= 13
trigger1 = prevstateno = 1100 || prevstateno = 1110
ignorehitpause = 1
time = 1
add = 255,255,255
sinadd = -100,-100,-100, 1
ignorehitpause = 1

[State 3000, SparkSound]
type = PlaySnd
trigger1 = time = 2
value = s9,0
channel = 1

[State 3000, SparkSound]
type = PlaySnd
trigger1 = animelem = 7, =1
value = 200,9
channel = 1

[State 3000, Voice]
type = PlaySnd
trigger1 = time = 3
value = 3,8
channel = 0

[State 3000, env]
type = EnvColor
trigger1 = Time = 2
value = 255,255,255
time = 4
under = 1

[State 3000, env2]
type = EnvColor
trigger1 = Time = 6
value = 0,0,0
time = 24
under = 1

[State 3000, Super Pause]
type = SuperPause
trigger1 = animelem = 1
movetime = 29
poweradd = -1000
time = 29
anim = -1
;p2defmul = 1
darken = 0

[State 3100, 1]
type = AssertSpecial
trigger1 = Time = [2,29]
flag = noFG
flag2= noBG

[State 3101, Explod]
type = Explod
trigger1 = Time = 2
anim = 8500
pos = 6,-98
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermove = 1
scale = 1,1
sprpriority = -1

[State 3001, Explod]
type = Explod
trigger1 = Time = 2
anim = 8510
pos = 6,-98
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermove = 1
scale = 1,1
sprpriority = 9

[State 3100, 1]
type = AfterImage
trigger1 = AnimElem = 7
time = 200
length = 8
framegap = 3
palcolor = 0
trans = add1
palbright = 106,106,138
palcontrast = 96,64,160
paladd = 0,0,0
palmul = 1,1,1

[State 3100,1]
type = NotHitBy
trigger1 = time <= 39
value = SCA

[State 3100, 1]
type = StateTypeSet
trigger1 = AnimElem = 7
statetype = A
physics = N

[State 3109, 1]
type = velset
trigger1 = AnimElem = 7
x = 10
y = -1.70;94

[State 3109, 1]
type = veladd
trigger1 = AnimElem = 7,> 0
y = .133

[State 3109, Hitdef]
type = HitDef
trigger1 = (p2stateno != [5020,5040])
trigger1 = p2stateno != [154,155]
trigger1 = p2stateno != [1004,1009]
trigger1 = roundstate = 2
trigger1 = AnimElem = 7, =1
attr = S, HA
hitflag = MA
animtype = hard
damage = 0,0
guardflag = M
pausetime = 2,1
guard.pausetime = 2,12
sparkno = S8020
guard.sparkno = S8120
sparkxy = 19,-84
hitsound = S9999999
guardsound = S201,2
ground.type = low
ground.slidetime = 10
ground.hittime = 17
ground.velocity = 0,0
air.velocity = 0
airguard.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
snap = 55,0
yaccel = .5
p2facing = 1
p1stateno = 3850
p2getp1stateno = 1
p2stateno = 3103
kill = 0

[State 3109, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
trigger2 = moveguarded
value = 3123

;-----------------------------------------------------------------------
[Statedef 3850]
type = S
movetype = A
physics = N
velset = 0,0
juggle = 0
anim = 3850
ctrl = 0

[State 3850, Voice]
type = PlaySnd
trigger1 = time = 1
value = 3,9
channel = 0

[State 3850, 1]
type = AfterImageTime
trigger1 = Time = 0
time = 0

[State 3100, 1]
type = AfterImage
trigger1 = AnimElem = 50, =1
time = 200
length = 8
framegap = 3
palcolor = 0
trans = add1
palbright = 106,106,138
palcontrast = 96,64,160
paladd = 0,0,0
palmul = 1,1,1

[State 3103, 1]
type = posset
trigger1 = Time = 0
y = 0

[State 3103, 1]
type = velset
trigger1 = Time = 0
y = 0
x = 2

[State 3103, 1]
type = velset
trigger1 = animelem = 47
x = 0

[State 3100,1]
type = NotHitBy
trigger1 = time >= 0
value = SCA

[State 3100,1]
type = width
trigger1 = time >= 0
value = 25

[State 300, 1]
type = PosAdd
trigger1 = animelem = 54
x = 8

[State 1100, snd1]
type = PlaySnd
trigger1 = animelem = 54
value = 181,5
channel = 0

[State 3103, snd]
type = PlaySnd
triggerall = movehit
trigger1 = AnimElem = 2
trigger2 = AnimElem = 4
trigger3 = AnimElem = 7
trigger4 = AnimElem = 11
trigger5 = AnimElem = 15
trigger6 = AnimElem = 18
trigger7 = AnimElem = 21
trigger8 = AnimElem = 25
trigger9 = AnimElem = 28
trigger10 = AnimElem = 34
trigger11 = AnimElem = 41
trigger12 = AnimElem = 47
value = ifelse(random < 249,210,ifelse(random < 333,220,ifelse(random < 499,230,240)))
channel = 2

[State 3103, 1]
type = BGPalFX
triggerall = movehit
trigger1 = AnimElem = 2, =1
trigger2 = AnimElem = 4, =1
trigger3 = AnimElem = 7, =1
trigger4 = AnimElem = 11, =1
trigger5 = AnimElem = 15, =1
trigger6 = AnimElem = 18, =1
trigger7 = AnimElem = 21, =1
trigger8 = AnimElem = 25, =1
trigger9 = AnimElem = 28, =1
trigger10 = AnimElem = 34, =1
trigger11 = AnimElem = 41, =1
trigger12 = AnimElem = 47, =1
time = 1
add = 255,255,255

[State 3103, Lp]
type = HitDef
trigger1 = AnimElem = 2
attr = S, HA
hitflag = MAF
animtype = hard
damage = 19,10
guardflag = M
pausetime = 1,1
sparkno = S8020
guard.sparkno = S8120
sparkxy = -3,-98
hitsound = S9999999999
guardsound = S201,2
ground.type = High
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
snap = 45,0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0

[State 3103, Lp2]
type = HitDef
trigger1 = AnimElem = 4
attr = S, HA
hitflag = MAF
animtype = hard
damage = 19,10
guardflag = M
pausetime = 1,1
sparkno = S8020
guard.sparkno = S8120
sparkxy = -3,-98
hitsound = S9999999999
guardsound = S201,2
ground.type = High
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0

[State 3103, hp]
type = HitDef
trigger1 = AnimElem = 7
attr = S, HA
hitflag = MAF
animtype = hard
damage = 19,10
guardflag = M
pausetime = 1,1
sparkno = S8020
guard.sparkno = S8120
sparkxy = 2,-64
hitsound = S9999999999
guardsound = S201,2
ground.type = High
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0

[State 3103, lk]
type = HitDef
trigger1 = AnimElem = 11
attr = S, HA
hitflag = MAF
animtype = hard
damage = 19,10
guardflag = M
pausetime = 1,1
sparkno = S8020
guard.sparkno = S8120
sparkxy = 2,-64
hitsound = S9999999999
guardsound = S201,2
ground.type = low
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0


[State 3103, hpc]
type = HitDef
trigger1 = AnimElem = 15
attr = S, HA
hitflag = MAF
animtype = hard
damage = 19,10
guardflag = M
pausetime = 1,1
sparkno = S8020
guard.sparkno = S8120
sparkxy = 2,-64
hitsound = S9999999999
guardsound = S201,2
ground.type = High
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0


[State 3103, chp]
type = HitDef
trigger1 = AnimElem = 18
attr = S, HA
hitflag = MAF
animtype = hard
damage = 19,10
guardflag = M
pausetime = 1,1
sparkno = S8020
guard.sparkno = S8120
sparkxy = 2,-64
hitsound = S9999999999
guardsound = S201,2
ground.type = low
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0


[State 3103, hp]
type = HitDef
trigger1 = AnimElem = 21
attr = S, HA
hitflag = MAF
animtype = hard
damage = 19,10
guardflag = M
pausetime = 1,1
sparkno = S8020
guard.sparkno = S8120
sparkxy = 2,-64
hitsound = S9999999999
guardsound = S201,2
ground.type = High
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0


[State 3103, lk]
type = HitDef
trigger1 = AnimElem = 25
attr = S, HA
hitflag = MAF
animtype = hard
damage = 19,10
guardflag = M
pausetime = 1,1
sparkno = S8020
guard.sparkno = S8120
sparkxy = 2,-64
hitsound = S9999999999
guardsound = S201,2
ground.type = low
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0


[State 3103, lkc]
type = HitDef
trigger1 = AnimElem = 28
attr = S, HA
hitflag = MAF
animtype = hard
damage = 19,10
guardflag = M
pausetime = 1,1
sparkno = S8020
guard.sparkno = S8120
sparkxy = -2,-22
hitsound = S9999999999
guardsound = S201,2
ground.type = High
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0

[State 3103, hk]
type = HitDef
trigger1 = AnimElem = 34
attr = S, HA
hitflag = MAF
animtype = hard
damage = 19,10
guardflag = M
pausetime = 1,1
sparkno = S8020
guard.sparkno = S8120
sparkxy = 2,-64
hitsound = S9999999999
guardsound = S201,2
ground.type = High
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0

[State 3103, hkc]
type = HitDef
trigger1 = AnimElem = 41
attr = S, HA
hitflag = MAF
animtype = hard
damage = 19,10
guardflag = M
pausetime = 1,1
sparkno = S8020
guard.sparkno = S8120
sparkxy = 2,-64
hitsound = S9999999999
guardsound = S201,2
ground.type = low
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0

[State 3103, hk]
type = HitDef
trigger1 = AnimElem = 47
attr = S, HA
hitflag = MAF
animtype = hard
damage = 19,10
guardflag = M
pausetime = 1,1
sparkno = S8020
guard.sparkno = S8120
sparkxy = 2,-64
hitsound = S9999999999
guardsound = S201,2
ground.type = High
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0
air.velocity = 0,7
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0

[State 1100, snd1]
type = PlaySnd
trigger1 = animelem = 54
value = 181,5
channel = 0

[State 3103, 3]
type = ChangeState
trigger1 = AnimTime = 0
ctrl = 0
value = 3851

;------------------------------------------------------------------------------
[Statedef 3851]
type = A
movetype = A
physics = S
velset = 0,0
ctrl = 0
anim = 3851

[State 3851,1]
type = VelSet
trigger1 = time = 5
Y = -9.39
x = 4.41

[State 3151,2]
type = VelAdd
trigger1 = time >= 5
Y = 0.39

[State 3103, hp]
type = HitDef
trigger1 = AnimElem = 1
attr = S, HA
hitflag = MA
animtype = hard
damage = 50,10
guardflag = M
pausetime = 13,13
sparkno = S8020
guard.sparkno = S8120
sparkxy = -6,-64
hitsound = S251,0
guardsound = S201,2
ground.type = low
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0

[State 3851, 3]
type = HitDef
trigger1 = (p2stateno != [5020,5040])
trigger1 = p2stateno != [154,155]
trigger1 = AnimElem = 3
attr = S, HP
animtype = Up
damage = 50,10
hitflag = MAF
guardflag = M
pausetime = 11,12
sparkno = S8020
guard.sparkno = S8110
sparkxy = -5,-64
hitsound = S251,0
guardsound = S201,2
priority = 7, Hit
ground.type = High
ground.slidetime = 20
ground.hittime  = 22
ground.velocity = -2.8,-12.3
air.velocity = -2.8,-12.3
air.type = High
air.hittime = 12
airguard.velocity = -4,-5
ground.cornerpush.veloff = -0
air.cornerpush.veloff = -0
guard.cornerpush.veloff = -0
guard.velocity = -12
guard.slidetime = 17
getpower = 45,45
givepower = 50,20
yaccel = .53
fall.yvelocity = -3.6
fall = 1
fall.recovertime = 50

[State 3851, ChangeState]
type = ChangeState
trigger1 = Animtime = 0
value = 3152

;------------------------------------------------------------------------------
[Statedef 3900]
type = S
movetype = A
physics = S
anim = 3900
velset = 0,0
ctrl = 0
juggle = 8

[State 3900, Helper]
type = Helper
trigger1 = AnimElem = 6
id = 8920
name = "MAX2 WALL"
pos = 0,0
postype = Left
stateno = 8920
helpertype = normal
pausemovetime = 1
keyctrl = 0
ownpal = 1

[State 3900, Helper]
type = Helper
trigger1 = AnimElem = 9
id = 8900
name = "MAX2 BACKGROUND"
pos = 0,0
postype = p2
stateno = 8900
helpertype = normal
pausemovetime = 0
keyctrl = 0
ownpal = 1

[State 3900, EnvColor]
type = EnvColor
trigger1 = animelem = 6, =2
value = 255,255,255
time = 4
under = 1

[State 3900, EnvColor]
type = EnvColor
trigger1 = animelem = 6, =6
value = 0,0,0
time = 40
under = 1

[State 3900, SuperPause]
type = SuperPause
trigger1 = Animelem = 6
movetime = 29
poweradd = -2000
time = 29
anim = -1
darken = 0
sound = s9,2

[State 3900, AssertSpecial]
type = AssertSpecial
trigger1 = Time = [12,39]
flag = noFG
flag2= noBG

[State 3900, PlaySnd]
type = PlaySnd
trigger1 = animelem = 21, =1
value = 200,9
channel = 1

[State 3900, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = s3,8
channel = 0

[State 3900, Explod]
type = Explod
trigger1 = animelem = 6, =2
anim = 8700
pos = 10,-70
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermove = 1
scale = 1,1
sprpriority = -1

[State 3900, Explod]
type = Explod
trigger1 = animelem = 6, =2
anim = 8710
pos = 10,-70
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermove = 1
scale = 1,1
sprpriority = 9

[State 3900, AfterImage]
type = AfterImage
trigger1 = AnimElem = 21
time = 200
length = 8
framegap = 3
palcolor = 0
trans = add1
palbright = 106,106,138
palcontrast = 96,64,160
paladd = 0,0,0
palmul = 1,1,1

[State 3900, NotHitBy]
type = NotHitBy
trigger1 = time <= 70
value = SCA

[State 3900, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 21
statetype = A
physics = N

[State 3900, Velset]
type = Velset
trigger1 = AnimElem = 21
x = 10
y = -.80

[State 3900, VelAdd]
type = VelAdd
trigger1 = AnimElem = 21,> 0
y = .125

[State 3900, Hitdef]
type = HitDef
trigger1 = (p2stateno != [5020,5040])
trigger1 = p2stateno != [154,155]
trigger1 = p2stateno != [1004,1009]
trigger1 = roundstate = 2
trigger1 = AnimElem = 21
attr = S, HA
hitflag = MA
animtype = hard
damage = 0,0
guardflag =
pausetime = 2,1
guard.pausetime = 2,12
sparkno = S8020
guard.sparkno = S8120
sparkxy = 19,-84
hitsound = S999999
guardsound = S201,2
ground.type = low
ground.slidetime = 10
ground.hittime = 17
ground.velocity = 0,0
air.velocity = 0
airguard.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
givepower = 20,20
fall = 0
snap = 55,0
yaccel = .5
p2facing = 1
p1stateno = 3950
p2getp1stateno = 1
p2stateno = 3103
kill = 0

[State 3900, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
trigger2 = moveguarded
value = 3109

;------------------------------------------------------------------------------
;Fight
[Statedef 3950]
type = S
movetype = A
physics = N
velset = 0,0
juggle = 0
anim = 3950
ctrl = 0

[State 3950, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = 3,9
channel = 0

[State 3950, AfterImageTime]
type = AfterImageTime
trigger1 = Time = 0
time = 0

[State 3950, AfterImage]
type = AfterImage
trigger1 = AnimElem = 50, =1
time = 100
length = 8
framegap = 3
palcolor = 0
trans = add1
palbright = 106,106,138
palcontrast = 96,64,160
paladd = 0,0,0
palmul = 1,1,1

[State 3950, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 3950, VelSet]
type = VelSet
trigger1 = Time = 0
y = 0
x = 2

[State 3950, VelSet]
type = VelSet
trigger1 = animelem = 47
x = 0

[State 3950, NotHitBy]
type = NotHitBy
trigger1 = time >= 0
value = SCA

[State 3950, Width]
type = Width
trigger1 = time >= 0
value = 25

[State 3950, PlaySnd]
type = PlaySnd
triggerall = movehit
trigger1 = AnimElem = 2
trigger2 = AnimElem = 4
trigger3 = AnimElem = 7
trigger4 = AnimElem = 11
trigger5 = AnimElem = 15
trigger6 = AnimElem = 18
trigger7 = AnimElem = 21
trigger8 = AnimElem = 25
trigger9 = AnimElem = 28
trigger10 = AnimElem = 34
trigger11 = AnimElem = 41
trigger12 = AnimElem = 47
value = ifelse(random < 249,210,ifelse(random < 333,220,ifelse(random < 499,230,240)))
channel = 2

[State 3950, BGPalFX]
type = BGPalFX
triggerall = movehit
trigger1 = AnimElem = 2, =1
trigger2 = AnimElem = 4, =1
trigger3 = AnimElem = 7, =1
trigger4 = AnimElem = 11, =1
trigger5 = AnimElem = 15, =1
trigger6 = AnimElem = 18, =1
trigger7 = AnimElem = 21, =1
trigger8 = AnimElem = 25, =1
trigger9 = AnimElem = 28, =1
trigger10 = AnimElem = 34, =1
trigger11 = AnimElem = 41, =1
trigger12 = AnimElem = 47, =1
time = 1
add = 255,255,255

[State 3950, HitDef]
type = HitDef
trigger1 = AnimElem = 2
attr = S, HA
hitflag = MAF
animtype = hard
damage = 19,10
guardflag = M
pausetime = 1,1
sparkno = S8020
guard.sparkno = S8120
sparkxy = -3,-98
hitsound = S9999999999
guardsound = S201,2
ground.type = High
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
snap = 45,0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0

[State 3950, HitDef]
type = HitDef
trigger1 = AnimElem = 4
attr = S, HA
hitflag = MAF
animtype = hard
damage = 19,10
guardflag = M
pausetime = 1,1
sparkno = S8020
guard.sparkno = S8120
sparkxy = -3,-98
hitsound = S9999999999
guardsound = S201,2
ground.type = High
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0

[State 3950, HitDef]
type = HitDef
trigger1 = AnimElem = 7
attr = S, HA
hitflag = MAF
animtype = hard
damage = 19,10
guardflag = M
pausetime = 1,1
sparkno = S8020
guard.sparkno = S8120
sparkxy = 2,-64
hitsound = S9999999999
guardsound = S201,2
ground.type = High
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0

[State 3950, HitDef]
type = HitDef
trigger1 = AnimElem = 11
attr = S, HA
hitflag = MAF
animtype = hard
damage = 19,10
guardflag = M
pausetime = 1,1
sparkno = S8020
guard.sparkno = S8120
sparkxy = 2,-64
hitsound = S9999999999
guardsound = S201,2
ground.type = low
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0

[State 3950, HitDef]
type = HitDef
trigger1 = AnimElem = 15
attr = S, HA
hitflag = MAF
animtype = hard
damage = 19,10
guardflag = M
pausetime = 1,1
sparkno = S8020
guard.sparkno = S8120
sparkxy = 2,-64
hitsound = S9999999999
guardsound = S201,2
ground.type = High
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0

[State 3950, HitDef]
type = HitDef
trigger1 = AnimElem = 18
attr = S, HA
hitflag = MAF
animtype = hard
damage = 19,10
guardflag = M
pausetime = 1,1
sparkno = S8020
guard.sparkno = S8120
sparkxy = 2,-64
hitsound = S9999999999
guardsound = S201,2
ground.type = low
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0

[State 3950, HitDef]
type = HitDef
trigger1 = AnimElem = 21
attr = S, HA
hitflag = MAF
animtype = hard
damage = 19,10
guardflag = M
pausetime = 1,1
sparkno = S8020
guard.sparkno = S8120
sparkxy = 2,-64
hitsound = S9999999999
guardsound = S201,2
ground.type = High
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0

[State 3950, HitDef]
type = HitDef
trigger1 = AnimElem = 25
attr = S, HA
hitflag = MAF
animtype = hard
damage = 19,10
guardflag = M
pausetime = 1,1
sparkno = S8020
guard.sparkno = S8120
sparkxy = 2,-64
hitsound = S9999999999
guardsound = S201,2
ground.type = low
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0

[State 3950, HitDef]
type = HitDef
trigger1 = AnimElem = 28
attr = S, HA
hitflag = MAF
animtype = hard
damage = 19,10
guardflag = M
pausetime = 1,1
sparkno = S8020
guard.sparkno = S8120
sparkxy = -2,-22
hitsound = S9999999999
guardsound = S201,2
ground.type = High
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0

[State 3950, HitDef]
type = HitDef
trigger1 = AnimElem = 34
attr = S, HA
hitflag = MAF
animtype = hard
damage = 19,10
guardflag = M
pausetime = 1,1
sparkno = S8020
guard.sparkno = S8120
sparkxy = 2,-64
hitsound = S9999999999
guardsound = S201,2
ground.type = High
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0

[State 3950, HitDef]
type = HitDef
trigger1 = AnimElem = 41
attr = S, HA
hitflag = MAF
animtype = hard
damage = 19,10
guardflag = M
pausetime = 1,1
sparkno = S8020
guard.sparkno = S8120
sparkxy = 2,-64
hitsound = S9999999999
guardsound = S201,2
ground.type = low
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
yaccel = .5
p2getp1stateno = 1
p2stateno = 3104
kill = 0

[State 3950, HitDef]
type = HitDef
trigger1 = AnimElem = 47
attr = S, HA
hitflag = MAF
animtype = hard
damage = 19,10
guardflag = M
pausetime = 1,1
sparkno = S8020
guard.sparkno = S8120
sparkxy = 2,-64
hitsound = S9999999999
guardsound = S201,2
ground.type = High
ground.slidetime = 0
ground.hittime = 17
ground.velocity = 0
air.velocity = 0,7
guard.velocity = -12
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
getpower = 0,0
givepower = 20,20
fall = 0
yaccel = .5
p2getp1stateno = 1
p2stateno = 5300
kill = 0

[State 3950, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 53,= 3
value = A

[State 3950, VelSet]
type = VelSet
trigger1 = AnimElem = 53,= 3
x = -3.4
y = -7.1

[State 3950, VelAdd]
type = VelAdd
trigger1 = AnimElem = 53,> 3
y = 0.4

[State 3950, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 3960

;------------------------------------------------------------------------------
[Statedef 3960]
type = S
movetype = A
physics = S
velset = 0,0
ctrl = 0
anim = 3960

[State 3960, Helper]
type = Helper
trigger1 = Time = 33
id = 8900
name = "MAX2"
pos = 0,0
postype = p2
stateno = 8900
helpertype = normal
pausemovetime = 0
keyctrl = 0
ownpal = 1

[State 3960, Helper]
type = Helper
trigger1 = AnimElem = 12
name = "MAX3END"
stateno = 8910
ID = 8910
helpertype = normal
pos = 0,0
postype = front
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0
size.yscale = 1.025

[State 3960, Voice]
type = PlaySnd
trigger1 = time = 3
value = 3,7
channel = 0

[State 3960, Envcolor]
type = Envcolor
trigger1 = AnimElem = 1
value = 0,0,0
time = 33
under = 1
supermove = 1
ignorehitpause = 1
persistent = 0

[State 3960, Super Pause]
type = SuperPause
trigger1 = animelem = 1
movetime = 33
time = 33
anim = -1
darken = 0
sound = s9,2

[State 3960, Explod]
type = Explod
trigger1 = Time = 2
anim = 8700
pos = 6,-98
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermove = 1
scale = 1,1
sprpriority = -1

[State 3960, Explod]
type = Explod
trigger1 = Time = 2
anim = 8710
pos = 6,-98
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
supermove = 1
scale = 1,1
sprpriority = 9

[State 3960, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 7,2
value = 200,7

[State 3960, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 8
value = s9,4

[State 3960, Explod]
type = Explod
trigger1 = AnimElemTime(7) = 0
anim = 3971
id = 3971
pos = 110,10
postype = P1
sprpriority = 7
bindtime = 1
supermove = 1
ownpal = 1
removeongethit = 1
vel = 8,0
removetime = 200

[State 3960, Projectile]
type = Projectile
trigger1 = AnimElemTime(7) = 0
projanim = 3970
projhitanim = 2011
projID = 3970
velocity = 8,0
offset = 80,0
attr = S, HP
damage = 274, 20
animtype = up
guardflag = M
pausetime = 0,12
priority = 20, Hit
projpriority = 20
sprpriority = 9
sparkno = S8020
guard.sparkno = S8120
sparkxy = 26, -100
hitsound = s250,0
guardsound = s201,2
ground.type = high
ground.slidetime = 17
ground.hittime  = 17
air.hittime = 18
ground.velocity = -5,-7
air.velocity = -5,-7
guard.velocity = -12
fall = 1
fall.recover = 1
air.juggle = 15
yaccel = .5
getpower = 0,0
givepower = 30,10

[State 3960, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------------------------------------------------
[Statedef 5300]
type    = A
movetype= H
physics = N
velset = 0,0

[State 3012, Posset]
type = Posset
trigger1 = time = 0
y = 0

[State 3104, 2] ;Anim for HIT_BACK
type = ChangeAnim
triggerall = time = 0
trigger1 = SelfAnimExist(5300)
value = 5300

[State 3221, ChangeAnim]
type = ChangeAnim
triggerall = time = 0
trigger1 = !SelfAnimExist(5300)
value = 5000

;----------------------------------------------------------------------------
[Statedef 8900]
type     = A
movetype = I
physics  = N
juggle   = 0
ctrl     = 0
anim     = 9999
sprpriority = -99
velset = 0,0

[State 8900, Explod]
type = Explod
trigger1 = time = 0
anim = 8900
id = 8900
postype = left
pos = 0,0
bindtime = -1
removetime = -1
sprpriority = -99
ownpal = 1
removeongethit = 1
ignorehitpause = 1

[State 8900, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noBG
flag2 = noFG
ignorehitpause = 1

[State 8900, RemoveExplod]
type = RemoveExplod
trigger1 = root,stateno != [3600,3651]
trigger1 = root,stateno != [3900,3960]
trigger2 = root,stateno = 3960
trigger2 = root,AnimElem = 1
trigger3 = root,stateno = 3960
trigger3 = root,AnimElem = 11
ID = 8900

[State 8900, DestroySelf]
type = DestroySelf
trigger1 = root,stateno != [3600,3651]
trigger1 = root,stateno != [3900,3960]
trigger2 = root,stateno = 3960
trigger2 = root,AnimElem = 1
trigger3 = root,stateno = 3960
trigger3 = root,AnimElem = 11

;--------------------------------------------------------------------------------
[Statedef 8910]
type     = A
movetype = I
physics  = N
juggle   = 0
ctrl     = 0
anim     = 9999
sprpriority = -50

[State 8910, Posset]
type = Posset
trigger1 = time = 0
x = 0
y = 0

[State 8910, AssertSpecial]
type = AssertSpecial
trigger1 = time = [0,6]
flag = noBG

[State 8910, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noFG
flag2 = noshadow

[State 8910, Explod]
type = Explod
trigger1 = time = 0
anim = 8910
id = 8910
pos = 0,0
postype = Left
removetime = 33
sprpriority = -15
supermove = 1
ownpal = 0
bindtime = -1
persistent = 0
under = 1

[State 8910, PlaySnd]
type = PlaySnd
trigger1 = time = 7
value = s9,3

[State 8910, DestroySelf]
type = DestroySelf
trigger1 = time = 8

;----------------------------------------------------------------------------
[Statedef 8920]
type = A
movetype = I
physics = N
ctrl = 0
anim = 9999
sprpriority = -99
velset = 0,0

[State 8920, VarSet]
type = VarSet
triggerall = enemy, numhelper(8920)
triggerall = !enemy, numhelper(8925)
trigger1 = enemy, authorname = "Jerzy"
trigger2 = enemy, authorname = "CIRIO, Jerzy"
trigger3 = enemy, authorname = "David Demianof, Jerzy"
trigger4 = enemy, authorname = "Jin, Jerzy"
trigger5 = enemy, authorname = "Mouser, Jerzy"
trigger6 = enemy, authorname = "TESTP, Jerzy"
trigger7 = enemy, authorname = "Zelgadis, Jerzy"
trigger8 = enemy, authorname = "GONZO-, Jerzy"
var(0) = 1

[State 8920, VarSet]
type = VarSet
triggerall = teamside = 2
triggerall = enemy, numhelper(8925)
trigger1 = enemy, authorname = "Jerzy"
trigger2 = enemy, authorname = "CIRIO, Jerzy"
trigger3 = enemy, authorname = "David Demianof, Jerzy"
trigger4 = enemy, authorname = "Jin, Jerzy"
trigger5 = enemy, authorname = "Mouser, Jerzy"
trigger6 = enemy, authorname = "TESTP, Jerzy"
trigger7 = enemy, authorname = "Zelgadis, Jerzy"
trigger8 = enemy, authorname = "GONZO-, Jerzy"
var(0) = 1

;Red Cartel
[State 8920, Explod]
type = Explod
triggerall = TeamSide = 1
trigger1 = Time = 0
anim = 8950
ID = 8950
pos = -320,abs((81*var(0))+0)
ownpal = 1
postype = Front
bindtime = -1
supermove = 1
sprpriority = -15
removeongethit = 1

;Blue cartel
[State 8920, Explod]
type = Explod
triggerall = TeamSide = 2
trigger1 = Time = 0
anim = 8955
ID = 8955
pos = -320,abs((81*var(0))+0)
ownpal = 1
postype = Front
bindtime = -1
supermove = 1
sprpriority = -15
removeongethit = 1

;Big Face Left
[State 8920, Explod]
type = Explod
triggerall = !numexplod(8965)
triggerall = TeamSide = 1
trigger1 = Time = 0
anim = 8960+root,var(22)
pos = 0,abs((81*var(0))+90)
ownpal = 1
postype = Left
facing = 1
bindtime = -1
supermove = 1
sprpriority = -10
scale = .5,.5
removeongethit = 1

;Big Face Right
[State 8920, Explod]
type = Explod
triggerall = !numexplod(8965)
triggerall = TeamSide = 2
trigger1 = Time = 0
anim = 8960+root,var(22)
pos = 0,abs((81*var(0))+90)
ownpal = 1
postype = Right
facing = -1
bindtime = -1
supermove = 1
sprpriority = -10
scale = .5,.5
removeongethit = 1

[State 8920, DestroySelf]
type = DestroySelf
trigger1 = time >= 60

;------------------------------------------------------------------------------
[Statedef 8925]
anim = 9999

[State 8925, DestroySelf]
type = DestroySelf
trigger1 = time = 1

;------------------------------------------------------------------------------
[Statedef -2];must change to -2 for it to check all time

[State -2, DisplayToClipboard]
type = DisplayToClipboard
trigger1 = Time = 0
text= "Jerzy - http://newmwo.foroactivo.com - Supports the Opensource"
ignorehitpause = 1

[State -2, Defense Up]
type = DefenceMulSet
trigger1 = Life <= 437
value = ifelse(life < 262,.70,.80)

[State -2, 1]
type = projectile
trigger1 = P2Statetype = A
trigger1 = Projhit2000 = 1, < 15
projanim = 9959
id = 4000
offset = 0,0
postype = left
projremovetime = 50
ignorehitpause = 1

[State -2, 2]
type = AssertSpecial
;trigger1 = stateno = [3650,3660]
trigger1 = stateno = [3650,3651]
trigger1 = Roundstate = 2
flag = noFG
flag2= noBG
ignorehitpause = 1

;Get rid of trailing anims when hit
[State -2, 3]
type = AfterImageTime
triggerall = movetype = H || stateno = 0
trigger1 = Time = 1
time = 0

[State -2, Proj]
type = Varset
trigger1 = projhitid[3001] = 1
trigger2 = projhitid[3006] = 1
trigger3 = projhitid[2005] = 1
trigger4 = projhitid[2004] = 1
trigger5 = projhitid[3500] = 1
var(28) = 1

[State -2, Proj]
type = Pause
trigger1 = projhittime(2004) = [12,26]
trigger2 = projhittime(2005) = [12,26]
trigger3 = projhittime(3006) = [12,26]
trigger4 = projhittime(3001) = [12,26]
trigger5 = projhittime(3500) = [15,20]
time = 1
movetime = 0

[State -2, V28a]
type = Varadd
trigger1 = var(28) >= 1
ignorehitpause = 1
var(28) = 1

[State -2, V28b]
type = Varset
trigger1 = (var(28) = [25,82]) && p2statetype = L
ignorehitpause = 1
var(28) = 42

[State -2, V28c]
type = Varset
trigger1 = var(28) >= 100
trigger2 = var(28) >= 2 && p2movetype != H
ignorehitpause = 1
var(28) = 0

[State -2, Proj]
type = Varset
trigger1 = projhitid[2001] = 1
trigger2 = projhitid[2002] = 1
var(29) = 1

[State -2, Proj]
type = Pause
trigger1 = projhittime(2001) = [12,20]
trigger2 = projhittime(2002) = [12,20]
time = 1
movetime = 0

[State -2, V29a]
type = Varadd
trigger1 = var(29) >= 1
ignorehitpause = 1
var(29) = 1

[State -2, V29b]
type = Varset
trigger1 = (var(29) = [25,82]) && p2statetype = L
ignorehitpause = 1
var(29) = 42

[State -2, V29c]
type = Varset
trigger1 = var(29) >= 100
trigger2 = var(29) >= 2 && p2movetype != H
ignorehitpause = 1
var(29) = 0

;Stop channel 20's sound when button fwd is release
[State -2, STPRUNSND]
type = StopSnd
trigger1 = stateno != 100 && stateno != 2500 && stateno != 2550 && stateno != 3010
channel = 20

[State -2, VarSet]
type = VarSet
trigger1 = PalNo = [1,6]
var(20) = 10

[State -2, VarSet]
type = VarSet
trigger1 = PalNo = [7,12]
var(20) = 0

;------------------------------------------------------------------------------
[State -2, VarSet]
type = VarSet
trigger1 = palno = 1
trigger2 = palno = 2
trigger3 = palno = 3
trigger4 = palno = 4
trigger5 = palno = 5
trigger6 = palno = 6
var(21) = 0

[State -2, VarSet]
type = VarSet
trigger1 = palno = 7
trigger2 = palno = 8
trigger3 = palno = 9
trigger4 = palno = 10
trigger5 = palno = 11
trigger6 = palno = 12
var(21) = 1

[State -2, VarSet]
type = VarSet
trigger1 = var(21) = 1
var(22) = 5

;------------------------------------------------------------------------------
[Statedef -3]; States that are always checked when in self's rc (use -3) :

; Play sound when hit by light
[State -3, 1.2]
type = PlaySnd
triggerall = Time = 1
triggerall = alive
triggerall = Random <= 500;use random
trigger1 = stateno = 5001
trigger1 = anim = 5000
trigger2 = stateno = 5001
trigger2 = anim = 5010
trigger3 = stateno = 5011
trigger3 = anim = 5020 
value = 0,6
channel = 0
ignorehitpause = 1

; Play sound when hit by medium
[State -3, 1.3]
type = PlaySnd
triggerall = Time = 1
triggerall = alive
triggerall = Random <= 500;use random
trigger1 = stateno = 5001
trigger1 = anim = 5001
trigger2 = stateno = 5001
trigger2 = anim = 5011
trigger3 = stateno = 5011
trigger3 = anim = 5021 
value = 0,9
channel = 0
ignorehitpause = 1

; Play sound when hit by hard
[State -3, 1.4]
type = PlaySnd
triggerall = Time = 1
triggerall = alive
triggerall = Random <= 400;use random
trigger1 = stateno = 5001
trigger1 = anim = 5002
trigger2 = stateno = 5001
trigger2 = anim = 5012
trigger3 = stateno = 5011
trigger3 = anim = 5022 
value = 0,8
channel = 0
ignorehitpause = 1

; Play sound when lying down
[State -3, 1.5]
type = PlaySnd
triggerall = Time = 1
triggerall = alive
triggerall = Random <= 200;use random
trigger1 = stateno = 5100
value = 0,8
channel = 0
ignorehitpause = 1

[State -3, 1];kill the corner push bug
type = VelSet
trigger1 = FrontEdgeDist < 10 && Vel x > 0.1
x = 0.1





