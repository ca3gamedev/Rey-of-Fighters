;---------------------------------------------------------------------------
; 基本データ
;---------------------------------------------------------------------------
[Data]
life              = 2100   ;ライフ（体力ゲージ）最大値
power             = 5000   ;パワーゲージ最大値（オプション・デフォルトは3000=Lv.3）
attack            = 160    ;攻撃力（デフォルトは１００％）
defence           = 500    ;防御力（デフォルトは１００％）
fall.defence_up   = 50     ;横に倒れている時に一時的に加える防御力（％）
liedown.time      = 60     ;横に倒れている時間（フレーム）
airjuggle         = 15     ;ジャグルポイント限界値（「小ネタ.txt」参照）
sparkno           = 2      ;デフォルトのヒットスパーク（fightfxから）
guard.sparkno     = 40     ;デフォルトのガードスパーク（fightfxから）
KO.echo           = 0      ;ＫＯ時の音声（11,0）にエコーを掛けるか否か（0=掛けない,1=掛ける）
volume            = 0      ;キャラの標準の音量（最小-255・最大255）
IntPersistIndex   = 10;54  ;次のラウンドへ持ち越せる「Var」のアドレスの範囲を決める（※１）
FloatPersistIndex = 40     ;次のラウンドへ持ち越せる「FVar」のアドレスの範囲を決める（※１）

;---------------------------------------------------------------------------
; サイズ
;---------------------------------------------------------------------------
[Size]
xscale           = 1       ;キャラの横の大きさ（絶対値・float）
yscale           = 1       ;キャラの縦の大きさ（絶対値・float）
ground.back      = 19      ;地上にいる時の「後方の物理的な幅」
ground.front     = 19      ;地上にいる時の「前方の物理的な幅」
air.back         = 12      ;空中にいる時の「後方の物理的な幅」
air.front        = 12      ;空中にいる時の「前方の物理的な幅」
height           = 60      ;キャラの物理的な高さ（高いほど相手は飛び越しにくくなる）
attack.dist      = 160     ;相手がガード態勢に入る最低の距離
proj.attack.dist = 90      ;自分の「Projectile」に対して相手がガード態勢に入る最低の距離
proj.doscale     = 0       ;xscaleとyscaleを「Projectile」にも影響させるか否か（0=させない・1=させる）
head.pos         = 12,-69  ;キャラの標準の頭の座標（Bind系で適用される）
mid.pos          = 0,-42   ;キャラの標準の体中心の座標（Bind系で適用される）
shadowoffset     = 0       ;影のＹ軸方向の位置座標
draw.offset      = 0,0     ;キャラの表示座標（Ｘ軸,Ｙ軸）

;---------------------------------------------------------------------------
; 移動速度
;---------------------------------------------------------------------------
[Velocity]
walk.fwd     = 2.4         ;前進速度（Ｘ軸・[Statedef 20]に適用される）
walk.back    = -2.1        ;後退速度（Ｘ軸・[Statedef 20]に適用される）
run.fwd      = 4.6,0       ;前方に走る速度（Ｘ軸,Ｙ軸・[Statedef 100]に適用される）
run.back     = -5.5,-4.5   ;後方に走る速度（Ｘ軸,Ｙ軸・[Statedef 105]に適用される）
jump.neu     = 0,-8.9      ;垂直ジャンプの速度（Ｘ軸,Ｙ軸・[Statedef 40]に適用される）
jump.back    = -3.0       ;後方ジャンプの速度（Ｘ軸・[Statedef 40]に適用される）
jump.fwd     = 3.0         ;前方ジャンプの速度（Ｘ軸・[Statedef 40]に適用される）
runjump.back = -2.55,-8.1  ;後方に走ってからのジャンプ速度（Ｘ軸,Ｙ軸・[Statedef 40]に適用される）
runjump.fwd  = 4,-8.1      ;前方に走ってからのジャンプ速度（Ｘ軸,Ｙ軸・[Statedef 40]に適用される）
airjump.neu  = 0,-8.1      ;空中垂直ジャンプ速度（Ｘ軸,Ｙ軸・[Statedef 45]に適用される）
airjump.back = -2.55       ;空中後方ジャンプ速度（Ｘ軸・[Statedef 45]に適用される）
airjump.fwd  = 2.5         ;空中前方ジャンプ速度（Ｘ軸・[Statedef 45]に適用される）

;---------------------------------------------------------------------------
; 運動関係
;---------------------------------------------------------------------------
[Movement]
airjump.num     = 0        ;空中ジャンプが出来る回数
airjump.height  = 35       ;空中ジャンプが出来る最低の高度（Ｙ軸）
yaccel          = .55      ;Ｙ軸加速度（重力）
stand.friction  = .85      ;立っている時の摩擦係数（ステートのPhysicsが「S」の時）
crouch.friction = .82      ;しゃがんでいる時の摩擦係数（ステートのPhysicsが「C」の時）

;===========================================================================
; ステート
;===========================================================================
;===========================================================================
; 基本行動
;===========================================================================
;---------------------------------------------------------------------------
; Stand
[Statedef 0]
type = S
physics = S
sprpriority = 0

[State 0, 1]
type = ChangeAnim
trigger1 = Anim != 0 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0 ;Turn anim over
value = 0

[State 0, 2]
type = VelSet
trigger1 = Time = 0
y = 0

[State 0, 3] ;Stop moving if low velocity or 4 ticks pass
type = VelSet
trigger1 = time = 0
;trigger1 = abs(vel x) < 2
;trigger2 = Time = 4
x = 0

[State 0, PosSet];浮遊バグ対策
type = PosSet
trigger1 = alive && Life>0
trigger1 = abs(Pos Y) > 5
y = 0

[State 0, destroyself];分身バグ対策
type = destroyself
trigger1 = !IsHelper

[State 0, 4] ;Are you dead?
type = ChangeState
trigger1 = !alive
value = 5050

;---------------------------------------------------------------------------
; Stand to Crouch
[Statedef 10]
type    = C
physics = C
anim = 10

[State 10, 1]
type = VelSet
trigger1 = Time = 0
x = 0

[State 10, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 11

;---------------------------------------------------------------------------
; Crouching
[Statedef 11]
type    = C
physics = C
anim = 11
sprpriority = 0

[State 11, 0]
type = VelSet
trigger1 = Time = 0
x = 0

[State 11, 1] ;Change from turning animation
type = ChangeAnim
trigger1 = Anim = 6 && AnimTime = 0
value = 11

;---------------------------------------------------------------------------
; Crouch to Stand
[Statedef 12]
type    = S
physics = S
anim = 12

[State 11, 0]
type = VelSet
trigger1 = Time = 0
x = 0

[State 12, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; Walk
[Statedef 20]
type    = S
physics = S
sprpriority = 0

[State -1, AI]
Type = ChangeState
TriggerAll = var(59) >0
Trigger1 = !Time
Value = 19
IgnoreHitPause = 1

[State 20, 1]
type = VelSet
trigger1 = var(59)=0
trigger1 = command = "holdfwd"
x = const(velocity.walk.fwd.x)

[State 20, 2]
type = VelSet
trigger1 = var(59)=0
trigger1 = command = "holdback"
x = const(velocity.walk.back.x)

[State 20, 3]
type = ChangeAnim
triggerall = vel x > 0
trigger1 = Anim != 20 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 20

[State 20, 4]
type = ChangeAnim
triggerall = vel x < 0
trigger1 = Anim != 21 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 21

;---------------------------------------------------------------------------
; Walk(FWD) AI
[Statedef 19]
type    = S
physics = S
sprpriority = 0
ctrl = 0

[State 19, 1]
type = VelSet
trigger1 = 1
x = const(velocity.walk.fwd.x)

[State 19, 3]
type = ChangeAnim
trigger1 = Anim != 20
value = 20

[State 20, 1]
type = Turn
trigger1 = P2dist X < 0

[State 19, Ctrl]
type = ChangeState
trigger1 = roundstate!=2
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Walk(BACK) AI
[Statedef 21]
type    = S
physics = S
sprpriority = 0
ctrl = 0

[State 21, 2]
type = VelSet
trigger1 = 1
x = const(velocity.walk.back.x)

[State 21, 4]
type = ChangeAnim
trigger1 = Anim != 21
value = 21

[State 20, 1]
type = Turn
trigger1 = P2dist X < 0

[State 21, Ctrl]
type = ChangeState
trigger1 = roundstate!=2
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Walk Stop AI
[State -1, AI]
Type = ChangeState
triggerall = (stateno=19||stateno=21)
trigger1 = var(59)<0
trigger2 = roundstate!=2
Value = 0
Ctrl = 1

[State -1, AI]
Type = ChangeState
triggerall = (stateno=19||stateno=21)&&(var(59)>0)
trigger1 = time > 12 || (time > 3 && var(59)>8)
trigger1 = P2bodydist x < 30
Trigger1 = anim = 20
trigger1 = fvar(38)!=1
trigger2 = time > 24 || (time > 3 && var(59)>8)
trigger2 = P2bodydist x >= 90
Trigger2 = anim = 21
trigger3 = inguarddist
Trigger3 = Anim = 21 || Random < 60*(var(59)-1)||var(59) >8
trigger4 = roundstate != 2
Value = 0
Ctrl = 1

;---------------------------------------------------------------------------
; Jump Start
[Statedef 40]
type    = S
physics = S
anim = 40
ctrl = 0
sprpriority = 1

[State 40, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 40, 6]
type = ChangeState
trigger1 = var(59) > 0
trigger1 = Time = 0
value = 19

[State 40, 2]
type = VarSet
trigger1 = var(59)=0
trigger1 = command = "holdfwd"
sysvar(1) = 1

[State 40, 3]
type = VarSet
trigger1 = var(59)=0
trigger1 = command = "holdback"
sysvar(1) = -1

[State 40, 4]
type = VelSet
trigger1 = AnimTime = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 40, 5]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = prevstateno = 100 || prevstateno = 99; || (var(59)>0&&fvar(39)=3);RUN_FWD
trigger1 = sysvar(1) = 1
x = const(velocity.runjump.fwd.x)

[State 40, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
; Jump Start(AI)
[Statedef 41]
type    = S
physics = S
anim = 40
ctrl = 0
sprpriority = 1

[State 40, 1]
type = VarSet
trigger1 = Time = 0
trigger2 = var(59)>0
trigger2 = enemynear(var(58)),statetype=A
trigger2 = enemynear(var(58)),statetype!=L
trigger2 = enemynear(var(58)),movetype!=H
trigger2 = enemynear(var(58)),vel x > 0
trigger2 = p2bodydist x = [60,100]
trigger2 = random<100
trigger3 = var(59)=[1,5]
trigger3 = random<50
sysvar(1) = 0

[State 40, 2]
type = VarSet
trigger1 = var(59)=0
trigger1 = command = "holdfwd"
trigger2 = (var(59)>0&&enemynear(var(58)),statetype!=A)
trigger3 = var(59)>0
trigger3 = EnemyNear(var(58)),StateType != L || P2BodyDist X >= 40
trigger3 = EnemyNear(var(58)),MoveType = H || Random <= 333 || EnemyNear(var(58)),StateType = L || fvar(39)=4
sysvar(1) = 1

[State 40, 3]
type = VarSet
trigger1 = var(59)=0
trigger1 = command = "holdback"
trigger2 = var(59)>0&&enemynear(var(58)),statetype=A&&enemynear(var(58)),vel x>0
trigger2 = enemynear(var(58)),stateno!=[105,106]
trigger2 = backedgebodydist >60
trigger2 = sysvar(1)!=1&&random<=250
sysvar(1) = -1

[State 40, 4]
type = VelSet
trigger1 = AnimTime = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 40, 5]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = prevstateno = 100 || prevstateno = 99;RUN_FWD
trigger1 = sysvar(1) = 1
x = const(velocity.runjump.fwd.x)

[State 40, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
; Jump Land
[Statedef 52]
type    = S
physics = S
ctrl = 0
anim = 47

[State 52, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, 3]
type = CtrlSet
trigger1 = Time = 3
value = 1

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; RUN_FWD
[Statedef 100]
type    = S
physics = S
anim = 100
sprpriority = 1

[State 100, 0]
type = PlaySnd
trigger1 = Time = 3
value = 100, 0
loop = 1
channel = 1

[State 100, 1]
type = VelSet
trigger1 = AnimElemtime(2) >= 0
x = const(velocity.run.fwd.x)

[State 100, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 100, 4]
type = ChangeState
trigger1 = command != "holdfwd"
value = 0

;---------------------------------------------------------------------------
; RUN_FWD (AI)
[Statedef 99]
type    = S
physics = S
anim = 100
ctrl = 0
sprpriority = 1

[State 100, 0]
type = PlaySnd
trigger1 = Time = 3
value = 100, 0
loop = 1
channel = 1

[State 100, 1]
type = VelSet
trigger1 = AnimElemtime(2) >= 0
x = const(velocity.run.fwd.x)

[State 100, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 100, 4]
type = ChangeState
triggerall = var(59) = 0
trigger1 = command != "holdfwd"
value = 0
ctrl = 1

[State -1, AI]
type = ChangeState
triggerall = var(59)>=1
triggerall = stateno = 99 && time>=10
triggerall = fvar(38)=0
Trigger1 = inguarddist
Trigger2 = EnemyNear,MoveType!=H
Trigger2 = P2BodyDist X<=30
Trigger2 = P2BodyDist Y>=-120
trigger2 = random<=var(59)*15
Trigger3 = P2BodyDist X=[10,30]
trigger3 = random<=var(59)*15
trigger4 = RoundState != 2 
trigger5 = p2bodydist x <= 5
trigger6 = p2bodydist x = [31,60]
trigger6 = random<=var(59)*20
trigger7 = P2BodyDist X = [61,90]
trigger7 = random <= var(59)*5
trigger8 = time = 60
value = 0
ctrl = 1

[State -1, AI]
type = ChangeState
triggerall = stateno = 99
trigger1 = RoundState = 4
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; RUN_BACK
[Statedef 105]
type    = A
physics = A
ctrl = 0
anim = 105
sprpriority = 1

[State 105, 1]
type = VelSet
trigger1 = animelemtime(2) <0
y = 0

[State 105, 1]
type = VelSet
trigger1 = animelem = 2
x = const(velocity.run.back.x)
y = const(velocity.run.back.y)

;[State 105, 2]
;type = CtrlSet
;trigger1 = Time = 2
;value = 1

[State 105, 3]
type = ChangeState
trigger1 = animelemtime(2)>=0
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 106

;---------------------------------------------------------------------------
; RUN_BACK2 (land)
[Statedef 106]
type    = S
physics = S
ctrl = 0
anim = 106

[State 106, 1]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 106, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 106, 3]
type = MakeDust
trigger1 = Time = 2
pos = -5,-2
spacing = 1

[State 106, 4]
type = ChangeState
trigger1 = animtime=0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; GUARD (start)
[Statedef 120]
type = U    ;Leave state type unchanged
physics = U ;Leave physics unchanged

[State 120, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 120 + (statetype = C) + (statetype = A)*2

[State 120, 2]
type = StateTypeSet
trigger1 = Time = 0 && statetype = S
physics = S

[State 120, 3]
type = StateTypeSet
trigger1 = Time = 0 && statetype = C
physics = C

[State 120, 4]
type = StateTypeSet
trigger1 = Time = 0 && statetype = A
physics = A

[State 120, Hi to Lo]
type = StateTypeSet
TriggerAll=Statetype = S
Trigger1 = var(59) = 0
Trigger1 = command = "holddown"
Trigger2 = var(59) >= 1
Trigger2 = EnemyNear,StateType!=A
Trigger2 = Random <= var(59)*20||var(59)>9
trigger2 = statetype != A
trigger2 = enemynear(var(58)),stateno!=var(55) && enemynear(var(58)),stateno!=var(54)
statetype = C
physics = C

[State 120, Lo to Hi]
type = StateTypeSet
TriggerAll=Statetype = C
Trigger1 = var(59)=0
Trigger1 = command != "holddown"
Trigger2 = var(59)>=1
Trigger2 = EnemyNear,StateType=A || enemynear(var(58)),stateno=var(55) || enemynear(var(58)),stateno=var(54)
Trigger2 = Random <= var(59)*20||var(59)>9
trigger2 = statetype != A
statetype = S
physics = S

[State 120, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 130 + (statetype = C) + (statetype = A)*2

[State 120, Stop Guarding]
type = ChangeState
Trigger1 = var(59) = 0
trigger1 = command != "holdback"
trigger2 = !inguarddist
Trigger3 = var(59)=[1,9]
Trigger3 = P2BodyDist X<0
Trigger3 = Random <= (10-var(59))*40
value = 140

;---------------------------------------------------------------------------
; STAND GUARD (guarding)
[Statedef 130]
type    = S
physics = S

[State 130, 1]
type = ChangeAnim
trigger1 = Anim != 130
value = 130

[State 130, Hi to Lo]
type = ChangeState
Trigger1 = var(59)=0
Trigger1 = command = "holddown"
Trigger2 = var(59)>=1
Trigger2 = EnemyNear,StateType!=A
Trigger2 = Random <= var(59)*20||var(59)>9
trigger2 = enemynear(var(58)),stateno!=var(55) && enemynear(var(58)),stateno!=var(54)
value = 131

[State 130, Stop Guarding]
type = ChangeState
Trigger1 = var(59) = 0
trigger1 = command != "holdback"
trigger2 = !inguarddist
Trigger3 = var(59)=[1,9]
Trigger3 = P2BodyDist X<0
Trigger3 = Random <= (10-var(59))*40
value = 140

;---------------------------------------------------------------------------
; CROUCH GUARD (guarding)
[Statedef 131]
type    = C
physics = C

[State 131, 1]
type = ChangeAnim
trigger1 = Anim != 131
value = 131

[State 131, Lo to Hi]
type = ChangeState
Trigger1 = var(59)=0
Trigger1 = command != "holddown"
Trigger2 = var(59)>=1
Trigger2 = EnemyNear,StateType=A || enemynear(var(58)),stateno=var(55) || enemynear(var(58)),stateno=var(54)
Trigger2 = Random <= var(59)*20||var(59)>9
value = 130

[State 131, Stop Guarding]
type = ChangeState
Trigger1 = var(59) = 0
trigger1 = command != "holdback"
trigger2 = !inguarddist
Trigger3 = var(59)=[1,9]
Trigger3 = P2BodyDist X<0
Trigger3 = Random <= (10-var(59))*40
value = 140

;---------------------------------------------------------------------------
; AIR GUARD (guarding)
[Statedef 132]
type    = A
physics = N

[State 132, 1]
type = ChangeAnim
trigger1 = Anim != 132
value = 132

[State 132, 2]
type = VelAdd
trigger1 = 1
y = Const(movement.yaccel)

[State 132, 3]
type = VarSet
trigger1 = 1
sysvar(0) = (pos y >= 0) && (vel y > 0)

[State 132, 4]
type = VelSet
trigger1 = sysvar(0)
y = 0

[State 132, 5]
type = PosSet
trigger1 = sysvar(0)
y = 0

[State 132, 6]
type = ChangeState
trigger1 = sysvar(0)
trigger1 = command = "holdback"
trigger1 = inguarddist
value = 130

[State 132, 7]
type = ChangeState
trigger1 = sysvar(0)
value = 52

[State 132, Stop Guarding]
type = ChangeState
trigger1 = command != "holdback"
Trigger1 = var(59) = 0
trigger2 = !inguarddist
Trigger3 = var(59)=[1,9]
Trigger3 = P2BodyDist X<0
Trigger3 = Random <= (10-var(59))*40
value = 140

;---------------------------------------------------------------------------
; GUARD (end)
[Statedef 140]
type = U    ;Leave state type unchanged
physics = U ;Leave physics unchanged
ctrl = 1

[State 140, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 140 + (statetype = C) + (statetype = A)*2

[State 140, 2]
type = StateTypeSet
trigger1 = Time = 0 && statetype = S
physics = S

[State 140, 3]
type = StateTypeSet
trigger1 = Time = 0 && statetype = C
physics = C

[State 140, 4]
type = StateTypeSet
trigger1 = Time = 0 && statetype = A
physics = A

[State 120, Hi to Lo]
type = StateTypeSet
TriggerAll=Statetype = S
Trigger1 = var(59) = 0
Trigger1 = command = "holddown"
Trigger2 = var(59) >= 1
Trigger2 = EnemyNear,StateType!=A
Trigger2 = Random <= var(59)*20||var(59)>9
trigger2 = statetype != A
trigger2 = enemynear(var(58)),stateno!=var(55) && enemynear(var(58)),stateno!=var(54)
statetype = C
physics = C

[State 120, Lo to Hi]
type = StateTypeSet
TriggerAll=Statetype = C
Trigger1 = var(59)=0
Trigger1 = command != "holddown"
Trigger2 = var(59)>=1
Trigger2 = EnemyNear,StateType=A || enemynear(var(58)),stateno=var(55) || enemynear(var(58)),stateno=var(54)
Trigger2 = Random <= var(59)*20||var(59)>9
trigger2 = statetype != A
statetype = S
physics = S

;[State 140, 5] ;Implemented within engine
;type = ChangeState
;trigger1 = AnimTime = 0
;value = (statetype = C)*11 + (statetype = A)*51

;---------------------------------------------------------------------------
; SGUARDHIT (shaking)
[Statedef 150]
type    = S
movetype= H
physics = N
velset = 0,0

[State 150, 1]
type = ChangeAnim
trigger1 = 1
value = 150

[State 150, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 151 + 2*ifelse(var(59)=0,(command = "holddown"),(enemynear,statetype=C))

[State 120, Hi to Lo]
type = StateTypeSet
TriggerAll=Statetype = S
Trigger1 = var(59) = 0
Trigger1 = command = "holddown"
Trigger2 = var(59) >= 1
Trigger2 = EnemyNear,StateType!=A
Trigger2 = Random <= var(59)*20||var(59)>9
trigger2 = statetype != A
trigger2 = enemynear(var(58)),stateno!=var(55) && enemynear(var(58)),stateno!=var(54)
statetype = C
physics = C

[State 120, Lo to Hi]
type = StateTypeSet
TriggerAll=Statetype = C
Trigger1 = var(59)=0
Trigger1 = command != "holddown"
Trigger2 = var(59)>=1
Trigger2 = EnemyNear,StateType=A || enemynear(var(58)),stateno=var(55) || enemynear(var(58)),stateno=var(54)
Trigger2 = Random <= var(59)*20||var(59)>9
trigger2 = statetype != A
statetype = S
physics = S

[State 150, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 3

;---------------------------------------------------------------------------
; SGUARDHIT2 (knocked back)
[Statedef 151]
type    = S
movetype= H
physics = S
anim = 150

[State 151, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 151, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = HitOver
x = 0

[State 151, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 120, Hi to Lo]
type = StateTypeSet
TriggerAll=Statetype = S
Trigger1 = var(59) = 0
Trigger1 = command = "holddown"
Trigger2 = var(59) >= 1
Trigger2 = EnemyNear,StateType!=A
Trigger2 = Random <= var(59)*20||var(59)>9
trigger2 = statetype != A
trigger2 = enemynear(var(58)),stateno!=var(55) && enemynear(var(58)),stateno!=var(54)
statetype = C
physics = C

[State 120, Lo to Hi]
type = StateTypeSet
TriggerAll=Statetype = C
Trigger1 = var(59)=0
Trigger1 = command != "holddown"
Trigger2 = var(59)>=1
Trigger2 = EnemyNear,StateType=A || enemynear(var(58)),stateno=var(55) || enemynear(var(58)),stateno=var(54)
Trigger2 = Random <= var(59)*20||var(59)>9
trigger2 = statetype != A
statetype = S
physics = S

[State 151, 4]
type = ChangeState
trigger1 = HitOver
value = 130
ctrl = 1

;---------------------------------------------------------------------------
; CGUARDHIT (shaking)
[Statedef 152]
type    = C
movetype= H
physics = N
velset = 0,0

[State 152, 1]
type = ChangeAnim
trigger1 = 1
value = 151

[State 152, 3]
type = ChangeState
trigger1 = HitShakeOver
value = 151 + 2*ifelse(var(59)=0,(command = "holddown"),(enemynear,statetype=C))

[State 120, Hi to Lo]
type = StateTypeSet
TriggerAll=Statetype = S
Trigger1 = var(59) = 0
Trigger1 = command = "holddown"
Trigger2 = var(59) >= 1
Trigger2 = EnemyNear,StateType!=A
Trigger2 = Random <= var(59)*20||var(59)>9
trigger2 = statetype != A
trigger2 = enemynear(var(58)),stateno!=var(55) && enemynear(var(58)),stateno!=var(54)
statetype = C
physics = C

[State 120, Lo to Hi]
type = StateTypeSet
TriggerAll=Statetype = C
Trigger1 = var(59)=0
Trigger1 = command != "holddown"
Trigger2 = var(59)>=1
Trigger2 = EnemyNear,StateType=A || enemynear(var(58)),stateno=var(55) || enemynear(var(58)),stateno=var(54)
Trigger2 = Random <= var(59)*20||var(59)>9
trigger2 = statetype != A
statetype = S
physics = S

[State 152, 4]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4

;---------------------------------------------------------------------------
; CGUARDHIT2 (knocked back)
[Statedef 153]
type    = C
movetype= H
physics = C
anim = 151

[State 153, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 153, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = HitOver
x = 0

[State 153, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 120, Hi to Lo]
type = StateTypeSet
TriggerAll=Statetype = S
Trigger1 = var(59) = 0
Trigger1 = command = "holddown"
Trigger2 = var(59) >= 1
Trigger2 = EnemyNear,StateType!=A
Trigger2 = Random <= var(59)*20||var(59)>9
trigger2 = statetype != A
trigger2 = enemynear(var(58)),stateno!=var(55) && enemynear(var(58)),stateno!=var(54)
statetype = C
physics = C

[State 120, Lo to Hi]
type = StateTypeSet
TriggerAll=Statetype = C
Trigger1 = var(59)=0
Trigger1 = command != "holddown"
Trigger2 = var(59)>=1
Trigger2 = EnemyNear,StateType=A || enemynear(var(58)),stateno=var(55) || enemynear(var(58)),stateno=var(54)
Trigger2 = Random <= var(59)*20||var(59)>9
trigger2 = statetype != A
statetype = S
physics = S

[State 153, 4]
type = ChangeState
trigger1 = HitOver
value = 131
ctrl = 1

;---------------------------------------------------------------------------
; AGUARDHIT (shaking)
[Statedef 154]
type    = A
movetype= H
physics = N
velset = 0,0

[State 154, 1]
type = ChangeAnim
trigger1 = 1
value = 152

[State 154, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 155 ;AGUARDHIT2

[State 154, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4

;---------------------------------------------------------------------------
; AGUARDHIT2 (knocked away)
[Statedef 155]
type    = A
movetype= H
physics = N
anim = 152

[State 155, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 155, 2]
type = VelAdd
trigger1 = 1
y = Const(movement.yaccel)

[State 155, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)
value = 1

[State 155, 4]
type = VarSet
trigger1 = 1
sysvar(0) = (pos y >= 0) && (vel y > 0)

[State 155, 5]
type = VelSet
trigger1 = sysvar(0)
y = 0

[State 155, 6]
type = PosSet
trigger1 = sysvar(0)
y = 0

[State 155, 6]
type = ChangeState
trigger1 = sysvar(0)
trigger1 = command = "holdback"
trigger1 = inguarddist
value = 130

[State 155, 7]
type = ChangeState
trigger1 = sysvar(0)
value = 52

;---------------------------------------------------------------------------
;タイムオーバー（負けた時）
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 170, 無敵]
type = NotHitBy
trigger1 = 1 ;トリガーを何も書かず「1」にする事により、『無条件で常に実行させる命令』になる。
value = SCA
time = 1

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;勝利ポーズ分岐（common1.cnsには無いけど、これもコモンステート）
[Statedef 180]
type = S

[State 180]
type = VarRandom
trigger1 = 1
v = 2
range = 1,2

[State 180]
type = ChangeState
trigger1 = var(2)!=0
value = 180 + var(2)

;---------------------------------------------------------------------------
;勝利ポーズ
;瓢箪キャッチ
[Statedef 181]
type = S
ctrl = 0
anim = 180
velset = 0,0

[State 180, 音];ヒュ〜
type = PlaySnd
trigger1 = animelemtime(11)=0
value = 1000, 1

[State 180, 音];キャッチ！
type = PlaySnd
trigger1 = animelemtime(16)=0
value = 800, 1

[State 801, Explod];瓢箪
type = Explod
trigger1 = NumExplod(10180) = 0
trigger1 = animelem = 14
anim = 10180
ID = 10180
pos = 0, 0
postype = p1
facing = 1
sprpriority = 2
ownpal = 1
removeongethit = 1

[State 1];カメラ固定
type = screenbound
trigger1 = 1
value = 1
movecamera = 1

[State 181, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 181, 4]
type = AssertSpecial
trigger1 = time = [0,180]
flag = roundnotover

;---------------------------------------------------------------------------
;勝利ポーズ
;風が吹く
[Statedef 182]
type = S
ctrl = 0
anim = 181
velset = 0,0

[State 1];カメラ固定
type = screenbound
trigger1 = 1
value = 1
movecamera = 1

[State 181, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 181, 4]
type = AssertSpecial
trigger1 = time = [0,180]
flag = roundnotover

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;イントロ（試合開始前の登場演出アクション）
[Statedef 190]
type = S
ctrl = 0
anim = 190
velset = 0,0

[State 190, VarSet];対サイコチーム
type = VarSet
triggerall = time = 0
trigger1 = p2name = "Athena Asamiya" || p4name = "Athena Asamiya"
trigger2 = p2name = "Athena"         || p4name = "Athena"
trigger3 = p2name = "Kensou"         || p4name = "Kensou"
trigger4 = p2name = "Sie Kensou"     || p4name = "Sie Kensou"
trigger5 = p2name = "cvsathena"      || p4name = "cvsathena"
trigger6 = p2name = "bao"            || p4name = "bao"
trigger7 = p2name = "Momoko"         || p4name = "Momoko"
var(2) = 1

[State 190, 音]
type = null;PlaySnd
trigger1 = animelemtime(1)=30
value = 190,0
volume = 100

[State 181, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 191, 特殊効果];試合が開始するまではこのコントローラを使おう（※２）
type = AssertSpecial
trigger1 = 1
flag = Intro ;イントロの状態

[state 190, changestate]
type = changestate
trigger1 = var(2)!=0
value = 190 + var(2)

[State 191, ステート変更];アニメーションが終われば「通常立ち」のステートに変更する
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
;イントロ（対サイコチーム）
[Statedef 191]
type = S
ctrl = 0
anim = 191
velset = 0,0

[State 181, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 191, 特殊効果];試合が開始するまではこのコントローラを使おう（※２）
type = AssertSpecial
trigger1 = 1
flag = Intro ;イントロの状態

[State 191, ステート変更];アニメーションが終われば「通常立ち」のステートに変更する
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
;挑発
[Statedef 195]
type = S
movetype = I
physics = S
ctrl = 0
anim = 195
velset = 0,0
sprpriority = 2
poweradd = 100
facep2 = 1 ;はじめに相手のほうを向くかどうか。省略時0

[State 190, 音]
type = PlaySnd
trigger1 = animelemtime(1)=5
value = 195,0
volume = 100
channel = 0

[State 195, コントロール]
type = CtrlSet
trigger1 = Time = 45 ;このステートが４０フレームになったら
value = 1            ;キーコントロールが可能になる。

[State 195, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;===========================================================================
; 通常攻撃技
;===========================================================================
;---------------------------------------------------------------------------
;遠距離立ち弱パンチ
[Statedef 200]
type    = S
movetype= A
physics = S
juggle  = 8
velset = 0,0
ctrl = 0
anim = 200
poweradd = 0
sprpriority = 2

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
trigger1 = random<500
value = 200, 0
channel = 0
volume = 100

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 2
value = 300, 0

[State 200, 攻撃設定]
type = HitDef
trigger1 = animelem = 3
attr = S, NA
damage = 33, 0
getpower = 45,45
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 10, 9
sparkno = s4000
guard.sparkno = s4010
sparkxy = -15, -65
hitsound = s1, 7
guardsound = s120, 0
ground.type = High
ground.slidetime = 8
ground.hittime  = 9
ground.velocity = -4.5,0
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -1.4,-3
air.hittime = 12

[State 200, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;近距離立ち弱パンチ
[Statedef 205]
type    = S
movetype= A
physics = S
juggle  = 8
velset = 0,0
ctrl = 0
anim = 205
poweradd = 0
sprpriority = 2

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
trigger1 = random<500
value = 200, 0
channel = 0
volume = 100

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 2
value = 300, 0

[State 200, 攻撃設定]
type = HitDef
trigger1 = animelem = 3
attr = S, NA
damage = 25, 0
getpower = 45,45
animtype = Light
guardflag = MA
hitflag = MAF
priority = 3, Hit
pausetime = 10, 9
sparkno = s4000
guard.sparkno = s4010
sparkxy = -15, -76
hitsound = s1, 7
guardsound = s120, 0
ground.type = High
ground.slidetime = 9
ground.hittime  = 10
ground.velocity = -4.5,0
airguard.velocity = -1.9,-.8
air.type = High
air.velocity = -1.4,-3
air.hittime = 12

[State 200, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;遠距離強パンチ
[Statedef 210]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 0
ctrl = 0
velset = 0,0
anim = 210
sprpriority = 2

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
trigger1 = random<500
value = 210, 0
channel = 0
volume = 100

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 3
value = 300, 1

[State 210, ヒット定義]
type = HitDef
trigger1 = animelem = 3
attr = S, NA
animtype  = Hard
damage    = 91, 0
guardflag = MA
priority = 4, Hit
getpower = 90,90
pausetime = 12,11
sparkno = s4001
guard.sparkno = s4011
sparkxy = -10,-65
hitsound   = s1,5
guardsound = s120,0
ground.type = High
ground.slidetime = 18
ground.hittime  = 20
ground.velocity = -7.5
airguard.velocity = -2.3,-1.8
air.type = High
air.velocity = -2.5,-3
air.hittime = 20

[State 210, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;近距離強パンチ
[Statedef 215]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 0
ctrl = 0
velset = 0,0
anim = 215
sprpriority = 2

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
trigger1 = random<500
value = 210, 0
channel = 0
volume = 100

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 3
value = 300, 1

[State 210, ヒット定義]
type = HitDef
trigger1 = animelem = 5
attr = S, NA
animtype  = Hard
damage    = 91, 0
guardflag = MA
priority = 4, Hit
getpower = 90,90
pausetime = 12,11
sparkno = s4001
guard.sparkno = s4011
sparkxy = -15,-60
hitsound   = s1,5
guardsound = s120,0
ground.type = High
ground.slidetime = 18
ground.hittime  = 20
ground.velocity = -5
airguard.velocity = -2.3,-1.8
air.type = High
air.velocity = -2.5,-3
air.hittime = 20

[State 210, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;遠距離弱キック
[Statedef 230]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 0
ctrl = 0
velset = 0,0
anim = 230
sprpriority = 2

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
trigger1 = random<500
value = 200, 0
channel = 0
volume = 100

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 300, 0

[State 230, ヒット定義]
type = HitDef
trigger1 = animelem = 2
attr = S, NA
animtype  = light
damage    = 33, 0
priority = 3, Hit
getpower = 45,45
guardflag = MA
pausetime = 10,9
sparkno = s4000
guard.sparkno = s4010
sparkxy = -15,-55
hitsound   = s1,0
guardsound = s120,0
ground.type = Low
ground.slidetime = 9
ground.hittime  = 10
ground.velocity = -5
air.velocity = -2.5,-3.5

[State 230, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;近距離弱キック
[Statedef 235]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 0
ctrl = 0
velset = 0,0
anim = 235
sprpriority = 2

[State 230, 音を鳴らす]
type = PlaySnd
trigger1 = time = 1
trigger1 = random<500
value = 200, 0
channel = 0
volume = 100

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 300, 0

[State 230, ヒット定義]
type = HitDef
trigger1 = animelem = 2
attr = S, NA
animtype  = light
damage    = 25, 0
priority = 3, Hit
getpower = 45,45
guardflag = MA
pausetime = 10,9
sparkno = s4000
guard.sparkno = s4010
sparkxy = -15,-35
hitsound   = s1,0
guardsound = s120,0
ground.type = Low
ground.slidetime = 9
ground.hittime  = 11
ground.velocity = -5
air.velocity = -2.5,-3.5

[State 230, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;遠距離強キック
[Statedef 240]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 0
ctrl = 0
velset = 0,0
anim = 240
sprpriority = 2

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
trigger1 = random<500
value = 210, 0
channel = 0
volume = 100

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 3
value = 300, 1

[State 210, ヒット定義]
type = HitDef
trigger1 = animelem = 5
attr = S, NA
animtype  = Hard
damage    = 107, 0
guardflag = MA
priority = 4, Hit
getpower = 90,90
pausetime = 11,10
sparkno = s4001
guard.sparkno = s4011
sparkxy = -12,-65
hitsound   = s1,5
guardsound = s120,0
ground.type = High
ground.slidetime = 18
ground.hittime  = 20
ground.velocity = -9
airguard.velocity = -2.3,-1.8
air.type = High
air.velocity = -2.5,-3
air.hittime = 20

[State 240, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;近距離強キック
[Statedef 245]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 0
ctrl = 0
velset = 0,0
anim = 245
sprpriority = 2

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
trigger1 = random<500
value = 210, 0
channel = 0
volume = 100

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 3
value = 300, 1

[State 210, ヒット定義]
type = HitDef
trigger1 = animelem = 4
attr = S, NA
animtype  = Hard
damage    = 74, 0
guardflag = MA
priority = 4, Hit
getpower = 75,75
pausetime = 11,10
sparkno = s4001
guard.sparkno = s4011
sparkxy = -20,-70
hitsound   = s1,5
guardsound = s120,0
ground.type = High
ground.slidetime = 18
ground.hittime  = 20
ground.velocity = 0
airguard.velocity = -2.3,-1.8
air.type = High
air.velocity = -2.5,-3
air.hittime = 20

[State 210, ヒット定義]
type = HitDef
trigger1 = animelem = 6
attr = S, NA
animtype  = Hard
damage    = 33, 0
guardflag = HA
priority = 4, Hit
getpower = 15,15
pausetime = 11,10
sparkno = s4001
guard.sparkno = s4011
sparkxy = -20,-50
hitsound   = s1,4
guardsound = s120,0
ground.type = High
ground.slidetime = 18
ground.hittime  = 20
ground.velocity = -6.5
airguard.velocity = -2.3,-1.8
air.type = High
air.velocity = -2.5,-3
air.hittime = 20

[State 240, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;酔歩瓢箪激
[Statedef 250]
type = S
movetype = A
physics = S
juggle = 8
poweradd = 0
ctrl = 0
velset = 0,0
anim = 250
sprpriority = 2

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
trigger1 = random<500
value = 700, 0
channel = 0
volume = 100

[State 640, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 4
value = 300, 1

[State 200,]
type = Posadd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3
trigger3 = AnimElem = 5
x = 5

[State 200,]
type = Posadd
trigger1 = AnimElem = 4
x = 20

[State 200,]
type = Posadd
trigger1 = AnimElem = 6
x = 10

[State 200,]
type = Posadd
trigger1 = AnimElem = 7
x = 30

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 7
attr = S, NA
damage = 107, 0
getpower = 106,106
animtype = Hard
guardflag = H                    ;中段
hitflag = MAF
priority = 4, Hit
pausetime = 12, 11
sparkno = s4001
guard.sparkno = s4011            ;ヒットエフェクトのスプライトステート（無ければ0）
sparkxy = -20, -45
hitsound   = s1,9
guardsound = s120,0
ground.type = High
ground.slidetime = 22
ground.hittime  = 22
ground.velocity = -8.5
air.type = High
air.velocity = -1.5,-2.5
air.hittime = 20

[State 210, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;酔歩瓢箪激(キャンセル版)
[Statedef 251]
type = S
movetype = A
physics = S
juggle = 8
poweradd = 0
ctrl = 0
velset = 0,0
anim = 250
sprpriority = 2

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
trigger1 = random<500
value = 700, 0
channel = 0
volume = 100

[State 640, 音を鳴らす]
type = PlaySnd
trigger1 = time = 5
value = 300, 1

[State 200,]
type = Posadd
trigger1 = AnimElem = 2
trigger2 = AnimElem = 3
trigger3 = AnimElem = 5
x = 5

[State 200,]
type = Posadd
trigger1 = AnimElem = 4
x = 20

[State 200,]
type = Posadd
trigger1 = AnimElem = 6
x = 10

[State 200,]
type = Posadd
trigger1 = AnimElem = 7
x = 30

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 7
attr = S, NA
damage = 91, 0
getpower = 106,106
animtype = Hard
guardflag = M
hitflag = MAF
priority = 4, Hit
pausetime = 12, 11
sparkno = s4001
guard.sparkno = s4011            ;ヒットエフェクトのスプライトステート（無ければ0）
sparkxy = -20, -45
hitsound   = s1,9
guardsound = s120,0
ground.type = High
ground.slidetime = 22
ground.hittime  = 22
ground.velocity = -8.2
air.type = High
air.velocity = -1.5,-2.5
air.hittime = 20

[State 210, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; ふっ飛ばし攻撃
[Statedef 290]
type    = S                      
movetype= A                      
physics = S                      
juggle  = 12                      
;Commonly-used controllers:
velset = 0,0                     ;このステートが始まった時に移動するか（0,0で動かない）
ctrl = 0                         ;このステート中に他のコマンドを受け付けるか(1で受け付ける)
anim = 290                       ;このステートで表示するスプライトステート番号(0で変化無し)
sprpriority = 2                  ;表示した絵の重なり具合(2一番前　0通常　-1奥)

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = time = 1
trigger1 = random<500
value = 290, 0
channel = 0
volume = 100

[State 640, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 4
value = 300, 1

[State 290, 1]
type = HitDef
trigger1 = animelem = 4
attr = S, NA                     ;立ち状態で、通常の攻撃(ｓは立ち、ｎは通常、aは攻撃を表す)
damage = 107, 0                  ;ダメージ量（左が当たった時、右はガードした時）
getpower = 121,121
animtype = back                  ;当てた時の相手のポーズ（light/midium/hard/back）から選択
guardflag = M                    ;ガードできる状態（ｍaは全ての状態でガード可能）
hitflag = MAF                    ;当てる事のできる条件
priority = 4, Hit                ;攻撃の優先権（0弱い　4通常　7強い
pausetime = 12, 11               ;攻撃が当たった時の硬直時間（左が自分、右が相手）
sparkno = s4002
guard.sparkno = s4011            ;ヒットエフェクトのスプライトステート（無ければ0）
sparkxy = -15, -70               ;ヒットエフェクトを表示する場所（相手の座標で）
hitsound = s1, 16                 ;ヒットした時の音（ｓ*,*にすると自分の音を使う）
guardsound = s121, 0             ;ガードした時の音（同上）
ground.type = high               ;相手のくらった場所（High：頭、体, Low：足, Trip：足払い）
ground.slidetime = 18            ;相手が後にすべる時間
ground.hittime  = 20             ;コンボが繋がる時間（高くしすぎない事）
ground.velocity = -5,-5.5        ;地上で攻撃をくらった場合の相手の移動状況（ｘとｙで小数点可）
air.type = High                  ;空中で相手がくらった場所（上と同じ）
air.velocity = -5,-5.5           ;空中で攻撃をくらった場合の相手の移動状況（ｘとｙで小数点可）
fall = 1
fall.recover = 0

[State 290, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; GCふっ飛ばし攻撃
[Statedef 291]
type    = S                      
movetype= A                      
physics = S                      
juggle  = 12                      
;Commonly-used controllers:
poweradd = -1000
velset = 0,0                     ;このステートが始まった時に移動するか（0,0で動かない）
ctrl = 0                         ;このステート中に他のコマンドを受け付けるか(1で受け付ける)
anim = 291                       ;このステートで表示するスプライトステート番号(0で変化無し)
sprpriority = 2                  ;表示した絵の重なり具合(2一番前　0通常　-1奥)

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
trigger1 = random<500
value = 290, 0
channel = 0
volume = 100

[State 640, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 4
value = 300, 1

[State 290, nothitby]
type = NotHitBy
trigger1 = 1
value = SCA

[State 291, 4];フラッシュ
type = EnvColor
trigger1 = movehit = 1
time = 2
value = 255,255,255
under = 1
persistent = 0
ignorehitpause = 1

[State 290, 1]
type = HitDef
trigger1 = time = 0
attr = S, NA                     ;立ち状態で、通常の攻撃(ｓは立ち、ｎは通常、aは攻撃を表す)
damage = 41, 0                   ;ダメージ量（左が当たった時、右はガードした時）
getpower = 0, 0
animtype = back                  ;当てた時の相手のポーズ（light/midium/hard/back）から選択
guardflag = M                    ;ガードできる状態（ｍaは全ての状態でガード可能）
hitflag = MAF                    ;当てる事のできる条件
priority = 4, Hit                ;攻撃の優先権（0弱い　4通常　7強い
pausetime = 12, 11               ;攻撃が当たった時の硬直時間（左が自分、右が相手）
sparkno = s4002
guard.sparkno = s4011            ;ヒットエフェクトのスプライトステート（無ければ0）
sparkxy = -15, -70               ;ヒットエフェクトを表示する場所（相手の座標で）
hitsound = s1, 16                 ;ヒットした時の音（ｓ*,*にすると自分の音を使う）
guardsound = s121, 0             ;ガードした時の音（同上）
ground.type = high               ;相手のくらった場所（High：頭、体, Low：足, Trip：足払い）
ground.slidetime = 18            ;相手が後にすべる時間
ground.hittime  = 20             ;コンボが繋がる時間（高くしすぎない事）
ground.velocity = -5,-5.5        ;地上で攻撃をくらった場合の相手の移動状況（ｘとｙで小数点可）
air.type = High                  ;空中で相手がくらった場所（上と同じ）
air.velocity = -5,-5.5           ;空中で攻撃をくらった場合の相手の移動状況（ｘとｙで小数点可）
fall = 1
fall.recover = 0

[State 290, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;===========================================================================
;---------------------------------------------------------------------------
;しゃがみ弱パンチ
[Statedef 400]
type    = C
movetype= A
physics = C
juggle  = 8
poweradd= 0
velset = 0,0
ctrl = 0
anim = 400
sprpriority = 2

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
trigger1 = random<500
value = 200, 0
channel = 0
volume = 100

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 300, 0

[State 400, ヒット定義]
type = HitDef
trigger1 = animelem = 3
attr = C, NA ;しゃがみ通常打撃（Crouching, Normal Attack）
damage    = 25, 0
getpower = 45,45
priority  = 3
animtype  = Light
hitflag = MAF
guardflag = M
pausetime = 10,9
sparkno = s4000
guard.sparkno = s4010
sparkxy = -15,-35
hitsound   = s1,6
guardsound = s120,0
ground.type = Low
ground.slidetime = 8
ground.hittime  = 11
ground.velocity = -4.5
air.velocity = -1.5,-3

[State 400, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 11 ;しゃがむステートへ（コモンステート）
ctrl = 1

;---------------------------------------------------------------------------
;しゃがみ強パンチ
[Statedef 410]
type    = C
movetype= A
physics = C
juggle  = 8
poweradd= 0
velset = 0,0
ctrl = 0
anim = 410
sprpriority = 2

[State 400, 音を鳴らす]
type = PlaySnd
trigger1 = time = 1
trigger1 = random<500
value = 210, 0
channel = 0
volume = 100

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 2
value = 300, 1

[State 410, 一発目のヒット定義]
type = HitDef
trigger1 = animelem = 3
attr = C, NA
damage    = 99, 0
getpower = 90,90
priority  = 4
animtype  = hard
hitflag = MAF
guardflag = M
pausetime = 12,11
sparkno = s4001
guard.sparkno = s4011
sparkxy = -20,-55+floor(p2bodydist y)
hitsound   = s1,9
guardsound = s120,0
ground.type = high
ground.slidetime = 19
ground.hittime  = 20
ground.velocity = -8
air.hittime  = 25
air.velocity = -3,-4
air.fall = 1
;fall.recovertime = 35

[State 410, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;しゃがみ弱キック
[Statedef 430]
type    = C
movetype= A
physics = C
juggle  = 8
poweradd= 0
velset = 0,0
ctrl = 0
anim = 430
sprpriority = 2

[State 400, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
trigger1 = random<500
value = 200, 0
channel = 0
volume = 100

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 300, 0

[State 430, ヒット定義]
type = HitDef
trigger1 = animelem = 2
attr = C, NA
damage    = 33, 0
getpower = 45,45
priority  = 3
animtype  = Light
hitflag = MAF
guardflag = L
pausetime = 10,9
sparkno = s4000
guard.sparkno = s4010
sparkxy = -20,-8
hitsound   = s1,0
guardsound = s120,0
ground.type = Low
ground.slidetime = 8
ground.hittime  = 10
ground.velocity = -4.5
air.velocity = -2,-3

[State 430, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;しゃがみ強キック（足払い攻撃）
[Statedef 440]
type    = C
movetype= A
physics = C
juggle  = 8
poweradd= 0
velset = 0,0
ctrl = 0
anim = 440
sprpriority = 2

[State 400, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 3
trigger1 = random<500
value = 210, 0
channel = 0
volume = 100

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 2
value = 300, 1

[State 440, ヒット定義]
type = HitDef
trigger1 = animelem = 4
attr = C, NA
damage    = 107, 0
getpower  = 90,90
priority  = 4
hitflag = MAF
guardflag = L
pausetime = 11,10
sparkno = s4001
guard.sparkno = s4011
sparkxy = -20,-25
hitsound   = s1,3
guardsound = s120,0
ground.type = Trip          ;この攻撃を食らうと相手は吹っ飛べば「コケるアニメ」になる
ground.slidetime = 18
ground.hittime  = 19
ground.velocity = -3,-5
air.velocity = -4,-4
guard.velocity = -7
fall = 1
fall.recover = 0

[State 440, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;===========================================================================
;---------------------------------------------------------------------------
;ジャンプ弱パンチ
[Statedef 600]
type    = A
movetype= A
physics = A
juggle  = 8
poweradd= 0
ctrl = 0
anim = 600
sprpriority = 2

[State 600, 音を鳴らす]
type = PlaySnd
trigger1 = time = 1
value = 200, 0
channel = 0
volume = 100

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 300, 0

[State 600, ヒット定義]
type = HitDef
trigger1 = animelem = 2
attr = A, NA            ;空中通常打撃（Air, Normal Attack）
damage    = 41, 0
getpower = 45,45
guardflag = HA          ;相手はしゃがみガードが出来ない
priority = 3,hit
pausetime = 10,9
sparkno = s4000
guard.sparkno = s4010
sparkxy = -10,-58
hitsound   = s1,6
guardsound = s120,0
animtype = light
ground.type = high
ground.slidetime = 9
ground.hittime  = 9
ground.velocity = -4
air.velocity = -2.3,-3

;---------------------------------------------------------------------------
;ジャンプ強パンチ
[Statedef 610]
type    = A
movetype= A
physics = A
juggle  = 8
poweradd= 0
ctrl = 0
anim = 610
sprpriority = 2

[State 600, 音を鳴らす]
type = PlaySnd
trigger1 = time = 1
trigger1 = random<500
value = 210, 0
channel = 0
volume = 100

[State 640, 音を鳴らす]
type = PlaySnd
trigger1 = time = 2
value = 300, 1

[State 610, ヒット定義]
type = HitDef
trigger1 = animelem = 3
attr = A, NA
damage = 74, 0
getpower = 60,60
guardflag = HA
priority = 4,hit
pausetime = 12,11
sparkno = s4001
guard.sparkno = s4011
sparkxy = -13,-55
hitsound   = s1,4
guardsound = s120,0
animtype = hard
ground.type = high
ground.slidetime = 17
ground.hittime  = 18
ground.velocity = -2
air.velocity = -3,-4

[State 610, ヒット定義]
type = HitDef
trigger1 = animelem = 7
attr = A, NA
damage = 33, 0
getpower = 30,30
guardflag = HA
priority = 4,hit
pausetime = 12,11
sparkno = s4001
guard.sparkno = s4011
sparkxy = -13,-55
hitsound   = s1,5
guardsound = s120,0
animtype = hard
ground.type = high
ground.slidetime = 17
ground.hittime  = 18
ground.velocity = -5
air.velocity = -3,-4

;---------------------------------------------------------------------------
;ジャンプ弱キック
[Statedef 630]
type    = A
movetype= A
physics = A
juggle  = 8
poweradd= 0
ctrl = 0
anim = 630
sprpriority = 2

[State 600, 音を鳴らす]
type = PlaySnd
trigger1 = time = 1
trigger1 = random<500
value = 200, 0
channel = 0
volume = 100

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
value = 300, 0

[State 630, ヒット定義]
type = HitDef
trigger1 = animelem = 3
attr = A, NA
damage = 41, 0
getpower = 45,45
guardflag = HA
priority = 3,hit
pausetime = 10,9
sparkno = s4000
guard.sparkno = s4010
sparkxy = -5,-35
hitsound   = s1,1
guardsound = s120,0
animtype = light
ground.type = high
ground.slidetime = 9
ground.hittime  = 10
ground.velocity = -4
air.velocity = -2,-3

;---------------------------------------------------------------------------
;ジャンプ強キック
[Statedef 640]
type    = A
movetype= A
physics = A
juggle  = 8
poweradd= 0
ctrl = 0
anim = 640
sprpriority = 2

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
trigger1 = random<500
value = 210, 0
channel = 0
volume = 100

[State 640, 音を鳴らす]
type = PlaySnd
trigger1 = time = 4
value = 300, 1

[State 640, ヒット定義]
type = HitDef
trigger1 = animelem = 3
attr = A, NA
damage    = 91, 0
getpower = 90,90
guardflag = HA
priority = 4, Hit
pausetime = 12,11
sparkno = s4001
guard.sparkno = s4011
sparkxy = -10,-50
hitsound   = s1,3
guardsound = s120,0
animtype = hard
ground.type = High
ground.slidetime = 17
ground.hittime  = 18
ground.velocity = -5.5
air.velocity = -5,-5

;---------------------------------------------------------------------------
;空中ふっとばし
[Statedef 690]
type    = A
movetype= A
physics = A
juggle  = 8
poweradd= 0
ctrl = 0
anim = 690
sprpriority = 2

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 1
trigger1 = random<500
value = 290, 0
channel = 0
volume = 100

[State 690, 音を鳴らす]
type = PlaySnd
trigger1 = animelemtime(2) = 0
value = 300, 1

[State 690, ヒット定義]
type = HitDef
trigger1 = animelem = 3
attr = A, NA
damage    = 115, 0
getpower = 121,121
guardflag = HA
priority = 4, Hit
pausetime = 12,11
sparkno = s4002
guard.sparkno = s4011
sparkxy = -13,-60
hitsound   = s1,16
guardsound = s120,0
animtype = back
ground.type = high
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -5,-6.5         ;地上で攻撃をくらった場合の相手の移動状況（ｘとｙで小数点可）
air.type = High                   ;空中で相手がくらった場所（上と同じ）
air.velocity = -5,-5              ;空中で攻撃をくらった場合の相手の移動状況（ｘとｙで小数点可）
fall = 1
fall.recover = 0
id = 690

;===========================================================================
;回避
;===========================================================================
;回避前
[Statedef 700]
type = S      ;S/C/A/L  Ｓ：立ち/Ｃ：屈み/Ａ：空中/Ｌ：ダウン
movetype = I  ;Ｉ：通常状態/Ａ：攻撃状態/Ｈ：ダメージをくらってる状態
physics = N   ;S/C/A/N  Ｓ：立ち/Ｃ：屈み/Ａ：空中/Ｎ：無し
poweradd= 0
ctrl = 0
anim = 700
velset = 0,0
sprpriority = -2

[State 700, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 2
value = 700, 0
channel = 0
volume = 100

[State 700, 無敵]
type = HitBy
trigger1 = AnimElemtime(1) >= 0 && AnimElemtime(9) < 0
value = SC, NT, ST, HT

[State 700, 移動量];移動
type = VelSet
trigger1 = anim = 700
trigger1 = AnimElemtime(2) >= 0 && AnimElemtime(8) < 0
x = 4.4

[State 700, 移動量];停止
type = VelSet
trigger1 = anim = 700
trigger1 = AnimElem = 9
x = 0

[State 700, PlayerPush];回避中は相手を押さない
type = PlayerPush
trigger1 = animelemtime(1)>=0
value = 0

[State 291, 4];
type = PowerAdd
triggerall = Time = 0
trigger1 = prevstateno = 150 || prevstateno = 152
trigger2 = prevstateno = [200,499]
;trigger2 = movecontact
value = -1000

[State 2100, 残像];GC
type = AfterImage
triggerall = AnimElem = 2
trigger1 = prevstateno = 150 || prevstateno = 152
trigger2 = prevstateno = [200,499]
time = 30
length = 6      ;残像の表示時間
timegap = 2     ;時間差
framegap = 2    ;フレーム差
palbright = 1, 1, 1
palcontrast = 128, 128, 128
paladd = 0, 0, 0
palmul = 1, 1, 1
trans = Add1

[State 291, 4];フラッシュ
type = EnvColor
trigger1 = time = 0
trigger1 = prevstateno = [200,499]
time = 2
value = 255,255,255
under = 1
persistent = 0
ignorehitpause = 1

[State 700]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;回避後ろ
[Statedef 701]
type = S      ;S/C/A/L  Ｓ：立ち/Ｃ：屈み/Ａ：空中/Ｌ：ダウン
movetype = I  ;Ｉ：通常状態/Ａ：攻撃状態/Ｈ：ダメージをくらってる状態
physics = N   ;S/C/A/N  Ｓ：立ち/Ｃ：屈み/Ａ：空中/Ｎ：無し
poweradd= 0
ctrl = 0
anim = 701
velset = 0,0
sprpriority = -2

[State 700, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 2
value = 700, 1
channel = 0
volume = 100

[State 701, 無敵]
type = HitBy
trigger1 = AnimElemtime(1) >= 0 && AnimElemtime(10) < 0
value = SC, NT, ST, HT

[State 701, 移動量];移動
type = VelSet
trigger1 = anim = 701
trigger1 = AnimElemtime(2) >= 0 && AnimElemtime(9) < 0
x = -4.4

[State 701, 移動量];停止
type = VelSet
trigger1 = anim = 701
trigger1 = AnimElem = 9
x = 0

[State 701, PlayerPush];回避中は相手を押さない
type = PlayerPush
trigger1 = animelemtime(1)>=0
value = 0

[State 291, 4];
type = PowerAdd
trigger1 = prevstateno = 150 || prevstateno = 152
trigger1 = Time = 0
value = -1000

[State 2100, 残像];GC
type = AfterImage
trigger1 = AnimElem = 2
trigger1 = prevstateno = 150 || prevstateno = 152
time = 29
length = 6      ;残像の表示時間
timegap = 2     ;時間差
framegap = 2    ;フレーム差
palbright = 1, 1, 1
palcontrast = 128, 128, 128
paladd = 0, 0, 0
palmul = 1, 1, 1
trans = Add1

[State 701]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;===========================================================================
; 投げ技
;===========================================================================
;---------------------------------------------------------------------------
;P投げ
;強飲酒
[Statedef 800]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 800
sprpriority = 2

[State 800, ヒット定義（投げ用）]
type = HitDef
trigger1 = Time = 0
attr = S, NT             ;立ち通常投げ（Standing, Normal Throw）
hitflag = M-             ;マイナスが付加されてるので相手が食らい中の時は掴めない
priority = 1, Miss
sparkxy = -15,-80
sparkno = -1             ;-をつければスパークエフェクトは無い
p1sprpriority = 1        ;攻撃が当たった時に自分の画像表示優先度を1にします
p2sprpriority = 0        ;攻撃が当たった時に相手の画像表示優先度を0にします
p1facing = 1
p2facing = 1
p1stateno = 801
p2stateno = 810
guard.dist = 0           ;相手のガード態勢に入る距離を０にしてるので、ガード不可
fall = 1
id = 800

[State 800, ステート変更]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;強飲酒（成功）
[Statedef 801]
type    = A
movetype= A
physics = N
anim = 801
juggle  = 8
sprpriority = 1

[State 801, 音を鳴らす];声
type = PlaySnd
trigger1 = AnimElem = 3
value = 801, 1
channel = 0
volume = 100

[State 801, 音を鳴らす];ゴクゴク
type = PlaySnd
trigger1 = AnimElem = 3
value = 801, 2

[State 801, 音を鳴らす];掴み用
type = PlaySnd
trigger1 = AnimElem = 1
value = 800, 1

[state 1000, TargetState];再ロック
type = TargetState
trigger1 = time = 0
trigger1 = NumTarget(800)
trigger1 = Target(800),stateno!=810
value = 810

[State 801, PosSet]
type = PosSet
trigger1 = AnimElemTime(2)>=0
trigger1 = AnimElemTime(3)<0
x = Target(800),Pos x; + Target(800),Const(size.head.pos.x)
y = Target(800),Const(size.head.pos.y) + 65

[State 801, PosSet]
type = PosSet
trigger1 = AnimElemTime(3)>=0
trigger1 = AnimElemTime(4)<0
trigger1 = NumTarget(800)
trigger1 = Target(800),Const(size.head.pos.y) + 65 < 0
x = Target(800),Pos x; + Target(800),Const(size.head.pos.x)
y = Target(800),Const(size.head.pos.y) + 65

[State 801, Explod];掴みスパーク
type = Explod
trigger1 = animelem = 1
anim = 4020
ID = 4020
pos = 33, -49
postype = p1
facing = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 801, Explod];飛沫エフェクト
type = Explod
trigger1 = AnimElem = 5
trigger2 = AnimElem = 7
trigger3 = AnimElem = 9
trigger4 = AnimElem = 11
anim = 804
ID = 804
pos = 3, -44
postype = p1
facing = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 801, 物理的なキャラの幅]
type = Width
trigger1 = time = 0
edge = 50,0   ;画面端を押す幅を変える（オレンジの線）

[State 801, 掴んだ相手の位置];TargetBindで相手を一時的に拘束
type = TargetBind
trigger1 = AnimElemTime(2) < 0
pos = 35, 0

[State 801, SprPriority]
Type = SprPriority
Trigger1 = animelem = 3
Value = 2

[State 801, ダメージ]
type = TargetLifeAdd
trigger1 = AnimElem = 5
trigger2 = AnimElem = 7
trigger3 = AnimElem = 9
trigger4 = AnimElem = 11
absolute = 1        ;攻撃／防御無視
value = -25

[State 801, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 802

;---------------------------------------------------------------------------
;強飲酒（成功）
[Statedef 802]
type    = A
movetype= A
physics = N
anim = 802
juggle  = 8
velset = -3,-5
sprpriority = 2

[State 801, veladd]
type = veladd
trigger1 = time>=0
y = .35

[State 801, ステート変更]
type = ChangeState
trigger1 = Pos Y >=0 && vel y > 0
value = 52

;---------------------------------------------------------------------------
;強飲酒
;相手投げられ
[Statedef 810]
type    = A
movetype= H
physics = N
velset = 0,0

[State 810, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 810

[State 810, vel]
type = Velset
trigger1 = animelemtime(16)=0
y = -4

[State 810, vel]
type = VelAdd
trigger1 = animelemtime(16)>=0
y = .4

[State 820, 1]
type = SelfState
Trigger1 = Pos Y >= 0 && Vel Y > 0
trigger1 = animelemtime(20)>=0
value = 5100

;---------------------------------------------------------------------------
;K投げ
;逆脚投げ
[Statedef 803]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 800
sprpriority = 2

[State 800, ヒット定義（投げ用）]
type = HitDef
trigger1 = Time = 0
attr = S, NT             ;立ち通常投げ（Standing, Normal Throw）
hitflag = M-             ;マイナスが付加されてるので相手が食らい中の時は掴めない
priority = 1, Miss
sparkxy = -15,-80
sparkno = -1             ;-をつければスパークエフェクトは無い
p1sprpriority = 1        ;攻撃が当たった時に自分の画像表示優先度を1にします
p2sprpriority = 0        ;攻撃が当たった時に相手の画像表示優先度を0にします
p1facing = 1
p2facing = 1
p1stateno = 804
p2stateno = 820
guard.dist = 0           ;相手のガード態勢に入る距離を０にしてるので、ガード不可
fall = 1
id = 803

[State 800, ステート変更]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;逆脚投げ（成功）
[Statedef 804]
type    = A
movetype= A
physics = N
anim = 803
juggle  = 8
sprpriority = 2

[State 801, 音を鳴らす];声
type = PlaySnd
trigger1 = AnimElem = 4
value = 801, 0
channel = 0
volume = 100

[State 801, 音を鳴らす];掴み用
type = PlaySnd
trigger1 = AnimElem = 1
value = 800, 1

[state 1000, TargetState];再ロック
type = TargetState
trigger1 = time = 0
trigger1 = NumTarget(803)
trigger1 = Target(803),stateno!=820
value = 820

[State 801, Explod];掴みスパーク
type = Explod
trigger1 = animelem = 3
anim = 4020
ID = 4020
pos = 57, -27
postype = p1
facing = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 801, 物理的なキャラの幅]
type = Width
trigger1 = time = 0
edge = 50,50   ;画面端を押す幅を変える（オレンジの線）

[State 801, 掴んだ相手の位置];TargetBindで相手を一時的に拘束
type = TargetBind
trigger1 = AnimElemTime(4) < 0
pos = 47, 0

[State 801, 掴んだ相手の位置];TargetBindで相手を一時的に拘束
type = TargetBind
trigger1 = AnimElemTime(4) >=0
trigger1 = AnimElemTime(5) < 0
pos = 23, -57

[State 801, turn]
type = turn
trigger1 = animtime = 0

[State 801, ダメージ]
type = TargetLifeAdd
trigger1 = AnimElem = 5
absolute = 1        ;攻撃／防御無視
value = -100

[State 801, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;逆脚投げ
;相手投げられ
[Statedef 820]
type    = A
movetype= H
physics = N
velset = 0,0

[State 810, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 820

[State 810, posadd]
type = posadd
trigger1 = animelemtime(4)=0
x = 25
y = -10

[State 810, vel]
type = Velset
trigger1 = animelemtime(4)=0
x = 6
y = -5

[State 810, vel]
type = VelAdd
trigger1 = animelemtime(4)>0
y = .5

[State 820, 1]
type = SelfState
Trigger1 = Pos Y >= 0 && Vel Y > 0
trigger1 = animelemtime(7)>=0
value = 5100

;===========================================================================
; 必殺技
;===========================================================================
;---------------------------------------------------------------------------
;瓢箪撃弱
[Statedef 1000]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 61
velset = 0,0
anim = 1000
ctrl = 0
sprpriority = 2

[State 1000, 音を鳴らす];声
type = PlaySnd
trigger1 = animelem = 3
value = 1000, 0
channel = 0
volume = 100

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 5
value = 1000, 1

[state 1000, velset]
type = VelSet
trigger1 = enemynear,backedgebodydist <= 5
;trigger1 = p2bodydist x <= 75
trigger1 = NumHelper(11000)
trigger1 = Helper(11000),movecontact
x = -6
persistent = 0

;--------------------------------Helper
[State 1000, Helper]
type = helper
trigger1 = NumHelper(11000)=0
trigger1 = animelem = 5
id = 11000
persistent = 0
name = "Hyotan"
pos = 0,0
postype = p1
stateno = 11000
helpertype = normal
keyctrl = 0
ownpal = 1

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;瓢箪撃強
[Statedef 1010]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 61
velset = 0,0
anim = 1010
ctrl = 0
sprpriority = 2

[State 1000, 音を鳴らす];声
type = PlaySnd
trigger1 = animelem = 3
value = 1000, 0
channel = 0
volume = 100

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 5
value = 1000, 1

[state 1000, velset]
type = VelSet
trigger1 = animelemtime(7)>=0
trigger1 = animelemtime(11)<0
x = -5

[state 1000, velset]
type = VelSet
trigger1 = animelem = 11
x = 0

[State 1000, 0]
Type = PlayerPush
trigger1 = animelemtime(7)>=0
trigger1 = animelemtime(11)<0
Value = 0
;--------------------------------Helper
[State 1000, Helper]
type = helper
trigger1 = NumHelper(11010)=0
trigger1 = animelem = 5
id = 11000
persistent = 0
name = "Hyotan"
pos = 0,0
postype = p1
stateno = 11010
helpertype = normal
keyctrl = 0
ownpal = 1

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;瓢箪撃弱
;(HELPER)瓢箪
[Statedef 11000]
type    = S
movetype= A
physics = N
juggle  = 8
poweradd= 0
velset = 0,0
ctrl = 0
anim = 11000
sprpriority = 2

[state 11000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1000, BindToRoot]
Type = BindToRoot
Trigger1 = 1
Time = 1
Facing = 0
Pos = 0,0

[State 1000, ヒット定義]
type = HitDef
trigger1 = time = 0
attr = S, SP
animtype  = hard
damage    = floor(99*root,fvar(3)), 10
getpower  = 61, 61
priority  = 5, hit
hitflag = MAFP
guardflag = MA
pausetime = 0,10
guard.pausetime = 0,10
sparkxy = -15,-58
sparkno = s4002
guard.sparkno = s4012
hitsound   = s1,21
guardsound = s121,0
ground.type = high
ground.slidetime = 18
ground.hittime  = 20
ground.velocity = -8
air.velocity = -2.5,-4
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .4
air.fall = 1
fall.recover = 0
id = 1000

[state 11000, destroyselef]
type = destroyself
trigger1 = animtime = 0
trigger2 = root,movetype = H
trigger3 = root,stateno != 1000

;---------------------------------------------------------------------------
;瓢箪撃強
;(HELPER)瓢箪
[Statedef 11010]
type    = S
movetype= A
physics = N
juggle  = 8
poweradd= 0
velset = 0,0
ctrl = 0
anim = 11010
sprpriority = 2

[state 11000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1000, BindToRoot]
Type = BindToRoot
Trigger1 = 1
Time = 1
Facing = 0
Pos = 0,0

[State 1000, ヒット定義]
type = HitDef
trigger1 = time = 0
attr = S, SP
animtype  = back
damage    = floor(99*root,fvar(3)), 10
getpower  = 61, 61
priority  = 5, hit
hitflag = MAFP
guardflag = L
pausetime = 0,10
guard.pausetime = 0,10
sparkxy = -15,-26
sparkno = s4002
guard.sparkno = s4012
hitsound   = s1,21
guardsound = s121,0
ground.type = low
ground.slidetime = 18
ground.hittime  = 20
ground.velocity = -3,-5
air.velocity = -2.5,-4
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .4
fall = 1
fall.recover = 0
id = 1000

[state 11000, destroyselef]
type = destroyself
trigger1 = animtime = 0
trigger2 = root,movetype = H
trigger3 = root,stateno != 1010

;---------------------------------------------------------------------------
;転地酔八仙撃
[Statedef 1100]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 61
velset = 0,0
anim = 1100
ctrl = 0
sprpriority = 2

[State 1000, 音を鳴らす];声
type = PlaySnd
trigger1 = animelem = 3
value = 1000, 0
channel = 0
volume = 100

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 5
value = 1000, 1
;--------------------------------Helper
[State 1000, Helper]
type = helper
trigger1 = NumHelper(11100)=0
trigger1 = animelem = 4
id = 11100
persistent = 0
name = "Hyotan"
pos = 0,0
postype = p1
stateno = 11100
helpertype = normal
keyctrl = 0
ownpal = 1

[State 1000, VarSet];スロー処理
type = VarSet
trigger1 = NumHelper(11100)
trigger1 = Helper(11100),movehit
var(17) = 20
persistent = 0
ignorehitpause = 1

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
trigger2 = NumHelper(11101)
trigger2 = Helper(11101),stateno=11102
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;転地酔八仙撃
;(子HELPER)瓢箪
[Statedef 11100]
type    = S
movetype= A
physics = N
juggle  = 8
poweradd= 0
velset = 0,0
ctrl = 0
anim = 11100
sprpriority = 3

[state 11000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2100, 残像]
type = AfterImage
trigger1 = AnimElem = 2
time = 29
length = 6      ;残像の表示時間
timegap = 2     ;時間差
framegap = 1    ;フレーム差
palbright = 1, 1, 1
palcontrast = 150, 150, 150
paladd = 0, 0, 0
palmul = 1, 1, 1
trans = Add1

;--------------------------------Helper
[State 1000, Helper];反射用Helper
type = helper
trigger1 = NumHelper(11101)=0
trigger1 = time = 0
id = 11101
persistent = 0
name = "Reflector"
pos = 0,0
postype = p1
stateno = 11101
helpertype = normal
keyctrl = 0
ownpal = 1

[State 1000, ヒット定義]
type = HitDef
trigger1 = time = 0
attr = S, SP
animtype  = back
damage    = floor(99*root,fvar(3)), 10
getpower  = 61, 61
priority  = 5, hit
hitflag = MAF
guardflag = MA
pausetime = 0,10
guard.pausetime = 0,10
sparkxy = -15,-35+floor(p2bodydist y)
sparkno = s4002
guard.sparkno = s4012
hitsound   = s1,10
guardsound = s121,0
ground.type = low
ground.slidetime = 18
ground.hittime  = 20
ground.velocity = -3,-8
air.velocity = -2.5,-8
guard.velocity = -9
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .4
fall = 1
fall.recover = 0
id = 1100
nochainid = 1100

[state 11000, destroyselef]
type = destroyself
trigger1 = animtime = 0
trigger2 = root,movetype = H
trigger3 = root,stateno != 1100

;---------------------------------------------------------------------------
;転地酔八仙撃
;(孫HELPER)リフレクター
[Statedef 11101]
type    = S
movetype= A
physics = N
juggle  = 8
poweradd= 0
velset = 0,0
ctrl = 0
anim = 11101
sprpriority = 6

[State 11101, PosSet]
type = PosAdd
trigger1 = animelem = 2
x = 11
y = -44

[State 11101, PosSet]
type = PosAdd
trigger1 = animelem = 3
x = 32
y = -2

[State 11101, PosSet]
type = PosAdd
trigger1 = animelem = 4
x = 18
y = -32

[State 11101, PosSet]
type = PosAdd
trigger1 = animelem = 5
x = -13
y = -33

[State 1000, 0]
Type = AssertSpecial
Trigger1 = 1
Flag = NoShadow
Flag2 = Invisible

[State 11101, NotHitBy];無敵
type = NotHitBy
trigger1 = Time >= 0
value = SCA

[State 11101, HitBy];飛び道具のみ接触許可
type = HitBy
trigger1 = Time >= 0
value = SCA, NP, SP, HP, AP

[State 11101, HitOverRide];飛び道具を受けた際の演出
Type = HitOverRide
trigger1 = 1
time = -1
attr = SCA, NP, SP ,HP    ;通常及び必殺技
slot = 0
stateno = 11102

[State 11101, HitOverRide];飛び道具を受けた際の演出
Type = null;HitOverRide
trigger1 = 1
time = -1
attr = SCA, HP        ;超必
slot = 1
stateno = 11104

[State 11101, DestroySelf];消滅
type = DestroySelf
trigger1 = animtime = 0
trigger2 = root,movetype = H
trigger3 = root,stateno != 1100

;---------------------------------------------------------------------------
;転地酔八仙撃
;(孫HELPER)反射後通常or必殺技用
[Statedef 11102]
type    = A
movetype= A
physics = N
juggle  = 8
poweradd= 0
velset = 5,0
ctrl = 0
anim = 11102
sprpriority = 3

[State 11101, PosAdd]
type = PosAdd
trigger1 = time = 0
x = 40

[State 11101, VarSet];ダメージ記憶
type = VarSet
trigger1 = var(0)=0
var(0) = GetHitVar(damage)

[state 2901,1]
type = nothitby
trigger1 = 1
value = SCA
time = -1

[state 2901,1]
type = hitby
trigger1 = 1
value = SCA,NP,SP,HP
time = -1

[state 2901,1]
type = hitoverride
trigger1 = 1
attr = SCA,NP,SP,HP
stateno = 11103

[State 20001, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 1000, ヒット定義]
type = HitDef
trigger1 = time = 0
attr = S, SP
animtype  = back
damage    = var(0), 10
getpower  = 0, 0
priority  = 5, hit
hitflag = MAF
guardflag = MA
pausetime = 0,10
guard.pausetime = 0,10
sparkxy = -15, 0
sparkno = s4002
guard.sparkno = s4012
hitsound   = s1,9
guardsound = s121,0
ground.type = high
ground.slidetime = 19
ground.hittime  = 25
ground.velocity = -5
air.velocity = -3,-4
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .4
air.fall = 1
fall.recover = 0
p1stateno = 11103
id = 11102

[state 11000, destroyselef]
type = destroyself
trigger1 = FrontEdgeDist <= -10
trigger2 = root,movetype = H

[state 11000, changestate]
type = changestate
trigger1 = moveguarded
value = 11103

;[State 3100, デバック(変数確認)]
;Type = DisplayToClipBoard
;Trigger1 = 1
;Text = "var(0)=%d,Py=%.2f\n"
;Params = var(0),pos y
;IgnoreHitPause = 1

;---------------------------------------------------------------------------
;転地酔八仙撃
;(孫HELPER)反射後攻撃用の消滅
[Statedef 11103]
type    = A
movetype= A
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
ctrl = 0
anim = 11103

[State 20001, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[state 3130]
type = destroyself
trigger1 = animtime = 0

;---------------------------------------------------------------------------
;望月酔弱(始動)
[Statedef 1200]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 0
velset = 0,0
anim = 1200
ctrl = 0
sprpriority = 2

;----------------------------------
; どこでもキャンセル
; var(8)
;----------------------------------
;MAXゲージ消費
[State 1000, VarAdd]
type = VarAdd
triggerall = var(8) > 0
triggerall = Time = 0
trigger1 = prevstateno = 245 && animelemtime(6)<0
trigger2 = prevstateno = 430
trigger3 = prevstateno = 440
trigger4 = prevstateno = 1500 ;柳燐蓬莱
trigger5 = prevstateno = 1510
trigger6 = prevstateno = 1900 ;轟炎招来･改
var(8) = -150

[State 1000, PalFx];点滅
type = PalFx
triggerall = var(8) > 0
triggerall = Time < 5
trigger1 = prevstateno = 245 && animelemtime(6)<0
trigger2 = prevstateno = 430
trigger3 = prevstateno = 440
trigger4 = prevstateno = 1500 ;柳燐蓬莱
trigger5 = prevstateno = 1510
trigger6 = prevstateno = 1900 ;轟炎招来･改
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1
;----------------------------------
[State 1000, 音を鳴らす];声
type = PlaySnd
trigger1 = animelem = 2
value = 1200, 0
channel = 0
volume = 100
;----------------------------------
[State 1000, VarSet];望月酔時間
type = VarSet
trigger1 = time = 0
var(9) = 0

[state 1200, nothitby]
type = nothitby
trigger1 = animelemtime(3)<0
value = SCA

[State 1000, ステート変更];仰向けへ
type = ChangeState
trigger1 = AnimTime = 0
value = 1210

;---------------------------------------------------------------------------
;望月酔強(始動)
[Statedef 1201]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 0
velset = 0,0
anim = 1200
ctrl = 0
sprpriority = 2

;----------------------------------
; どこでもキャンセル
; var(8)
;----------------------------------
;MAXゲージ消費
[State 1000, VarAdd]
type = VarAdd
triggerall = var(8) > 0
triggerall = Time = 0
trigger1 = prevstateno = 245 && animelemtime(6)<0
trigger2 = prevstateno = 430
trigger3 = prevstateno = 440
trigger4 = prevstateno = 1500 ;柳燐蓬莱
trigger5 = prevstateno = 1510
trigger6 = prevstateno = 1900 ;轟炎招来･改
var(8) = -150

[State 1000, PalFx];点滅
type = PalFx
triggerall = var(8) > 0
triggerall = Time < 5
trigger1 = prevstateno = 245 && animelemtime(6)<0
trigger2 = prevstateno = 430
trigger3 = prevstateno = 440
trigger4 = prevstateno = 1500 ;柳燐蓬莱
trigger5 = prevstateno = 1510
trigger6 = prevstateno = 1900 ;轟炎招来･改
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1
;----------------------------------
[State 1000, 音を鳴らす];声
type = PlaySnd
trigger1 = animelem = 2
value = 1200, 0
channel = 0
volume = 100
;----------------------------------
[State 1000, VarSet];望月酔時間
type = VarSet
trigger1 = time = 0
var(9) = 0

[state 1200, nothitby]
type = nothitby
trigger1 = animelemtime(3)<0
value = SCA

[State 1000, ステート変更];仰向けへ
type = ChangeState
trigger1 = AnimTime = 0
value = 1210

;---------------------------------------------------------------------------
;望月酔(仰向け)
[Statedef 1210]
type    = S
movetype= I
physics = S
juggle  = 8
poweradd= 0
velset = 0,0
anim = 1210
ctrl = 0
sprpriority = 2

[State 1000, VarSet];望月酔時間
type = VarSet
trigger1 = time = 0
trigger1 = var(9) = 0
var(9) = 120+(PrevStateNo=1201)*120

[State 1000, ステート変更];前進
type = ChangeState
trigger1 = var(59) = 0
trigger1 = command = "holdfwd"
value = 1220

[State 1000, ステート変更];後退
type = ChangeState
trigger1 = var(59) = 0
trigger1 = command = "holdback"
value = 1221

[State 1000, ステート変更];仰穿腿
type = ChangeState
trigger1 = var(9) <= 0
value = 1300

;---------------------------------------------------------------------------
;望月酔(前進)
[Statedef 1220]
type    = S
movetype= I
physics = S
juggle  = 8
poweradd= 0
;velset = 0,0
anim = 1220
ctrl = 0
sprpriority = 2

[State 1000, VelSet];前進
type = VelSet
trigger1 = 1
;trigger1 = command = "holdfwd"
x = const(velocity.walk.fwd.x)

[State 1000, ステート変更];後退
type = ChangeState
trigger1 = var(59) = 0
trigger1 = command = "holdback"
value = 1221

[State 1000, ステート変更];望月酔
type = ChangeState
trigger1 = var(59) = 0
trigger1 = command != "holdfwd"
value = 1210

[State 1000, ステート変更];仰穿腿
type = ChangeState
trigger1 = var(9) <= 0
value = 1300

;---------------------------------------------------------------------------
;望月酔(後退)
[Statedef 1221]
type    = S
movetype= I
physics = S
juggle  = 8
poweradd= 0
;velset = 0,0
anim = 1220
ctrl = 0
sprpriority = 2

[State 1000, VelSet];前進
type = VelSet
trigger1 = 1
;trigger1 = command = "holdback"
x = const(velocity.walk.back.x)

[State 1000, ステート変更];後退
type = ChangeState
trigger1 = var(59) = 0
trigger1 = command = "holdfwd"
value = 1220

[State 1000, ステート変更];望月酔
type = ChangeState
trigger1 = var(59) = 0
trigger1 = command != "holdback"
value = 1210

[State 1000, ステート変更];仰穿腿
type = ChangeState
trigger1 = var(9) <= 0
value = 1300

;---------------------------------------------------------------------------
;Walk Stop AI
[State -1, AI]
Type = ChangeState
triggerall = (stateno=1220||stateno=1221)
trigger1 = var(59)<0
trigger2 = roundstate!=2
Value = 1210

[State -1, AI]
Type = ChangeState
triggerall = (stateno=1220||stateno=1221)&&(var(59)>0)
trigger1 = time > 12 || (time > 3 && var(59)>8)
trigger1 = P2bodydist x < 30
Trigger1 = stateno=1220
;trigger1 = fvar(38)!=1
trigger2 = time > 24 || (time > 3 && var(59)>8)
trigger2 = P2bodydist x >= 90
Trigger2 = stateno=1221
trigger3 = inguarddist
Trigger3 = stateno=1221 || Random < 60*(var(59)-1)||var(59) >8
trigger4 = roundstate != 2
Value = 1210
;---------------------------------------------------------------------------
;仰穿腿
[Statedef 1300]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 0
velset = 0,0
anim = 1300
ctrl = 0
sprpriority = 2

[State 1000, VarSet]
type = VarSet
trigger1 = time = 0
trigger1 = var(9) > 0
var(9) = 0

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelem = 3
attr = S, SA
animtype  = diagup
damage    = 124, 10
getpower  = 0, 0
priority  = 5, hit
guardflag = M
pausetime = 11,10
sparkxy = -15,-70
sparkno = s4002
guard.sparkno = s4012
hitsound = s1, 11
guardsound = s121,0
ground.type = High
ground.slidetime = 14
ground.hittime  = 20
ground.velocity = -4.5,-5.5
guard.slideTime = 16
guard.velocity = -10
air.velocity = -3.5,-6
yaccel = .4
fall = 1
fall.recover = 0
id = 1300

[State 1000, ステート変更]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;龍蛇反ほう
[Statedef 1400]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 0
velset = 0,0
anim = 1400
ctrl = 0
sprpriority = 2

[State 1000, 音を鳴らす];声
type = PlaySnd
trigger1 = animelem = 2
value = 1400, 0
channel = 0
volume = 100

[State 1000, VarSet]
type = VarSet
trigger1 = time = 0
trigger1 = var(9) > 0
var(9) = 0

[state 1200, NotHitBy]
type = NotHitBy
trigger1 = animelemtime(2)<0
value = SCA

[State 1000, ステート変更]
type = ChangeState
trigger1 = animtime = 0
value = 1401

;---------------------------------------------------------------------------
;龍蛇反ほう(空中)
[Statedef 1401]
type    = A
movetype= A
physics = N
juggle  = 8
poweradd= 0
velset = 6,-6
anim = 1401
ctrl = 0
sprpriority = 2

[State 1000, VelAdd]
type = VelAdd
trigger1 = time>=0
y = .45

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelem = 3
attr = A, SA
animtype  = hard
damage    = 74, 8
getpower  = 0, 0
priority  = 5, hit
guardflag = HA
pausetime = 11,10
sparkxy = -15,-70
sparkno = s4002
guard.sparkno = s4012
hitsound = s1, 16
guardsound = s121,0
ground.type = High
ground.slidetime = 14
ground.hittime  = 22
ground.velocity = -3.5
guard.slideTime = 16
guard.velocity = -10
air.velocity = -2.5,-6
yaccel = .4
air.fall = 1
fall.recover = 0
id = 1400

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelem = 7
attr = A, SA
animtype  = back
damage    = 51, 5
getpower  = 0, 0
priority  = 5, hit
guardflag = HA
pausetime = 11,10
sparkxy = -15,-70
sparkno = s4002
guard.sparkno = s4012
hitsound = s1, 16
guardsound = s121,0
ground.type = High
ground.slidetime = 14
ground.hittime  = 20
ground.velocity = -3.5,-3
guard.slideTime = 16
guard.velocity = -10
air.velocity = -2.5,-2
yaccel = .4
fall = 1
fall.recover = 0
id = 1400

[State 1000, ステート変更]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
trigger1 = animelemtime(7)>0
value = 1402

;---------------------------------------------------------------------------
;龍蛇反ほう(着地)
[Statedef 1402]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 0
velset = 0,0
anim = 1402
ctrl = 0
sprpriority = 2

[State 1000, 音を鳴らす];着地音
type = PlaySnd
trigger1 = time = 0
value = 1, 19

[State 1000, PosSet]
type = PosSet
trigger1 = time = 0
y = 0

[State 801, Explod];衝撃
type = Explod
trigger1 = time = 0
anim = 4052
ID = 4052
pos = 0, 0
postype = p1
facing = 1
sprpriority = 0
ownpal = 1
removeongethit = 1

[State 1412, EnvShake]
type = EnvShake
trigger1 = time = 0
time = 3
ampl = -8
freq = 95
phase = 95

[State 1000, ステート変更]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;鯉魚反ほう
[Statedef 1410]
type    = S
movetype= A
physics = N
juggle  = 0
poweradd= 61
velset = 0,0
anim = 1410
ctrl = 0
sprpriority = 2

[State 1000, 音を鳴らす];声
type = PlaySnd
trigger1 = animelem = 2
value = 1410, 0
channel = 0
volume = 100
;----------------------------------
;SCゲージ消費用
[State 1000, varset]
type = varset
trigger1 = time = 0
var(11) = 1

;SCゲージ消費用
[State 1000, varset]
type = varset
trigger1 = animtime = 0
var(11) = 0
;----------------------------------
[State 1000, VarSet]
type = VarSet
trigger1 = time = 0
trigger1 = var(9) > 0
var(9) = 0

[State 1000, PosAdd]
type = PosAdd
trigger1 = animelem = 4
x = -15

[State 1000, PosAdd]
type = PosAdd
trigger1 = animelem = 5
x = -5

[State 1000, PosAdd]
type = PosAdd
trigger1 = animelem = 6
x = -22

[State 1000, VelSet]
type = VelSet
trigger1 = animelemtime(3)>=0
trigger1 = animelemtime(8)<0
x = -3

[State 1000, VelAdd]
type = VelSet
trigger1 = animelem = 8
x = 0

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelem = 2
trigger2 = animelem = 3
attr = S, SA
animtype  = back
damage    = 66, 8
getpower  = 76, 76
priority  = 5, hit
guardflag = M
pausetime = 15,12
sparkxy = -15,-70
sparkno = s4002
guard.sparkno = s4012
hitsound = s1, 16
guardsound = s121,0
ground.type = High
ground.slidetime = 18
ground.hittime  = 21
ground.velocity = -6*var(18)
guard.slideTime = 16
guard.velocity = -10*var(18)
air.velocity = -1*var(18),-6
yaccel = .4
air.cornerpush.veloff = 0
air.fall = 1
fall.recover = 0
id = 1410

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelem = 4
attr = S, SA
animtype  = back
damage    = 66, 8
getpower  = 76, 76
priority  = 5, hit
guardflag = M
pausetime = 11,10
sparkxy = -15,-70
sparkno = s4002
guard.sparkno = s4012
hitsound = s1, 16
guardsound = s121,0
ground.type = High
ground.slidetime = 14
ground.hittime  = 20
ground.velocity = -4.5*var(18),-5
guard.slideTime = 16
guard.velocity = -10*var(18)
air.velocity = -2.5*var(18),-6
yaccel = .4
air.fall = 1
fall.recover = 0
id = 1411

[State 1000, ステート変更]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;弱柳燐蓬莱(始動)
[Statedef 1500]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 30
velset = 0,0
anim = 1500
ctrl = 0
sprpriority = 2

[State 1000, 音を鳴らす];声
type = PlaySnd
trigger1 = animelem = 4
value = 1500, 0
channel = 0
volume = 100
;----------------------------------
; どこでもキャンセル
; var(8)
;----------------------------------
;MAXゲージ消費
[State 1000, VarAdd]
type = VarAdd
triggerall = var(8) > 0
triggerall = Time = 0
trigger1 = prevstateno = 245 && animelemtime(6)<0
trigger2 = prevstateno = 430
trigger3 = prevstateno = 440
trigger4 = prevstateno = 1410 ;鯉魚反ほう
trigger5 = prevstateno = 1900 ;轟炎招来･改
var(8) = -150

[State 1000, PalFx];点滅
type = PalFx
triggerall = var(8) > 0
triggerall = Time < 5
trigger1 = prevstateno = 245 && animelemtime(6)<0
trigger2 = prevstateno = 430
trigger3 = prevstateno = 440
trigger4 = prevstateno = 1410 ;鯉魚反ほう
trigger5 = prevstateno = 1900 ;轟炎招来･改
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

;SCゲージ消費用
[State 1000, varset]
type = varset
trigger1 = time = 0
var(11) = 1
;----------------------------------
[State 1000, VarSet];酒ストック
type = VarAdd
trigger1 = time = 0
trigger1 = var(10)>0
var(10) = -1

[state 1200, nothitby]
type = nothitby
trigger1 = animelemtime(4)<0
value = SCA

[State 1000, PosAdd]
type = PosAdd
trigger1 = animelem = 4
x = 30

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelem = 4
attr = S, SA
animtype  = back
damage    = 74, 5
getpower  = 15, 15
priority  = 5, hit
guardflag = MA
pausetime = 11,10
sparkxy = -15,-70
sparkno = s4002
guard.sparkno = s4012
hitsound = s1, 3
guardsound = s121,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 25
ground.velocity = -2.5,-6
guard.slideTime = 16
guard.velocity = -11
air.velocity = -1.5,-8
yaccel = .4
fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
id = 1500
nochainid = 1501,1511

[State 1000, ステート変更]
type = ChangeState
trigger1 = animtime = 0
value = 1501

;---------------------------------------------------------------------------
;弱柳燐蓬莱(空中)
[Statedef 1501]
type    = A
movetype= A
physics = N
juggle  = 4
poweradd= 0
velset = 7.5,-6
anim = 1501
ctrl = 0
sprpriority = 2

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = 300, 8
ignorehitpause = 1

[State 1000, VelAdd]
type = VelAdd
trigger1 = time>=0
y = .4

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelem = 1
attr = A, SA
animtype  = back
damage    = 33, 4
getpower  = 15, 15
priority  = 5, hit
guardflag = MA
pausetime = 4,4
sparkxy = -15,-70
sparkno = s4002
guard.sparkno = s4012
hitsound = s1, 3
guardsound = s121,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 25
ground.velocity = -3.5,-7
guard.slideTime = 16
guard.velocity = -11
air.velocity = -1.5,-5
yaccel = .4
fall = 1
fall.recover = 0
;ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
id = 1501

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelem = 2
trigger2 = animelem = 3
;trigger3 = animelem = 4
attr = A, SA
animtype  = back
damage    = 8, 3
getpower  = 15, 15
priority  = 5, hit
guardflag = MA
pausetime = 4,4
sparkxy = -15,-70
sparkno = s4002
guard.sparkno = s4012
hitsound = s1, 3
guardsound = s121,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 25
ground.velocity = -3.5,-7
guard.slideTime = 16
guard.velocity = -11
air.velocity = -1.5,-5
yaccel = .4
fall = 1
fall.recover = 0
;ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
id = 1501

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelem = 4
attr = A, SA
animtype  = back
damage    = 8, 3
getpower  = 15, 15
priority  = 5, hit
guardflag = MA
pausetime = 4,4
sparkxy = -15,-70
sparkno = s4002
guard.sparkno = s4012
hitsound = s1, 3
guardsound = s121,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 25
ground.velocity = -3.5,-7
guard.slideTime = 16
guard.velocity = -11
air.velocity = -2.5,-9
yaccel = .55
fall = 1
fall.recover = 0
;ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
id = 1501

[State 1000, ステート変更]
type = ChangeState
trigger1 = animelemtime(5)>0
trigger1 = pos y >= 0 && vel y > 0
value = 1502

;---------------------------------------------------------------------------
;弱柳燐蓬莱(着地)
[Statedef 1502]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
velset = 0,0
anim = 1502
ctrl = 0
sprpriority = 2

;----------------------------------
;SCゲージ消費用
[State 1000, varset]
type = varset
trigger1 = animtime = 0
var(11) = 0
;----------------------------------
[State 1000, PosSet]
type = PosSet
trigger1 = time = 0
y = 0

[State 1000, ステート変更]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;強柳燐蓬莱(始動)
[Statedef 1510]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 30
velset = 0,0
anim = 1510
ctrl = 0
sprpriority = 2

[State 1000, 音を鳴らす];声
type = PlaySnd
trigger1 = animelem = 9
value = 1500, 0
channel = 0
volume = 100
;----------------------------------
; どこでもキャンセル
; var(8)
;----------------------------------
;MAXゲージ消費
[State 1000, VarAdd]
type = VarAdd
triggerall = var(8) > 0
triggerall = Time = 0
trigger1 = prevstateno = 245 && animelemtime(6)<0
trigger2 = prevstateno = 430
trigger3 = prevstateno = 440
trigger4 = prevstateno = 1410 ;鯉魚反ほう
trigger5 = prevstateno = 1900 ;轟炎招来･改
var(8) = -150

[State 1000, PalFx];点滅
type = PalFx
triggerall = var(8) > 0
triggerall = Time < 5
trigger1 = prevstateno = 245 && animelemtime(6)<0
trigger2 = prevstateno = 430
trigger3 = prevstateno = 440
trigger4 = prevstateno = 1410 ;鯉魚反ほう
trigger5 = prevstateno = 1900 ;轟炎招来･改
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

;SCゲージ消費用
[State 1000, varset]
type = varset
trigger1 = time = 0
var(11) = 1
;----------------------------------
[State 1000, VarSet];酒ストック
type = VarAdd
trigger1 = time = 0
trigger1 = var(10)>0
var(10) = -1

[State 1000, PosAdd]
type = PosAdd
trigger1 = animelem = 2
trigger2 = animelem = 3
trigger3 = animelem = 5
x = 5

[State 1000, PosAdd]
type = PosAdd
trigger1 = animelem = 4
x = 20

[State 1000, PosAdd]
type = PosAdd
trigger1 = animelem = 6
x = 10

[State 1000, PosAdd]
type = null;PosAdd
trigger1 = animelem = 7
x = -45

[State 1000, PosAdd]
type = PosAdd
trigger1 = animelem = 8
x = 2

[State 1000, PosAdd]
type = PosAdd
trigger1 = animelem = 9
x = 28

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelem = 2
attr = S, SA
animtype  = hard
damage    = 74, 4
getpower  = 15, 15
priority  = 5, hit
guardflag = MA
pausetime = 4,3
sparkxy = -15,-70
sparkno = s4002
guard.sparkno = s4012
hitsound = s1, 3
guardsound = s121,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 25
ground.velocity = -2.5
guard.slideTime = 16
guard.velocity = -7
air.hittime = 99
air.velocity = -1,-8
yaccel = .4
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.fall = 1
fall.recover = 0
id = 1510
nochainid = 1501,1511

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelem = 4
attr = S, SA
animtype  = hard
damage    = 33, 4
getpower  = 15, 15
priority  = 5, hit
guardflag = MA
pausetime = 4,3
sparkxy = -15,-70
sparkno = s4002
guard.sparkno = s4012
hitsound = s1, 3
guardsound = s121,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 25
ground.velocity = -2.5
guard.slideTime = 16
guard.velocity = -7
air.hittime = 99
air.velocity = -1,-7
yaccel = .4
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.fall = 1
fall.recover = 0
id = 1510
nochainid = 1501,1511

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelem = 6
attr = S, SA
animtype  = hard
damage    = 8, 3
getpower  = 15, 15
priority  = 5, hit
guardflag = MA
pausetime = 4,3
sparkxy = -15,-70
sparkno = s4002
guard.sparkno = s4012
hitsound = s1, 3
guardsound = s121,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 25
ground.velocity = -2.5
guard.slideTime = 16
guard.velocity = -7
air.hittime = 99
air.velocity = -2.5,-7
yaccel = .4
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.fall = 1
fall.recover = 0
id = 1510
nochainid = 1501,1511

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelem = 9
attr = S, SA
animtype  = back
damage    = 8, 3
getpower  = 15, 15
priority  = 5, hit
guardflag = MA
pausetime = 9,8
sparkxy = -15,-70
sparkno = s4002
guard.sparkno = s4012
hitsound = s1, 3
guardsound = s121,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 25
ground.velocity = -2.5,-7
guard.slideTime = 16
guard.velocity = -7
air.hittime = 99
air.velocity = -2.5,-6
yaccel = .4
fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
id = 1510
nochainid = 1501,1511

[State 1000, ステート変更]
type = ChangeState
trigger1 = animtime = 0
value = 1511

;---------------------------------------------------------------------------
;強柳燐蓬莱(空中)
[Statedef 1511]
type    = A
movetype= A
physics = N
juggle  = 4
poweradd= 0
velset = 7.5,-6
anim = 1501
ctrl = 0
sprpriority = 2

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = 300, 8
ignorehitpause = 1

[State 1000, VelAdd]
type = VelAdd
trigger1 = time>=0
y = .4

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelem = 1
attr = A, SA
animtype  = back
damage    = 8, 3
getpower  = 15, 15
priority  = 5, hit
guardflag = MA
pausetime = 4,4
sparkxy = -15,-70
sparkno = s4002
guard.sparkno = s4012
hitsound = s1, 3
guardsound = s121,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 25
ground.velocity = -3.5,-6
guard.slideTime = 16
guard.velocity = -8
air.velocity = -1.5,-5
yaccel = .4
fall = 1
fall.recover = 0
;ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
id = 1511

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelem = 2
trigger2 = animelem = 3
;trigger3 = animelem = 4
attr = A, SA
animtype  = back
damage    = 8, 3
getpower  = 15, 15
priority  = 5, hit
guardflag = MA
pausetime = 4,4
sparkxy = -15,-70
sparkno = s4002
guard.sparkno = s4012
hitsound = s1, 3
guardsound = s121,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 25
ground.velocity = -3.5,-7
guard.slideTime = 16
guard.velocity = -8
air.velocity = -1.5,-4.5
yaccel = .4
fall = 1
fall.recover = 0
;ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
id = 1511

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelem = 4
trigger2 = animelem = 5
attr = A, SA
animtype  = back
damage    = 8, 3
getpower  = 15, 15
priority  = 5, hit
guardflag = MA
pausetime = 4,4
sparkxy = -15,-70
sparkno = s4002
guard.sparkno = s4012
hitsound = s1, 3
guardsound = s121,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 25
ground.velocity = -3.5,-7
guard.slideTime = 18
guard.velocity = -8
air.velocity = -2.5,-9
yaccel = .55
fall = 1
fall.recover = 0
;ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
id = 1511

[State 1000, ステート変更]
type = ChangeState
trigger1 = animelemtime(5)>0
trigger1 = pos y >= 0 && vel y > 0
value = 1512

;---------------------------------------------------------------------------
;強柳燐蓬莱(着地)
[Statedef 1512]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
velset = 0,0
anim = 1512
ctrl = 0
sprpriority = 2

;----------------------------------
;SCゲージ消費用
[State 1000, varset]
type = varset
trigger1 = animtime = 0
var(11) = 0
;----------------------------------
[State 1000, PosSet]
type = PosSet
trigger1 = time = 0
y = 0

[State 1000, ステート変更]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;弱酔杯靠
[Statedef 1600]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 83
velset = 0,0
anim = 1600
ctrl = 0
sprpriority = 2

[State 1000, 音を鳴らす];声
type = PlaySnd
trigger1 = animelem = 3
value = 1600, 0
channel = 0
volume = 50

[State 1000, VarSet];酒ストック
type = VarAdd
trigger1 = animelemtime(5)=0
var(10) = 1

[state 1200, nothitby]
type = nothitby
trigger1 = animelemtime(3)<0
value = SCA

[State 1000, PosAdd]
type = PosAdd
trigger1 = animelem = 2
x = 14

[State 1000, PosAdd]
type = PosAdd
trigger1 = animelem = 3
x = 16

[State 1000, PosAdd]
type = PosAdd
trigger1 = animelem = 7
trigger2 = animelem = 8
x = -14

[State 1000, SprPriority]
Type = SprPriority
Trigger1 = animelem = 2
Value = -1

[State 1000, SprPriority]
Type = SprPriority
Trigger1 = animelem = 8
Value = 2

[State 801, Explod];飛沫エフェクト
type = Explod
trigger1 = AnimElem = 6
anim = 804
ID = 804
pos = -20, -69
postype = p1
facing = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 1000, ステート変更]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;強酔杯靠
[Statedef 1610]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 83
velset = 0,0
anim = 1610
ctrl = 0
sprpriority = 2

[State 1000, 音を鳴らす];声
type = PlaySnd
trigger1 = animelem = 3
value = 1600, 0
channel = 0
volume = 50

[State 1000, VarSet];酒ストック
type = VarAdd
trigger1 = animelemtime(5)=0
var(10) = 1

[state 1200, nothitby]
type = nothitby
trigger1 = animelemtime(3)<0
value = SCA

[State 1000, PosAdd]
type = PosAdd
trigger1 = animelem = 2
x = 14

[State 1000, PosAdd]
type = PosAdd
trigger1 = animelem = 3
x = 16

[State 1000, PosAdd]
type = PosAdd
trigger1 = animelem = 7
trigger2 = animelem = 8
x = -14

[State 1000, SprPriority]
Type = SprPriority
Trigger1 = animelem = 2
Value = -1

[State 1000, SprPriority]
Type = SprPriority
Trigger1 = animelem = 8
Value = 2

[State 801, Explod];飛沫エフェクト
type = Explod
trigger1 = AnimElem = 6
anim = 804
ID = 804
pos = -20, -69
postype = p1
facing = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 1000, ステート変更]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;弱回転的空突拳(始動)
[Statedef 1700]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 106
velset = 0,0
anim = 1700
ctrl = 0
sprpriority = 2

;----------------------------------
; どこでもキャンセル
; var(8)
;----------------------------------
;MAXゲージ消費
[State 1000, VarAdd]
type = VarAdd
triggerall = var(8) > 0
triggerall = Time = 0
trigger1 = prevstateno = 245 && animelemtime(6)<0
trigger2 = prevstateno = 430
trigger3 = prevstateno = 440
trigger4 = prevstateno = 1410 ;鯉魚反ほう
trigger5 = prevstateno = 1500 ;柳憐蓬莱
trigger6 = prevstateno = 1510
trigger7 = prevstateno = 1900 ;轟炎招来･改
var(8) = -150

[State 1000, PalFx];点滅
type = PalFx
triggerall = var(8) > 0
triggerall = Time < 5
trigger1 = prevstateno = 245 && animelemtime(6)<0
trigger2 = prevstateno = 430
trigger3 = prevstateno = 440
trigger4 = prevstateno = 1410 ;鯉魚反ほう
trigger5 = prevstateno = 1500 ;柳憐蓬莱
trigger6 = prevstateno = 1510
trigger7 = prevstateno = 1900 ;轟炎招来･改
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

;SCゲージ消費用
[State 1000, varset]
type = varset
trigger1 = time = 0
var(11) = 1
;----------------------------------
[State 1000, VarSet];酒ストック
type = VarAdd
trigger1 = time = 0
trigger1 = var(10) > 0
var(10) = -1

[state 1200, nothitby]
type = nothitby
trigger1 = animelemtime(3)<0
value = SCA

[State 1000, ステート変更]
type = ChangeState
trigger1 = animtime = 0
value = 1702

;---------------------------------------------------------------------------
;弱回転的空突拳(望月酔派生)
[Statedef 1701]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 106
velset = 0,0
anim = 1701
ctrl = 0
sprpriority = 2

;----------------------------------
;SCゲージ消費用
[State 1000, varset]
type = varset
trigger1 = time = 0
var(11) = 1
;----------------------------------
[State 1000, VarSet];望月酔時間
type = VarSet
trigger1 = time = 0
var(9) = 0

[State 1000, VarSet];酒ストック
type = VarAdd
trigger1 = time = 0
trigger1 = var(10) > 0
var(10) = -1

[State 1000, ステート変更]
type = ChangeState
trigger1 = animtime = 0
value = 1702

;---------------------------------------------------------------------------
;弱回転的空突拳(攻撃)
[Statedef 1702]
type    = S
movetype= A
physics = N
juggle  = 4
poweradd= 0
velset = 8,0
anim = 1702
ctrl = 0
sprpriority = 2

[State 1000, 音を鳴らす];声
type = PlaySnd
trigger1 = time = 0
value = 1700, 0
channel = 0
volume = 50
;----------------------------------
;SCゲージ消費用
[State 1000, varset]
type = varset
trigger1 = animtime = 0
var(11) = 0
;----------------------------------
[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 0
value = 300, 8

[State 1000, VelSet]
type = VelSet
trigger1 = animelem = 5
x = 0

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelem = 7
attr = S, SA
animtype  = back
damage    = 132, 9
getpower  = 61, 61
priority  = 5, hit
guardflag = MA
pausetime = 11,10
sparkxy = -15,-70
sparkno = s4002
guard.sparkno = s4012
hitsound = s1, 16
guardsound = s121,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 24
ground.velocity = -3.5,-6.5
guard.slideTime = 16
guard.velocity = -11
air.velocity = -2.5,-6.5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .4
fall = 1
fall.recover = 0
id = 1700
nochainid = 1700,1710

[State 1000, ステート変更]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;強回転的空突拳(始動)
[Statedef 1710]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 106
velset = 0,0
anim = 1700
ctrl = 0
sprpriority = 2

;----------------------------------
; どこでもキャンセル
; var(8)
;----------------------------------
;MAXゲージ消費
[State 1000, VarAdd]
type = VarAdd
triggerall = var(8) > 0
triggerall = Time = 0
trigger1 = prevstateno = 245 && animelemtime(6)<0
trigger2 = prevstateno = 430
trigger3 = prevstateno = 440
trigger4 = prevstateno = 1410 ;鯉魚反ほう
trigger5 = prevstateno = 1500 ;柳憐蓬莱
trigger6 = prevstateno = 1510
trigger7 = prevstateno = 1900 ;轟炎招来･改
var(8) = -150

[State 1000, PalFx];点滅
type = PalFx
triggerall = var(8) > 0
triggerall = Time < 5
trigger1 = prevstateno = 245 && animelemtime(6)<0
trigger2 = prevstateno = 430
trigger3 = prevstateno = 440
trigger4 = prevstateno = 1410 ;鯉魚反ほう
trigger5 = prevstateno = 1500 ;柳憐蓬莱
trigger6 = prevstateno = 1510
trigger7 = prevstateno = 1900 ;轟炎招来･改
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

;SCゲージ消費用
[State 1000, varset]
type = varset
trigger1 = time = 0
var(11) = 1
;----------------------------------
[State 1000, VarSet];酒ストック
type = VarAdd
trigger1 = time = 0
trigger1 = var(10) > 0
var(10) = -1

[state 1200, nothitby]
type = nothitby
trigger1 = animelemtime(3)<0
value = SCA

[State 1000, ステート変更]
type = ChangeState
trigger1 = animtime = 0
value = 1712

;---------------------------------------------------------------------------
;強回転的空突拳(望月酔派生)
[Statedef 1711]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 106
velset = 0,0
anim = 1711
ctrl = 0
sprpriority = 2

;----------------------------------
;SCゲージ消費用
[State 1000, varset]
type = varset
trigger1 = time = 0
var(11) = 1
;----------------------------------
[State 1000, VarSet];望月酔時間
type = VarSet
trigger1 = time = 0
var(9) = 0

[State 1000, VarSet];酒ストック
type = VarAdd
trigger1 = time = 0
trigger1 = var(10) > 0
var(10) = -1

[State 1000, ステート変更]
type = ChangeState
trigger1 = animtime = 0
value = 1712

;---------------------------------------------------------------------------
;強回転的空突拳(攻撃)
[Statedef 1712]
type    = S
movetype= A
physics = N
juggle  = 4
poweradd= 0
velset = 12,0
anim = 1712
ctrl = 0
sprpriority = 2

[State 1000, 音を鳴らす];声
type = PlaySnd
trigger1 = time = 0
value = 1700, 0
channel = 0
volume = 50
;----------------------------------
;SCゲージ消費用
[State 1000, varset]
type = varset
trigger1 = animtime = 0
var(11) = 0
;----------------------------------
[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 0
value = 300, 8

[State 1000, VelSet]
type = VelSet
trigger1 = animelem = 5
x = 0

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelem = 7
attr = S, SA
animtype  = back
damage    = 149, 10
getpower  = 61, 61
priority  = 5, hit
guardflag = MA
pausetime = 11,10
sparkxy = -15,-70
sparkno = s4002
guard.sparkno = s4012
hitsound = s1, 16
guardsound = s121,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 24
ground.velocity = -3.5,-6.5
guard.slideTime = 16
guard.velocity = -11
air.velocity = -2.5,-6.5
yaccel = .4
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall = 1
fall.recover = 0
id = 1710
nochainid = 1700,1710

[State 1000, ステート変更]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;弱噴炎口
[Statedef 1800]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 0
velset = 0,0
anim = 1800
ctrl = 0
sprpriority = 2

[State 1000, VarSet];酒ストック
type = VarAdd
trigger1 = time = 0
trigger1 = var(10) > 0
var(10) = -1

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 3
value = 1, 20

;--------------------------------Helper
[State 1000, Helper]
type = helper
trigger1 = NumHelper(1850)=0
trigger1 = animelemtime(3)=3
id = 1850
persistent = 0
name = "Honoo"
pos = 40,-68
postype = p1
stateno = 1850
helpertype = normal
keyctrl = 0
ownpal = 1

[State 1000, VarSet];スロー処理
type = VarSet
trigger1 = NumHelper(1850)
trigger1 = Helper(1850),movehit
var(17) = 20
persistent = 0
ignorehitpause = 1

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;強噴炎口
[Statedef 1810]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 0
velset = 0,0
anim = 1810
ctrl = 0
sprpriority = 2

[State 1000, VarSet];酒ストック
type = VarAdd
trigger1 = time = 0
trigger1 = var(10) > 0
var(10) = -1

[State 1000, 0]
Type = VarSet
Trigger1 = time = 0
var(12) = 0

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 3
trigger2 = animelem = 9
value = 1, 20
;--------------------------------Helper
[State 1000, Helper]
type = helper
trigger1 = NumHelper(1850)=0
trigger1 = animelemtime(4)=3
id = 1850
persistent = 0
name = "Honoo"
pos = 40,-68
postype = p1
stateno = 1851
helpertype = normal
keyctrl = 0
ownpal = 1

[State 1000, Helper]
type = helper
;trigger1 = NumHelper(1851)=0
trigger1 = animelemtime(9)=3
id = 1851
persistent = 0
name = "Honoo"
pos = 40,-68
postype = p1
stateno = 1852
helpertype = normal
keyctrl = 0
ownpal = 1

[State 1000, Helper]
type = helper
;trigger1 = NumHelper(1851)=0
trigger1 = animelemtime(10)=3
id = 1851
persistent = 0
name = "Honoo"
pos = 40,-68
postype = p1
stateno = 1853
helpertype = normal
keyctrl = 0
ownpal = 1

[State 1000, Helper]
type = helper
;trigger1 = NumHelper(1851)=0
trigger1 = animelemtime(11)=3
id = 1851
persistent = 0
name = "Honoo"
pos = 40,-68
postype = p1
stateno = 1854
helpertype = normal
keyctrl = 0
ownpal = 1

[State 1000, VarSet];スロー処理
type = VarSet
trigger1 = NumHelper(1850)
trigger1 = Helper(1850),movehit
trigger2 = NumHelper(1851)
trigger2 = Helper(1851),movehit
var(17) = 20
persistent = 0
ignorehitpause = 1

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;弱噴炎口
;(HELPER)炎
[Statedef 1850]
type    = A
movetype= A
physics = N
juggle  = 2
poweradd= 0
velset = 0,0
ctrl = 0
anim = 1850
sprpriority = 3

[state 11000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 20001, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 1000, ヒット定義]
type = HitDef
trigger1 = time = 0
attr = A, SP
animtype  = diagup
damage    = floor(149*root,fvar(3)), 12
getpower  = 61, 61
priority  = 5, hit
hitflag = MAFP
guardflag = M
pausetime = 0,10
guard.pausetime = 0,10
sparkxy = -15,-25
sparkno = s4002
guard.sparkno = s4012
hitsound   = s1,20
guardsound = s121,0
ground.type = high
ground.slidetime = 18
ground.hittime  = 20
guard.ctrltime = 10
ground.velocity = -4,-6
air.velocity = -4,-6
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5
fall = 1
fall.recover = 0
id = 1800
palfx.time =58
palfx.mul = 240,200,100
palfx.sinadd = 63,65,68,18
palfx.add = 230,180,124
palfX.invertall = 1

[state 11000, destroyselef]
type = destroyself
trigger1 = animtime = 0

;---------------------------------------------------------------------------
;強噴炎口1
;(HELPER)炎
[Statedef 1851]
type    = A
movetype= A
physics = N
juggle  = 2
poweradd= 0
velset = 0,0
ctrl = 0
anim = 1850
sprpriority = 3

[state 11000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 20001, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 1000, 0]
Type = ParentVarSet
Trigger1 = movehit
var(12) = 1

[State 1000, ヒット定義]
type = HitDef
trigger1 = time = 0
attr = A, SP
animtype  = back
damage    = floor(124*root,fvar(3)), 10
getpower  = 61, 61
priority  = 5, hit
hitflag = MAFP
guardflag = M
pausetime = 0,10
guard.pausetime = 0,10
sparkxy = -15,-25
sparkno = s4002
guard.sparkno = s4012
hitsound   = s1,20
guardsound = s121,0
ground.type = high
ground.slidetime = 18
ground.hittime  = 20
guard.ctrltime = 10
ground.velocity = -.5,-7
air.velocity = -.5,-7
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .45
fall = 1
fall.recover = 0
id = 1810
palfx.time =58
palfx.mul = 240,200,100
palfx.sinadd = 63,65,68,18
palfx.add = 230,180,124
palfx.invertall = 1

[state 11000, destroyselef]
type = destroyself
trigger1 = animtime = 0

;---------------------------------------------------------------------------
;強噴炎口2_1
;(HELPER)炎
[Statedef 1852]
type    = A
movetype= A
physics = N
juggle  = 2
poweradd= 0
velset = 0,0
ctrl = 0
anim = 1850
sprpriority = 3

[state 11000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 20001, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 1000, ヒット定義]
type = HitDef
trigger1 = time = 0
trigger1 = Parent,var(12)=1
attr = A, SP
animtype  = diagup
damage    = floor(58*root,fvar(3)), 5
getpower  = 61, 61
priority  = 5, hit
hitflag = MAFP
guardflag = M
pausetime = 0,10
guard.pausetime = 0,10
sparkxy = -15,-25
sparkno = s4002
guard.sparkno = s4012
hitsound   = s1,20
guardsound = s121,0
ground.type = high
ground.slidetime = 18
ground.hittime  = 20
guard.ctrltime = 10
ground.velocity = -2,-8
air.velocity = -2,-8
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5
fall = 1
fall.recover = 0
id = 1811
palfx.time =58
palfx.mul = 240,200,100
palfx.sinadd = 63,65,68,18
palfx.add = 230,180,124
palfx.invertall = 1

[State 1000, ヒット定義]
type = HitDef
trigger1 = time = 0
trigger1 = Parent,var(12)=0
attr = A, SP
animtype  = diagup
damage    = floor(128*root,fvar(3)), 5
getpower  = 61, 61
priority  = 5, hit
hitflag = MAFP
guardflag = M
pausetime = 0,10
guard.pausetime = 0,10
sparkxy = -15,-25
sparkno = s4002
guard.sparkno = s4012
hitsound   = s1,20
guardsound = s121,0
ground.type = high
ground.slidetime = 18
ground.hittime  = 20
guard.ctrltime = 10
ground.velocity = -2,-8
air.velocity = -2,-8
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5
fall = 1
fall.recover = 0
id = 1811
palfx.time =58
palfx.mul = 240,200,100
palfx.sinadd = 63,65,68,18
palfx.add = 230,180,124
palfx.invertall = 1

[state 11000, destroyselef]
type = destroyself
trigger1 = animtime = 0

;---------------------------------------------------------------------------
;強噴炎口2_2
;(HELPER)炎
[Statedef 1853]
type    = A
movetype= A
physics = N
juggle  = 2
poweradd= 0
velset = 0,0
ctrl = 0
anim = 1850
sprpriority = 3

[state 11000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 20001, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 1000, ヒット定義]
type = HitDef
trigger1 = time = 0
trigger1 = Parent,var(12)=0
attr = A, SP
animtype  = diagup
damage    = 58, 3
getpower  = 61, 61
priority  = 5, hit
hitflag = MAFP
guardflag = M
pausetime = 0,10
guard.pausetime = 0,10
sparkxy = -15,-25
sparkno = s4002
guard.sparkno = s4012
hitsound   = s1,20
guardsound = s121,0
ground.type = high
ground.slidetime = 18
ground.hittime  = 20
guard.ctrltime = 10
ground.velocity = -1,-7
air.velocity = -1,-4
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5
fall = 1
fall.recover = 0
id = 1812
palfx.time =58
palfx.mul = 240,200,100
palfx.sinadd = 63,65,68,18
palfx.add = 230,180,124
palfx.invertall = 1

[state 11000, destroyselef]
type = destroyself
trigger1 = animtime = 0

;---------------------------------------------------------------------------
;強噴炎口2_3
;(HELPER)炎
[Statedef 1854]
type    = A
movetype= A
physics = N
juggle  = 2
poweradd= 0
velset = 0,0
ctrl = 0
anim = 1850
sprpriority = 3

[state 11000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 20001, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 1000, ヒット定義]
type = HitDef
trigger1 = time = 0
trigger1 = Parent,var(12)=0
attr = A, SP
animtype  = diagup
damage    = 25, 1
getpower  = 61, 61
priority  = 5, hit
hitflag = MAFP
guardflag = M
pausetime = 0,10
guard.pausetime = 0,10
sparkxy = -15,-25
sparkno = s4002
guard.sparkno = s4012
hitsound   = s1,20
guardsound = s121,0
ground.type = high
ground.slidetime = 18
ground.hittime  = 20
guard.ctrltime = 10
ground.velocity = -2,-8
air.velocity = -2,-8
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .5
fall = 1
fall.recover = 0
id = 1812
palfx.time =58
palfx.mul = 240,200,100
palfx.sinadd = 63,65,68,18
palfx.add = 230,180,124
palfx.invertall = 1

[state 11000, destroyselef]
type = destroyself
trigger1 = animtime = 0

;---------------------------------------------------------------------------
;弱轟炎招来･改
[Statedef 1900]
type    = S
movetype= A
physics = S
juggle  = 8-(var(1))*8
poweradd= 61
velset = 0,0
anim = 1900
ctrl = 0
sprpriority = 2

;----------------------------------
; どこでもキャンセル
; var(8)
;----------------------------------
;MAXゲージ消費
[State 1000, VarAdd]
type = VarAdd
triggerall = var(8) > 0
triggerall = Time = 0
trigger1 = prevstateno = 245 && animelemtime(6)<0
trigger2 = prevstateno = 430
trigger3 = prevstateno = 440
trigger4 = prevstateno = 1410 ;鯉魚反ほう
trigger5 = prevstateno = 1500 ;柳憐蓬莱
trigger6 = prevstateno = 1510
var(8) = -150

[State 1000, PalFx];点滅
type = PalFx
triggerall = var(8) > 0
triggerall = Time < 5
trigger1 = prevstateno = 245 && animelemtime(6)<0
trigger2 = prevstateno = 430
trigger3 = prevstateno = 440
trigger4 = prevstateno = 1410 ;鯉魚反ほう
trigger5 = prevstateno = 1500 ;柳憐蓬莱
trigger6 = prevstateno = 1510
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

;SCゲージ消費用
[State 1000, varset]
type = varset
trigger1 = time = 0
var(11) = 1

;SCゲージ消費用
[State 1000, varset]
type = varset
trigger1 = animtime = 0
var(11) = 0
;----------------------------------
[State 801, 音を鳴らす];声
type = PlaySnd
trigger1 = AnimElem = 4
value = 1900, 0
channel = 0
volume = 100

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 3
value = 1, 20

[State 801, 音を鳴らす];ｽﾞｺｰ
type = PlaySnd
trigger1 = numtarget(1902)
trigger1 = target(1902),stateno = 1901    ;最終段通常ヒット時
trigger1 = target(1902),anim = 1902
trigger1 = target(1902),animelemtime(1)=1
value = 300, 5

[State 1000, VarSet];酒ストック
type = VarAdd
trigger1 = time = 0
trigger1 = var(10)>2
var(10) = -3

[State 1000, PosAdd]
type = PosAdd
trigger1 = animelem = 5
trigger2 = animelem = 6
trigger3 = animelem = 8
x = 6

[State 1000, PosAdd]
type = PosAdd
trigger1 = animelem = 7
x = 20

[State 1000, PosAdd]
type = PosAdd
trigger1 = animelem = 9
x = 15

[State 1000, PosAdd]
type = PosAdd
trigger1 = animelem = 11
x = -8

[State 801, Explod];爆発
type = Explod
trigger1 = animelem = 3
anim = 4041
ID = 4041
pos = 0, -15
postype = p1
facing = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 801, Explod];爆発
type = Explod
trigger1 = animelem = 3
anim = 4041
ID = 4041
pos = 35, 0
postype = p1
facing = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 801, Explod];爆発
type = Explod
trigger1 = animelem = 3
anim = 4041
ID = 4041
pos = -35, 15
postype = p1
facing = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 801, Explod];爆発
type = Explod
trigger1 = animelem = 3
anim = 4041
ID = 4041
pos = 6, 5
postype = p1
facing = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 801, Explod];炎エフェクト
type = Explod
trigger1 = animelem = 4
trigger2 = animelem = 10
anim = 3251
ID = 3251
pos = 0, -50
postype = p1
facing = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 801, Explod];炎エフェクト
type = Explod
trigger1 = animelem = 7
anim = 3251
ID = 3251
pos = 0, -24
postype = p1
facing = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 801, Explod];炎エフェクト
type = Explod
trigger1 = animelem = 15
anim = 3251
ID = 3251
pos = 71, -72
postype = p1
facing = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[state 1900, TargetState];ガードクラッシュ
type = TargetState
trigger1 = NumTarget(1902)
trigger1 = moveguarded
value = 1950
id = 1902
persistent = 0
ignorehitpause = 1

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelem = 3
attr = S, SA
animtype  = hard
damage    = 41, 6
getpower  = 30, 30
priority  = 5, hit
hitflag = MAFP
guardflag = MA
pausetime = 4,3
sparkxy = -15,-70
sparkno = s4002
guard.sparkno = s4012
hitsound = s1, 20
guardsound = s121,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 25
ground.velocity = -1.5
guard.slideTime = 16
guard.velocity = -2
air.velocity = -1,-8
yaccel = .4
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.fall = 1
fall.recover = 0
id = 1900
palfx.time = 48
palfx.mul = 240,200,100
palfx.sinadd = 63,65,68,18
palfx.add = 230,180,124
palfx.invertall = 1

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelem = 5
trigger2 = animelem = 9
attr = S, SA
animtype  = hard
damage    = 41, 4
getpower  = 30, 30
priority  = 5, hit
guardflag = MA
pausetime = 4,3
sparkxy = -15,-70+(animelem=9)*20
sparkno = s4002
guard.sparkno = s4012
hitsound = s1, 20
guardsound = s121,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 25
ground.velocity = -1.5
guard.slideTime = 16
guard.velocity = -2
air.velocity = -1,-7
yaccel = .4
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.fall = 1
fall.recover = 0
id = 1901
palfx.time = 48
palfx.mul = 240,200,100
palfx.sinadd = 63,65,68,18
palfx.add = 230,180,124
palfx.invertall = 1

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelem = 7
trigger2 = animelem = 11
attr = S, SA
animtype  = hard
damage    = 41, 4
getpower  = 30, 30
priority  = 5, hit
guardflag = MA
pausetime = 4,3
sparkxy = -15,-70+(animelem=9)*20
sparkno = s4002
guard.sparkno = s4012
hitsound = s1, 3
guardsound = s121,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 25
ground.velocity = -1.5
guard.slideTime = 16
guard.velocity = -2
air.velocity = -1,-7
yaccel = .4
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.fall = 1
fall.recover = 0
id = 1901
palfx.time = 48
palfx.mul = 240,200,100
palfx.sinadd = 63,65,68,18
palfx.add = 230,180,124
palfx.invertall = 1

[State 1000, ヒット定義];最終段
type = HitDef
trigger1 = var(1) = 1        ;カウンター判定
trigger1 = animelem = 15
attr = S, SA
animtype  = back
damage    = 41, 3
getpower  = 30, 30
priority  = 5, hit
guardflag = M
pausetime = 9,8
sparkxy = -15,-70
sparkno = s4002
guard.sparkno = s4012
hitsound = s1, 16
guardsound = s121,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 25
ground.velocity = -2.5,-5
guard.slideTime = 16
guard.velocity = -3
air.velocity = -2.5,-7
yaccel = .4
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall = 1
fall.recover = 0
id = 1902
p2facing = 1
p2stateno = 1905
palfx.time = 48
palfx.mul = 240,200,100
palfx.sinadd = 63,65,68,18
palfx.add = 230,180,124
palfx.invertall = 1

[State 1000, ヒット定義];最終段
type = HitDef
trigger1 = var(1) = 0        ;通常ヒット
trigger1 = animelem = 15
attr = S, SA
animtype  = back
damage    = 41, 3
getpower  = 30, 30
priority  = 5, hit
guardflag = M
pausetime = 9,8
sparkxy = -15,-70
sparkno = s4002
guard.sparkno = s4012
hitsound = s1, 16
guardsound = s121,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 25
ground.velocity = -2.5,-5
guard.slideTime = 16
guard.velocity = -3
air.velocity = -2.5,-7
yaccel = .45
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall = 1
fall.recover = 0
id = 1902
p2facing = 1
p2stateno = 1901
palfx.time = 48
palfx.mul = 240,200,100
palfx.sinadd = 63,65,68,18
palfx.add = 230,180,124
palfx.invertall = 1

[State 1000, PalFX]
type = PalFX
trigger1 = animelemtime(3)>=0
trigger1 = animelemtime(16)<5
time = 2
add = 140,60,-55
color = 1
ignorehitpause = 1

[State 1412, EnvShake]
type = EnvShake
trigger1 = animelemtime(3)=0
time = 3
ampl = -8
freq = 95
phase = 95

[State 1412, EnvColor];ガードクラッシュ時フラッシュ
type = EnvColor
trigger1 = NumTarget(1902)
trigger1 = moveguarded
persistent = 0
ignorehitpause = 1
time = 2
value = 255,255,255
under = 2

[state 1412, PlaySnd];ガードクラッシュ時サウンド
type = PlaySnd
trigger1 = NumTarget(1902)
trigger1 = moveguarded
value = 1, 22
persistent = 0
ignorehitpause = 1

[State 1000, ステート変更]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;弱轟炎招来･改
;相手やられ(通常ヒット)
[Statedef 1901]
type    = A
movetype= H
physics = N
velset = 0,0

;---------------------------------------------
[state 1050, SelfState];Helperは返却
type = SelfState
trigger1 = ishelper
value = PrevStateNo
;---------------------------------------------

[State 810, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 1901

[State 810, 1]
type = ChangeAnim
Trigger1 = anim = 1901
trigger1 = animtime = 0
value = 5050

[State 810, 1]
type = ChangeAnim2
Trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1902

;[State 1000, 0]
;Type = StateTypeSet
;Trigger1 = anim = 5050
;trigger1 = animelemtime(1)=0
;StateType = A

[State 810, vel]
type = VelSet
Trigger1 = anim = 5050
trigger1 = animelemtime(1)=0
x = -5
y = -4

[State 810, vel]
type = VelAdd
Trigger1 = anim = 5050
y = .5

[State 810, vel]
type = VelSet
trigger1 = anim = 1902
y = 0

[State 810, vel]
type = VelAdd
Trigger1 = anim = 1902
trigger1 = vel x < 0
x = .25

[State 810, vel]
type = PosSet
Trigger1 = Pos Y >= 0
y = 0

[State 801, Explod];煙
type = Explod
trigger1 = anim = 1902
trigger1 = animelemtime(1)>=0
trigger1 = animelemtime(2)<0
anim = f120
ID = 800
pos = 0, 0
postype = p1
facing = 1
sprpriority = 5
ownpal = 1
removeongethit = 1

[State 865, 5]
type = SelfState
trigger1 = Anim = 1902
trigger1 = AnimTime = 0
value = 5120 + (!alive)*30

;---------------------------------------------------------------------------
;弱轟炎招来･改
;相手やられ(カウンターヒット)
[Statedef 1905]
type    = A
movetype= H
physics = N
velset = 0,0

;---------------------------------------------
[state 1050, SelfState];Helperは返却
type = SelfState
trigger1 = ishelper
value = PrevStateNo
;---------------------------------------------

[State 1905, ChangeAnim2]
type = ChangeAnim2
Trigger1 = Time = 0
value = 1905

[State 1905, VelSet]
type = VelSet
trigger1 = animelem = 2
x = -10
y = -1

[State 1000, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 1905, ScreenBound];画面固定
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,1

[State 1905, ChangeState]
type = ChangeState
triggerall = animelemtime(2)>=0
trigger1 = backEdgebodydist <= 5
trigger2 = time >=100
value = 1906

;---------------------------------------------------------------------------
;弱轟炎招来･改
;相手やられ(CW壁バウンド)
[Statedef 1906]
type    = A
movetype= H
physics = N
velset = 0,0

[State 1906, ChangeAnim2]
type = ChangeAnim2
Trigger1 = Time = 0
value = 1906

[State 1906, 音を鳴らす]
type = PlaySnd
trigger1 = Time = 0
value = F7,2

[State 1000, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 1905, ScreenBound];画面固定
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,1

[State 801, Explod]
type = Explod
trigger1 = Time = 0
anim = f72
ID = 1096
pos = -30, -35
postype = p1
facing = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 1906, EnvShake]
type = EnvShake
trigger1 = time = 0
time = 3
ampl = -8
freq = 95
phase = 95

[State 1905, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 1907

;---------------------------------------------------------------------------
;弱轟炎招来･改
;相手やられ(CW跳ね返り)
[Statedef 1907]
type    = A
movetype= H
physics = N
velset = 5,-8

[State 1907, ChangeAnim]
type = ChangeAnim
Trigger1 = Time = 0
value = 5050

[State 1000, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 1905, ScreenBound];画面固定
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,1

[State 1905, VelAdd]
type = VelAdd
Trigger1 = 1
y = .4

[State 1905, SelfState] 
type = SelfState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 5100 

;---------------------------------------------------------------------------
;弱轟炎招来･改
;ガードクラッシュ
[Statedef 1950]
type    = U
movetype= H
physics = U
ctrl = 0
velset = 0,0

;---------------------------------------------
[state 1050, SelfState];Helperは返却
type = SelfState
trigger1 = ishelper
value = PrevStateNo
;---------------------------------------------

[State 1950, ChangeAnim2]
type = ChangeAnim2
Trigger1 = 1
value = ifelse(StateType = C, 1951, 1950)

[State 1950, PosFreeze]
type = PosFreeze
trigger1 = 1

[State 1950, ChangeState]
type = ChangeState
trigger1 = HitShakeOver
value = 1951

;---------------------------------------------------------------------------
;弱轟炎招来･改
;ガードクラッシュ
[statedef 1951]
type    = U
movetype= H
physics = U
ctrl = 0
;velset = 0,0

[state 1951, StateTypeSet]
type = StateTypeSet
trigger1 = time = 0
trigger1 = statetype = S
Physics = S

[state 1951, StateTypeSet]
type = StateTypeSet
trigger1 = time = 0
trigger1 = statetype = C
Physics = C

[state 1951, StateTypeSet]
type = StateTypeSet
trigger1 = time = 0
trigger1 = statetype = A
Physics = A

[state 1951, HitVelSet]
type = HitVelSet
trigger1 = time = 0
x = 1
y = statetype = A

[State 1905, SelfState] 
type = SelfState
trigger1 = animtime = 0
value = ifelse(statetype = A, 50, ifelse(statetype = C, 11, 0))
ctrl = 1

;---------------------------------------------------------------------------
;強轟炎招来･改(始動)
[Statedef 1910]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 61
velset = 0,0
anim = 1910
ctrl = 0
sprpriority = 2

;----------------------------------
; どこでもキャンセル
; var(8)
;----------------------------------
;MAXゲージ消費
[State 1000, VarAdd]
type = VarAdd
triggerall = var(8) > 0
triggerall = Time = 0
trigger1 = prevstateno = 245 && animelemtime(6)<0
trigger2 = prevstateno = 430
trigger3 = prevstateno = 440
trigger4 = prevstateno = 1410 ;鯉魚反ほう
trigger5 = prevstateno = 1500 ;柳憐蓬莱
trigger6 = prevstateno = 1510
var(8) = -150

[State 1000, PalFx];点滅
type = PalFx
triggerall = var(8) > 0
triggerall = Time < 5
trigger1 = prevstateno = 245 && animelemtime(6)<0
trigger2 = prevstateno = 430
trigger3 = prevstateno = 440
trigger4 = prevstateno = 1410 ;鯉魚反ほう
trigger5 = prevstateno = 1500 ;柳憐蓬莱
trigger6 = prevstateno = 1510
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1

;SCゲージ消費用
[State 1000, varset]
type = varset
trigger1 = time = 0
var(11) = 1
;----------------------------------
[State 801, 音を鳴らす];声
type = PlaySnd
trigger1 = AnimElem = 4
value = 1900, 0
channel = 0
volume = 100

[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = animelem = 3
value = 1, 20

[State 1000, VarSet];酒ストック
type = VarAdd
trigger1 = time = 0
trigger1 = var(10)>2
var(10) = -3

[State 1000, PosAdd]
type = PosAdd
trigger1 = animelem = 6
trigger2 = animelem = 7
trigger3 = animelem = 9
x = 6

[State 1000, PosAdd]
type = PosAdd
trigger1 = animelem = 8
x = 20

[State 1000, PosAdd]
type = PosAdd
trigger1 = animelem = 10
x = 10

[State 1000, PosAdd]
type = PosAdd
trigger1 = animelem = 13
x = 30

[State 801, Explod];爆発
type = Explod
trigger1 = animelem = 3
anim = 4041
ID = 4041
pos = 0, -15
postype = p1
facing = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 801, Explod];爆発
type = Explod
trigger1 = animelem = 3
anim = 4041
ID = 4041
pos = 35, 0
postype = p1
facing = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 801, Explod];爆発
type = Explod
trigger1 = animelem = 3
anim = 4041
ID = 4041
pos = -35, 15
postype = p1
facing = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 801, Explod];爆発
type = Explod
trigger1 = animelem = 3
anim = 4041
ID = 4041
pos = 6, 5
postype = p1
facing = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 801, Explod];爆発
type = Explod
trigger1 = animelem = 3
anim = 4041
ID = 4041
pos = -9, -17
postype = p1
facing = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 801, Explod];炎エフェクト
type = Explod
trigger1 = animelem = 5
anim = 3251
ID = 3251
pos = 0, -50
postype = p1
facing = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 801, Explod];炎エフェクト
type = Explod
trigger1 = animelem = 8
anim = 3251
ID = 3251
pos = 0, -24
postype = p1
facing = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 801, Explod];炎エフェクト
type = Explod
trigger1 = animelem = 15
anim = 3251
ID = 3251
pos = 71, -72
postype = p1
facing = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelem = 3
attr = S, SA
animtype  = hard
damage    = 41, 4
getpower  = 30, 30
priority  = 5, hit
hitflag = MAFP
guardflag = MA
pausetime = 4,3
sparkxy = -15,-70
sparkno = s4002
guard.sparkno = s4012
hitsound = s1, 20
guardsound = s121,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 25
ground.velocity = -1.5
guard.slideTime = 16
guard.velocity = -2
air.velocity = -1,-8
yaccel = .4
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.fall = 1
fall.recover = 0
id = 1910
palfx.time = 48
palfx.mul = 240,200,100
palfx.sinadd = 63,65,68,18
palfx.add = 230,180,124
palfx.invertall = 1

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelem = 6
trigger2 = animelem = 8
trigger3 = animelem = 10
attr = S, SA
animtype  = hard
damage    = 41, 4
getpower  = 30, 30
priority  = 5, hit
guardflag = MA
pausetime = 4,3
sparkxy = -15,-70+(animelem=9)*20
sparkno = s4002
guard.sparkno = s4012
hitsound = s1, ifelse(random%2=0,20,3)
guardsound = s121,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 25
ground.velocity = -1.5
guard.slideTime = 16
guard.velocity = -2
air.velocity = -1,-7
yaccel = .4
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.fall = 1
fall.recover = 0
id = 1910
palfx.time = 48
palfx.mul = 240,200,100
palfx.sinadd = 63,65,68,18
palfx.add = 230,180,124
palfx.invertall = 1

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelem = 13
attr = S, SA
animtype  = back
damage    = 41, 4
getpower  = 30, 30
priority  = 5, hit
guardflag = MA
pausetime = 9,8
sparkxy = -15,-70
sparkno = s4002
guard.sparkno = s4012
hitsound = s1, 20
guardsound = s121,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 25
ground.velocity = -2.5,-6
guard.slideTime = 16
guard.velocity = -3
air.velocity = -2.5,-6
yaccel = .4
fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
id = 1910
palfx.time = 48
palfx.mul = 240,200,100
palfx.sinadd = 63,65,68,18
palfx.add = 230,180,124
palfx.invertall = 1

[State 1000, PalFX]
type = PalFX
trigger1 = animelemtime(4)>=0
time = 2
add = 140,60,-55
color = 1
ignorehitpause = 1

[State 1412, EnvShake]
type = EnvShake
trigger1 = animelemtime(3)=0
time = 3
ampl = -8
freq = 95
phase = 95

[State 1000, ステート変更]
type = ChangeState
trigger1 = animtime = 0
value = 1911

;---------------------------------------------------------------------------
;強轟炎招来･改(空中)
[Statedef 1911]
type    = A
movetype= A
physics = N
juggle  = 4
poweradd= 0
velset = 7.5,-7
anim = 1911
ctrl = 0
sprpriority = 2

[State 1000, VelAdd]
type = VelAdd
trigger1 = time>=0
y = .4

[State 801, Explod];炎エフェクト
type = Explod
trigger1 = animelem = 1
trigger2 = animelem = 8
anim = 3251
ID = 3251
pos = 0, -65
postype = p1
facing = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 801, Explod];炎エフェクト
type = Explod
trigger1 = animelem = 4
trigger2 = animelem = 10
anim = 3251
ID = 3251
pos = 0, -34
postype = p1
facing = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelem = 1
attr = A, SA
animtype  = back
damage    = 24, 3
getpower  = 15, 15
priority  = 5, hit
guardflag = MA
pausetime = 4,4
sparkxy = -15,-70
sparkno = s4002
guard.sparkno = s4012
hitsound = s1, ifelse(random%2=0,20,3)
guardsound = s121,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 25
ground.velocity = -3.5,-7
guard.slideTime = 16
guard.velocity = -6
air.velocity = -1.5,-4
yaccel = .4
fall = 1
fall.recover = 0
;ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
id = 1911
palfx.time = 48
palfx.mul = 240,200,100
palfx.sinadd = 63,65,68,18
palfx.add = 230,180,124
palfx.invertall = 1

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelem = 3
trigger2 = animelem = 5
trigger3 = animelem = 7
trigger4 = animelem = 9
attr = A, SA
animtype  = back
damage    = 24, 3
getpower  = 15, 15
priority  = 5, hit
guardflag = MA
pausetime = 4,4
sparkxy = -15,-70
sparkno = s4002
guard.sparkno = s4012
hitsound = s1, ifelse(random%2=0,20,3)
guardsound = s121,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 25
ground.velocity = -3.5,-7
guard.slideTime = 16
guard.velocity = -6
air.velocity = -1.5,-2.5
yaccel = .4
fall = 1
fall.recover = 0
;ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
id = 1911
palfx.time = 48
palfx.mul = 240,200,100
palfx.sinadd = 63,65,68,18
palfx.add = 230,180,124
palfx.invertall = 1

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelem = 11
attr = A, SA
animtype  = back
damage    = 24, 3
getpower  = 15, 15
priority  = 5, hit
guardflag = MA
pausetime = 4,4
sparkxy = -15,-70
sparkno = s4002
guard.sparkno = s4012
hitsound = s1, 20
guardsound = s121,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 25
ground.velocity = -3.5,-7
guard.slideTime = 18
guard.velocity = -8
air.velocity = -4.5,-9
yaccel = .55
fall = 1
fall.recover = 0
;ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
id = 1911
palfx.time = 48
palfx.mul = 240,200,100
palfx.sinadd = 63,65,68,18
palfx.add = 230,180,124
palfx.invertall = 1

[State 1000, PalFX]
type = PalFX
trigger1 = 1
time = 2
add = 140,60,-55
color = 1
ignorehitpause = 1

[State 1000, ステート変更]
type = ChangeState
trigger1 = animelemtime(11)>0
trigger1 = pos y >= 0 && vel y > 0
value = 1912

;---------------------------------------------------------------------------
;強轟炎招来･改(着地)
[Statedef 1912]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
velset = 0,0
anim = 1912
ctrl = 0
sprpriority = 2

;----------------------------------
;SCゲージ消費用
[State 1000, varset]
type = varset
trigger1 = animtime = 0
var(11) = 0
;----------------------------------
[State 200, 音を鳴らす]
type = PlaySnd
trigger1 = animelemtime(7)=0
value = 1, 18

[State 1000, PosSet]
type = PosSet
trigger1 = time = 0
y = 0

[State 801, Explod];衝撃
type = Explod
trigger1 = animelemtime(7)=0
anim = 4052
ID = 4052
pos = 0, 0
postype = p1
facing = 1
sprpriority = 0
ownpal = 1
removeongethit = 1

[State 1000, PalFX]
type = PalFX
trigger1 = animelemtime(4)<0
time = 2
add = 140,60,-55
color = 1
ignorehitpause = 1

[State 1412, EnvShake]
type = EnvShake
trigger1 = animelemtime(7)=0
time = 3
ampl = -8
freq = 95
phase = 95

[State 1000, VarSet];望月酔時間
type = VarSet
trigger1 = time = 0
var(9) = 0

[State 1000, ステート変更];望月酔移行
type = ChangeState
trigger1 = animtime = 0
value = 1210

;===========================================================================
; 超必殺技
;===========================================================================
;---------------------------------------------------------------------------
;酒仙靠
[Statedef 3000]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= ifelse(var(8)>0,0,ifelse(var(11),-2000,-1000))  ;MAX発動中なら消費ゼロ
velset = 0,0
anim = 3000
ctrl = 0
sprpriority = 2

;----------------------------------
; どこでもキャンセル
; var(8)
;----------------------------------
;MAXゲージ消費
[State 1000, VarSet]
type = VarSet
triggerall = var(8) > 0
trigger1 = time = 0
var(8) = 0
;----------------------------------
[State 1000, 音を鳴らす];声
type = PlaySnd
trigger1 = animelem = 4
value = 3000, 0
channel = 0
volume = 100

[State 1000, VarSet];酒ストック
type = VarAdd
trigger1 = animelemtime(17)=0
var(10) = 5

[State 1000, PosAdd]
type = PosAdd
trigger1 = animelem = 2
x = 14

[State 1000, PosAdd]
type = PosAdd
trigger1 = animelem = 3
x = 16

[State 1000, PosAdd]
type = PosAdd
trigger1 = animelem = 19
x = -16

[State 1000, PosAdd]
type = PosAdd
trigger1 = animelem = 20
x = -10

[State 801, Explod];飛沫エフェクト
type = Explod
trigger1 = AnimElem = 6
trigger2 = AnimElem = 12
anim = 804
ID = 804
pos = -10, -73
postype = p1
facing = 1
sprpriority = 4
ownpal = 1
removeongethit = 1
supermovetime = 9999

[State 801, Explod];飛沫エフェクト
type = Explod
trigger1 = AnimElem = 18
anim = 804
ID = 804
pos = -20, -69
postype = p1
facing = 1
sprpriority = 4
ownpal = 1
removeongethit = 1
supermovetime = 9999
;-------------------------------------
[State 3000, SuperPause]
type = SuperPause
trigger1 = time = 1
time = 28
movetime = 28
anim = -1
darken = 0
p2defmul = 1

[State 3000, 超必スパーク]
type = Explod
trigger1 = time = 3
anim = 6000
sprpriority = -9999
postype = p1
pos = -23,-68
bindtime = 1
under = 0
ownpal = 1
supermovetime = 999

[State 3000, 超必スパーク]
type = Explod
trigger1 = Time = 13
anim = 6001
sprpriority = 3
postype = p1
pos = -23,-68
bindtime = 1
under = 0
ownpal = 1
supermovetime = 999

[State 3000, フラッシュ]
type = EnvColor
trigger1 = time = 1
value = 255,255,255
persistent = 0
ignorehitpause = 1
time = 4
under = 2

[State 3000, 暗転]
type = EnvColor
trigger1 = time = 5
value = 0,0,0
persistent = 0
ignorehitpause = 1
time = 24
under = 2

[State 3000, 音を鳴らす];超必音
type = PlaySnd
trigger1 = time = 1
value = 6000, 0
;-------------------------------------

[State 1000, ステート変更]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;轟欄炎炮弱
[Statedef 3100]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= ifelse(var(8)>0,0,ifelse(var(11),-2000,-1000))  ;MAX発動中なら消費ゼロ
velset = 0,0
anim = 3100
ctrl = 0
sprpriority = 2

;----------------------------------
; どこでもキャンセル
; var(8)
;----------------------------------
;MAXゲージ消費
[State 1000, VarSet]
type = VarSet
triggerall = var(8) > 0
trigger1 = time = 0
var(8) = 0
;----------------------------------
[State 1000, 音を鳴らす];声
type = PlaySnd
trigger1 = animelem = 2
value = 3100, 0
channel = 0
volume = 100

[State 1000, 音を鳴らす];声
type = PlaySnd
trigger1 = animelem = 4
value = 3100, 1

[State 1000, VarSet];強弱判定リセット
type = VarSet
trigger1 = time = 0
var(13) = 0

[State 1000, VarSet];弱判定
type = VarSet
trigger1 = time = 2
var(13) = 1

[state 11000, NotHitBy]
type = NotHitBy
trigger1 = animelemtime(4)<0
value = SCA

;--------------------------------Helper
[State 1000, Helper]
type = helper
trigger1 = animelemtime(4)=0
trigger2 = animelemtime(6)=0
trigger3 = animelemtime(8)=0
trigger4 = animelemtime(10)=0
trigger5 = animelemtime(12)=0
trigger6 = animelemtime(14)=0
trigger7 = animelemtime(16)=0
id = 3150
;persistent = 0
name = "S_Honoo"
pos = 40,-68
postype = p1
stateno = 3150
helpertype = normal
keyctrl = 0
ownpal = 1

;-------------------------------------
[State 3000, SuperPause]
type = SuperPause
trigger1 = time = 1
time = 28
movetime = 28
anim = -1
darken = 0
p2defmul = 1

[State 3000, 超必スパーク]
type = Explod
trigger1 = time = 3
anim = 6000
sprpriority = -9999
postype = p1
pos = -39,-57
bindtime = 1
under = 0
ownpal = 1
supermovetime = 999

[State 3000, 超必スパーク]
type = Explod
trigger1 = Time = 13
anim = 6001
sprpriority = 3
postype = p1
pos = -39,-57
bindtime = 1
under = 0
ownpal = 1
supermovetime = 999

[State 3000, フラッシュ]
type = EnvColor
trigger1 = time = 1
value = 255,255,255
persistent = 0
ignorehitpause = 1
time = 4
under = 2

[State 3000, 暗転]
type = EnvColor
trigger1 = time = 5
value = 0,0,0
persistent = 0
ignorehitpause = 1
time = 24
under = 2

[State 3000, 音を鳴らす];超必音
type = PlaySnd
trigger1 = time = 1
value = 6000, 0
;-------------------------------------
[State 1000, VarSet];スロー処理
type = VarSet
trigger1 = ProjHitTime(3150)=1
var(17) = 20
persistent = 0
ignorehitpause = 1

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;轟欄炎炮強
[Statedef 3110]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= ifelse(var(8)>0,0,ifelse(var(11),-2000,-1000))  ;MAX発動中なら消費ゼロ
velset = 0,0
anim = 3110
ctrl = 0
sprpriority = 2

;----------------------------------
; どこでもキャンセル
; var(8)
;----------------------------------
;MAXゲージ消費
[State 1000, VarSet]
type = VarSet
triggerall = var(8) > 0
trigger1 = time = 0
var(8) = 0
;----------------------------------
[State 1000, 音を鳴らす];声
type = PlaySnd
trigger1 = animelem = 2
value = 3100, 0
channel = 0
volume = 100

[State 1000, 音を鳴らす];声
type = PlaySnd
trigger1 = animelem = 4
value = 3100, 1

[State 1000, VarSet];強弱判定リセット
type = VarSet
trigger1 = time = 0
var(13) = 0

[State 1000, VarSet];強判定
type = VarSet
trigger1 = time = 2
var(13) = 2

[state 11000, NotHitBy]
type = NotHitBy
trigger1 = animelemtime(4)<0
value = SCA

;--------------------------------Helper
[State 1000, Helper]
type = helper
trigger1 = animelemtime(4)=0
trigger2 = animelemtime(6)=0
trigger3 = animelemtime(8)=0
trigger4 = animelemtime(10)=0
trigger5 = animelemtime(12)=0
trigger6 = animelemtime(14)=0
trigger7 = animelemtime(16)=0
id = 3150
name = "S_Honoo"
pos = 40,-68
postype = p1
stateno = 3150
helpertype = normal
keyctrl = 0
ownpal = 1

;-------------------------------------
[State 3000, SuperPause]
type = SuperPause
trigger1 = time = 1
time = 28
movetime = 28
anim = -1
darken = 0
p2defmul = 1

[State 3000, 超必スパーク]
type = Explod
trigger1 = time = 3
anim = 6000
sprpriority = -9999
postype = p1
pos = -39,-57
bindtime = 1
under = 0
ownpal = 1
supermovetime = 999

[State 3000, 超必スパーク]
type = Explod
trigger1 = Time = 13
anim = 6001
sprpriority = 3
postype = p1
pos = -39,-57
bindtime = 1
under = 0
ownpal = 1
supermovetime = 999

[State 3000, フラッシュ]
type = EnvColor
trigger1 = time = 1
value = 255,255,255
persistent = 0
ignorehitpause = 1
time = 4
under = 2

[State 3000, 暗転]
type = EnvColor
trigger1 = time = 5
value = 0,0,0
persistent = 0
ignorehitpause = 1
time = 24
under = 2

[State 3000, 音を鳴らす];超必音
type = PlaySnd
trigger1 = time = 1
value = 6000, 0
;-------------------------------------
[State 1000, VarSet];スロー処理
type = VarSet
trigger1 = ProjHitTime(3150)=1
var(17) = 20
persistent = 0
ignorehitpause = 1

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;轟欄炎炮
;(HELPER)炎
[Statedef 3150]
type    = A
movetype= A
physics = N
juggle  = 8
poweradd= 0
;velset = 0,0
ctrl = 0
anim = 3150
sprpriority = 3

[state 11000, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = root,var(13) = 1 ;弱
x = 2
y = -2.5

[state 11000, VelSet]
type = VelSet
trigger1 = time = 0
trigger1 = root,var(13) = 2 ;強
x = 2.8
y = 0

[state 11000, VarSet];拡大用変数
type = VarSet
trigger1 = time = 0
var(1) = 1

[state 11000, VarSet];拡大用変数
type = VarAdd
;trigger1 =!time
trigger1 = time%2=0
var(1) = 2

[state 2901,1]
type = nothitby
trigger1 = 1
value = SCA
time = -1

[State 20001, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 1000, AngleDraw]
Type = AngleDraw
Trigger1 = Time <= 17
;trigger1 = Time % 2 = 0 || time = 0
Value = 0
Scale = (0.0468)*var(1), (0.0468)*var(1)

[State 1000, AngleDraw]
Type = AngleDraw
Trigger1 = Time = 18
Value = 0
Scale = 1, 1

[State 1000, Proj]
type = Projectile
trigger1 = time = 0
projID = 3150
projanim = 3151
projhitanim = -1;3152
projscale = 1, 1
projremove = 1
projremovetime = 35
projhits = 1
projpriority = 4
projsprpriority = 3
air.juggle = 8-(root,var(1))
;projremovetime = 25
offset = 0, 0          ;出現位置
velocity = ifelse(root,var(13)=1,2,2.8),ifelse(root,var(13)=1,-2.5,0)           ;初速度
ownpal = 1             ;独自パレ
postype = p1
attr = A, HP
damage   = floor(223*root,fvar(3)), 15
getpower = 0,0
animtype  = up
guardflag = M
hitflag = MAFP
priority = 4, Hit
pausetime = 0, 4
sparkno = s4002
guard.sparkno = s4012
sparkxy = 10, 0
hitsound = s1, 20
guardsound = s121, 0
ground.type = High
ground.slidetime = 18
ground.hittime  = 25
ground.velocity = -4,-9
guard.velocity = -9
air.type = High
air.velocity = -4,-9
fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .45
palfx.time = 58
palfx.mul = 240,200,100
palfx.sinadd = 63,65,68,18
palfx.add = 230,180,124
palfx.invertall = 1

[State 20001, ChangeState]
type = ChangeState
trigger1 = root,NumProjID(3150) = 0
trigger2 = time = 35
value = 3151

;---------------------------------------------------------------------------
;轟欄炎炮
;(HELPER)炎消滅
[Statedef 3151]
type    = A
movetype= A
physics = N
juggle  = 8
poweradd= 0
velset = 0,0
ctrl = 0
anim = 3152
sprpriority = 2

[state 11000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 20001, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[state 11000, destroyselef]
type = destroyself
trigger1 = animtime = 0

;---------------------------------------------------------------------------
;弱轟炎招来(始動)
[Statedef 3200]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= ifelse(var(8)>0,0,ifelse(var(11),-2000,-1000))  ;MAX発動中なら消費ゼロ
velset = 0,0
anim = 3200
ctrl = 0
sprpriority = 2

;----------------------------------
; どこでもキャンセル
; var(8)
;----------------------------------
;MAXゲージ消費
[State 1000, VarSet]
type = VarSet
triggerall = var(8) > 0
trigger1 = time = 0
var(8) = 0
;----------------------------------
[state 1000, varset]
type = varset
trigger1 = time = 0
var(19) = 1
;----------------------------------
[State 1000, 音を鳴らす];爆発音
type = PlaySnd
trigger1 = animelem = 4
value = 1, 20

[state 11000, VarSet]
type = VarSet
trigger1 = time = 0
var(14) = 0

[state 11000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 801, Explod];爆発
type = Explod
trigger1 = animelem = 4
anim = 4041
ID = 4041
pos = 0, -15
postype = p1
facing = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 801, Explod];爆発
type = Explod
trigger1 = animelem = 4
anim = 4041
ID = 4041
pos = 35, 0
postype = p1
facing = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 801, Explod];爆発
type = Explod
trigger1 = animelem = 4
anim = 4041
ID = 4041
pos = -35, 15
postype = p1
facing = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 801, Explod];爆発
type = Explod
trigger1 = animelem = 4
anim = 4041
ID = 4041
pos = 6, 5
postype = p1
facing = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

;--------------------------------Helper
[State 1000, Helper]
type = helper
trigger1 = animelemtime(4)=0
id = 3220
name = "S_Explosion"
pos = 0,0
postype = p1
stateno = 3220
helpertype = normal
keyctrl = 0
ownpal = 1

;-------------------------------------
[State 3000, SuperPause]
type = SuperPause
trigger1 = time = 1
time = 28
movetime = 28
anim = -1
darken = 0
p2defmul = 1

[State 3000, 超必スパーク]
type = Explod
trigger1 = time = 3
anim = 6000
sprpriority = -9999
postype = p1
pos = -39,-57
bindtime = 1
under = 0
ownpal = 1
supermovetime = 999

[State 3000, 超必スパーク]
type = Explod
trigger1 = Time = 13
anim = 6001
sprpriority = 3
postype = p1
pos = -39,-57
bindtime = 1
under = 0
ownpal = 1
supermovetime = 999

[State 3000, フラッシュ]
type = EnvColor
trigger1 = time = 1
value = 255,255,255
persistent = 0
ignorehitpause = 1
time = 4
under = 2

[State 3000, 暗転]
type = EnvColor
trigger1 = time = 5
value = 0,0,0
persistent = 0
ignorehitpause = 1
time = 24
under = 2

[State 3000, 音を鳴らす];超必音
type = PlaySnd
trigger1 = time = 1
value = 6000, 0
;-------------------------------------
[State 1000, PalFX]
type = PalFX
trigger1 = animelemtime(4)>=0
time = 2
add = 140,60,-55
color = 1
ignorehitpause = 1

[State 1412, EnvShake]
type = EnvShake
trigger1 = animelemtime(4)=0
time = 3
ampl = -8
freq = 95
phase = 95

[State 1412, EnvColor];爆発時
type = EnvColor
trigger1 = animelemtime(4)=0
persistent = 0
ignorehitpause = 1
time = 2
value = 255,255,255
under = 2

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 3201

;---------------------------------------------------------------------------
;轟炎招来(1回転)
[Statedef 3201]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 0
velset = 0,0
anim = 3201
ctrl = 0
sprpriority = 2

[State 1000, 音を鳴らす];声
type = PlaySnd
trigger1 = animelem = 1
value = 3200, 0
channel = 0
volume = 100

[State 1000, PosAdd]
type = PosAdd
trigger1 = animelem = 2
trigger2 = animelem = 3
trigger3 = animelem = 5
x = 5

[State 1000, PosAdd]
type = PosAdd
trigger1 = animelem = 4
x = 20

[State 1000, PosAdd]
type = PosAdd
trigger1 = animelem = 6
x = 15

[State 1000, PosAdd]
type = PosAdd
trigger1 = animelem = 8
x = -8

[State 801, Explod];炎エフェクト
type = Explod
trigger1 = animelem = 1
anim = 3251
ID = 3251
pos = 0, -50
postype = p1
facing = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 801, Explod];炎エフェクト
type = Explod
trigger1 = animelem = 4
anim = 3251
ID = 3251
pos = 0, -24
postype = p1
facing = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[state 1000, varset]
type = varset
trigger1 = var(14) = 0
trigger1 = enemynear,gethitvar(hitcount)<=9
trigger2 = var(14) = 1
trigger2 = enemynear,gethitvar(hitcount)<=13
var(19) = 1

[state 1000, varset]
type = varset
trigger1 = var(14) = 0
trigger1 = enemynear,gethitvar(hitcount)>9
trigger2 = var(14) = 1
trigger2 = enemynear,gethitvar(hitcount)>13
var(19) = 2

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelem = 2
attr = S, HA
animtype  = hard
damage    = floor(25/var(19)), 6
getpower  = 0, 0
priority  = 5, hit
guardflag = MA
pausetime = 3,2
sparkxy = -15,-60+(animelem=8)*20
sparkno = s4003
guard.sparkno = s4012
hitsound = s1, 20
guardsound = s121,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 25
ground.velocity = -1.5
guard.slideTime = 16
guard.velocity = -2
air.velocity = -1,-7
yaccel = .4
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.fall = 1
fall.recover = 0
id = 3201
palfx.time = 48
palfx.mul = 240,200,100
palfx.sinadd = 63,65,68,18
palfx.add = 230,180,124
palfx.invertall = 1
kill = 0

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelem = 4
trigger2 = animelem = 6
trigger3 = animelem = 8
attr = S, HA
animtype  = hard
damage    = floor(8/var(19)), 4
getpower  = 0, 0
priority  = 5, hit
guardflag = MA
pausetime = 3,2
sparkxy = -15,-60+(animelem=8)*20
sparkno = s4003
guard.sparkno = s4012
hitsound = s1, 20
guardsound = s121,0
ground.type = low
ground.slidetime = 15
ground.hittime  = 25
ground.velocity = -1.5
guard.slideTime = 16
guard.velocity = -2
air.velocity = -1,-7
yaccel = .4
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.fall = 1
fall.recover = 0
id = 3201
palfx.time = 48
palfx.mul = 240,200,100
palfx.sinadd = 63,65,68,18
palfx.add = 230,180,124
palfx.invertall = 1
kill = 0

[State 1000, PalFX]
type = PalFX
trigger1 = 1
time = 2
add = 140,60,-55
color = 1
ignorehitpause = 1

[State 1000, ステート変更]
type = ChangeState
trigger1 = animtime = 0
value = 3202

;---------------------------------------------------------------------------
;轟炎招来(2回転)
[Statedef 3202]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 0
velset = 0,0
anim = 3202
ctrl = 0
sprpriority = 2

[State 1000, PosAdd]
type = PosAdd
trigger1 = animelem = 2
trigger2 = animelem = 3
trigger3 = animelem = 5
x = 5

[State 1000, PosAdd]
type = PosAdd
trigger1 = animelem = 4
x = 20

[State 1000, PosAdd]
type = PosAdd
trigger1 = animelem = 6
x = 15

[State 1000, PosAdd]
type = PosAdd
trigger1 = animelem = 8
x = -8

[State 1000, AssertSpecial]
Type = AssertSpecial
Trigger1 = NumTarget(3201)
trigger2 = NumTarget(3202)
Flag = NoJuggleCheck

[State 801, Explod];炎エフェクト
type = Explod
trigger1 = animelem = 1
anim = 3251
ID = 3251
pos = 0, -50
postype = p1
facing = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 801, Explod];炎エフェクト
type = Explod
trigger1 = animelem = 4
anim = 3251
ID = 3251
pos = 0, -24
postype = p1
facing = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[state 1000, varset]
type = varset
trigger1 = var(14) = 0
trigger1 = enemynear,gethitvar(hitcount)<=9
trigger2 = var(14) = 1
trigger2 = enemynear,gethitvar(hitcount)<=13
var(19) = 1

[state 1000, varset]
type = varset
trigger1 = var(14) = 0
trigger1 = enemynear,gethitvar(hitcount)>9
trigger2 = var(14) = 1
trigger2 = enemynear,gethitvar(hitcount)>13
var(19) = 2

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelem = 1
trigger2 = animelem = 4
trigger3 = animelem = 6
attr = S, HA
animtype  = hard
damage    = floor(8/var(19)), 4
getpower  = 0, 0
priority  = 5, hit
guardflag = MA
pausetime = 3,2
sparkxy = -15,-60+(animelem=8)*20
sparkno = s4003
guard.sparkno = s4012
hitsound = s1, 20
guardsound = s121,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 25
ground.velocity = -1.5
guard.slideTime = 16
guard.velocity = -1.5
air.velocity = -1,-7
yaccel = .4
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.fall = 1
fall.recover = 0
id = 3202
palfx.time = 48
palfx.mul = 240,200,100
palfx.sinadd = 63,65,68,18
palfx.add = 230,180,124
palfx.invertall = 1
kill = 0

[State 1000, PalFX]
type = PalFX
trigger1 = 1
time = 2
add = 140,60,-55
color = 1
ignorehitpause = 1

[State 1412, EnvColor];フラッシュ
type = EnvColor
triggerall = movehit
trigger1 = animelemtime(4)>=0
trigger1 = animelemtime(5)<0
trigger2 = animelemtime(6)>=0
trigger2 = animelemtime(7)<0
;persistent = 0
ignorehitpause = 1
time = 1
value = 255,255,255
under = 2

[State 1000, ステート変更]
type = ChangeState
trigger1 = animtime = 0
value = 3204 - var(14)

;---------------------------------------------------------------------------
;轟炎招来(3回転)
[Statedef 3203]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 0
velset = 0,0
anim = 3203
ctrl = 0
sprpriority = 2

[State 1000, PosAdd]
type = PosAdd
trigger1 = animelem = 3
trigger2 = animelem = 4
trigger3 = animelem = 6
x = 5

[State 1000, PosAdd]
type = PosAdd
trigger1 = animelem = 5
x = 20

[State 1000, PosAdd]
type = PosAdd
trigger1 = animelem = 7
x = 15

[State 1000, PosAdd]
type = PosAdd
trigger1 = animelem = 9
x = -8

[State 1000, AssertSpecial]
Type = AssertSpecial
Trigger1 = NumTarget(3202)
trigger2 = NumTarget(3203)
Flag = NoJuggleCheck

[State 801, Explod];炎エフェクト
type = Explod
trigger1 = animelem = 1
anim = 3251
ID = 3251
pos = 0, -50
postype = p1
facing = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 801, Explod];炎エフェクト
type = Explod
trigger1 = animelem = 4
anim = 3251
ID = 3251
pos = 0, -24
postype = p1
facing = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[state 1000, varset]
type = varset
trigger1 = var(14) = 0
trigger1 = enemynear,gethitvar(hitcount)<=9
trigger2 = var(14) = 1
trigger2 = enemynear,gethitvar(hitcount)<=13
var(19) = 1

[state 1000, varset]
type = varset
trigger1 = var(14) = 0
trigger1 = enemynear,gethitvar(hitcount)>9
trigger2 = var(14) = 1
trigger2 = enemynear,gethitvar(hitcount)>13
var(19) = 2

[State 1000, ヒット定義]
type = HitDef
trigger1 = animelem = 2
trigger2 = animelem = 4
trigger3 = animelem = 6
trigger4 = animelem = 8
attr = S, HA
animtype  = hard
damage    = floor(8/var(19)), 4
getpower  = 0, 0
priority  = 5, hit
guardflag = MA
pausetime = 3,2
sparkxy = -15,-60+(animelem=8)*20
sparkno = s4003
guard.sparkno = s4012
hitsound = s1, 20
guardsound = s121,0
ground.type = low
ground.slidetime = 15
ground.hittime  = 25
ground.velocity = -1.5
guard.slideTime = 16
guard.velocity = -2
air.velocity = -1,-7
yaccel = .4
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.fall = 1
fall.recover = 0
id = 3202
palfx.time = 48
palfx.mul = 240,200,100
palfx.sinadd = 63,65,68,18
palfx.add = 230,180,124
palfx.invertall = 1
kill = 0

[State 1000, PalFX]
type = PalFX
trigger1 = 1
time = 2
add = 140,60,-55
color = 1
ignorehitpause = 1

[State 1412, EnvColor];フラッシュ
type = EnvColor
triggerall = movehit
trigger1 = animelemtime(2)>=0
trigger1 = animelemtime(3)<0
trigger2 = animelemtime(4)>=0
trigger2 = animelemtime(5)<0
trigger3 = animelemtime(6)>=0
trigger3 = animelemtime(7)<0
trigger4 = animelemtime(8)>=0
trigger4 = animelemtime(9)<0
;persistent = 0
ignorehitpause = 1
time = 1
value = 255,255,255
under = 2

[State 1000, ステート変更]
type = ChangeState
trigger1 = animtime = 0
value = 3204

;---------------------------------------------------------------------------
;轟炎招来(フィニッシュ)
[Statedef 3204]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
velset = 0,0
anim = 3204
ctrl = 0
sprpriority = 2

[State 801, Explod];炎エフェクト
type = Explod
trigger1 = animelem = 1
anim = 3251
ID = 3251
pos = 0, -50
postype = p1
facing = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 801, Explod];炎エフェクト
type = Explod
trigger1 = animelem = 4
anim = 3251
ID = 3251
pos = 76, -71
postype = p1
facing = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[state 1000, varset]
type = varset
trigger1 = var(14) = 0
trigger1 = enemynear,gethitvar(hitcount)<=9
trigger2 = var(14) = 1
trigger2 = enemynear,gethitvar(hitcount)<=13
var(19) = 1

[state 1000, varset]
type = varset
trigger1 = var(14) = 0
trigger1 = enemynear,gethitvar(hitcount)>9
trigger2 = var(14) = 1
trigger2 = enemynear,gethitvar(hitcount)>13
var(19) = 2

[State 1000, ヒット定義];最終段
type = HitDef
trigger1 = animelem = 4
attr = S, HA
animtype  = diagup
damage    = floor(116/var(19)), 12
getpower  = 0, 0
priority  = 5, hit
guardflag = MA
pausetime = 16,15
sparkxy = -15,-70
sparkno = s4003
guard.sparkno = s4012
hitsound = s1, 20
guardsound = s121,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 25
ground.velocity = -8,-6
guard.slideTime = 16
guard.velocity = -5
air.velocity = -8,-7
yaccel = .45
;ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall = 1
fall.recover = 0
id = 3204
;p2facing = 1
;p2stateno = 3250
palfx.time = 48
palfx.mul = 240,200,100
palfx.sinadd = 63,65,68,18
palfx.add = 230,180,124
palfx.invertall = 1

[State 1000, PalFX]
type = PalFX
trigger1 = animelemtime(6)<0
time = 2
add = 140,60,-55
color = 1
ignorehitpause = 1

[state 1900, TargetState];錐揉み移行
type = TargetState
trigger1 = NumTarget(3204)
trigger1 = MoveHit
value = 3250
id = 3204
persistent = 0
ignorehitpause = 0

[State 1000, ステート変更]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;強轟炎招来(始動)
[Statedef 3210]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= ifelse(var(8)>0,0,ifelse(var(11),-2000,-1000))  ;MAX発動中なら消費ゼロ
velset = 0,0
anim = 3210
ctrl = 0
sprpriority = 2

;----------------------------------
; どこでもキャンセル
; var(8)
;----------------------------------
;MAXゲージ消費
[State 1000, VarSet]
type = VarSet
triggerall = var(8) > 0
trigger1 = time = 0
var(8) = 0
;----------------------------------
[state 1000, varset]
type = varset
trigger1 = time = 0
var(19) = 1
;----------------------------------
[State 1000, 音を鳴らす];声
type = PlaySnd
trigger1 = animelem = 4
value = 1, 20

[state 11000, VarSet]
type = VarSet
trigger1 = time = 0
var(14) = 1

[state 11000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 801, Explod];爆発
type = Explod
trigger1 = animelem = 4
anim = 4041
ID = 4041
pos = 0, -15
postype = p1
facing = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 801, Explod];爆発
type = Explod
trigger1 = animelem = 4
anim = 4041
ID = 4041
pos = 35, 0
postype = p1
facing = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 801, Explod];爆発
type = Explod
trigger1 = animelem = 4
anim = 4041
ID = 4041
pos = -35, 15
postype = p1
facing = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

[State 801, Explod];爆発
type = Explod
trigger1 = animelem = 4
anim = 4041
ID = 4041
pos = 6, 5
postype = p1
facing = 1
sprpriority = 4
ownpal = 1
removeongethit = 1

;--------------------------------Helper
[State 1000, Helper]
type = helper
trigger1 = animelemtime(4)=0
id = 3220
name = "S_Explosion"
pos = 0,0
postype = p1
stateno = 3220
helpertype = normal
keyctrl = 0
ownpal = 1

;-------------------------------------
[State 3000, SuperPause]
type = SuperPause
trigger1 = time = 1
time = 28
movetime = 28
anim = -1
darken = 0
p2defmul = 1

[State 3000, 超必スパーク]
type = Explod
trigger1 = time = 3
anim = 6000
sprpriority = -9999
postype = p1
pos = -39,-57
bindtime = 1
under = 0
ownpal = 1
supermovetime = 999

[State 3000, 超必スパーク]
type = Explod
trigger1 = Time = 13
anim = 6001
sprpriority = 3
postype = p1
pos = -39,-57
bindtime = 1
under = 0
ownpal = 1
supermovetime = 999

[State 3000, フラッシュ]
type = EnvColor
trigger1 = time = 1
value = 255,255,255
persistent = 0
ignorehitpause = 1
time = 4
under = 2

[State 3000, 暗転]
type = EnvColor
trigger1 = time = 5
value = 0,0,0
persistent = 0
ignorehitpause = 1
time = 24
under = 2

[State 3000, 音を鳴らす];超必音
type = PlaySnd
trigger1 = time = 1
value = 6000, 0
;-------------------------------------
[State 1000, PalFX]
type = PalFX
trigger1 = animelemtime(4)>=0
time = 2
add = 140,60,-55
color = 1
ignorehitpause = 1

[State 1412, EnvShake]
type = EnvShake
trigger1 = animelemtime(4)=0
time = 3
ampl = -8
freq = 95
phase = 95

[State 1412, EnvColor];爆発時
type = EnvColor
trigger1 = animelemtime(4)=0
persistent = 0
ignorehitpause = 1
time = 2
value = 255,255,255
under = 2

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 3201

;---------------------------------------------------------------------------
;轟炎招来
;(HELPER)爆発
[Statedef 3220]
type    = A
movetype= A
physics = N
juggle  = 8
poweradd= 0
velset = 0,0
ctrl = 0
anim = 3220
sprpriority = 3

[state 11000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 20001, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 1000, ヒット定義]
type = HitDef
trigger1 = time = 0
attr = A, HP
animtype  = hard
damage    = 66, 9
getpower  = 0, 0
priority  = 5, hit
hitflag = MAFP
guardflag = M
pausetime = 0,10
guard.pausetime = 0,10
sparkxy = -15,-25
sparkno = s4003
guard.sparkno = s4012
hitsound   = s1,20
guardsound = s121,0
ground.type = high
ground.slidetime = 18
ground.hittime  = 20
guard.ctrltime = 10
ground.velocity = -.5
air.velocity = -.5,-4
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .45
air.fall = 1
fall.recover = 0
id = 3220
palfx.time = 25
palfx.mul = 240,200,100
palfx.sinadd = 63,65,68,18
palfx.add = 230,180,124
palfx.invertall = 1

[state 11000, destroyselef]
type = destroyself
trigger1 = animtime = 0

;---------------------------------------------------------------------------
;轟炎招来
;相手やられ（錐揉み）
[Statedef 3250]
type    = S
movetype= H
physics = N
velset = 0,0

;---------------------------------------------
[state 1050, SelfState];Helperは返却
type = SelfState
trigger1 = ishelper
value = PrevStateNo
;---------------------------------------------

[State 5000, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
value = ifelse(SelfAnimExist(5052), 5052, 5030)

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5000, 5] ;State type gets set to aerial if getting hit up
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = Pos Y != 0
statetype = A

[State 5000, 7]
type = ChangeState
trigger1 = HitShakeOver
value = 3251

[State 5000, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
;轟炎招来
;相手やられ
;HITA_UP (initial going up)
[Statedef 3251]
type    = A
movetype= H
physics = N
ctrl = 0

[State 5030, 1]
type = VelAdd;Gravity
trigger1 = 1
y = GetHitVar(yaccel)

[State 5030, 2]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 5030, 5]
type = ChangeState
trigger1 = Anim = 5030
trigger1 = AnimTime = 0
value = 3252 ;HITA_UP (transition)

[State 5030, 4]
type = ChangeState
;triggerall = HitFall
triggerall = Anim = 5052
trigger1 = HitOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 3253 ;HITA_FALL

;---------------------------------------------------------------------------
;轟炎招来
;相手やられ
; HITA_UP_T (transition)
[Statedef 3252]
type    = A
movetype= H
physics = N

[State 5035, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5035)
trigger1 = Anim != [5051,5059] ;Not if in hit up anim
trigger1 = Anim != 5090 ;Not if hit off ground anim
value = 5035

[State 5035, 2]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5035, 4]
type = ChangeState
;triggerall = HitFall
trigger1 = HitOver  ;Hit is over
trigger2 = AnimTime = 0 ;Anim is over
trigger3 = Vel Y > 0    ;Hit ground
trigger3 = Pos Y >= 10  ;.
trigger4 = Time = 0     ;No transition anim
trigger4 = Anim != 5035 ;.
value = 3253 ;HITA_FALL

;---------------------------------------------------------------------------
;轟炎招来
;相手やられ
; HITA_FALL (knocked up, falling)
[Statedef 3253]
type    = A
movetype= H
physics = N

[State 5050, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 5050

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 5050, 3] ;Gravity
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5050, 6]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= ifelse((anim = [5051,5059]) || (anim = [5061,5069]), 0, 25)
value = 5100 ;HIT_BOUNCE

;===========================================================================
; MAX超必殺技
;===========================================================================
;---------------------------------------------------------------------------
;MAX轟欄炎炮
[Statedef 3300]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= ifelse(var(8)>0,-1000,ifelse(var(11),-4000,-3000))
velset = 0,0
anim = 3300
ctrl = 0
sprpriority = 2

;----------------------------------
; どこでもキャンセル
; var(8)
;----------------------------------
;MAXゲージ消費
[State 1000, VarSet]
type = VarSet
triggerall = var(8) > 0
trigger1 = time = 0
var(8) = 0
;----------------------------------
[State 1000, 音を鳴らす];声
type = PlaySnd
trigger1 = animelem = 2
value = 3100, 0
channel = 0
volume = 100

[State 1000, 音を鳴らす];声
type = PlaySnd
trigger1 = animelem = 4
value = 3100, 1

[state 11000, NotHitBy]
type = NotHitBy
trigger1 = animelemtime(4)<0
value = SCA

[state 11000, VarSet];炎方向ランダム量
type = VarSet
trigger1 = animelemtime(4)>=0
trigger1 = animelemtime(27)<0
var(16) = Random%5
;--------------------------------Helper
[State 1000, Helper]
type = helper
trigger1 = animelemtime(4)=0
trigger2 = animelemtime(6)=0
trigger3 = animelemtime(8)=0
trigger4 = animelemtime(10)=0
trigger5 = animelemtime(12)=0
trigger6 = animelemtime(14)=0
trigger7 = animelemtime(16)=0
trigger8 = animelemtime(18)=0
trigger9 = animelemtime(20)=0
trigger10 = animelemtime(22)=0
trigger11 = animelemtime(24)=0
trigger12 = animelemtime(26)=0
id = 3350
name = "MAX_Honoo"
pos = 40,-68
postype = p1
stateno = 3350
helpertype = normal
keyctrl = 0
ownpal = 1

;-------------------------------------
[State 3000, SuperPause]
type = SuperPause
trigger1 = time = 1
time = 28
movetime = 28
anim = -1
darken = 0
p2defmul = 1

[State 3000, 超必スパーク]
type = Explod
trigger1 = time = 3
anim = 6010
sprpriority = -9999
postype = p1
pos = -39,-57
bindtime = 1
under = 0
ownpal = 1
supermovetime = 999

[State 3000, 超必スパーク]
type = Explod
trigger1 = Time = 13
anim = 6011
sprpriority = 3
postype = p1
pos = -39,-57
bindtime = 1
under = 0
ownpal = 1
supermovetime = 999

[State 3000, フラッシュ]
type = EnvColor
trigger1 = time = 2
value = 255,255,255
persistent = 0
ignorehitpause = 1
time = 4
under = 2

[State 3000, 暗転]
type = EnvColor
trigger1 = time = 5
value = 0,0,0
persistent = 0
ignorehitpause = 1
time = 24
under = 2

[State 3000, 音を鳴らす];超必音
type = PlaySnd
trigger1 = time = 2
value = 6000, 1
;-------------------------------------
[State 1000, VarSet];スロー処理
type = VarSet
trigger1 = ProjHitTime(3350)=1
var(17) = 20
persistent = 0
ignorehitpause = 1

[State 800, ステート変更]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;MAX轟欄炎炮
;(HELPER)炎
[Statedef 3350]
type    = A
movetype= A
physics = N
juggle  = 8
poweradd= 0
;velset = 0,0
ctrl = 0
anim = 3150
sprpriority = 3

[state 11000, VarSet];拡大用変数
type = VarSet
trigger1 = time = 0
var(1) = 1

[state 11000, VarSet];拡大用変数
type = VarAdd
;trigger1 =!time
trigger1 = time%2=0
var(1) = 2
;-------------------------------------
;x軸速度決定
[state 11000, VarSet]
type = VarSet
trigger1 = time = 0
trigger1 = root,var(16) = 0 || root,var(16) = 4
fvar(0) = .85

[state 11000, VarSet]
type = VarSet
trigger1 = time = 0
trigger1 = root,var(16) = 1 || root,var(16) = 3
fvar(0) = 2.35

[state 11000, VarSet]
type = VarSet
trigger1 = time = 0
trigger1 = root,var(16) = 2
fvar(0) = 2.8
;-------------------------------------
;y軸速度決定
[state 11000, VarSet]
type = VarSet
trigger1 = time = 0
trigger1 = root,var(16) = 0 || root,var(16) = 1
fvar(1) = -2.6

[state 11000, VarSet]
type = VarSet
trigger1 = time = 0
trigger1 = root,var(16) = 3 || root,var(16) = 4
fvar(1) = 2.6

[state 11000, VarSet]
type = VarSet
trigger1 = time = 0
trigger1 = root,var(16) = 2
fvar(1) = 0
;-------------------------------------
[state 11000, VelSet]
type = VelSet
trigger1 = time = 0
x = fvar(0)

[state 11000, VelSet]
type = VelSet
trigger1 = time = 0
y = fvar(1)

[State 2901, 1]
type = nothitby
trigger1 = 1
value = SCA
time = -1

[State 20001, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 1000, AngleDraw]
Type = AngleDraw
Trigger1 = Time <= 17
;trigger1 = Time % 2 = 0 || time = 0
Value = 0
Scale = (0.0468)*var(1), (0.0468)*var(1)

[State 1000, AngleDraw]
Type = AngleDraw
Trigger1 = Time = 18
Value = 0
Scale = 1, 1

[State 1000, Proj]
type = Projectile
trigger1 = time = 0
projID = 3350
projanim = 3151
projhitanim = -1;3152
projscale = 1, 1
projremove = 1
projremovetime = 32
projhits = 1
projpriority = 4
projsprpriority = 3
air.juggle = 8
;projremovetime = 25
offset = 0, 0               ;出現位置
velocity = fvar(0), fvar(1) ;初速度
ownpal = 1                  ;独自パレ
postype = p1
attr = A, HP
damage   = floor(358*root,fvar(3)), 8
getpower = 0,0
animtype  = up
guardflag = M
hitflag = MAFP
priority = 4, Hit
pausetime = 0, 4
sparkno = s4002
guard.sparkno = s4012
sparkxy = 10, 0
hitsound = s1, 20
guardsound = s121, 0
ground.type = High
ground.slidetime = 18
ground.hittime  = 25
ground.velocity = -4,-10
guard.velocity = -9
air.type = High
air.velocity = -4,-10
fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .45
palfx.time = 58
palfx.mul = 240,200,100
palfx.sinadd = 63,65,68,18
palfx.add = 230,180,124
palfx.invertall = 1

[State 20001, ChangeState]
type = ChangeState
trigger1 = root,NumProjID(3350) = 0
trigger2 = time = 32
value = 3351

;---------------------------------------------------------------------------
;MAX轟欄炎炮
;(HELPER)炎消滅
[Statedef 3351]
type    = A
movetype= A
physics = N
juggle  = 8
poweradd= 0
velset = 0,0
ctrl = 0
anim = 3152
sprpriority = 2

[state 11000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 20001, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[state 11000, destroyselef]
type = destroyself
trigger1 = animtime = 0

;===========================================================================
; MAX2
;===========================================================================
;---------------------------------------------------------------------------
;MAX2
;酔操炎舞(始動)
[Statedef 3400]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= ifelse(var(8)>0,-1000,-3000)
velset = 0,0
anim = 3400
ctrl = 0
sprpriority = 2

;----------------------------------
; どこでもキャンセル
; var(8)
;----------------------------------
;MAXゲージ消費
[State 1000, VarSet]
type = VarSet
triggerall = var(8) > 0
trigger1 = time = 0
var(8) = 0
;----------------------------------
[State 1000, 音を鳴らす];声
type = PlaySnd
trigger1 = animelem = 2
value = 3100, 0
channel = 0
volume = 100

[State 1000, 音を鳴らす];声
type = PlaySnd
trigger1 = animelem = 5
value = 3100, 1

[state 11000, VarSet]
type = VarSet
trigger1 = time = 0
var(15) = 332

[state 11000, NotHitBy]
type = NotHitBy
trigger1 = animelemtime(5)<2
value = SCA
;--------------------------------Helper
[State 1000, Helper]
type = helper
trigger1 = animelemtime(5)=0
id = 3450
name = "Mera"
pos = 48,-68
postype = p1
stateno = 3450
helpertype = normal
keyctrl = 0
ownpal = 1
;-------------------------------------
[State 3000, SuperPause]
type = SuperPause
trigger1 = time = 1
time = 29
movetime = 29
anim = -1
darken = 0
p2defmul = 1

[State 3000, 超必スパーク]
type = Explod
trigger1 = time = 3
anim = 6020
sprpriority = -9999
postype = p1
pos = -39,-57
bindtime = 1
under = 0
ownpal = 1
supermovetime = 999

[State 3000, 超必スパーク]
type = Explod
trigger1 = Time = 13
anim = 6021
sprpriority = 3
postype = p1
pos = -39,-57
bindtime = 1
under = 0
ownpal = 1
supermovetime = 999

[State 3000, フラッシュ]
type = EnvColor
trigger1 = time = 1
value = 255,255,255
persistent = 0
ignorehitpause = 1
time = 4
under = 2

[State 3000, 暗転]
type = EnvColor
trigger1 = time = 5
value = 0,0,0
persistent = 0
ignorehitpause = 1
time = 24
under = 2

[State 3000, 音を鳴らす];超必音
type = PlaySnd
trigger1 = time = 0
value = 6000, 2
;-------------------------------------
[state 3500, Helper];MAX2
type = Helper
trigger1 = time = 27
id = 8000
name = "MAX2"
pos = 0,0
postype = p2
stateno = 8000
helpertype = normal
pausemovetime = 0
keyctrl = 0 
ownpal = 1

[state 3500, Helper];カットイン
type = Helper
trigger1 = time = 1
id = 8100
name = "cut"
pos = 0,0
postype = p1
stateno = 8100
pausemovetime = 999
supermovetime = 999
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1

;-------------------------------------
[State 1000, VarSet];スロー処理
type = VarSet
trigger1 = NumHelper(3450)
trigger1 = Helper(3450),movehit
var(17) = 20
persistent = 0
ignorehitpause = 1

[State 3500, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 1000, ステート変更]
type = ChangeState
trigger1 = var(15) = 0
trigger2 = numhelper(3450)
trigger2 = helper(3450),stateno = 3452
value = 3401

;---------------------------------------------------------------------------
;MAX2
;酔操炎舞(終了)
[Statedef 3401]
type    = S
movetype= A
physics = S
juggle  = 8
poweradd= 0
velset = 0,0
anim = 3401
ctrl = 0
sprpriority = 2

[state 11000, VarSet]
type = VarSet
trigger1 = time = 0
var(15) = 0

[State 1000, ステート変更]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;MAX2
;酔操炎舞
;(HELPER)これはメラゾーマでは無い、余のメラだ
[Statedef 3450]
type    = A
movetype= A
physics = N
juggle  = 8
poweradd= 0
;velset = 0,0
ctrl = 0
anim = 3450
sprpriority = 1

[state 11000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 20001, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 1000, AngleDraw]
Type = AngleDraw
Trigger1 = 1
Value = 0
Scale = 0.0468*2, 0.0468*2

;---------------------------------繰気弾
[State 1000, 0]
Type = VelSet
trigger1 = root,var(59) = 0
Trigger1 = root,command != "holdfwd" && root,command != "holdback"
x = 0

[State 1000, 0]
Type = VelSet
trigger1 = root,var(59) = 0
Trigger1 = root,command != "holdup" && root,command != "holddown"
trigger2 = pos y >= 0
y = 0

[State 1000, 0]
Type = VelSet
trigger1 = root,var(59) = 0
Trigger1 = root,command = "holdfwd"
trigger2 = root,var(59) > 0
trigger2 = p2dist x > 0
x = 1.7

[State 1000, 0]
Type = VelSet
trigger1 = root,var(59) = 0
Trigger1 = root,command = "holdback"
trigger2 = root,var(59) > 0
trigger2 = p2dist x <=0
x = -1.7

[State 1000, 0]
Type = VelSet
trigger1 = root,var(59) = 0
Trigger1 = root,command = "holdup"
trigger2 = root,var(59) > 0
trigger2 = p2dist x = [-2,2]
trigger2 = p2dist y - 50 > 0
y = -1.7

[State 1000, 0]
Type = VelSet
triggerall = pos y < 0
trigger1 = root,var(59) = 0
Trigger1 = root,command = "holddown"
trigger2 = root,var(59) > 0
trigger2 = p2dist x = [-2,2]
trigger2 = p2dist y - 50 <= 0
y = 1.7

;---------------------------------
[State 1000, ヒット定義]
type = HitDef
trigger1 = time = 0
attr = A, HP
animtype  = back
damage    = floor(281*root,fvar(3)), 25
getpower  = 0, 0
priority  = 5, hit
hitflag = MAFP
guardflag = M
pausetime = 2,10
guard.pausetime = 0,10
sparkxy = -15,-25
sparkno = s4002
guard.sparkno = s4012
hitsound   = s1,20
guardsound = s121,0
ground.type = high
ground.slidetime = 18
ground.hittime  = 25
guard.ctrltime = 15
ground.velocity = -7,-8
air.velocity = -7,-8
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .45
fall = 1
fall.recover = 0
id = 3450
palfx.time = 58
palfx.mul = 240,200,100
palfx.sinadd = 63,65,68,18
palfx.add = 230,180,124
palfx.invertall = 1

[State 20001, ChangeState];下段
type = ChangeState
trigger1 = pos y >= -20
value = 3451

[State 20001, ChangeState];爆発
type = ChangeState
trigger1 = movecontact
trigger2 = root,var(59) = 0
trigger2 = root,command = "a" || root,command = "b" || root,command = "c" || root,command = "x" || root,command = "y" || root,command = "z"
trigger3 = root,var(59) > 0
trigger3 = p2dist x<0
value = 3452

[State 20001, ChangeState];消滅
type = ChangeState
trigger1 = root,var(15) = 0
trigger2 = root,movetype = H
value = 3453

[State 3100, デバック(変数確認)]
Type = DisplayToClipBoard
Trigger1 = 1
Text = "var(0)=%d,Py=%.2f\n"
Params = var(0),pos y
IgnoreHitPause = 1

;---------------------------------------------------------------------------
;MAX2
;酔操炎舞
;(HELPER)これはメラゾーマでは無い、余のメラだ(下段)
[Statedef 3451]
type    = A
movetype= A
physics = N
juggle  = 8
poweradd= 0
;velset = 0,0
ctrl = 0
anim = 3450
sprpriority = 1

[state 11000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 20001, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 1000, AngleDraw]
Type = AngleDraw
Trigger1 = 1
Value = 0
Scale = 0.0468*2, 0.0468*2

;---------------------------------繰気弾
[State 1000, 0]
Type = VelSet
trigger1 = root,var(59) = 0
Trigger1 = root,command != "holdfwd" && root,command != "holdback"
x = 0

[State 1000, 0]
Type = VelSet
trigger1 = root,var(59) = 0
Trigger1 = root,command != "holdup" && root,command != "holddown"
trigger2 = pos y >= 0
y = 0

[State 1000, 0]
Type = VelSet
trigger1 = root,var(59) = 0
Trigger1 = root,command = "holdfwd"
trigger2 = root,var(59) > 0
trigger2 = p2dist x > 0
x = 1.7

[State 1000, 0]
Type = VelSet
trigger1 = root,var(59) = 0
Trigger1 = root,command = "holdback"
trigger2 = root,var(59) > 0
trigger2 = p2dist x <=0
x = -1.7

[State 1000, 0]
Type = VelSet
trigger1 = root,var(59) = 0
Trigger1 = root,command = "holdup"
trigger2 = root,var(59) > 0
trigger2 = p2dist x = [-2,2]
trigger2 = p2dist y - 50 > 0
y = -1.7

[State 1000, 0]
Type = VelSet
triggerall = pos y < 0
trigger1 = root,var(59) = 0
Trigger1 = root,command = "holddown"
trigger2 = root,var(59) > 0
trigger2 = p2dist x = [-2,2]
trigger2 = p2dist y - 50 <= 0
y = 1.7

;---------------------------------
[State 1000, ヒット定義]
type = HitDef
trigger1 = time = 0
attr = A, HP
animtype  = back
damage    = floor(281*root,fvar(3)), 15
getpower  = 0, 0
priority  = 5, hit
hitflag = MAFP
guardflag = L
pausetime = 2,10
guard.pausetime = 0,10
sparkxy = -15,-25
sparkno = s4002
guard.sparkno = s4012
hitsound   = s1,20
guardsound = s121,0
ground.type = high
ground.slidetime = 18
ground.hittime  = 25
guard.ctrltime = 15
ground.velocity = -7,-8
air.velocity = -7,-8
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .45
fall = 1
fall.recover = 0
id = 3450
palfx.time = 58
palfx.mul = 240,200,100
palfx.sinadd = 63,65,68,18
palfx.add = 230,180,124
palfx.invertall = 1

[State 20001, ChangeState];下段
type = ChangeState
trigger1 = pos y < -20
value = 3450

[State 20001, ChangeState];爆発
type = ChangeState
trigger1 = movecontact
trigger2 = root,var(59) = 0
trigger2 = root,command = "a" || root,command = "b" || root,command = "c" || root,command = "x" || root,command = "y" || root,command = "z"
trigger3 = root,var(59) > 0
trigger3 = p2dist x<0
value = 3452

[State 20001, ChangeState];消滅
type = ChangeState
trigger1 = root,var(15) = 0
trigger2 = root,movetype = H
value = 3453

;---------------------------------------------------------------------------
;MAX2
;酔操炎舞
;(HELPER)爆発
[Statedef 3452]
type    = A
movetype= A
physics = N
juggle  = 8
poweradd= 0
;velset = 0,0
ctrl = 0
anim = 3452
sprpriority = 3

[state 2901,1]
type = nothitby
trigger1 = 1
value = SCA
time = -1

[State 20001, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 1000, Proj]
type = Projectile
trigger1 = time = 0
projID = 3451
projanim = 3451
projhitanim = 3152
projscale = 1, 1
projremove = 1
projremovetime = 60
projhits = 1
projpriority = 4
projsprpriority = 3
air.juggle = 8
;projremovetime = 25
offset = ceil(random/15), ceil(random/15)          ;出現位置
velocity = 0, 0        ;初速度
ownpal = 1             ;独自パレ
postype = p1
attr = A, HP
damage   = 140, 12
getpower = 0,0
animtype  = up
guardflag = M
hitflag = MAFP
priority = 4, Hit
pausetime = 0, 4
sparkno = s4002
guard.sparkno = s4012
sparkxy = 10, 0
hitsound = s1, 20
guardsound = s121, 0
ground.type = High
ground.slidetime = 18
ground.hittime  = 25
ground.velocity = -4,-9
guard.velocity = -9
air.type = High
air.velocity = -4,-9
fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .45
fall = 1
fall.recover = 0
palfx.time = 58
palfx.mul = 240,200,100
palfx.sinadd = 63,65,68,18
palfx.add = 230,180,124
palfx.invertall = 1

[State 1000, Proj]
type = Projectile
trigger1 = time = 0
projID = 3451
projanim = 3451
projhitanim = 3152
projscale = 1, 1
projremove = 1
projremovetime = 60
projhits = 1
projpriority = 4
projsprpriority = 3
air.juggle = 8
;projremovetime = 25
offset = -ceil(random/15), -ceil(random/15)          ;出現位置
velocity = 0, 0        ;初速度
ownpal = 1             ;独自パレ
postype = p1
attr = A, HP
damage   = 140, 12
getpower = 0,0
animtype  = up
guardflag = M
hitflag = MAFP
priority = 4, Hit
pausetime = 0, 4
sparkno = s4002
guard.sparkno = s4012
sparkxy = 10, 0
hitsound = s1, 20
guardsound = s121, 0
ground.type = High
ground.slidetime = 18
ground.hittime  = 25
ground.velocity = -4,-9
guard.velocity = -9
air.type = High
air.velocity = -4,-9
fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .45
fall = 1
fall.recover = 0
palfx.time = 58
palfx.mul = 240,200,100
palfx.sinadd = 63,65,68,18
palfx.add = 230,180,124
palfx.invertall = 1

[State 1000, Proj]
type = Projectile
trigger1 = time = 0
projID = 3451
projanim = 3451
projhitanim = 3152
projscale = 1, 1
projremove = 1
projremovetime = 60
projhits = 1
projpriority = 4
projsprpriority = 3
air.juggle = 8
;projremovetime = 25
offset = -ceil(random/15), ceil(random/15)          ;出現位置
velocity = 0, 0        ;初速度
ownpal = 1             ;独自パレ
postype = p1
attr = A, HP
damage   = 140, 12
getpower = 0,0
animtype  = up
guardflag = M
hitflag = MAFP
priority = 4, Hit
pausetime = 0, 4
sparkno = s4002
guard.sparkno = s4012
sparkxy = 10, 0
hitsound = s1, 20
guardsound = s121, 0
ground.type = High
ground.slidetime = 18
ground.hittime  = 25
ground.velocity = -4,-9
guard.velocity = -9
air.type = High
air.velocity = -4,-9
fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .45
fall = 1
fall.recover = 0
palfx.time = 58
palfx.mul = 240,200,100
palfx.sinadd = 63,65,68,18
palfx.add = 230,180,124
palfx.invertall = 1

[State 1000, Proj]
type = Projectile
trigger1 = time = 0
projID = 3451
projanim = 3451
projhitanim = 3152
projscale = 1, 1
projremove = 1
projremovetime = 60
projhits = 1
projpriority = 4
projsprpriority = 3
air.juggle = 8
;projremovetime = 25
offset = ceil(random/15), -ceil(random/15)          ;出現位置
velocity = 0, 0        ;初速度
ownpal = 1             ;独自パレ
postype = p1
attr = A, HP
damage   = 140, 12
getpower = 0,0
animtype  = up
guardflag = M
hitflag = MAFP
priority = 4, Hit
pausetime = 0, 4
sparkno = s4002
guard.sparkno = s4012
sparkxy = 10, 0
hitsound = s1, 20
guardsound = s121, 0
ground.type = High
ground.slidetime = 18
ground.hittime  = 25
ground.velocity = -4,-9
guard.velocity = -9
air.type = High
air.velocity = -4,-9
fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .45
fall = 1
fall.recover = 0
palfx.time = 58
palfx.mul = 240,200,100
palfx.sinadd = 63,65,68,18
palfx.add = 230,180,124
palfx.invertall = 1

[State 1000, Proj]
type = Projectile
trigger1 = time = 0
projID = 3451
projanim = 3451
projhitanim = 3152
projscale = 1, 1
projremove = 1
projremovetime = 60
projhits = 1
projpriority = 4
projsprpriority = 3
air.juggle = 8
;projremovetime = 25
offset = ceil(random/10), -ceil(random/15)          ;出現位置
velocity = 0, 0        ;初速度
ownpal = 1             ;独自パレ
postype = p1
attr = A, HP
damage   = 140, 12
getpower = 0,0
animtype  = up
guardflag = M
hitflag = MAFP
priority = 4, Hit
pausetime = 0, 4
sparkno = s4002
guard.sparkno = s4012
sparkxy = 10, 0
hitsound = s1, 20
guardsound = s121, 0
ground.type = High
ground.slidetime = 18
ground.hittime  = 25
ground.velocity = -4,-9
guard.velocity = -9
air.type = High
air.velocity = -4,-9
fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
yaccel = .45
fall = 1
fall.recover = 0
palfx.time = 58
palfx.mul = 240,200,100
palfx.sinadd = 63,65,68,18
palfx.add = 230,180,124
palfx.invertall = 1

[state 11000, destroyselef]
type = destroyself
trigger1 = time = 1

;---------------------------------------------------------------------------
;MAX2
;酔操炎舞
;(HELPER)炎消滅
[Statedef 3453]
type    = A
movetype= A
physics = N
juggle  = 8
poweradd= 0
velset = 0,0
ctrl = 0
anim = 3152
sprpriority = 1

[State 1000, AngleDraw]
Type = AngleDraw
Trigger1 = 1
Value = 0
Scale = 0.0468*2, 0.0468*2

[state 11000, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 20001, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[state 11000, destroyselef]
type = destroyself
trigger1 = animtime = 0

;---------------------------------------------------------------------------
;MAX発動
[Statedef 900]
type = S
movetype = I
physics = N
anim = 900
velset = 0,0
sprpriority = 2
poweradd = -1000
ctrl = 0

[State 900, PlaySnd]
type = PlaySnd
trigger1 = animelem = 6
value = 900,0

[State 900, VarSet]
type = VarSet
trigger1 = time = 0
var(8) = 900

[State 900, Explod]
type = Explod
trigger1 = animelem = 6
anim = 6001
sprpriority = 3
postype = p1
pos = -14,-72
bindtime = 1
under = 0
ownpal = 1
supermovetime = 999

[State 1412, EnvShake]
type = EnvShake
trigger1 = animelem = 6
time = 10
;ampl = -8
;freq = 95
;phase = 95

[State 3000,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;クイックMAX発動
[Statedef 901]
type = S
movetype = I
physics = N
anim = 901
velset = 0,0
sprpriority = 1
poweradd = -2000
ctrl = 0

[State 900, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 900,1
volume = 250

[State 900, Explod]
type = null;Explod
trigger1 = time = 0
anim = 6001
sprpriority = 3
postype = p1
pos = -14,-72
bindtime = 1
under = 0
ownpal = 1
supermovetime = 999

[State 900, VarSet]
type = VarSet
trigger1 = time = 0
var(8) = 900

[State 3000,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; HITA_FALL (knocked up, falling)
[Statedef 5050]
type    = A
movetype= H
physics = N

[State 5050, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 5050

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 5050, 3] ;Gravity
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5050, 4] ;Recover near ground
type = ChangeState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5200 ;HITFALL_RECOVER

[State 5050, 5]; Recover in mid air
type = ChangeState
triggerall = Vel Y > -1
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5210 ;HITFALL_AIRRECOVER

[State 5050, 6]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= ifelse((anim = [5051,5059]) || (anim = [5061,5069]), 0, 25)
value = 5100 ;HIT_BOUNCE

;---------------------------------------------------------------------------
; HIT_FALLRECOVER (still falling)
[Statedef 5200]
type    = A
movetype= H
physics = N

[State 5200, 1] ;Change anim if done with transition
type = ChangeAnim
trigger1 = Anim = 5035
trigger1 = AnimTime = 0
value = 5050

[State 5200, 2]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5200, 3]
type = SelfState 
trigger1 = var(59)=0
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 10
value = 5201

[State 5200, 3]
type = SelfState 
trigger1 = var(59)>0
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 10
value = 5201

;---------------------------------------------------------------------------
; HIT_FALLRECOVER (on the ground)
[Statedef 5201]
type    = S
movetype= H
physics = S
anim = 5200

[State 5201, 1] ;Turn if not facing opponent
type = Turn
trigger1 = Time = 0
trigger1 = p2dist X < -5

[State 5201, 2]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5201, 2.1]
type = VelSet
trigger1 = Time >= 0
trigger1 = Time <= 18
x = -2

[State 5201, 3]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5201, 4]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 5201, 5] ;Blink white
type = PalFX
trigger1 = Time = 0
time = 3
add = 128,128,128 ;256,256,256

[State 5201, 6]
type = GameMakeAnim
trigger1 = Time = 1
value = 60
pos = 0, 0
under = 1

[State 5201, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;===========================================================================
; 常時監視ステート（−２）
;===========================================================================
;---------------------------------------------------------------------------
; 通常の食らい状態（Statedef 5000〜5199間）でも、
; 相手に（「P2StateNo」や「TargetState」等で）制御を奪われても、
; 常に登録したステートコントローラが有効になります。
; サブシステム等を制御する時に重宝するでしょう。
;---------------------------------------------------------------------------
[Statedef -2]
;===========================================================================
[State -2, デバック(変数確認)]
Type = DisplayToClipBoard
Trigger1 = 1
Text = "AI=%d,fvar(38)=%.2f,fvar(39)=%.2f,var(10)=%2d,hittime=%d\n"
Params = var(59),fvar(38),fvar(39),var(10),enemynear,gethitvar(hittime)
IgnoreHitPause = 1

[State -2, 距離確認デバック]
type = AppendToClipboard
trigger1 = 1
text =  "P2X:%.2f,P2Y:%.2f,Vx%.2f,Vy%.2f,Px%.2f\n"
params = P2BodyDist x,P2BodyDist y,vel x,vel y,pos x
IgnoreHitPause = 1
;============================================================================
;[state -2, VarSet];デバッグ用
;type = VarSet
;trigger1 = movetype=H
;trigger1 = statetype!=A
;;trigger1 = stateno>=5000
;trigger1 = stateno!=[120,159]
;trigger1 = roundstate = 2
;;trigger1 = var(49)!=stateno
;trigger1 = prevstateno<5000
;trigger1 = prevstateno!=[150,159]
;trigger1 = stateno>199
;trigger1 = prevstateno>199
;var(49) = prevstateno

;-----------------------------------
;イントロ関係
;-----------------------------------
[State -2, 2人目のイントロ]
type = ChangeState
value = 190
triggerall = RoundsExisted = 0
triggerall = TeamMode = Turns
trigger1 = stateno = 5900

;-----------------------------------
;スロー処理
;-----------------------------------
[state -2, VarAdd]
type = VarAdd
trigger1 = 1
persistent = 0
ignorehitpause = 1
var(17) = -1

[state -2, Pause]
type = Pause
trigger1 = var(17) >= 1
trigger1 = gametime % 2
persistent = 0
ignorehitpause = 1
time = 1

;-----------------------------------
;ダメージボイス
;-----------------------------------
[State -2, ダメージボイス]
type = PlaySnd
triggerall = Time = 1
triggerall = Alive
triggerall = Random < 500
trigger1 = stateno = 5000 || stateno = 5010 || stateno = 5020
trigger2 = stateno = 5070 || stateno = 5080
;trigger3 = stateno = 5210 || stateno = 5220 || stateno = 5221 || stateno = 5222
value = 4218,21 + (Random%3)
channel = 0
volume = 200
 
[State -2, 叩きつけられボイス]
type = PlaySnd
triggerall = Time = 1
triggerall = Alive
triggerall = Random < 500
trigger1 = stateno = 5100
value = 4218,23 + (random%2)
channel = 0
volume = 180

;-----------------------------------
;カウンター関係
;-----------------------------------
[state -2]
type = varset
trigger1 = enemynear,movetype != A
var(1) = 0

[state -2]
type = varset
trigger1 = enemynear,movetype = A
var(1) = 1

;-----------------------------------
;望月酔時間管理
;var(9)
;-----------------------------------
[State -2, VarAdd]
type = VarAdd
trigger1 = var(9) > 0
var(9) = -1

[State -2, VarSet]
type = VarSet
trigger1 = roundstate!=2
trigger2 = movetype = H
var(9) = 0

;-----------------------------------
;MAX2酔操炎舞時間管理
;var(15)
;-----------------------------------
[State -2, VarSet];リセット
type = VarSet
trigger1 = var(15) > 0
trigger1 = movetype = H
var(15) = 0

[State -2, VarAdd]
type = VarAdd
trigger1 = var(15) > 0
var(15) = -1

;-----------------------------------
;MAX発動中のゲージ管理
;var(7): ゲージ量記憶
;var(8): MAXゲージ
;-----------------------------------
[state -2 ,VarSet];MAX発動時のゲージ量を記憶
type = varset
trigger1 = var(8) = 900
var(7) = Power

[state -2, VarSet]
type = VarSet
trigger1 = var(8) < 0
trigger2 =!alive || Life = 0
var(8) = 0

[state -2, VarAdd]
type = varadd
trigger1 = var(8) > 0
var(8) = -1

[state -2, PowerSet]
type = PowerSet
trigger1 = var(8) > 0
trigger1 = stateno != [3000,3999]
value = var(7)
ignorehitpause = 1

[State -2, PalFx];点滅
type = PalFx
trigger1 = var(8) > 0
trigger1 = gametime % 2 = 0
time = 1
add = 80,80,0
;color = 1
ignorehitpause = 1
;-----------------------------------
;スパキャンゲージ消費リセット
;var(11)
;-----------------------------------
;SCゲージ消費用
[State -2, varset]
type = varset
trigger1 = stateno != 1410
trigger1 = stateno != [1500,1502]
trigger1 = stateno != [1510,1512]
trigger1 = stateno != [1700,1702]
trigger1 = stateno != [1710,1712]
trigger1 = stateno != 1900
trigger1 = stateno != [1910,1912]
var(11) = 0
;-----------------------------------
;スパキャン点滅
;-----------------------------------
;SC点滅用変数リセット
[State -2, varset]
type = varset
trigger1 = stateno != 3000 ;酒仙靠
trigger1 = stateno != 3100 ;轟欄炎炮
trigger1 = stateno != 3110 ;轟欄炎炮
trigger1 = stateno != 3200 ;轟炎招来
trigger1 = stateno != 3210 ;轟炎招来
trigger1 = stateno != 3300 ;MAX轟欄炎炮
var(6) = 0

;SC点滅用
[State -2, varset]
type = varset
triggerall = MoveType != H
triggerall = time <= 20
trigger1 = stateno = 3000 ;酒仙靠
trigger2 = stateno = 3100 ;轟欄炎炮
trigger3 = stateno = 3110 ;轟欄炎炮
trigger4 = stateno = 3200 ;轟炎招来
trigger5 = stateno = 3210 ;轟炎招来
trigger6 = stateno = 3300 ;MAX轟欄炎炮
var(6) = 1

[State -2, palfx];SC点滅
type = palfx
triggerall = time <= 20
triggerall = time % 2 = 0
triggerall = var(6) = 1
triggerall = MoveType != H
trigger1 = prevstateno = 1410
trigger2 = prevstateno = [1500,1502]
trigger3 = prevstateno = [1510,1512]
trigger4 = prevstateno = [1700,1702]
trigger5 = prevstateno = [1710,1712]
trigger6 = prevstateno = 1900
trigger7 = prevstateno = [1910,1912]
time = 1
add = 256,256,256
color = 1
ignorehitpause = 1
;-----------------------------------
;コンボ補正
;-----------------------------------
[state -2, varset];リセット
type = varset
trigger1 = 1
Trigger1 = RoundState = 0
trigger2 = p2MoveType != H
trigger3 = enemynear,stateno = [120,155]
trigger4 = movetype = A
trigger4 = stateno = [3200,3210]
fvar(0) = 1.0

[state -2, varset];値が負数なら0にする
type = VarSet
trigger1 = p2MoveType = H
trigger1 = enemynear,gethitvar(hitcount) >= 30
trigger1 = stateno != [3200,3210]
fvar(0) = 0.01

[state -2, varset];補正
type = varset
trigger1 = enemynear,MoveType = H
trigger1 = enemynear,gethitvar(hitcount) > 1
trigger1 = enemynear,gethitvar(hitcount) < 30
trigger1 = stateno != [3200,3210]
fvar(0) = ((100.0-(25.0+(enemynear,gethitvar(hitcount)/2.0)*5.0))/100.0)
IgnoreHitPause = 1

[state -2, varset];リセット
type = varset
trigger1 = enemynear,movetype != A
fvar(1) = 0

[state -2, varset];カウンター
type = varset
trigger1 = enemynear,movetype = A
fvar(1) = 0.05

[state -2, varset];リセット
type = varset
trigger1 = var(8) = 0
fvar(2) = 1.0

[state -2, varset];MAX発動中
type = varset
trigger1 = var(8) > 0
fvar(2) = 0.9

[state -2, varset];総括
type = varset
trigger1 = 1
fvar(3) = (fvar(0)+fvar(1))*fvar(2)

[state -2, attackmulset];攻撃力の倍数指定
type = attackmulset
trigger1 = 1
value = fvar(3)

;-----------------------------------
;ヒット方向関係
;-----------------------------------
[State -2,1]
type = varset
trigger1 = p2BodyDist X >= 0
var(18) = 1

[State -2,1]
type = varset
trigger1 = p2BodyDist X <= -1
var(18) = -1

;-----------------------------------
;その他
;-----------------------------------
[State -2, StopSnd];ダッシュの音止め
type = StopSnd
trigger1 = stateno != 100 && stateno != 99
channel = 1

[State -2, VarAdd];ハイジャンプ判定
type = varadd
trigger1 = 1
trigger1 = var(3)>-100
v = 3
value = -1

;-----------------------------------
;試合開始前まで無敵
;-----------------------------------
[State -2, NotHitBy];無敵
type = NotHitBy
trigger1 = roundstate = 0
trigger2 = roundstate = 1
trigger3 = stateno = 5900
value = SCA

;===========================================================================
; 準常時監視ステート（−３）
;===========================================================================
;---------------------------------------------------------------------------
; こちらは通常の食らい状態以外の「P2StateNo」や「TargetState」等で制御された、
; 作成者が任意に指定した相手側の食らいステートに限り、
; 登録したステートコントローラが有効にはなりません。
; −１や−２と上手く使い分けて行きましょう。
;---------------------------------------------------------------------------
[Statedef -3]
;-----------------------------------
;MAXゲージ呼び出し
;Helper(7000)
;-----------------------------------
[state -3, Helper];MAXゲージ呼び出し
type = Helper
trigger1 = NumHelper(7000)=0
trigger1 = var(8)>0
id = 7000
name = "max"
pos = 0,0
postype = p1
stateno = 7000
pausemovetime = 999
supermovetime = 999
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
;-----------------------------------
;ここは「ジャンプ」か「バックステップ」をした後に
;着地する音を鳴らす設定をしています。
;-----------------------------------
[State -3, 音を鳴らす]
type = PlaySnd
triggerall = Time = 1
trigger1 = stateno = 52   ;着地ステート
trigger2 = stateno = 106  ;バックステップ後の着地ステート
trigger3 = stateno = 1502 ;弱柳燐蓬莱
trigger4 = stateno = 1512 ;強柳燐蓬莱
value = 40, 2

[State -3, jump];ジャンプ音
type = PlaySnd
triggerall = time = 1
trigger1 = stateno = 40 || stateno = 41
trigger1 = var(3) <= 0
value = 40, 0
channel = 3

[State -3, PlaySnd];ジャンプ音
type = PlaySnd
triggerall = time = 1
trigger1 = stateno = 40 || stateno = 41
trigger1 = var(3) > 1
trigger2 = stateno = 1401 ;龍蛇反ほう
value = 40, 1
channel = 3

[State -3, PlaySnd];バックダッシュ音
type = PlaySnd
triggerall = Time = 1
;trigger1 = stateno = 100 
trigger1 = stateno = 105 
value = 105, 0
;-----------------------------------
;ハイジャンプ処理
;-----------------------------------
[State -3, VarSet];ハイジャンプ消去
type = VarSet
trigger1 = stateno = 52
trigger1 = time = 0
v = 3
value = 0

[State -3, VarSet];ハイジャンプ判定
type = VarSet
trigger1 = stateno = 10
trigger1 = time = 0
trigger2 = stateno = 100 || stateno = 99 || (var(59)>0&&p2bodydist x >=100&&var(56)<=5) || (var(59)>0&&var(56)<=8&&enemynear(var(58)),stateno=5120)
trigger3 = var(59)>0 && fvar(39)=4
v = 3
value = 20

[State -3, VelSet];ハイジャンプ前方
type = VelSet
trigger1 = stateno = 50
trigger1 = anim = 42
trigger1 = time = 1
trigger1 = var(3) >= 1
x = 5

[State -3, VelSet];ハイジャンプ後方
type = VelSet
trigger1 = stateno = 50
trigger1 = anim = 43
trigger1 = time = 1
trigger1 = var(3) >= 1
x = -6
;-----------------------------------
;小ジャンプ処理
;-----------------------------------
[State -3, VarSet];小ジャンプ判定
type = VarSet
triggerall = stateno = 40 || stateno = 41
trigger1 = var(59)=0
trigger1 = command != "holdup"
trigger2 = var(59)>0 && fvar(39)!=4
trigger2 = p2bodydist x <= 100 && enemynear(var(58)),statetype!=L && random<=300
trigger3 = var(59)>5 && fvar(39)!=4
trigger3 = p2bodydist x <= 60 && enemynear(var(58)),stateno=5120
v = 4
value = 1

[State -3, VarSet];小ジャンプ消去
type = VarSet
triggerall = stateno = 40 || stateno = 41
trigger1 = var(59)=0
trigger1 = command = "holdup"
trigger2 = var(59)>0
trigger2 = p2bodydist x > 100 || (enemynear(var(58)),statetype=A && enemynear(var(58)),pos y <=-35) || fvar(39)=4
v = 4
value = 0

[State -3, VelAdd];小ジャンプ
type = VelAdd
triggerall = stateno = 50
trigger1 = time = 1
trigger1 = var(4) = 1
y = 4;3
;-----------------------------------
;残像処理
;-----------------------------------
[State -3, AfterImage];残像
type = AfterImage
trigger1 = stateno = 50
trigger1 = time = 1
trigger1 = var(3) >= 1
time = 35
length = 3
frameGap = 1
timegap = 6
palbright = 0,0,0
palcontrast = 130,130,130
paladd = 0,0,0
palmul = 1,1,1
trans = add1

[State -3, AfterImageTime]
type = AfterImageTime
trigger1 = stateno = 52 ;着地
trigger1 = Time = 1
time = 0
;-----------------------------------
;その他
;-----------------------------------
[State -3, 飛び越え防止]
type = Width
triggerall = stateno != 801 && stateno != 804
trigger1 = FrontEdgeDist < 8 && MoveType != H
edge = 3,

;---------------------------------------------------------------------------
;AIヘルパー
;---------------------------------------------------------------------------
[Statedef 20000]
anim=20000;なにも表示しないｱﾆﾒでもいいけど入れなくても全然問題ない
ctrl=0

[State 20000]
type = assertspecial
trigger1 = 1
flag = invisible

[State 20000]
type = NotHitBy
value = SCA
trigger1 = 1

[State 20000,間違いで本体が来たら立ちへ移行]
type=selfstate
trigger1=!ishelper
value=0

[State 20000,プレイヤー判定]
type=varset
trigger1=command="up"&&root,command="up"
trigger2=command="down"&&root,command="down"
trigger3=command="back"&&root,command="back"
trigger4=command="fwd"&&root,command="fwd"
trigger5=command="a"&&root,command="a"
trigger6=command="b"&&root,command="b"
trigger7=command="c"&&root,command="c"
trigger8=command="x"&&root,command="x"
trigger9=command="y"&&root,command="y"
trigger10=command="z"&&root,command="z"
trigger11=command="start"&&root,command="start"
var(59)=-1

[State 20000,立ったら消失]
Type = DestroySelf
triggerAll = isHelper
Trigger1 = root,var(59)||var(59)=-1
trigger2=command="up"&&root,command="up"
trigger3=command="down"&&root,command="down"
trigger4=command="back"&&root,command="back"
trigger5=command="fwd"&&root,command="fwd"
trigger6=command="a"&&root,command="a"
trigger7=command="b"&&root,command="b"
trigger8=command="c"&&root,command="c"
trigger9=command="x"&&root,command="x"
trigger10=command="y"&&root,command="y"
trigger11=command="z"&&root,command="z"
trigger12=command="start"&&root,command="start"

[State 20000,ﾌﾗｸﾞON]
type=varset
triggerall=var(59)!=-1
trigger1=root,command="up"
trigger2=root,command="down"
trigger3=root,command="back"
trigger4=root,command="fwd"
trigger5=root,command="a"
trigger6=root,command="b"
trigger7=root,command="c"
trigger8=root,command="x"
trigger9=root,command="y"
trigger10=root,command="z"
trigger11=root,command="start"
var(59)=1

