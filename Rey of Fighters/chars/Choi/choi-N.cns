;=====================================================================
;  CNS File For "CHOI BOUNGE"                               Made By H"         
;=====================================================================

;---------------------------------------------------------------------
; 変数表
;キャラクター用 var(10-29)
;	var(10) : 旋風飛猿刺突用カウンタ
;	var(11) : ボタン押しっぱなし判定
;	var(12) : 灼死X軸ランダムフラグ
;	var(13) : 灼死y軸ランダムフラグ
;	var(14) : ヒット数カウント1
;	var(15) : ヒット数カウント2
;	var(16) : 飛び道具ヒット処理
;	var(17) : 方向転換用
;デフォルトシステム用 fvar(1-39)
;	fvar(1) : X軸位置計測
;	fvar(2) : Y軸位置計測
;	fvar(3) : ボタン入力フラグ
;	fvar(4) : キャラ判別フラグ
;	fvar(28) : ストライカーステート設定
;
;---------------------------------------------------------------------

;---------------------------------------------------------------------
; 基本設定
[Data]
life = 1000          ; 体力ゲージ、上限値（デフォルト：1000）
attack = 100         ; 攻撃力（％）
defence = 100
power = 5000      ; 防御力（％）
fall.defence_up = 90 ; 空中コンボ修正率（％）
liedown.time = 20    ; ダウン時間
airjuggle = 15        ; 空中コンボ
sparkno = 2        ; 初期ヒットスパーク番号
guard.sparkno = 40 ; 初期ガードスパーク番号
KO.echo = 0          ; ＫＯボイスエコー（0:OFF、1:ON）
volume = 255         ; キャラボイスボリューム値
IntPersistIndex=30,58,59

[Size]
xscale = 1           ; 水平サイズ倍率
yscale = 1           ; 垂直サイズ倍率
ground.back = 16     ; キャラ幅（地上、後ろ側）
ground.front = 16    ; キャラ幅（地上、前側）
air.back = 12        ; キャラ幅（空中、後ろ側）
air.front = 12       ; キャラ幅（空中、前側）
z.width = 10         ; キャラ幅（ｚ軸）
height = 40	     ; キャラの高さ（ジャンプで飛び越せる高さ）
attack.width = 4,4   ;Default attack width: back, front
attack.dist = 160    ;Default attack distance
proj.attack.dist = 90;Default attack distance for projectiles
proj.doscale = 0     ;Set to 1 to scale projectiles too   
head.pos = 18,-45    ; 頭部座標
mid.pos = 0,-33     ; 体中心部座標
shadowoffset = 0     ; キャラの影・オフセット値

[Velocity]
walk.fwd  = 4			; 前進速度
walk.back = -2.5		; 後退速度
run.fwd  = 6.1, 0		; 前ダッシュ速度（y<0の場合、ホップステップ）
run.back = -6,-4.2		; バックステップ速度（y=0の場合、走り）
jump.neu = 0,-12.5		; 垂直ジャンプ速度
jump.back = -4.12.5		; 後方ジャンプ速度
jump.fwd = 4.12.5		; 前方ジャンプ速度
runjump.back = -5,-12.5	; 後方ジャンプ速度（ダッシュ中）
runjump.fwd = 5,-12.5		; 前方ジャンプ速度（ダッシュ中）
airjump.neu = 0,0		; 空中垂直ジャンプ速度
airjump.back = 0,0		; 空中後方ジャンプ速度
airjump.fwd = 0,0		; 空中前方ジャンプ速度

[Movement]
airjump.num = 0       ; 空中ジャンプ回数
airjump.height = 35  ; 空中ジャンプ最低高度
yaccel = .58           ; キャラ重力加速度
stand.friction = .85  ; 摩擦係数（立ち状態）
crouch.friction = .82 ; 摩擦係数（しゃがみ状態）

;===============================================================================
; Definition of the Basic Action
;===============================================================================

;-------------------------------------------------------------------------------
; ダッシュ
[Statedef 100]
type    = S
movetype = I
physics = N
anim = 100
ctrl = 0

[State 100,0]
type = VelSet
trigger1 = AnimElem = 2
x = Const(velocity.run.fwd.x)

[State 100,1]
type = PlaySnd
trigger1 = Time%68=0
value = 1, 0
channel = 2

[State 100,4]
type = ChangeState
trigger1 = Command != "holdfwd" && Time >= 10
value = 101
ctrl = 1

[State 100,5]
type = ChangeState
trigger1 = Command = "holdupfwd"
value = 40

[State 100,6]
type = AssertSpecial
trigger1 = 1
flag = NoWalk

;------------------------ 停止
[Statedef 101]
type = S
movetype = I
physics = S
anim = 101
velset = 0, 0

[State 101,End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------
; バックステップ
;------------------------ 開始
[Statedef 105]
type = S
movetype = I
physics = S
anim = 105
ctrl = 0
velset = 0, 0

[State 105,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 2
statetype = A
physics = N

[State 105,VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = Const(velocity.run.back.x)
y = Const(velocity.run.back.y)

[State 105,VelAdd]
type = VelAdd
trigger1 = AnimElem = 2, > 0
y = .58

[State 105,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 1, 1

[State 106,PosSet]
type = PosSet
trigger1 = AnimElem = 2, > 0
trigger1 = Vel Y > 0 && Pos Y >= 0
y = 0

[State 105,1]
type = ChangeState
trigger1 = AnimElem = 2, > 0
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 106

;------------------------ 着地
[Statedef 106]
type = S
movetype = I
physics = S
anim = 47
velset = 0, 0

[State 106,3]
type = PlaySnd
trigger1 = Time = 0
value = 1, 4

[State 106,4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; グランドフロントステップ
[Statedef 110]
type    = S
movetype = I
physics = N
anim = 110
ctrl = 0

[State 100, 1]
type = VelSet
trigger1 = AnimElem = 2
x = const(velocity.run.fwd.x)*1.5

[State 100, 1]
type = VelMul
trigger1 = AnimElem = 2,> 0
x = .93

[State 105,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2,=0
value = 1, 12

[State 100,6]
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100,5]
type = ChangeState
trigger1 = Command = "holdupfwd"
value = 40

[State 100,4]
type = ChangeState
trigger1 = AnimTime = 0
value = 101
ctrl = 1

;===============================================================================
; Definition of the Win/Lose/Intro Pause
;===============================================================================

;-------------------------------------------------------------------------------
; 時間切れ負け
[Statedef 170]
type = S
ctrl = 0
anim = 175
velset = 0,0

[State 170,1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 191,1]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay

[State 170,3]
type = AssertSpecial
trigger1 = Time = [0,400]
flag = RoundNotOver

;-------------------------------------------------------------------------------
; 時間切れ引き分け
[Statedef 175]
type = S
ctrl = 0
velset = 0,0

[State 170,1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 191,1]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay

[State 175,2]
type = ChangeState
trigger1 = Time = 0
value = 170

;-------------------------------------------------------------------------------
; 勝利
[Statedef 180]
type = S

[State 3000, Super A]
type = explod
triggerall = matchover = 0
trigger1 = wintime = 0
trigger1 = numhelper(7100) = 0
trigger1 = teamside = 1
anim = f7110
ownpal = 1
pos = 8,45
postype = left
bindtime = -1
ontop = 1
persistent = 0

[State 3000, Super A]
type = explod
triggerall = matchover = 0
trigger1 = wintime = 0
trigger1 = numhelper(7100) = 0
trigger1 = teamside = 2
anim = f7111
ownpal = 1
pos = 8,45
postype = left
bindtime = -1
ontop = 1
persistent = 0

[State 3000, Super A]
type = playsnd
triggerall = matchover = 0
trigger1 = wintime = 0
trigger1 = numhelper(7100) = 0
value = s7100,1
volume = 255
persistent = 0

[State 180,ChangeState]
type = ChangeState
triggerall = Time = 0
trigger1 = Command = "hold_x"
value = 181

[State 180,ChangeState]
type = ChangeState
triggerall = Time = 0
trigger1 = Command = "hold_a"
value = 182

[State 180,ChangeState]
type = ChangeState
triggerall = Time = 0
trigger1 = Command = "hold_y"
value = 183

[State 180,ChangeState]
type = ChangeState
triggerall = Time = 0
trigger1 = Command = "hold_b"
value = 184

[State 180,ChangeState]
type = ChangeState
triggerall = Time = 0
trigger1 = Command = "hold_z"
value = 185

[State 180,ChangeState]
type = ChangeState
triggerall = Time = 0
trigger1 = Command = "hold_c"
value = 186

[State 180,ChangeState]
type = ChangeState
trigger1 = Time = 1
value = IfElse((Random = [0,166]),181,IfElse((Random = [167,333]),182,IfElse((Random = [334,499]),183,IfElse((Random = [500,665]),184,IfElse((Random = [666,833]),185,186)))))

;-------------------------------------------------------------------------------
; 勝利１
[Statedef 181]
type = S
ctrl = 0
anim = 181
velset = 0,0,0

[State 180, エフェクト表示]
type = Explod
triggerall = matchover = 0
trigger1 = wintime
trigger1 = time = 8
trigger1 = teamside = 1
anim = f7110
ID = 180
ownpal = 1
pos = 8,45
postype = left
bindtime = -1
ontop = 1
persistent = 0

[State 180, エフェクト表示]
type = Explod
triggerall = matchover = 0
trigger1 = wintime
trigger1 = time = 8
trigger1 = teamside = 2
anim = f7111
ID = 180
ownpal = 1
pos = 8,45
postype = left
bindtime = -1
ontop = 1
persistent = 0

[State 180, 音を鳴らす]
type = playsnd
triggerall = matchover = 0
trigger1 = wintime
trigger1 = time = 13
value = s7100,1
persistent = 0

[State 181, 勝利画面]
type = Helper
triggerall = Matchover
triggerall = time = 0
trigger1 = teammode = single || teammode = turns
trigger2 = teammode = simul
trigger2 = NumPartner
trigger2 = ID < partner,ID || partner,alive = 0
id = 8500
name = "winner"
sprpriority = 1
pos = 0,0
postype = p1
stateno = 8500
helpertype = normal
pausemovetime = 999999
keyctrl = 1
ownpal = 1

[State 180, 2]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0,23

[State 192,1]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay

[State 181,3]
type = AssertSpecial
trigger1 = Time = [0,400]
flag = RoundNotOver

;-------------------------------------------------------------------------------
; 勝利２
[Statedef 182]
type = S
ctrl = 0
anim = 182
velset = 0,0,0

[State 180, エフェクト表示]
type = Explod
triggerall = matchover = 0
trigger1 = wintime
trigger1 = time = 8
trigger1 = teamside = 1
anim = f7110
ID = 180
ownpal = 1
pos = 8,45
postype = left
bindtime = -1
ontop = 1
persistent = 0

[State 180, エフェクト表示]
type = Explod
triggerall = matchover = 0
trigger1 = wintime
trigger1 = time = 8
trigger1 = teamside = 2
anim = f7111
ID = 180
ownpal = 1
pos = 8,45
postype = left
bindtime = -1
ontop = 1
persistent = 0

[State 180, 音を鳴らす]
type = playsnd
triggerall = matchover = 0
trigger1 = wintime
trigger1 = time = 13
value = s7100,1
persistent = 0

[State 181, 勝利画面]
type = Helper
triggerall = Matchover
triggerall = time = 0
trigger1 = teammode = single || teammode = turns
trigger2 = teammode = simul
trigger2 = NumPartner
trigger2 = ID < partner,ID || partner,alive = 0
id = 8500
name = "winner"
sprpriority = 1
pos = 0,0
postype = p1
stateno = 8500
helpertype = normal
pausemovetime = 999999
keyctrl = 1
ownpal = 1

[State 182, 2]
type = PlaySnd
trigger1 = AnimElem = 18,=2
value = 0,24

[State 192,1]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay

[State 182,3]
type = AssertSpecial
trigger1 = Time = [0,400]
flag = RoundNotOver

;-------------------------------------------------------------------------------
; 勝利３
[Statedef 183]
type = S
ctrl = 0
anim = 183
velset = 0,0,0

[State 180, エフェクト表示]
type = Explod
triggerall = matchover = 0
trigger1 = wintime
trigger1 = time = 8
trigger1 = teamside = 1
anim = f7110
ID = 180
ownpal = 1
pos = 8,45
postype = left
bindtime = -1
ontop = 1
persistent = 0

[State 180, エフェクト表示]
type = Explod
triggerall = matchover = 0
trigger1 = wintime
trigger1 = time = 8
trigger1 = teamside = 2
anim = f7111
ID = 180
ownpal = 1
pos = 8,45
postype = left
bindtime = -1
ontop = 1
persistent = 0

[State 180, 音を鳴らす]
type = playsnd
triggerall = matchover = 0
trigger1 = wintime
trigger1 = time = 13
value = s7100,1
persistent = 0

[State 181, 勝利画面]
type = Helper
triggerall = Matchover
triggerall = time = 0
trigger1 = teammode = single || teammode = turns
trigger2 = teammode = simul
trigger2 = NumPartner
trigger2 = ID < partner,ID || partner,alive = 0
id = 8500
name = "winner"
sprpriority = 1
pos = 0,0
postype = p1
stateno = 8500
helpertype = normal
pausemovetime = 999999
keyctrl = 1
ownpal = 1

[State 182, 2]
type = PlaySnd
trigger1 = AnimElem = 14,=1
value = 0,29
persistent = 0

[State 192,1]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay

[State 182,3]
type = AssertSpecial
trigger1 = Time = [0,400]
flag = RoundNotOver

;-------------------------------------------------------------------------------
; 勝利４
[Statedef 184]
type = S
ctrl = 0
anim = 184
velset = 0,0,0

[State 180, エフェクト表示]
type = Explod
triggerall = matchover = 0
trigger1 = wintime
trigger1 = time = 8
trigger1 = teamside = 1
anim = f7110
ID = 180
ownpal = 1
pos = 8,45
postype = left
bindtime = -1
ontop = 1
persistent = 0

[State 180, エフェクト表示]
type = Explod
triggerall = matchover = 0
trigger1 = wintime
trigger1 = time = 8
trigger1 = teamside = 2
anim = f7111
ID = 180
ownpal = 1
pos = 8,45
postype = left
bindtime = -1
ontop = 1
persistent = 0

[State 180, 音を鳴らす]
type = playsnd
triggerall = matchover = 0
trigger1 = wintime
trigger1 = time = 13
value = s7100,1
persistent = 0

[State 181, 勝利画面]
type = Helper
triggerall = Matchover
triggerall = time = 0
trigger1 = teammode = single || teammode = turns
trigger2 = teammode = simul
trigger2 = NumPartner
trigger2 = ID < partner,ID || partner,alive = 0
id = 8500
name = "winner"
sprpriority = 1
pos = 0,0
postype = p1
stateno = 8500
helpertype = normal
pausemovetime = 999999
keyctrl = 1
ownpal = 1

[State 182, 2]
type = PlaySnd
trigger1 = AnimElem = 5,=1
value = 0,33

[State 192,1]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay

[State 3030,Explod]
type = Explod
trigger1 = AnimElem = 7
anim = 185
pos = 0,0
postype = P1
sprpriority = 2
bindtime = -1
ownpal = 1

[State 182,3]
type = AssertSpecial
trigger1 = Time = [0,400]
flag = RoundNotOver

;-------------------------------------------------------------------------------
; 勝利５
[Statedef 185]
type = S
movetype = I
physics = S
anim = 186
velset = 0, 0
ctrl = 0

[State 180, エフェクト表示]
type = Explod
triggerall = matchover = 0
trigger1 = wintime
trigger1 = time = 8
trigger1 = teamside = 1
anim = f7110
ID = 180
ownpal = 1
pos = 8,45
postype = left
bindtime = -1
ontop = 1
persistent = 0

[State 180, エフェクト表示]
type = Explod
triggerall = matchover = 0
trigger1 = wintime
trigger1 = time = 8
trigger1 = teamside = 2
anim = f7111
ID = 180
ownpal = 1
pos = 8,45
postype = left
bindtime = -1
ontop = 1
persistent = 0

[State 180, 音を鳴らす]
type = playsnd
triggerall = matchover = 0
trigger1 = wintime
trigger1 = time = 13
value = s7100,1
persistent = 0

[State 181, 勝利画面]
type = Helper
triggerall = Matchover
triggerall = time = 0
trigger1 = teammode = single || teammode = turns
trigger2 = teammode = simul
trigger2 = NumPartner
trigger2 = ID < partner,ID || partner,alive = 0
id = 8500
name = "winner"
sprpriority = 1
pos = 0,0
postype = p1
stateno = 8500
helpertype = normal
pausemovetime = 999999
keyctrl = 1
ownpal = 1

[State 195,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 5,=1
value = 0,29
channel = 0

[State 195,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 8,=1
value = 5,11

[State 192,1]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay

[State 182,3]
type = AssertSpecial
trigger1 = Time = [0,400]
flag = RoundNotOver

;-------------------------------------------------------------------------------
; 勝利６
[Statedef 186]
type = S
movetype = I
physics = S
anim = 187
velset = 0, 0
ctrl = 0

[State 180, エフェクト表示]
type = Explod
triggerall = matchover = 0
trigger1 = wintime
trigger1 = time = 8
trigger1 = teamside = 1
anim = f7110
ID = 180
ownpal = 1
pos = 8,45
postype = left
bindtime = -1
ontop = 1
persistent = 0

[State 180, エフェクト表示]
type = Explod
triggerall = matchover = 0
trigger1 = wintime
trigger1 = time = 8
trigger1 = teamside = 2
anim = f7111
ID = 180
ownpal = 1
pos = 8,45
postype = left
bindtime = -1
ontop = 1
persistent = 0

[State 180, 音を鳴らす]
type = playsnd
triggerall = matchover = 0
trigger1 = wintime
trigger1 = time = 13
value = s7100,1
persistent = 0

[State 181, 勝利画面]
type = Helper
triggerall = Matchover
triggerall = time = 0
trigger1 = teammode = single || teammode = turns
trigger2 = teammode = simul
trigger2 = NumPartner
trigger2 = ID < partner,ID || partner,alive = 0
id = 8500
name = "winner"
sprpriority = 1
pos = 0,0
postype = p1
stateno = 8500
helpertype = normal
pausemovetime = 999999
keyctrl = 1
ownpal = 1

[State 195,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4,=1
value = 5,13

[State 195,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 17,=1
value = 0,34
channel = 0

[State 192,1]
type = AssertSpecial
trigger1 = 1
flag = nobardisplay

[State 3030,Explod]
type = Explod
trigger1 = AnimElem = 4 || AnimElem = 8
anim = 188
pos = 15,0
postype = P1
sprpriority = 2
bindtime = -1
ownpal = 1

[State 3030,Explod]
type = Explod
trigger1 = AnimElem = 9
anim = 189
pos = 0,-28
postype = P1
sprpriority = 2
bindtime = -1
removetime = 7
ownpal = 1

[State 3030,Explod]
type = Explod
trigger1 = AnimElem = 10
anim = 189
pos = 31,-36
postype = P1
sprpriority = 2
bindtime = -1
removetime = 5
ownpal = 1

[State 3030,Explod]
type = Explod
trigger1 = AnimElem = 11
anim = 189
pos = 9,-85
postype = P1
sprpriority = 2
bindtime = -1
removetime = 5
ownpal = 1

[State 3030,Explod]
type = Explod
trigger1 = AnimElem = 12
anim = 189
pos = 7,-85
postype = P1
sprpriority = 2
bindtime = -1
removetime = 5
ownpal = 1

[State 3030,Explod]
type = Explod
trigger1 = AnimElem = 13
anim = 189
pos = 3,-80
postype = P1
sprpriority = 2
bindtime = -1
ownpal = 1

[State 182,3]
type = AssertSpecial
trigger1 = Time = [0,400]
flag = RoundNotOver

[State 195,End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; プレイントロ
[Statedef 190]
type = S
ctrl = 0
velset = 0,0

[State 190,VarSet]
type = ChangeState
triggerall = Time = 0
trigger1 = P2Name = "Jhun Hoon" || P4Name = "Jhun Hoon"
trigger2 = P2Name = "Kim Kaphwan" || P4Name = "Kim Kaphwan"
value = 6000

[State 190,VarSet]
type = ChangeState
triggerall = Time = 0
trigger1 = P2Name = "Chang" || P4Name = "Chang"
trigger2 = P2Name = "Chang Koehan" || P4Name = "Chang Koehan"
value = 6001

[State 190,VarSet]
type = ChangeState
triggerall = Time = 0
trigger1 = P2Name = "Malin" || P4Name = "Malin"
value = 6002

[State 190,VarSet]
type = ChangeState
trigger1 = Time = 0
value = IfElse((Random = [0,332]),191,IfElse((Random = [333,666]),192,193))

;-------------------------------------------------------------------------------
; イントロ１
[Statedef 191]
type = S
anim = 191

[State 192,1]
type = AssertSpecial
trigger1 = 1
flag = Intro
flag2 = nobardisplay

[State 192,2]
type = PlaySnd
trigger1 = AnimElem = 8,=1
value = 0, 19
channel = 3

[State 192,4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;-------------------------------------------------------------------------------
; イントロ２
[Statedef 192]
type = S
anim = 192

[State 192,1]
type = AssertSpecial
trigger1 = 1
flag = Intro
flag2 = nobardisplay

[State 192,2]
type = PlaySnd
trigger1 = AnimElem = 15,=1
value = 0, 31
channel = 3

[State 192,2]
type = PlaySnd
trigger1 = AnimElem = 26,=1
value = 0, 32
channel = 3

;[State 192,2]
;type = PlaySnd
;trigger1 = AnimElem = 15,=30
;value = 5, 12
;channel = 10

[State 192,4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;-------------------------------------------------------------------------------
; イントロ３
[Statedef 193]
type = S
anim = 193

[State 192,1]
type = AssertSpecial
trigger1 = 1
flag = Intro
flag2 = nobardisplay

[State 192,2]
type = PlaySnd
trigger1 = AnimElem = 2,=1
value = 0, 30
channel = 3

[State 3030,Explod]
type = Explod
trigger1 = AnimElem = 3
anim = 194
pos = 0,0
postype = P1
sprpriority = 2
bindtime = -1
ownpal = 1

[State 192,4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;-------------------------------------------------------------------------------
; イントロ（対　ジョン）
[Statedef 6000]
type = S
anim = 6000

[State 192,1]
type = AssertSpecial
trigger1 = 1
flag = Intro
flag2 = nobardisplay

[State 192,2]
type = PlaySnd
trigger1 = AnimElem = 4,=1
value = 0, 20
channel = 3

[State 192,2]
type = PlaySnd
trigger1 = AnimElem = 7,=1
value = 0, 21
channel = 3

[State 192,2]
type = PlaySnd
trigger1 = AnimElem = 11,=1
value = 0, 22
channel = 3

[State 192,4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;-------------------------------------------------------------------------------
; イントロ（対　チャン）
[Statedef 6001]
type = S
ctrl = 0
anim = 6001
velset = 0,0,0

[State 192,1]
type = AssertSpecial
trigger1 = 1
flag = Intro
flag2 = nobardisplay

[State 192,2]
type = PlaySnd
trigger1 = AnimElem = 6,=1
value = 0, 26
channel = 3

[State 192,4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;-------------------------------------------------------------------------------
; イントロ（対　まりん）
[Statedef 6002]
type = S
anim = 6002

[State 192,1]
type = AssertSpecial
trigger1 = 1
flag = Intro
flag2 = nobardisplay

[State 192,2]
type = PlaySnd
trigger1 = AnimElem = 6,=1
value = 0, 24
channel = 3

[State 192,2]
type = PlaySnd
trigger1 = AnimElem = 9,=1
value = 0, 35
channel = 3

[State 192,4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;-------------------------------------------------------------------------------
; 挑発
[Statedef 195]
type = S
movetype = I
physics = S
anim = 195
velset = 0, 0
ctrl = 0

[State 195,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 0,2
channel = 0

[State 195, 1]
type = CtrlSet
triggerall = Roundstate = 2
trigger1 = Time = 40
value = 1

[State 195,End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------  jump in intro  ------
[Statedef 18900]
type = A
movetype = I
physics = N
anim = 44000
velset = 4.8,-1
ctrl = 0

[State 189, SB]
type = screenbound
trigger1 = 1
value = 0

[State 189, 1]
type = posadd
trigger1 = time = 0
y = -70
x = -100

[State 189, 2]
type = veladd
trigger1 = 1
y = .4

[State 189, AS]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 189, 3]
type = ChangeState
trigger1 = pos y >= 0 && vel y > 0
value = 19700

;------  land  ------
[Statedef 19700]
type = S
movetype = I
physics = N
anim = 47
velset = 0,0
ctrl = 0

[State 3225, 7]
type = PlaySnd
trigger1 = Time = 1
trigger1 = !SysVar(0)
value = F11, 2
volume = 255

[State 197, 1]
type = posset
trigger1 = time = 0
y = 0

[State 197, AS]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 197, 3]
type = ChangeState
trigger1 = time >= 6
value = 190

;===============================================================================
; Definition of the Basic Arts
;===============================================================================

;-------------------------------------------------------------------------------
; 遠距離・立ち弱パンチ
[Statedef 200]
type    = S
movetype= A
physics = S
juggle  = 8+(P2StateType = A)*0
velset = 0,0
ctrl = 0
anim = 200
poweradd = 0
facep2 = 1

[State 220,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 3
movetype = I

[State 200,HitDef]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype = Light
air.animtype = back
damage    = IfElse(var(34)=1,30,30)
getpower = ifelse(fvar(0) != 0,0,48),ifelse(fvar(0) != 0,0,48)
guardflag = M
hitflag = MAF
pausetime = 8,9
sparkno = 4;S2400
guard.sparkno = 40
sparkxy = 15,-68
hitsound = S3, 5
guardsound = S4, 0
ground.type = Low
ground.slidetime = 9
ground.hittime  = 10
ground.velocity = -5
air.velocity = -3.5,-6.5
air.hittime = 1
air.cornerpush.veloff = 0
p2stateno = 66000
yaccel = 0.5

[State 200,End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; 近距離・立ち弱パンチ
[Statedef 205]
type    = S
movetype= A
physics = S
juggle  = 8+(P2StateType = A)*0
velset = 0,0
ctrl = 0
anim = 205
poweradd = 0
facep2 = 1

[State 220,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 3
movetype = I

[State 200,HitDef]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype = Light
air.animtype = back
damage    = IfElse(var(34)=1,30,30)
getpower = ifelse(fvar(0) != 0,0,48),ifelse(fvar(0) != 0,0,48)
guardflag = M
hitflag = MAF
pausetime = 8,9
sparkno = 4;S2400
guard.sparkno = 40
sparkxy = -5,-45
hitsound = S3, 5
guardsound = S4, 0
ground.type = Low
ground.slidetime = 9
ground.hittime  = 10
ground.velocity = -5
air.velocity = -3.5,-6.5
air.hittime = 1
yaccel = 0.5
air.cornerpush.veloff = 0
p2stateno = 66000

[State 200,End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; 遠距離・立ち強パンチ 2k1
[Statedef 210]
type    = S
movetype= A
physics = S
juggle  = 8+(P2StateType = A)*0
poweradd= 0
ctrl = 0
velset = 0,0
anim = 210
facep2 = 1

[State 220,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 5
movetype = I

[State 810,Posadd]
type = Posadd
trigger1 = AnimElem = 6
x = 16

[State 810,Posadd]
type = Posadd
trigger1 = AnimElem = 7
x = 23

[State 210,HitDef]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = Hard
air.animtype = back
damage    = IfElse(var(34)=1,80,80)
getpower = ifelse(fvar(0) != 0,0,96),ifelse(fvar(0) != 0,0,96)
guardflag = M
hitflag = MAF
pausetime = 12,13
sparkno = 5;S2410
guard.sparkno = 41
sparkxy = 15,-45
hitsound = S3, 6
guardsound = S4, 0
ground.type = Low
ground.slidetime = 17
ground.hittime  = 18
ground.velocity = -8
air.velocity = -3.5,-6.5
guard.velocity = -10
p2stateno = 66000
yaccel = 0.5
ground.cornerpush.veloff = -18
guard.cornerpush.veloff = -18
air.cornerpush.veloff = 0

[State 210,End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; 遠距離・立ち強パンチ 2k2
[Statedef 220]
type    = S
movetype= A
physics = S
juggle  = 8+(P2StateType = A)*0
poweradd= 0
ctrl = 0
velset = 0,0
anim = 220
facep2 = 1

[State 220,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 7
movetype = I

[State 210,HitDef]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = Hard
air.animtype = back
damage    = IfElse(var(34)=1,80,80)
getpower = ifelse(fvar(0) != 0,0,96),ifelse(fvar(0) != 0,0,96)
guardflag = M
hitflag = MAF
pausetime = 12,13
sparkno = 5;S2410
guard.sparkno = 41
sparkxy = 0,-75
hitsound = S3, 6
guardsound = S4, 0
ground.type = Low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -3.5,-6.5
air.velocity = -3.5,-6.5
guard.velocity = -10
p2stateno = 66000
yaccel = 0.5
ground.cornerpush.veloff = -18
guard.cornerpush.veloff = -18
air.cornerpush.veloff = 0

[State 210,End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; 近距離・立ち強パンチ
[Statedef 215]
type    = S
movetype= A
physics = S
juggle  = 8+(P2StateType = A)*0
poweradd= 0
ctrl = 0
velset = 0,0
anim = 215
facep2 = 1

[State 220,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 5
movetype = I

[State 220,HitDef]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = Hard
air.animtype = back
damage    = IfElse(var(34)=1,80,80)
getpower = ifelse(fvar(0) != 0,0,96),ifelse(fvar(0) != 0,0,96)
guardflag = M
hitflag = MAF
pausetime = 12,13
sparkno = 5;S2410
guard.sparkno = 41
sparkxy = -5,-45
hitsound = S3, 6
guardsound = S4, 0
ground.type = Low
ground.slidetime = 17
ground.hittime  = 18
ground.velocity = -8
air.velocity = -3.5,-6.5
p2stateno = 66000
yaccel = 0.5
guard.velocity = -10
ground.cornerpush.veloff = -18
guard.cornerpush.veloff = -18
air.cornerpush.veloff = 0

[State 220,End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; 遠距離・立ち弱キック
[Statedef 230]
type    = S
movetype= A
physics = S
juggle  = 8+(P2StateType = A)*0
poweradd= 0
ctrl = 0
velset = 0,0
anim = 230
facep2 = 1

[State 220,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 230,HitDef]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = Light
air.animtype = back
damage    = IfElse(var(34)=1,30,30)
getpower = ifelse(fvar(0) != 0,0,48),ifelse(fvar(0) != 0,0,48)
guardflag = M
hitflag = MAF
pausetime = 8,9
sparkno = 0
guard.sparkno = 40
sparkxy = -10,-45
hitsound = Sifelse(random < 300,403,ifelse(random < 499,404,405))
guardsound = S4, 0
ground.type = Low
ground.slidetime = 9
ground.hittime  = 10
ground.velocity = -5
air.velocity = -3.5,-6.5
yaccel = 0.5
air.cornerpush.veloff = 0
p2stateno = 66000

[State 230,End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; 近距離・立ち弱キック
[Statedef 235]
type    = S
movetype= A
physics = S
juggle  = 8+(P2StateType = A)*0
poweradd= 0
ctrl = 0
velset = 0,0
anim = 235
facep2 = 1

[State 220,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 3
movetype = I

[State 235,HitDef]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = Light
air.animtype = back
damage    = IfElse(var(34)=1,30,30)
getpower = ifelse(fvar(0) != 0,0,40),ifelse(fvar(0) != 0,0,40)
guardflag = M
hitflag = MAF
pausetime = 8,9
sparkno = 0
guard.sparkno = 40
sparkxy = -10,-40
hitsound = Sifelse(random < 300,403,ifelse(random < 499,404,405))
guardsound = S4, 0
ground.type = Low
ground.slidetime = 9
ground.hittime  = 10
ground.velocity = -5
air.velocity = -3.5,-6.5
yaccel = 0.5
air.cornerpush.veloff = 0
p2stateno = 66000

[State 235,End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; 近／遠距離・立ち強キック
[Statedef 240]
type    = S
movetype= A
physics = S
juggle  = 8+(P2StateType = A)*0
poweradd= 0
ctrl = 0
velset = 0,0
anim = 240
facep2 = 1

[State 220,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 240,HitDef]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype  = Hard
air.animtype = back
damage    = IfElse(var(34)=1,80,80)
getpower = ifelse(fvar(0) != 0,0,96),ifelse(fvar(0) != 0,0,96)
guardflag = M
hitflag = MAF
pausetime = 12,13
sparkno = 1
guard.sparkno = 41
sparkxy = 5,-45
hitsound = Sifelse(random < 300,409,ifelse(random < 499,410,411))
guardsound = S4, 0
ground.type = Low
ground.slidetime = 17
ground.hittime  = 18
ground.velocity = -8
air.velocity = -3.5,-6.5
p2stateno = 66000
yaccel = 0.5
guard.velocity = -10
ground.cornerpush.veloff = -18
guard.cornerpush.veloff = -18
air.cornerpush.veloff = 0

[State 230,End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; しゃがみ弱パンチ
[Statedef 400]
type    = C
movetype= A
physics = C
juggle  = 8+(P2StateType = A)*0
poweradd= 0
ctrl = 0
anim = 400
velset = 0,0
facep2 = 1

[State 220,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 3
movetype = I

[State 400,HitDef]
type = HitDef
trigger1 = Time = 0
attr = C, NA
animtype  = Light
air.animtype = back
damage    = IfElse(var(34)=1,30,30)
getpower = ifelse(fvar(0) != 0,0,48),ifelse(fvar(0) != 0,0,48)
hitflag = MAF
guardflag = M
pausetime = 8,9
sparkno = 4;S2400
guard.sparkno = 40
sparkxy = 0,-35
hitsound = S3, 5
guardsound = S4, 0
ground.type = Low
ground.slidetime = 9
ground.hittime  = 10
ground.velocity = -5
air.velocity = -3.5,-6.5
air.hittime = 1
yaccel = 0.5
air.cornerpush.veloff = 0
p2stateno = 66000

[State 400,End]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;-------------------------------------------------------------------------------
; しゃがみ強パンチ
[Statedef 410]
type    = C
movetype= A
physics = C
juggle  = 8+(P2StateType = A)*0
poweradd= 0
ctrl = 0
anim = 410
velset = 0,0
facep2 = 1

[State 220,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 410,Posadd]
type = Posadd
trigger1 = AnimElem = 4
x = 8

[State 410,HitDef]
type = HitDef
trigger1 = Time = 0
attr = C, NA
animtype  = Hard
air.animtype = back
damage    = IfElse(var(34)=1,80,80)
getpower = ifelse(fvar(0) != 0,0,96),ifelse(fvar(0) != 0,0,96)
hitflag = MAF
guardflag = M
pausetime = 12,13
sparkno = 5;S2410
guard.sparkno = 41
sparkxy = 5,-35
hitsound = S3, 6
guardsound = S4, 0
ground.type = Low
ground.slidetime = 17
ground.hittime  = 18
ground.velocity = -8
air.velocity = -3.5,-6.5
p2stateno = 66000
yaccel = 0.5
guard.velocity = -10
ground.cornerpush.veloff = -18
guard.cornerpush.veloff = -18
air.cornerpush.veloff = 0

[State 410,End]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;-------------------------------------------------------------------------------
; しゃがみ弱キック
[Statedef 430]
type    = C
movetype= A
physics = C
juggle  = 8+(P2StateType = A)*0
poweradd= 0
ctrl = 0
anim = 430
velset = 0, 0
facep2 = 1

[State 220,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 3
movetype = I

[State 430,HitDef]
type = HitDef
trigger1 = Time = 0
attr = C, NA
animtype = Light
air.animtype = back
damage    = IfElse(var(34)=1,30,30)
getpower = ifelse(fvar(0) != 0,0,48),ifelse(fvar(0) != 0,0,48)
hitflag = MA
guardflag = L
pausetime = 8,9
sparkno = 0
guard.sparkno = 40
sparkxy = 8,-10
hitsound = Sifelse(random < 300,403,ifelse(random < 499,404,405))
guardsound = S4, 0
ground.type = Low
ground.slidetime = 9
ground.hittime  = 10
ground.velocity = -5
air.velocity = -3.5,-6.5
yaccel = 0.5
air.cornerpush.veloff = 0
p2stateno = 66000

[State 430,End]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;-------------------------------------------------------------------------------
; しゃがみ強キック
[Statedef 440]
type    = C
movetype= A
physics = C
juggle  = 17+(P2StateType = A)*0
poweradd= 0
ctrl = 0
anim = 440
velset = 0, 0
facep2 = 1

[State 220,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 440, HitDef]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage    = IfElse(var(34)=1,80,80)
getpower = ifelse(fvar(0) != 0,0,96),ifelse(fvar(0) != 0,0,96)
animtype = Hard
hitflag = MA
guardflag = L
sparkno = 1
guard.sparkno = 41
sparkxy = -10,-5
hitsound = Sifelse(random < 300,409,ifelse(random < 499,410,411))
guardsound = S4, 0
ground.type = trip
pausetime = 12,13
guard.pausetime = 12,11
ground.slidetime = 27
ground.hittime = 27
guard.hittime = 17
guard.slidetime = 17
guard.ctrltime = 17
ground.velocity = -3,-9.5
guard.velocity = -11.1796875
air.type = high
air.velocity = -3,-9.5
air.hittime = 13
air.fall = 1
getpower = 94,94
givepower = 16,16
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -18
air.cornerpush.veloff = 0
yaccel = 0.807692307692307692307692307692308
fall = 1
fall.recover = 1
fall.recovertime = 600

[State 440,End]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;-------------------------------------------------------------------------------
; 垂直／斜めジャンプ弱パンチ
[Statedef 600]
type    = A
movetype= A
physics = A
juggle  = 8+(P2StateType = A)*0
poweradd= 0
ctrl = 0
anim = 600

[State 220,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 3
movetype = I

[State 600,HitDef]
type = HitDef
trigger1 = Time = 0
attr = A, NA
animtype = Light
air.animtype = back
damage    = IfElse(Vel X>0,IfElse(Var(34)=1,30,30),IfElse(Vel X=0,IfElse(Var(34)=1,30,30),IfElse(Var(34)=1,30,30)))
getpower = ifelse(fvar(0) != 0,0,IfElse(Var(34)=1,96,48)),ifelse(fvar(0) != 0,0,IfElse(Var(34)=1,96,48))
hitflag = MAF
guardflag = HA
priority = 3
pausetime = 11,13
sparkno = 4;S2400
guard.sparkno = 40
sparkxy = 0,-37
hitsound = S3, 5
guardsound = S4, 0
ground.type = Low
ground.slidetime = 9
ground.hittime  = 10
ground.velocity = -6
air.velocity = -3.5,-6.5
p2stateno = 66000
yaccel = 0.5
guard.velocity = -6
ground.cornerpush.veloff = -8
guard.cornerpush.veloff = -8
air.cornerpush.veloff = 0

;-------------------------------------------------------------------------------
; 垂直ジャンプ強パンチ
[Statedef 615]
type    = A
movetype= A
physics = A
juggle  = 8+(P2StateType = A)*0
poweradd= 0
ctrl = 0
anim = 615

[State 220,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 610,HitDef]
type = HitDef
trigger1 = Time = 0
attr = A, NA
animtype = hard
air.animtype = back
damage    = IfElse(var(34)=1,80,80)
getpower = ifelse(fvar(0) != 0,0,96),ifelse(fvar(0) != 0,0,96)
hitflag = MAF
guardflag = HA
priority = 3
pausetime = 11,13
sparkno = 5;S2410
guard.sparkno = 41
sparkxy = 0,-18
hitsound = S3, 6
guardsound = S4, 0
ground.type = Low
ground.slidetime = 9
ground.hittime  = 10
ground.velocity = -6
air.velocity = -3.5,-6.5
p2stateno = 66000
yaccel = 0.5
guard.velocity = -6
ground.cornerpush.veloff = -8
guard.cornerpush.veloff = -8
air.cornerpush.veloff = 0

;-------------------------------------------------------------------------------
; 斜めジャンプ強パンチ
[Statedef 610]
type    = A
movetype= A
physics = A
juggle  = 8+(P2StateType = A)*0
poweradd= 0
ctrl = 0
anim = 610

[State 220,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 5
movetype = I

[State 615,HitDef]
type = HitDef
trigger1 = AnimElem = 2 || AnimElem = 3 || AnimElem = 4
attr = A, NA
animtype = hard
air.animtype = back
damage = ifelse(enemy,var(0) = 1,40,Ceil(40 / (2 ** HitCount)))
;damage    = Ceil(IfElse(Vel X>0,IfElse(Var(34)=1,80,70),IfElse(Var(34)=1,77,63)) / (2 ** HitCount))
getpower = ifelse(fvar(0) != 0,0,96),ifelse(fvar(0) != 0,0,96)
hitflag = MAF
guardflag = HA
priority = 3
pausetime = 11,13
sparkno = 5;S2410
guard.sparkno = 41
sparkxy = 0,IfElse((AnimElem = 2),-42,IfElse((AnimElem = 3),-10,5))
hitsound = S3, 6
guardsound = S4, 0
ground.type = Low
ground.slidetime = 9
ground.hittime  = 10
ground.velocity = -6
air.velocity = -3.5,-6.5
p2stateno = 66000
yaccel = 0.5
guard.velocity = -6
ground.cornerpush.veloff = -8
guard.cornerpush.veloff = -8
air.cornerpush.veloff = 0

;-------------------------------------------------------------------------------
; 垂直／斜めジャンプ弱キック
[Statedef 630]
type    = A
movetype= A
physics = A
juggle  = 8+(P2StateType = A)*0
poweradd= 0
ctrl = 0
anim = 630

[State 220,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 630,HitDef]
type = HitDef
trigger1 = Time = 0
attr = A, NA
animtype = Light
air.animtype = back
damage    = IfElse(Vel X=0,IfElse(Var(34)=1,30,30),IfElse(Var(34)=1,30,30))
getpower = ifelse(fvar(0) != 0,0,IfElse(Var(34)=1,96,48)),ifelse(fvar(0) != 0,0,IfElse(Var(34)=1,96,48))
hitflag = MAF
guardflag = HA
priority = 3
pausetime = 11,13
sparkno = 0
guard.sparkno = 40
sparkxy = 0,0
hitsound = Sifelse(random < 300,403,ifelse(random < 499,404,405))
guardsound = S4, 0
ground.type = Low
ground.slidetime = 9
ground.hittime  = 10
ground.velocity = -6
air.velocity = -3.5,-6.5
p2stateno = 66000
yaccel = 0.5
guard.velocity = -6
ground.cornerpush.veloff = -8
guard.cornerpush.veloff = -8
air.cornerpush.veloff = 0

;-------------------------------------------------------------------------------
; 垂直ジャンプ強キック
[Statedef 645]
type    = A
movetype= A
physics = A
juggle  = 8+(P2StateType = A)*0
poweradd= 0
ctrl = 0
anim = 645

[State 220,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 640,HitDef]
type = HitDef
trigger1 = Time = 0
attr = A, NA
animtype = Hard
air.animtype = back
damage    = IfElse(var(34)=1,80,80)
getpower = ifelse(fvar(0) != 0,0,96),ifelse(fvar(0) != 0,0,96)
hitflag = MAF
guardflag = HA
priority = 3
pausetime = 11,13
sparkno = 1
guard.sparkno = 41
sparkxy = 0,-15
hitsound = Sifelse(random < 300,409,ifelse(random < 499,410,411))
guardsound = S4, 0
ground.type = Low
ground.slidetime = 9
ground.hittime  = 10
ground.velocity = -6
air.velocity = -3.5,-6.5
p2stateno = 66000
yaccel = 0.5
guard.velocity = -6
ground.cornerpush.veloff = -8
guard.cornerpush.veloff = -8
air.cornerpush.veloff = 0

;-------------------------------------------------------------------------------
; 斜めジャンプ強キック
[Statedef 640]
type    = A
movetype= A
physics = A
juggle  = 8+(P2StateType = A)*0
poweradd= 0
ctrl = 0
anim = 640

[State 220,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 640,HitDef]
type = HitDef
trigger1 = Time = 0
attr = A, NA
animtype = Hard
air.animtype = back
damage    = IfElse(Vel X>0,IfElse(Var(34)=1,80,80),IfElse(Var(34)=1,80,80))
getpower = ifelse(fvar(0) != 0,0,96),ifelse(fvar(0) != 0,0,96)
hitflag = MAF
guardflag = HA
priority = 3
pausetime = 11,13
sparkno = 1
guard.sparkno = 41
sparkxy = 0,-26
hitsound = Sifelse(random < 300,409,ifelse(random < 499,410,411))
guardsound = S4, 0
ground.type = Low
ground.slidetime = 9
ground.hittime  = 10
ground.velocity = -6
air.velocity = -3.5,-6.5
p2stateno = 66000
yaccel = 0.5
guard.velocity = -6
ground.cornerpush.veloff = -8
guard.cornerpush.veloff = -8
air.cornerpush.veloff = 0

;-------------------------------------------------------------------------------
; 地上ふっとばし攻撃
[Statedef 500]
type = S
movetype = A
physics = S
juggle  = 17+(P2StateType = A)*0
poweradd= 0
anim = 500
ctrl = 0
velset = 0,0
facep2 = 1

[State 220,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 5
movetype = I

[State 510,HitDef]
type = HitDef
trigger1 = Time = 0
attr = S, NA
animtype = Hard
damage    = IfElse(var(34)=1,90,90)
getpower = ifelse(fvar(0) != 0,0,96),ifelse(fvar(0) != 0,0,96)
guardflag = M
hitflag = MAF
pausetime = 12,13
sparkno = 1
guard.sparkno = 41
sparkxy = -10,-44
hitsound = S3,4
guardsound = S4,0
ground.type = Low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -4,-8
air.velocity = -4,-8
fall = 1
fall.recover = 1
fall.recovertime = 600
yaccel = 0.6
guard.velocity = -10
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -18
air.cornerpush.veloff = 0

[State 510,End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; 空中ふっとばし攻撃
[Statedef 510]
type    = A
movetype= A
physics = A
juggle  = 17+(P2StateType = A)*0
anim = 510
poweradd = 0
ctrl = 0

[State 220,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
movetype = I

[State 510,HitDef]
type = HitDef
trigger1 = Time = 0
attr = A, NA
animtype  = Hard
damage    = IfElse(var(32)=2,90,90)
getpower = ifelse(fvar(0) != 0,0,96),ifelse(fvar(0) != 0,0,96)
guardflag = M
hitflag = MAF
pausetime = 12,13
sparkno = 1
guard.sparkno = 41
sparkxy = 0,-50
hitsound = S3,4
guardsound = S4,0
ground.type = low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -4,-8
air.velocity = -4,-8
fall = 1
fall.recover = 1
fall.recovertime = 600
yaccel = 0.6
guard.velocity = -10
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -12
air.cornerpush.veloff = 0

;---------------------------------------------------------------------------
; HITG_SHAKE
[Statedef 66000]
type    = U
movetype= H
physics = N
velset = 0,0

[State 0, HitFallSet]
type = HitFallSet
trigger1 = 1
value = 0

[State 0, SelfState]
type = SelfState
trigger1 = statetype = S
value = 5000

[State 0, SelfState]
type = SelfState
trigger1 = statetype = C
value = 5010

[State 0, SelfState]
type = ChangeState
trigger1 = statetype = A
value = 77020

;---------------------------------------------------------------------------
; HITA_SHAKE
[Statedef 77020]
type    = A
movetype= H
physics = N
velset = 0,0

[State 5020, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(airtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5020, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5020, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5020, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5020, 5]
type = ChangeState
trigger1 = HitShakeOver
value = 77030

[State 5020, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 5020, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5020, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
trigger4 = anim = [5051,5059]
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; HITA_UP (initial going up)
[Statedef 77030]
type    = A
movetype= H
physics = N
ctrl = 0

[State 5030, 1]
type = VelAdd;Gravity
trigger1 = 1
y = GetHitVar(yaccel)

[State 5030, 2]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 5030, 3]
type = ChangeState
triggerall = !HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 77040 ;HITA_RECOV

[State 5030, 4]
type = SelfState
triggerall = HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 5050 ;HITA_FALL

[State 5030, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 77035 ;HITA_UP (transition)

;---------------------------------------------------------------------------
; HITA_UP_T (transition)
[Statedef 77035]
type    = A
movetype= H
physics = N

[State 5035, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5035)
trigger1 = Anim != [5051,5059] ;Not if in hit up anim
trigger1 = Anim != 5090 ;Not if hit off ground anim
value = 5035

[State 5035, 2]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5035, 3]
type = ChangeState
triggerall = !HitFall
trigger1 = HitOver  ;Hit is over
trigger2 = AnimTime = 0 ;Animation over
trigger3 = Vel Y > 0    ;Hit ground
trigger3 = Pos Y >= 10  ;.
trigger4 = Time = 0     ;No transition anim
trigger4 = Anim != 5035 ;.
value = 77040 ;HITA_RECOV

[State 5035, 4]
type = SelfState
triggerall = HitFall
trigger1 = HitOver  ;Hit is over
trigger2 = AnimTime = 0 ;Anim is over
trigger3 = Vel Y > 0    ;Hit ground
trigger3 = Pos Y >= 10  ;.
trigger4 = Time = 0     ;No transition anim
trigger4 = Anim != 5035 ;.
value = 5050 ;HITA_FALL

;---------------------------------------------------------------------------
; HITA_RECOV (recovering in air, not falling)
[Statedef 77040]
type    = A
movetype= H
physics = N
ctrl = 0

[State 2000, 0]
type = NotHitBy
trigger1 = 1
value = SCA

[State 5040, 1]
type = SelfState
trigger1 = !Alive
value = 5050

[State 5040, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim != 5040
trigger2 = Time = 0
trigger2 = Anim != 5035
value = 5040

[State 5040, 4]
type = StateTypeSet
trigger1 = HitOver
movetype = I

[State 5040, 5]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5040, 6]
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52 ;JUMPLAND

;===============================================================================
; Definition of the (Dir + Button) attack
;===============================================================================

;-------------------------------------------------------------------------------
; 通り魔蹴り（←or→＋A）
[Statedef 700]
type = S
movetype = A
physics = S
juggle  = 8+(P2StateType = A)*0
poweradd= 0
anim = 700
ctrl = 0
velset = 0,0

[State 3000, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 2
statetype = A
physics = N

[State -3,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2,= 1
value = 0, 3
channel = 0

[State -3,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4,= 1
value = 2, 1

[State 1305,VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = 4.3
y = -4.5

[State 1300,HitDef]
type = HitDef
trigger1 = Time = 0
attr = A, NA
animtype  = Hard
damage    =IfElse(var(34)=1,80,80)
getpower = ifelse(fvar(0) != 0,0,64),ifelse(fvar(0) != 0,0,64)
guardflag = H
hitflag = MAF
pausetime = 12,13
sparkno = 1
guard.sparkno = 41
hitsound = S3,ifelse((Random<333),3,ifelse((Random<666),13,23))
guardsound = S4, 0
sparkxy = -10,-40
ground.type = low
ground.slidetime = 17
ground.hittime  = 18
ground.velocity = -8
air.velocity = -4,-8
air.fall = 1
yaccel = 0.6
guard.velocity = -10
ground.cornerpush.veloff = -18
guard.cornerpush.veloff = -18
air.cornerpush.veloff = 0

[State 1305,Veladd]
type = Veladd
trigger1 = AnimElem = 2,> 0
y = .58

[State 1301,ChangeState]
type = ChangeState
trigger1 = AnimElem = 2,> 0
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 701
ctrl = 0

;------------------------終了
[Statedef 701]
type    = S
movetype= I
physics = S
anim = 701
velset = 0,0

[State 1305,PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State -3,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 1, 4

[State 1305,End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------ 超必殺技演出
[Statedef 3300]
type = S
movetype = A
physics = S
anim = 20001
velset = 0, 0
poweradd = -1000
ctrl = 0
juggle = IfElse ((PrevStateNo=[1000,2999]),0,8+(P2StateType = A)*8)

[State -3,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 0, 16
channel = 0

[State 3000,VarSet]
type = VarSet
trigger1 = Time = 2 && fvar(0) >0 && var(30) != 2
fvar(0) = .1

[State 3000,VarSet]
type = Varadd
trigger1 = Time = 2 && fvar(0) >0 && var(30) = 2
fvar(0) = -12

[State -2,PowerAdd]
type = PowerAdd
trigger1 = Time = 0 && PrevStateNo=[1000,2999]
value = -1000

[State 3000, Palfx]
type = Palfx
trigger1 = Time = 0 && (PrevStateNo=[1000,2999])
Add = 155,155,155
mul = 155,155,155
Time = 18
ignorehitpause = 1

[State 3000, notHitBy]
type = notHitBy
trigger1 = 1
value = SCA

;------------------------------
;KOFM SUPER CANCEL SIGN
;------------------------------
[State 1000, Explod]
type = Explod
triggerall = time = 0
trigger1 = prevstateno = [1000,1999]
anim = f7600
pos = 0,75
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 9
ownpal = 1

[State 1000, Explod]
type = Explod
triggerall = time = 0
trigger1 = prevstateno = [1000,1999]
anim = f7610
pos = 0,73
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 9
trans = addalpha
alpha = 256, 135
ownpal = 1

;------------------------------
;KOFM DREAM CANCEL SIGN
;------------------------------
[State 1000, Explod]
type = Explod
triggerall = time = 0
trigger1 = prevstateno = 3210
anim = f7630
pos = 0,75
postype = left
removetime = -2
bindtime = -1
pausemove = 1
supermove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 9
ownpal = 1

[State 1000, Explod]
type = Explod
triggerall = time = 0
trigger1 = prevstateno = 3210
anim = f7635
pos = 0,73
postype = left
removetime = -2
bindtime = -1
pausemove = 1
supermove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 9
trans = addalpha
alpha = 256, 135
ownpal = 1

;KOF02 PALFX
[State -2, PalFX]
type = PalFX
trigger1 = prevstateno = [1000,1999]
trigger1 = time < 17
time = 1
add = 255,255,255
sinadd = 0,0,0
invertall = 0
color = 256
ignorehitpause = 1
persistent = 2

;DREAMCANCEL PALFX
[State -2, PalFX]
type = PalFX
trigger1 = prevstateno = 3210
trigger1 = time < 17
time = 1
add = 55,200,10
sinadd = 0,0,0
invertall = 0
color = 256
ignorehitpause = 1
persistent = 2

[State 3100, Super]
type = Helper
trigger1 = Time = 2
persistent = 0
id = 2010
name = "super"
pos = 7,-40
postype = P1
stateno = 2001
helpertype = normal
supermove = 1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State 3000,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 36

[State 3030,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 3000,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 3301

;------------------------ 突進
[Statedef 3301]
type = S
movetype = A
physics = N
anim = 3201
velset = 0, 0

[State 100,1]
type = PlaySnd
trigger1 = Time= 1
value = 1, 0
channel = 2
loop = 1
persistent = 0

[State 3030,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 3010,VelSet]
type = VelSet
trigger1 = 1
x = 8

[State 3000,Explod]
type = Explod
trigger1 = TimeMod = 4, 0
anim = 3255
ID = 3255
pos = -44,0
postype = P1
sprpriority = 4
supermove = 1
ownpal = 1
removetime = -2

[State 3010,HitDef]
type = Hitdef
trigger1 = Time = 0
attr = S, HA
animtype = Hard
hitflag = MA
priority = 8,Miss
damage = 0 ,0
getpower = 0,0
sparkno = 3
guard.sparkno = 42
sparkxy = 0,-40
hitsound   = S3, 5
guardsound = S4, 1
pausetime = 3,3
ground.slidetime = 15
ground.type = High
ground.velocity = 0
guard.velocity = -5.0
air.velocity = -3.5,-6
yaccel = .5
fall = 1
fall.recover = 0
air.recover = 0
p2facing = 1
p1stateno = 3460
p2stateno = 3270
p2getp1state = 1

[State 3010,ChangeState]
type = ChangeState
trigger1 = Time = 24 || moveguarded
value = 3202

;------------------------ ヒット
[Statedef 3460]
type = S
movetype = A
physics = N
anim = 3260
velset = 2, 0
poweradd = 0
sprpriority = 1

[State 3030,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 3030,AfterImageTime]
type = AfterImageTime
trigger1 = Time = 0
trigger2 = AnimElem = 89
time = 0

[State 3030,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3042, 1]
type = Width
trigger1 = AnimElem = 77,< 0
value = 40+(Target,const(Size.ground.front))

[State 3030,TargetBind]
type = TargetBind
trigger1 = AnimElem = 1,>= 0 && AnimElem = 77,< 0
pos = 40+(Target,const(Size.ground.front)), 0

[State 3030,HitAdd]
type = HitAdd
trigger1 = AnimElem = 2,=2 || AnimElem =  5,=2 || AnimElem = 10 || AnimElem = 12 || AnimElem = 18,=2
trigger2 = AnimElem = 21,=2 || AnimElem = 26,=2|| AnimElem = 30 || AnimElem = 36,=2 || AnimElem = 39,=2
trigger3 = AnimElem = 43 || AnimElem = 52 || AnimElem = 54|| AnimElem = 56 || AnimElem = 58
trigger4 = AnimElem = 60|| AnimElem = 62 || AnimElem = 64 || AnimElem = 66 || AnimElem = 68
trigger5 = AnimElem = 70 || AnimElem = 72 || AnimElem = 74
trigger6 = AnimElem = 77 || AnimElem = 79 || AnimElem = 85 || AnimElem = 87
value = 1

[State -2,Envcolor]
type = Envcolor
trigger1 = AnimElem = 2,=2 || AnimElem =  5,=2 || AnimElem = 10 || AnimElem = 12 || AnimElem = 18,=2
trigger2 = AnimElem = 21,=2 || AnimElem = 26,=2|| AnimElem = 30 || AnimElem = 36,=2 || AnimElem = 39,=2
trigger3 = AnimElem = 43 || AnimElem = 52 || AnimElem = 54|| AnimElem = 56 || AnimElem = 58
trigger4 = AnimElem = 60|| AnimElem = 62 || AnimElem = 64 || AnimElem = 66 || AnimElem = 68
trigger5 = AnimElem = 70 || AnimElem = 72 || AnimElem = 74
trigger6 = AnimElem = 77 || AnimElem = 79 || AnimElem = 85 || AnimElem = 87
value = 255,255,255
time = 0
under = 1

[State 100,1]
type = PlaySnd
trigger1 = AnimElem = 10,=0 || AnimElem = 26,=2 || AnimElem = 30,=0 || AnimElem = 36,=2
trigger2 = AnimElem = 43,=0 || AnimElem = 52,=0 || AnimElem = 54,=0 || AnimElem = 56,=0
trigger3 = AnimElem = 60,=0 || AnimElem = 62,=0 || AnimElem = 68,=0 || AnimElem = 74,=0
value = 3, 5

[State 100,1]
type = PlaySnd
trigger1 = AnimElem =  2,=2 || AnimElem =  5,=2 || AnimElem = 12,=0 || AnimElem = 18,=2
trigger2 = AnimElem = 21,=2 || AnimElem = 39,=2 || AnimElem = 58,=0 || AnimElem = 64,=0
trigger3 = AnimElem = 66,=0 || AnimElem = 70,=0 || AnimElem = 72,=0
value = 3, 6

[State 100,1]
type = PlaySnd
trigger1 = AnimElem = 77,=0 || AnimElem = 79,=0 || AnimElem = 85,=0 || AnimElem = 87,=0
value = 3, 4

------------

[State 1000, TargetState]
type = TargetState
trigger1 = AnimElem =  5,=2 || AnimElem =  5,=2 || AnimElem = 12,=0 || AnimElem = 18,=2 || AnimElem = 21,=2
trigger2 = AnimElem = 29,=2 || AnimElem = 36,=2 || AnimElem = 44,=0 || AnimElem = 52,=0 || AnimElem = 56,=0
trigger3 = AnimElem = 60,=0 || AnimElem = 64,=0 || AnimElem = 68,=0 || AnimElem = 72,=0
value = 3270

[State 1000, TargetState]
type = TargetState
trigger1 = AnimElem =  2,=2 || AnimElem =  10,=0 || AnimElem = 26,=2 || AnimElem = 39,=2 || AnimElem = 54,=0
trigger2 = AnimElem = 58,=0 || AnimElem = 62,=0 || AnimElem = 66,=0 || AnimElem = 70,=0 || AnimElem = 74,=0
value = 3271

[State 3030,TargetLifeAdd]
type = TargetLifeAdd
trigger1 = AnimElem = 2,=2 || AnimElem =  5,=2 || AnimElem = 10 || AnimElem = 12 || AnimElem = 18,=2
trigger2 = AnimElem = 21,=2 || AnimElem = 26,=2|| AnimElem = 30 || AnimElem = 36,=2 || AnimElem = 39,=2
trigger3 = AnimElem = 43 || AnimElem = 52 || AnimElem = 54|| AnimElem = 56 || AnimElem = 58
trigger4 = AnimElem = 60|| AnimElem = 62 || AnimElem = 64 || AnimElem = 66 || AnimElem = 68
trigger5 = AnimElem = 70 || AnimElem = 72 || AnimElem = 74
value = -9
kill = 0

[State 3030,Explod]
type = Explod
trigger1 = AnimElem = 2,=2
anim = f5;2420
pos = 35,-40
postype = P1
sprpriority = 3
bindtime = 1
ownpal = 1

[State 3030,Explod]
type = Explod
trigger1 = AnimElem =  5,=2 || AnimElem = 43
anim = f5;2420
pos = 65,-60
postype = P1
sprpriority = 3
bindtime = 1
ownpal = 1

[State 3030,Explod]
type = Explod
trigger1 = AnimElem = 26,=2 || AnimElem = 39,=2
anim = f5;2420
pos = 60,-25
postype = P1
sprpriority = 3
bindtime = 1
ownpal = 1

[State 3030,Explod]
type = Explod
trigger1 = AnimElem = 30 || AnimElem = 36,=2
anim = f5;2420
pos = 40,-65
postype = P1
sprpriority = 3
bindtime = 1
ownpal = 1

[State 3030,Explod]
type = Explod
trigger1 = AnimElem = 10 || AnimElem = 18,=2
trigger2 = AnimElem = 21,=2|| AnimElem = 52 || AnimElem = 54|| AnimElem = 56 || AnimElem = 58
trigger3 = AnimElem = 60|| AnimElem = 62 || AnimElem = 64 || AnimElem = 66 || AnimElem = 68
trigger4 = AnimElem = 70 || AnimElem = 72 || AnimElem = 74
anim = f3
pos = 35,-65
postype = P1
sprpriority = 3
bindtime = 1
ownpal = 1

[State 3030,Explod]
type = Explod
trigger1 = AnimElem = 12
anim = f3
pos = 50,-65
postype = P1
sprpriority = 3
bindtime = 1
ownpal = 1

[State 3030,Explod]
type = Explod
trigger1 = AnimElem = 77 || AnimElem = 85 || AnimElem = 79 || AnimElem = 87
anim = f3
pos = 0,-60
postype = P2
sprpriority = 3
bindtime = 1
ownpal = 1

[State 3010, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 77
value = A

[State 1305,VelSet]
type = VelSet
trigger1 = AnimElem = 77
x = 8
y = -9

[State 105, VelMul]
type = VelMul
trigger1 = AnimElem = 77,>8 && AnimElem = 79,<0
trigger2 = AnimElem = 79,>7 && AnimElem = 85,<0
trigger3 = AnimElem = 85,>7 && AnimElem = 87,<0
trigger4 = AnimElem = 87,>17
x = .90

[State 1305,Veladd]
type = Veladd
trigger1 = AnimElem = 77,>8 && AnimElem = 79,<0
trigger2 = AnimElem = 79,>7 && AnimElem = 85,<0
trigger3 = AnimElem = 85,>7 && AnimElem = 87,<0
trigger4 = AnimElem = 87,>17
y = .4

[State 3030,TargetLifeAdd]
type = TargetLifeAdd
trigger1 = AnimElem = 77,=2 || AnimElem =  85,=2 || AnimElem = 79,=2 || AnimElem = 87,=2
value = -36
kill = IfElse((AnimElem = 87,=2),1,0)

[State 1000, TargetState]
type = TargetState
trigger1 = AnimElem = 77,=2 || AnimElem =  85,=2 || AnimElem = 79,=2
value = 3272

[State 860,PosFreeze]
type = PosFreeze
trigger1 = AnimElem = 77,=[1,8]
trigger2 = AnimElem = 85,=[0,7]
trigger3 = AnimElem = 79,=[0,7]
trigger4 = AnimElem = 87,=[0,17]

[State 1000, TargetState]
type = TargetState
trigger1 = AnimElem = 87,=2
value = 3273

[State 3005, envshake]
type = envshake
trigger1 = AnimElem = 87
time = 20
freq = 60
ampl = -8

[State 3005, Pause]
type = Pause
triggerall = RoundState = 2
trigger1 = AnimElem = 87,=[0,10]
time = 1

[State 3030,ChangeState]
type = ChangeState
trigger1 = AnimElem = 77,>0
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 3461;3261
ctrl = 0

;------------------------着地
[Statedef 3461]
type    = S
movetype= I
physics = S
velset = 0,0
anim = 3261
ctrl = 0

[State -3,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2,=1
value = 0, 17
channel = 0

[State -3,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 1, 4

[State 1305,PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1100,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------
; 鳳凰脚（相手動作）
;------------------------ 上段やられ
[Statedef 3270]
type    = S
movetype= H
physics = N
anim = 5002
velset = 0, 0

[State 3030,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

;[State 3000, NotHitBy]
;type = NotHitBy
;trigger1 = 1
;value = SCA

[State 1120, PosSet]
type = PosSet
trigger1 = Time < 30
y = -1

[State 5011, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
value = 5007

[State 1120, PosSet]
type = PosSet
trigger1 = Time > 30
y = 0

[State 5011, 6]
type = SelfState
trigger1 = Time > 30
value = 5001

;------------------------ 下段やられ
[Statedef 3271]
type    = S
movetype= H
physics = N
anim = 5012
velset = 0, 0

[State 3030,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

;[State 3000, NotHitBy]
;type = NotHitBy
;trigger1 = 1
;value = SCA

[State 1120, PosSet]
type = PosSet
trigger1 = Time < 30
y = -1

[State 5011, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
value = 5017

[State 1120, PosSet]
type = PosSet
trigger1 = Time > 30
y = 0

[State 5011, 6]
type = SelfState
trigger1 = Time > 30
value = 5011

;------------------------ 吹き飛ばし１
[Statedef 3272]
type = A
movetype = H
physics = N
velset = 0,0
ctrl = 0

[State 3030,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 5020, 3]
type = ChangeAnim
trigger1 = Time <= 8
value = 5050

[State 3056, PosAdd]
type = PosAdd
trigger1 = Time <= 8
x = IfElse(Time % 2 = 0,1,-1)

;[State 810,NotHitBy]
;type = NotHitBy
;trigger1 = 1
;value = SCA

[State 830,SelfState]
type = ChangeState
trigger1 = Time > 8
value = 3274

;------------------------ 吹き飛ばし２
[Statedef 3273]
type = A
movetype = H
physics = N
velset = 0,0
ctrl = 0

[State 3030,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 5020, 3]
type = ChangeAnim
trigger1 = Time <= 18 && SelfAnimExist(5051)
value = 5051

[State 5020, 2]
type = ChangeAnim
trigger1 = Time <= 18 && !SelfAnimExist(5051)
value = 5050

[State 3056, PosAdd]
type = PosAdd
trigger1 = Time <= 18
x = IfElse(Time % 2 = 0,1,-1)

;[State 810,NotHitBy]
;type = NotHitBy
;trigger1 = 1
;value = SCA

[State 830,SelfState]
type = ChangeState
trigger1 = Time > 18
value = 3274

;------------------------ 吹き飛ばし３
[Statedef 3274]
type    = A
movetype= H
physics = N
velset = -2,-10
ctrl = 0

[State 3030,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

;[State 810,NotHitBy]
;type = NotHitBy
;trigger1 = 1
;value = SCA

[State 5050, 2]
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 5050, 3]
type = VelAdd
trigger1 = Time > 0
y = .45

[State 1111,VelSet]
type = VelSet
trigger1 = Time > 0
trigger1 = Vel Y > 0 && Pos Y >= 0
x = -2

[State 5050, 6]
type = SelfState
trigger1 = Time > 0
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 5100

;-------------------------------------------------------------------------------
; 骸突き（→＋X）
[Statedef 720]
type    = S
movetype= A
physics = S
juggle  = 8+(P2StateType = A)*8
velset = 0,0
ctrl = 0
anim = 720
poweradd = 0

[State -3,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 28
channel = 0

[State -3,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 6,=1
value = 1, 8

[State -3,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 11,=1
value = 2, 0

[State 1300,HitDef]
type = HitDef
trigger1 = Time = 0
attr = A, NA
animtype  = Hard
damage    =IfElse(var(34)=1,80,80)
getpower = ifelse(fvar(0) != 0,0,64),ifelse(fvar(0) != 0,0,64)
guardflag = M
hitflag = MAF
pausetime = 12,13
sparkno = S2410
guard.sparkno = 41
hitsound = S3, 6
guardsound = S4, 0
sparkxy = -10,-45
ground.type = high
ground.slidetime = 17
ground.hittime  = 18
ground.velocity = -8
air.velocity = -4,-8
air.fall = 1
yaccel = 0.6
guard.velocity = 0
ground.cornerpush.veloff = -18
guard.cornerpush.veloff = -18
air.cornerpush.veloff = 0

[State 1030,ChangeState]
type = TargetState
trigger1 = moveguarded
value = 725

[State 220,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 16
movetype = I

[State 1305,PosSet]
type = PosAdd
trigger1 = AnimElem = 13 || AnimElem = 16
x = 8

[State 1305,PosSet]
type = PosAdd
trigger1 = AnimElem = 23 || AnimElem = 24
x = -8

[State 200,End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------ 
[Statedef 725]
type = S
movetype = H
physics = S
velset = 0,0
ctrl = 0

[State 1040,ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0 
trigger1 = authorname = "Third" && SelfAnimExist(5360)
value = 5360

[State 1040,ChangeAnim]
type = ChangeAnim
triggerall = Time > 0 && Time < 10 && anim != 5910
trigger1 = SelfAnimExist(5910)
value = 5910

[State 1040,ChangeAnim]
type = ChangeAnim
triggerall = Time > 15 && anim != 5911
trigger1 = SelfAnimExist(5911)
value = 5911

[State 1040,ChangeAnim]
type = ChangeAnim2
triggerall = Time = 0
trigger1 = !SelfAnimExist(5910) && !SelfAnimExist(5360) && !SelfAnimExist(5911)
value = 725

[State 1040,SelfState]
type = SelfState
trigger1 = Time > 20 && ((!SelfAnimExist(5911) && anim = 5910) || anim = 5911 || anim = 725)
trigger2 = AnimTime = 0 && anim = 5360
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; 骸突き（→＋X）・キャンセル版
[Statedef 721]
type    = S
movetype= A
physics = S
juggle  = 8+(P2StateType = A)*8
velset = 0,0
ctrl = 0
anim = 720
poweradd = 0

[State -3,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 28
channel = 0

[State -3,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 6,=1
value = 1, 8

[State -3,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 11,=1
value = 2, 0

[State 1300,HitDef]
type = HitDef
trigger1 = Time = 0
attr = A, NA
animtype  = Hard
damage    =IfElse(var(34)=1,80,80)
getpower = ifelse(fvar(0) != 0,0,64),ifelse(fvar(0) != 0,0,64)
guardflag = M
hitflag = MAF
pausetime = 12,13
sparkno = S2410
guard.sparkno = 41
hitsound = S3, 6
guardsound = S4, 0
sparkxy = -10,-45
ground.type = High
ground.slidetime = 17
ground.hittime  = 18
ground.velocity = -8
air.velocity = -4,-8
air.fall = 1
yaccel = 0.6
guard.velocity = 0
ground.cornerpush.veloff = -18
guard.cornerpush.veloff = -18
air.cornerpush.veloff = 0

[State 220,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 16
movetype = I

[State 1305,PosSet]
type = PosAdd
trigger1 = AnimElem = 13 || AnimElem = 16
x = 8

[State 1305,PosSet]
type = PosAdd
trigger1 = AnimElem = 23 || AnimElem = 24
x = -8

[State 200,End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;===============================================================================
; Definition of the Basic Throws
;===============================================================================

;-------------------------------------------------------------------------------
; 頭乗刺し（Ｐ通常投げ）
[Statedef 800]
type = S
movetype = A
physics = S
ctrl = 0
anim = 800
velset = 0, 0

[State 800,HitDef]
type = Hitdef
trigger1 = Time = 0 && var(30) = 2
trigger1 = P2MoveType != H
attr = S, NT
priority = 3,Miss
getpower = 0
hitflag = M-
numhits = 0
sparkno = -1
p1facing = 1
p2facing = 1
p1stateno = 810
p2stateno = 820
p2getp1state = 1
hitsound = -1

[State 800,HitDef]
type = Hitdef
trigger1 = Time = 0 && var(30) != 2
trigger1 = P2MoveType != H
trigger1 = P2StateNo != [150,155]
attr = S, NT
priority = 3,Miss
getpower = 0
hitflag = M-
numhits = 0
sparkno = -1
p1facing = 1
p2facing = 1
p1stateno = 810
p2stateno = 820
p2getp1state = 1
hitsound = -1

[State 1000, 3]
type = PowerAdd
trigger1 = AnimElem = 2 && var(30) = 2
trigger1 = fvar(0) = 0
value = -242

[State 1030, Varadd(24)]
type = Varadd
triggerall = AnimElem = 2 && var(30) = 2
trigger1 = fvar(0) > 1.9
fvar(0) = -1.9

[State 800,ChangeState]
type = ChangeState
trigger1 = AnimElem = 2 && var(30) != 2
value = 215
ctrl = 0

[State 800,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; 頭乗刺し（成功）
[Statedef 810]
type = S
movetype = A
physics = S
anim = 810
velset = 0, 0
poweradd = 0
sprpriority = -1

[State 10000, 1]
type = VarSet
trigger1 = Time = 0
var(33) = 0

[State 10000, 1]
type = VarSet
trigger1 = Time < 10 && !var(33) && PrevStateNo != 860
trigger1 = ((Target,Command = "holdfwd") || (Target,Command = "holdback")) && ((Target,Command = "y"))
var(33) = 1

[State 810,TargetBind]
type = TargetBind
trigger1 = Time < 10 && Time > 8 && var(33)
pos = 50, 0

[State 810,TargetBind]
type = ChangeState
trigger1 = Time < 10 && Time > 8 && var(33)
value = 950

[State 810,Explod]
type = Explod
trigger1 = AnimElem = 1
anim = f800
pos = 20,-45
postype = P1
sprpriority = -1
bindtime = 1
ownpal = 1

[State -3,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1,= 1
value = 1, 8

[State -3,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 5 || AnimElem = 9 || AnimElem = 13 || AnimElem = 17
trigger2 = AnimElem = 7 || AnimElem = 11 || AnimElem = 15 || AnimElem = 19
value = 3, IfElse(random < 500,5,6)

[State -3,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3,= 1
value = 0, 6

[State 861,VarSet]
type = VarSet
trigger1 = Time = 0
fvar(3) = 0

[State 861,VarAdd]
type = VarAdd
triggerall = Target,Command = "random"
trigger1 = 1
fvar(3) = 1

[State 810,Explod]
type = Explod
trigger1 = AnimElem = 5 || AnimElem = 9 || AnimElem = 13 || AnimElem = 17
anim = f5
pos = -8,-32
postype = P1
sprpriority = 3
bindtime = 1
ownpal = 1

[State 810,Explod]
type = Explod
trigger1 = AnimElem = 7 || AnimElem = 11 || AnimElem = 15 || AnimElem = 19
anim = f5
pos = -24,-36
postype = P1
sprpriority = 3
bindtime = 1
ownpal = 1

[State 860,SprPriority]
type = SprPriority
trigger1 = AnimElem = 4
value = 2

[State 810,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 810,TargetBind]
type = BindtoTarget
trigger1 = AnimElem = 1
pos = 4, 0

[State 810,TargetBind]
type = BindtoTarget
trigger1 = AnimElem = 2
pos = 0,IfElse(Target,const(Size.head.pos.Y)>-35,0,(Target,const(Size.head.pos.Y)+35)/3)

[State 810,TargetBind]
type = BindtoTarget
trigger1 = AnimElem = 3
pos = -4,IfElse(Target,const(Size.head.pos.Y)>-35,0,(Target,const(Size.head.pos.Y)+35)/1.5)

[State 810,TargetBind]
type = BindtoTarget
trigger1 = AnimElem = 4
pos = -12, 35,head

[State 810,TargetLifeAdd]
type = TargetLifeAdd
trigger1 = AnimElem = 5 || AnimElem = 9 || AnimElem = 13 || AnimElem = 17 || AnimElem = 7 || AnimElem = 11 || AnimElem = 15 || AnimElem = 19
value = -24

[State 810,ChangeState]
type = ChangeState
trigger1 = (AnimElem = 10 || AnimElem = 14 || AnimElem = 18 || AnimElem = 8 || AnimElem = 12 || AnimElem = 17 || AnimElem = 6) && fvar(3) >= 8
trigger2 = AnimTime = 0
value = 811
ctrl = 0

;------------------------上昇
[Statedef 811]
type    = A
movetype= I
physics = N
juggle  = 4
velset = -2,-12.4
anim = 811
ctrl = 0

[State 830,veladd]
type = veladd
trigger1 = 1
y = .58

[State 1301,ChangeState]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 52
ctrl = 0

;-------------------------------------------------------------------------------
; 頭乗刺し（投げられ側）
[Statedef 820]
type = A
movetype = H
physics = N
ctrl = 0

[State 820,ChangeAnim2]
type = ChangeAnim2
trigger1 = Time = 0
value = 820

[State 870,ChangeState]
type = ChangeState
trigger1 = P2StateNo = 811
value = 830

;------------------------ 
[Statedef 830]
type = A
movetype = H
physics = N
velset = -3.7,-6
ctrl = 0

[State 830,ChangeAnim]
type = ChangeAnim2
trigger1 = Time = 0
value = 830

[State 830,veladd]
type = veladd
trigger1 = 1
y = .45

[State 5550, 4] ;Recover near ground
type = ChangeState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
trigger1 = Command = "recovery"
value = 5200 ;HITFALL_RECOVER

[State 830,SelfState]
type = SelfState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 5100

;-------------------------------------------------------------------------------
; 下血突き（Ｋ通常投げ）
[Statedef 850]
type = S
movetype = A
physics = S
ctrl = 0
anim = 800
velset = 0, 0

[State 800,HitDef]
type = Hitdef
trigger1 = Time = 0 && var(30) = 2
trigger1 = P2MoveType != H
attr = S, NT
priority = 3,Miss
getpower = 0
hitflag = M-
numhits = 0
sparkno = -1
p1facing = 1
p2facing = 1
p1stateno = 860
p2stateno = 870
p2getp1state = 1
hitsound = -1

[State 800,HitDef]
type = Hitdef
trigger1 = Time = 0 && var(30) != 2
trigger1 = P2MoveType != H
trigger1 = P2StateNo != [150,155]
attr = S, NT
priority = 3,Miss
getpower = 0
hitflag = M-
numhits = 0
sparkno = -1
p1facing = 1
p2facing = 1
p1stateno = 860
p2stateno = 870
p2getp1state = 1
hitsound = -1

[State 1000, 3]
type = PowerAdd
trigger1 = AnimElem = 2 && var(30) = 2
trigger1 = fvar(0) = 0
value = -242

[State 1030, Varadd(24)]
type = Varadd
triggerall = AnimElem = 2 && var(30) = 2
trigger1 = fvar(0) > 1.9
fvar(0) = -1.9

[State 800,ChangeState]
type = ChangeState
trigger1 = AnimElem = 2 && var(30) != 2
value = 240
ctrl = 0

[State 800,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; 下血突き（成功）
[Statedef 860]
type = S
movetype = A
physics = S
anim = 860
velset = 0, 0
poweradd = 0
sprpriority = -1

[State 10000, 1]
type = VarSet
trigger1 = Time = 0
var(33) = 0

[State 10000, 1]
type = VarSet
trigger1 = Time < 10 && !var(33) && PrevStateNo != 860
trigger1 = ((Target,Command = "holdfwd") || (Target,Command = "holdback")) && ((Target,Command = "b"))
var(33) = 1

[State 810,TargetBind]
type = TargetBind
trigger1 = Time < 10 && Time > 8 && var(33)
pos = 50, 0

[State 810,TargetBind]
type = ChangeState
trigger1 = Time < 10 && Time > 8 && var(33)
value = 950

[State 860,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 870,Turn]
type = Turn
trigger1 = AnimElem = 8

[State 810,TargetBind]
type = BindtoTarget
trigger1 = AnimElem = 1
pos = Target,const(Size.ground.front)+32, 0

[State 810,TargetBind]
type = BindtoTarget
trigger1 = AnimElem = 2
pos = Target,const(Size.ground.front), 0

[State 810,TargetBind]
type = BindtoTarget
trigger1 = AnimElem = 3
pos = 0, 0

[State 810,TargetBind]
type = BindtoTarget
trigger1 = AnimElem = 4
pos = -(Target,const(Size.ground.Back)), 0

[State 810,TargetBind]
type = BindtoTarget
trigger1 = AnimElem = 5
pos = -(Target,const(Size.ground.Back))-32, 0

[State 810,TargetBind]
type = TargetBind
trigger1 = AnimElem = 14
pos = 80,0

[State 810,TargetBind]
type = TargetBind
trigger1 = AnimElem = 15
pos = 92,-28

[State 860,TargetBind]
type = TargetState
trigger1 = AnimElem = 15,=1
value = 880

[State 860,Posadd]
type = Posadd
trigger1 = AnimElem = 15
x = -11

[State 810,Explod]
type = Explod
trigger1 = AnimElem = 14
anim = f5;2420
pos = 55,-55
postype = P1
sprpriority = 3
bindtime = 1
ownpal = 1
facing = -1

[State -3,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 12,= 1
value = 0, 7

[State -3,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 14,= 1
value = 3, 6

[State 810,TargetLifeAdd]
type = TargetLifeAdd
trigger1 = AnimElem = 14
value = -117

[State 860,Width]
type = Width
trigger1 = AnimElem = 1 && FrontEdgeDist < 60
edge = 60,20

[State 860,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; 下血突き（投げられ側）
[Statedef 870]
type = A
movetype = H
physics = N
ctrl = 0

[State 870,ChangeAnim2]
type = ChangeAnim2
trigger1 = Time = 0
value = 870

;------------------------ 
[Statedef 880]
type = A
movetype = H
physics = N
anim = 5030
velset = 4,-8
ctrl = 0

[State 830,ChangeAnim]
type = ChangeAnim2
trigger1 = Time = 0
value = 880

[State 830,veladd]
type = veladd
trigger1 = 1
y = .6

[State 5550, 4] ;Recover near ground
type = ChangeState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
trigger1 = Command = "recovery"
value = 5200 ;HITFALL_RECOVER

[State 830,SelfState]
type = SelfState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 5100

;=====================================================================
; 特殊動作
;=====================================================================
;
;---------------------------------------------------------------------------
; 三角跳び
[Statedef 53]
type = A
movetype = I
physics = N
velset = 0, 0
ctrl = 0

[State 640, 1]
type = Turn
trigger1 = FrontEdgeBodyDist <= 3

[State 640, 3]
type = ChangeState
trigger1 = Time = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------
; パワーMAX発動
;------------------------ ノーマル
[Statedef 4200]
type = S
movetype = A
physics = S
anim = 4200
velset = 0, 0
ctrl = 0

[State 3000,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
ignorehitpause = 1

[State 4000, 1]
type = Explod
trigger1 = AnimElem = 1,=1
anim = 2205
sprpriority = -1
pos = -2,-75
supermove = 1
ownpal = 1

[State 3000, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 10000, 1]
type = VarSet
trigger1 = Time = 0
fvar(0) = 24

[State 10000, 1]
type = VarSet
trigger1 = 1
var(47) = 1

[State 1030,EnvShake]
type = EnvShake
trigger1 = AnimElem = 3
time = 14
ampl = -8

[State 100,1]
type = PlaySnd
trigger1 = AnimElem = 3,=1
value = 1, 11

[State -3,Super]
type = Helper
trigger1 = Time = 0
persistent = 0
id = 7000
name = "POWMAX"
pos = 0,0
postype = P1
stateno = 7050
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999999999999

[State 3000,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------ クイック
[Statedef 4210]
type = S
movetype = A
physics = S
anim = 0
velset = 0, 0
ctrl = 0
poweradd = -2000

[State 3010,PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = 1, 10

[State 3000, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 10000, 1]
type = VarSet
trigger1 = Time = 0
fvar(0) = 24

[State 10000, 1]
type = VarSet
trigger1 = 1
var(47) = 1

[State -3,Super]
type = Helper
trigger1 = Time = 0
persistent = 0
id = 7000
name = "POWMAX"
pos = 0,0
postype = P1
stateno = 7050
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999999999999

[State 3000,ChangeState]
type = ChangeState
trigger1 = Time = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------
; ガードキャンセル緊急回避動作（前）
[Statedef 4050]
type = S
movetype = I
physics = N
ctrl = 0
anim = 4000
velset = 0, 0
poweradd = -1000

;--------------
;EVADE EFFECTS
;--------------
[State 900, 7]
type = PlaySnd
trigger1 = prevstateno = [150,152]
trigger1 = time = 0
value = s9900,3

[State 1000, Dodge Explod2]
type = Explod
triggerall = numexplod(4150) <= 0
trigger1 = prevstateno = [150,152]
trigger1 = numexplod(4150) <= 0 && teamside = 1
trigger1 = time = 0
ignorehitpause = 1
persistent = 0
anim = f4160
pos = 4,120
id = 4150
postype = left
bindtime = -1
ontop = 1
ownpal = 1

[State 1000, Dodge Explod1]
type = Explod
triggerall = numexplod(4150) <= 0
trigger1 = prevstateno = [150,152]
trigger1 = numexplod(4150) <= 0 && teamside = 2
trigger1 = time = 0
ignorehitpause = 1
persistent = 0
anim = f4160
pos = -93,120
id = 4150
postype = right
bindtime = -1
ontop = 1
ownpal = 1

[State 1000, Explod]
type = Explod
trigger1 = prevstateno = [150,152]
trigger1 = time = 0
anim = f4190
pos = 11,-60
postype = p1
bindtime = 1
removetime = -2
supermove = 1
pausemove = 1
ownpal = 1
sprpriority = 5

;KOFXI PALFX WHITE ROLL
[State 810, 1]
type = AfterImage
trigger1 = prevstateno = [150,152]
trigger1 = time = 0
time = 20
length = 10
framegap = 3
palcontrast = 256,256,256
paladd = 0,0,0
palmul = 1,1,1

[State 0, PalFX]
type = PalFX
trigger1 = prevstateno = [150,152]
trigger1 = time = 0
time = 5
add = 130,130,130
mul = 256,256,256
sinadd = -80,-80,-80,4
invertall = 0
color = 0

[State 0, Pause]
type = Pause
trigger1 = prevstateno = [150,152]
trigger1 = time = 0
time = 5
movetime = 3
ignorehitpause = 1

[State 4000,ChangeState]
type = ChangeState
trigger1 = Time = 0
trigger1 = Command = "holdback"
value = 4060

[State 1000, 0]
type = HitBy
trigger1 = animelemno(0)<11
value = SCA,NT,ST,HT

[State 4000,PlayerPush]
type = PlayerPush
trigger1 = animelemno(0)<11
value = 0

[State 4000,VelSet]
type = VelSet
trigger1 = AnimElem = 3
x = 6

[State 4000,VelSet]
type = VelSet
trigger1 = AnimElem = 11
x = 0

[State 4150,5]
type = PlaySnd
trigger1 = Time = 1
value = 0, 4

[State 4000,Turn]
type = Turn
trigger1 = AnimTime = 0 && P2BodyDist X < -5

[State 4000,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------
; 緊急回避動作（前）
[Statedef 4000]
type = S
movetype = I
physics = N
ctrl = 0
anim = 4000
velset = 0, 0

[State 1000, 0]
type = HitBy
trigger1 = animelemno(0)<11
value = SCA,NT,ST,HT

[State 4050,2]
type = PlayerPush
trigger1 = animelemno(0)<11
value = 0

[State 4050,3]
type = VelSet
trigger1 = AnimElem = 3
x = 6

[State 4050,4]
type = VelSet
trigger1 = AnimElem = 11
x = 0

[State 4150,5]
type = PlaySnd
trigger1 = Time = 1
value = 0, 4

[State 4050,7]
type = Turn
trigger1 = AnimTime = 0 && P2BodyDist X < -5

[State 4050,8]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------
; ガードキャンセル緊急回避動作（後）
[Statedef 4060]
type = S
movetype = I
physics = N
ctrl = 0
anim = 4010
velset = 0, 0

;--------------
;EVADE EFFECTS
;--------------
[State 900, 7]
type = PlaySnd
trigger1 = prevstateno = [150,152]
trigger1 = time = 0
value = s9900,3

[State 1000, Dodge Explod2]
type = Explod
triggerall = numexplod(4150) <= 0
trigger1 = prevstateno = [150,152]
trigger1 = numexplod(4150) <= 0 && teamside = 1
trigger1 = time = 0
ignorehitpause = 1
persistent = 0
anim = f4160
pos = 4,120
id = 4150
postype = left
bindtime = -1
ontop = 1
ownpal = 1

[State 1000, Dodge Explod1]
type = Explod
triggerall = numexplod(4150) <= 0
trigger1 = prevstateno = [150,152]
trigger1 = numexplod(4150) <= 0 && teamside = 2
trigger1 = time = 0
ignorehitpause = 1
persistent = 0
anim = f4160
pos = -93,120
id = 4150
postype = right
bindtime = -1
ontop = 1
ownpal = 1

[State 1000, Explod]
type = Explod
trigger1 = prevstateno = [150,152]
trigger1 = time = 0
anim = f4190
pos = 11,-60
postype = p1
bindtime = 1
removetime = -2
supermove = 1
pausemove = 1
ownpal = 1
sprpriority = 5

;KOFXI PALFX WHITE ROLL
[State 810, 1]
type = AfterImage
trigger1 = prevstateno = [150,152]
trigger1 = time = 0
time = 20
length = 10
framegap = 3
palcontrast = 256,256,256
paladd = 0,0,0
palmul = 1,1,1

[State 0, PalFX]
type = PalFX
trigger1 = prevstateno = [150,152]
trigger1 = time = 0
time = 5
add = 130,130,130
mul = 256,256,256
sinadd = -80,-80,-80,4
invertall = 0
color = 0

[State 0, Pause]
type = Pause
trigger1 = prevstateno = [150,152]
trigger1 = time = 0
time = 5
movetime = 3
ignorehitpause = 1

[State 1000, 0]
type = HitBy
trigger1 = animelemno(0)<11
value = SCA,NT,ST,HT

[State 4100,4]
type = PlayerPush
trigger1 = animelemno(0)<11
value = 0

[State 4100,5]
type = VelSet
trigger1 = AnimElem = 3
x = -6

[State 4100,6]
type = VelSet
trigger1 = AnimElem = 11
x = 0

[State 4150,5]
type = PlaySnd
trigger1 = Time = 1
value = 0, 4

[State 4100,9]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------
; 緊急回避動作（後）
[Statedef 4010]
type = S
movetype = I
physics = N
ctrl = 0
anim = 4010
velset = 0, 0

[State 1000, 0]
type = HitBy
trigger1 = animelemno(0)<11
value = SCA,NT,ST,HT

[State 4150,2]
type = PlayerPush
trigger1 = animelemno(0)<11
value = 0

[State 4150,3]
type = VelSet
trigger1 = AnimElem = 3
x = -6

[State 4150,4]
type = VelSet
trigger1 = AnimElem = 11
x = 0

[State 4150,5]
type = PlaySnd
trigger1 = Time = 1
value = 0, 4

[State 4150,7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------
; ガードキャンセルグランドフロントステップ
[Statedef 4100]
type = S
movetype = I
physics = N
ctrl = 0
anim = 110
velset = 0, 0
poweradd = IfElse(var(47)=3,0,IfElse((Command = "ay"),-212,-606))

[State 1020, PalFX]
type = PalFX
triggerall = GameTime % 2
trigger1 = AnimElem = 2,< 0
time = 1
add = 255,255,255

[State 3000,VarSet]
type = Varadd
trigger1 = Time = 0 && fvar(0) > 0
fvar(0) = IfElse((Command = "ay"),-4.8,-1.92)
 
[State 1000, 0]
type = HitBy
trigger1 = 1
value = SCA,NT,ST,HT

[State 105,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2,=0
value = 1, 12

[State 710, 5]
type = PosAdd
trigger1 = AnimElem = 2
x = 25

[State 100,0]
type = VelSet
trigger1 = AnimElem = 2
x = 7

[State 105, VelMul]
type = VelMul
trigger1 = AnimElem = 2, > 0
x = .94

[State 100,6]
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100,5]
type = ChangeState
trigger1 = Command = "holdupfwd"
value = 40

[State 4150, 6]
type = AfterImage
trigger1 = AnimElem = 2
time = 10
length = 10
framegap = 3
trans = add1
palcontrast = 128,128,128
paladd = 0,0,0
palmul = 1,1,1

[State 100,4]
type = ChangeState
trigger1 = AnimTime = 0
value = 101
ctrl = 1

;---------------------------------------------------------------------
; ガードキャンセル吹っ飛ばし攻撃
[Statedef 501]
type = S
movetype = A
physics = S
ctrl = 0
anim = 501
velset = 0, 0
poweradd = IfElse(fvar(0) > 0,0,-1000)
juggle  = 8+(P2StateType = A)*8

;--------------------------------
;GUARD COUNTER KNOCK DOWN EFFECTS
;--------------------------------
[State 900, 7]
type = PlaySnd
trigger1 = prevstateno = [150,152]
trigger1 = time = 0
value = s9900,3

[State 1000, Dodge Explod2]
type = Explod
triggerall = numexplod(4150) <= 0
trigger1 = prevstateno = [150,152]
trigger1 = numexplod(4150) <= 0 && teamside = 1
trigger1 = time = 0
ignorehitpause = 1
persistent = 0
anim = f4160
pos = 4,120
id = 4150
postype = left
bindtime = -1
ontop = 1
ownpal = 1

[State 1000, Dodge Explod1]
type = Explod
triggerall = numexplod(4150) <= 0
trigger1 = prevstateno = [150,152]
trigger1 = numexplod(4150) <= 0 && teamside = 2
trigger1 = time = 0
ignorehitpause = 1
persistent = 0
anim = f4160
pos = -93,120
id = 4150
postype = right
bindtime = -1
ontop = 1
ownpal = 1

[State 1000, Explod]
type = Explod
trigger1 = prevstateno = [150,152]
trigger1 = time = 0
anim = f4190
pos = 11,-60
postype = p1
bindtime = 1
removetime = -2
supermove = 1
pausemove = 1
ownpal = 1
sprpriority = 5

;KOFXI PALFX WHITE ROLL
[State 810, 1]
type = AfterImage
trigger1 = prevstateno = [150,152]
trigger1 = time = 0
time = 20
length = 10
framegap = 3
palcontrast = 256,256,256
paladd = 0,0,0
palmul = 1,1,1

[State 0, PalFX]
type = PalFX
trigger1 = prevstateno = [150,152]
trigger1 = time = 0
time = 5
add = 130,130,130
mul = 256,256,256
sinadd = -80,-80,-80,4
invertall = 0
color = 0

[State 0, Pause]
type = Pause
trigger1 = prevstateno = [150,152]
trigger1 = time = 0
time = 5
movetime = 3
ignorehitpause = 1

[State 3000,VarSet]
type = Varadd
trigger1 = Time = 0 && fvar(0) > 0
fvar(0) = -12

[State -3,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1,=0 ;&& Random < 333
value = 0, 7
channel = 0
volume = 255

[State -3,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1,=1
value = 2, 1

[State 1000, 0]
type = HitBy
trigger1 = movetype = A
value = SCA,NT,ST,HT

[State 500,StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 5
movetype = I

[State 440, HitDef]
type = HitDef
trigger1 = var(30) = 2
trigger1 = AnimElem = 4
attr = S, NA
damage    = 0
getpower = 0,0
animtype = DiagUp
hitflag = MAF
guardflag = M
hitonce = 1
pausetime = 12,12
sparkno = S2010
guard.sparkno = S2060
sparkxy = -10,-44
hitsound = S3,4
guardsound = S4,0
ground.type = Low
ground.slidetime = 16
ground.hittime  = 16
ground.velocity = -8.5,-8
air.hittime = 13
air.velocity = -8.5,-8
guard.velocity = -15
fall = 1
fall.recover = 0
yaccel = .45
air.juggle = 8
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -25
air.cornerpush.veloff = 0

[State 510,HitDef]
type = HitDef
trigger1 = var(30) != 2
trigger1 = AnimElem = 4
attr = S, NA
animtype = Hard
damage    = 40
getpower = 0
guardflag = M
hitflag = MAF
pausetime = 12,13
sparkno = 1
guard.sparkno = 41
sparkxy = -10,-44
hitsound = S3,4
guardsound = S4,0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -4,-8
air.velocity = -4,-8
fall = 1
fall.recover = 1
yaccel = 0.6
guard.velocity = -10
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -18
air.cornerpush.veloff = 0

[State 4500,6]
type = PosAdd
trigger1 = AnimElem = 5 || AnimElem = 6
x = 12

[State 4500,7]
type = PosAdd
trigger1 = AnimElem = 9 || AnimElem = 10
x = -12

[State 4500,8]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------
; 投げ抜け
;------------------------ 自分側
[Statedef 950]
type = S
movetype = A
physics = N
anim = 5945
ctrl = 0
velset = -12, 0

[State 810,TargetBind]
type = TargetState
trigger1 = Time = 0
value = 955

[State 3450, Envcolor]
type = Envcolor
trigger1 = AnimElem = 2
value = 255, 255, 255
time = 0
under = 1

[State 810,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 194, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 105, VelMul]
type = velset
trigger1 = AnimElem = 2
x = -13

[State 105, VelMul]
type = VelMul
trigger1 = 1
x = .80

[State 4100,4]
type = PlayerPush
trigger1 = P2BodyDist X < 0
value = 0

[State 105,End]
type = ChangeState
trigger1 = Time >= 32
value = 0
ctrl = 1

;------------------------ 相手側
[Statedef 955]
type = S
movetype = H
physics = N
ctrl = 0
velset = 0, 0
facing = enemy,facing

[State 3010,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = s9900, 10
volume = 255

[State 3010,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = s9900, 11
volume = 255

[State 810,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1040,ChangeAnim]
type = ChangeAnim
triggerall = Time = 0
trigger1 = SelfAnimExist(5940)
value = 5940

[State 1040,ChangeAnim]
type = ChangeAnim
triggerall = Time = 0
trigger1 = SelfAnimExist(5910) && !SelfAnimExist(5940)
value = 5910

[State 820,ChangeAnim2]
type = ChangeAnim
trigger1 = Time = 0 && anim != 5940 && anim != 5910
value = 5007

[State 194, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 105, VelMul]
type = VelMul
trigger1 = 1
x = .85

[State 4100,4]
type = PlayerPush
trigger1 = P2BodyDist X < 0
value = 0

[State 105,End]
type = SelfState
trigger1 = Time >= 29
value = 0
ctrl = 1

;Power Charge
[Statedef 9000]
type = S
movetype= I
physics = S
velset = 0,0
ctrl = 0
anim = 9000
sprpriority = 2

[State 900, 1]
type = PlaySnd
trigger1 = Time = 12
value = s0,6
channel = 9

[State 900, 2]
type = PlaySnd
trigger1 = Time = 12
value = s9900,6
channel = 11

[State 1800,]
type = PowerAdd
trigger1 = AnimElemtime(5) > 0
trigger1 = (GameTime%1) = 0
value = 25

[State 900, 4]
type = explod
trigger1 = time = 12
anim = f9100
ID = 9100
pos = 10,0
sprpriority = 4
ownpal = 1
bindtime = -1
shadow  = 128,128,128
removetime = -1
removeongethit = 1
ignorehitpause = 0

[State 900, 5]
type = ChangeState
trigger1 = command != "hold_x"
trigger2 = command != "hold_a"
trigger3 = command != "hold_y"
value = 9010

[State 900, 6]
type = ChangeState
trigger1 = Power = PowerMax
value = 9020

;------------------------------------------------------

;Energy Charge (End)
[Statedef 9010]
type = S
movetype = A
physics = S
anim = 9010
ctrl = 0

[State 901, 1]
type = RemoveExplod
trigger1 = Time = 0
ID = 9100

[State 901, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------------------------

;Energy Charge (Full - End)
[Statedef 9020]
type = S
movetype = A
physics = S
anim = 9010
ctrl = 0

[State 9020, EnvShake]
type = EnvShake
trigger1 = animelem = 1
time = 14
freq = 280
ampl = -8
persistent = 0

[State 902, 1]
type = RemoveExplod
trigger1 = Time = 0
ID = 9100

[State 900, 2]
type = PlaySnd
trigger1 = Animelem = 1
value = s9900,7

[State 900, 3]
type = PlaySnd
trigger1 = Time = 0
value = s0,19

[State 902, 4]
type = explod
trigger1 = time = 1
anim = f9110
ID = 9110
pos = 0,0
sprpriority = 4
ownpal = 1
bindtime = 1
shadow  = 128,128,128
removetime = 19
removeongethit = 1
ignorehitpause = 0

[State 902, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[Statedef 9030]
type = S
movetype = I
physics = S
anim = 9030
ctrl = 0
velset = 0,0
sprpriority = 1
poweradd = -1000

[State 903, 1]
type = Helper
trigger1 = TeamSide = 1 && NumHelper(904) = 0
helpertype = Normal
name = "Max-On"
stateno = 9040
id = 904
postype = Left
pos = 50,ifelse((ID = (33)),203,210)
facing = 1
keyctrl = 0
ownpal = 1
sprpriority = 10
ignorehitpause = 1
bindtime = -1

[State 903, 2]
type = Helper
trigger1 = TeamSide = 2 && NumHelper(904) = 0
helpertype = Normal
name = "Max-On"
stateno = 9040
id = 904
postype = Right
pos = -50,ifelse((ID = (35)),203,210)
facing = 1
keyctrl = 0
ownpal = 1
sprpriority = 10
ignorehitpause = 1

[State 903, 3]
type = PlaySnd
trigger1 = time = 1
value = s9900,7

[State 903, 8]
type = PlaySnd
trigger1 = Time = 1
value = s0,19

[State 9020, EnvShake]
type = EnvShake
trigger1 = animelem = 1
time = 14
freq = 280
ampl = -8
persistent = 0

[State 903, 5]
type = VarSet
trigger1 = Time = 1
var(23) = 1000
ignorehitpause = 1

[State 903, 9]
type = explod
trigger1 = Animelem = 3
anim = f9094
ID = 907
pos = 0,-15
sprpriority = 5
ownpal = 1
postype = P1
bindtime = 1
shadow  = 128,128,128
removetime = 15
removeongethit = 1
ignorehitpause = 0

[State 195, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------------------------
; Max-On Anim Helper
;------------------------------------------------------

[Statedef 9040]
type    = S
physics = S
juggle = 0
anim = 9741
ctrl = 0
sprpriority = 5

[State 904, 1: Max-On Anim P1]
type = Explod
triggerall = time = 0
trigger1 = TeamSide = 1 && NumExplod(904) = 0
anim = f9093
id = 904
postype = Left
pos = 66,ifelse((Parent,ID = (33)),211,221)
ownpal = 1
bindtime = -1
ignorehitpause = 1
sprpriority = 10
ontop = 1
pausemovetime = 999999999999
removetime = 33

[State 904, 2: Max-On Anim P2]
type = Explod
triggerall = time = 0
trigger1 = TeamSide = 2 && NumExplod(904) = 0
anim = f9093
id = 904
postype = Right
pos = -92,ifelse((Parent,ID = (35)),211,221)
ownpal = 1
bindtime = -1
ignorehitpause = 1
sprpriority = 10
ontop = 1
pausemovetime = 999999999999
removetime = 33

[state 904, 3]
type = ModifyExplod
trigger1 = NumExplod(904) = 1 && time <= 10
ID = 904
scale = 1,((time)*0.1)

[state 904, 4]
type = ModifyExplod
trigger1 = NumExplod(904) = 1 && time >= 23
ID = 904
scale = 1,((33-time)*0.1)

[State 904, 5]
type = DestroySelf
trigger1 = Time >= 33

;---------------------------------------------------------------------------
; クイックMAX
[Statedef 9031]
type = S
movetype = I
physics = S
anim = 9031
velset = 0,0
ctrl = 0
sprpriority = 1
poweradd = -2000

[State 903, 1]
type = Helper
trigger1 = TeamSide = 1 && NumHelper(904) = 0
helpertype = Normal
name = "Max-On"
stateno = 9040
id = 904
postype = Left
pos = 50,ifelse((ID = (33)),203,210)
facing = 1
keyctrl = 0
ownpal = 1
sprpriority = 10
ignorehitpause = 1
bindtime = -1

[State 903, 2]
type = Helper
trigger1 = TeamSide = 2 && NumHelper(904) = 0
helpertype = Normal
name = "Max-On"
stateno = 9040
id = 904
postype = Right
pos = -50,ifelse((ID = (35)),203,210)
facing = 1
keyctrl = 0
ownpal = 1
sprpriority = 10
ignorehitpause = 1

[State 00];
type = PlaySnd
trigger1 = time = 1
value = s9900,8

[State 903, 5]
type = VarSet
trigger1 = Time = 1
var(23) = 1000
ignorehitpause = 1

[State -1, Run Fwd]
type = ChangeState
value = 100
triggerall = prevstateno = [200,500]
trigger1 = time = 1
trigger1 = command = "FF"
ctrl = 1

[State 0, ChangeState]
type = ChangeState
triggerall = prevstateno = [200,500]
trigger1 = time = 1
value = ifelse(command = "holdup",40,ifelse(command = "holddown",11,0))
ctrl = ifelse(command = "holdup",0,1)

[State 0, ChangeState]
type = ChangeState
trigger1 = !animtime
value = 0
ctrl = 1

;---------------------------------------------------------------------
; ダウン回避
[Statedef 5200]
type = S
movetype = I
physics = N
anim = 5200
velset = -4, 0
ctrl = 0
facep2 = 1

[State 5201,PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 195,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 0,5
channel = 0
volume = 255

[State 5201,VelMul]
type = VelMul
trigger1 = 1
x = .93

[State 5201,VelMul]
type = VelSet
trigger1 = AnimElem = 6
x = 0

[State 5201,NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA

[State 5201,ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------
; ストライカー技 (for add004)
[Statedef 195900]
type = S

[State 0]
type = VarSet
trigger1 = 1
var(59) = 4900

[State 0]
type = ChangeState
trigger1 = roundno = 1
value = 190000

;------------------------ 攻撃
[Statedef 4900]
type = S
movetype = A
physics = N
juggle = 8
poweradd= IfElse(var(39)=1,96,12)
anim = 1010
ctrl = 0
velset = 0,0

[State -2,VarSet]
type = VarSet
triggerall = Time = 0
trigger1 = var(40) = 4
var(41) = 8

[State 1030, Varadd(24)]
type = Varadd
triggerall = var(40) = 4
triggerall = Time = 0 && fvar(0) > 4.8
trigger1  = !MoveContact && MoveType = A && ((PrevStateNo = [200,205]) || PrevStateNo = 215 || PrevStateNo = 230)
trigger2  = !MoveContact && MoveType = A && (PrevStateNo = 400 || PrevStateNo = 410 || (PrevStateNo = [610,615]) || PrevStateNo = 510)
trigger3  = PrevStateNo = 210 || PrevStateNo = 240 || PrevStateNo = 245 || PrevStateNo = 430 || PrevStateNo = 440
trigger4 =  PrevStateNo = [1000,1999]
fvar(0) = -4.8

[State 1030, VarSet(24)]
type = VarSet
triggerall = var(40) = 4
triggerall = Time = 0 && fvar(0) <= 4.8
trigger1  = !MoveContact && MoveType = A && ((PrevStateNo = [200,205]) || PrevStateNo = 215 || PrevStateNo = 230)
trigger2  = !MoveContact && MoveType = A && (PrevStateNo = 400 || PrevStateNo = 410 || (PrevStateNo = [610,615]) || PrevStateNo = 510)
trigger3  = PrevStateNo = 210 || PrevStateNo = 240 || PrevStateNo = 245 || PrevStateNo = 430 || PrevStateNo = 440
trigger4 =  PrevStateNo = [1000,1999]
fvar(0) = 0.1

[State -3,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 0, 8
channel = 0

[State 1305,PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State -3,PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = 5, 0
persistent = 0

[State 3010, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 4
value = A

[State 830,veladd]
type = VelSet
trigger1 = AnimElem = 3
x = 12

[State 1300,HitDef]
type = Helper
trigger1 = anim = 1010 && AnimElem = 4
ID = 1050
pos = 0,0
postype = p1
stateno = 1050
helpertype = normal
name = "wind"
keyctrl = 0
ownpal = 1

[State 830,veladd]
type = veladd
trigger1 = Vel X > 0
x = -.85

[State 830,veladd]
type = VelSet
trigger1 = Time > 23
x = 0

[State 830,ChangeAnim]
type = ChangeAnim
trigger1 = Time > 53 && anim !=1002
value = 1002

[State 1305,VelSet]
type = Veladd
trigger1 = Time > 8 && Time < 12
y = -0.1

[State 1305,VelSet]
type = Veladd
trigger1 = Time > 12 && Time < 40
y = -0.35

[State 830,veladd]
type = veladd
trigger1 = Time >= 40
y = .58

[State 1300,HitDef]
type = HitDef 
trigger1 = AnimElem = 3
attr = A, SA
animtype  = Herd
damage    = Ceil(IfElse(var(34)=1,77,63) / (2 ** HitCount)),25
guardflag = M
hitflag = MAF
pausetime = 13,13
sparkno = 5;2420
guard.sparkno = 42
hitsound = S3,IfElse(random < 500,5,6)
guardsound = S4, 1
sparkxy = -20,-50
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = 0,0
air.velocity = -4,-8
air.fall = 1
fall.recover = 1
yaccel = 0.6
guard.velocity = -10
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0

[State 1300,HitDef]
type = HitDef 
triggerall = UniqHitCount < 11
trigger1 = P2Dist X > 0  && (animelem = 12 || animelem = 10 || animelem = 11)
trigger2 = P2Dist X < 0 && (animelem = 6 || animelem = 7 || animelem = 8)
trigger3 = animelem = 4
attr = A, SA
animtype  = Herd
damage    = Ceil(IfElse(var(34)=1,77,63) / (2 ** HitCount)),25
guardflag = M
hitflag = MAF
pausetime = 2,2
sparkno = 5;2420
guard.sparkno = 42
hitsound = S3,IfElse(random < 500,5,6)
guardsound = S4, 1
sparkxy = -20,-50
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
ground.velocity = -4,-8
air.velocity = -4,-8
yaccel = 0.6
fall = 1
fall.recover = 1
guard.velocity = -10
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.cornerpush.veloff = 0

[State 1301,ChangeState]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y > -10 && Time >= 20
value = 4905
ctrl = 0

;------------------------終了
[Statedef 4905]
type    = S
movetype= I
physics = S
anim = 4900
velset = 0,0

[State 1305,PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State -3,PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = 1, 4

[State 1305,End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 超必殺技発動エフェクト
;------------------------
[Statedef 2000]
type = A
movetype = I
physics = N
ctrl = 0
velset = 0,0
ownpal = 1

[State 710, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0
value = 2050

[State 3000,EnvColor]
type = EnvColor
trigger1 = Time = 0
value = 248,248,248
time = 2
under = 1

[State 3000,EnvColor]
type = EnvColor
trigger1 = Time > 2
value = 0, 0, 0
time = 1
under = 1

[State 180, 2]
type = PlaySnd
trigger1 = Time = 1
value = 1,IfElse((IsHelper(2500)=1),7,IfElse((IsHelper(2010)=1),6,5))+(Root,var(30)!=1)*10

;BLACK BG
[State 3000, 1]
type = AssertSpecial
trigger1 = Time < 28
flag= noBG
flag2= noFG

[State 3000,Explod]
type = Explod
trigger1 = Time = 0
anim = 2205
ID = 2205
pos = 0,0
postype = P1
sprpriority = 4
supermove = 1
ownpal = 0
bindtime = -1
persistent = 0
Removetime = 28
pausemovetime = 99999999999999
supermovetime = 99999999999999

[State 3000,Explod]
type = Explod
trigger1 = Time = 0
anim = 2200
ID = 2205
pos = 0,0
postype = P1
sprpriority = -2
supermove = 1
ownpal = 0
bindtime = -1
persistent = 0
Removetime = 28
pausemovetime = 99999999999999
supermovetime = 99999999999999

[State 10010,DestroySelf]
type = DestroySelf
trigger1 = Time = 28
-------------------------------------------------------------------------

[Statedef 2001]
type = A
movetype = I
physics = N
ctrl = 0
velset = 0,0
ownpal = 1

[State 710, ChangeAnim]
type = ChangeAnim
trigger1 = Time = 0
value = 2050

[State 3000,EnvColor]
type = EnvColor
trigger1 = Time = 0
value = 248,248,248
time = 2
under = 1

[State 3000,EnvColor]
type = EnvColor
trigger1 = Time > 2
value = 0, 0, 0
time = 1
under = 1

[State 180, 2]
type = PlaySnd
trigger1 = Time = 1
value = 1,IfElse((IsHelper(2500)=1),7,IfElse((IsHelper(2010)=1),6,5))+(Root,var(30)!=1)*10

;BLACK BG
[State 3000, 1]
type = AssertSpecial
trigger1 = Time < 28
flag= noBG
flag2= noFG

[State 3000,Explod]
type = Explod
trigger1 = Time = 0
anim = 2215
ID = 2205
pos = 0,0
postype = P1
sprpriority = 4
supermove = 1
ownpal = 0
bindtime = -1
persistent = 0
Removetime = 28
pausemovetime = 99999999999999
supermovetime = 99999999999999

[State 3000,Explod]
type = Explod
trigger1 = Time = 0
anim = 2210
ID = 2205
pos = 0,0
postype = P1
sprpriority = -2
supermove = 1
ownpal = 0
bindtime = -1
persistent = 0
Removetime = 28
pausemovetime = 99999999999999
supermovetime = 99999999999999

[State 10010,DestroySelf]
type = DestroySelf
trigger1 = Time = 28

;---------------------------------------------------------------------------
; EXCEED発動エフェクト
;------------------------ 
[Statedef 2500]
type = A
movetype = I
physics = N
ctrl = 0
anim = 20000
velset = 0,0
ownpal = 1

[State 6000, 1]
type = Explod
trigger1 = Time = 0
anim = f400
bindtime = -1
postype = left
scale = 1.06,1.08
supermove = 1
pausemovetime = 99999999999999
supermovetime = 99999999999999
sprpriority = -2
ownpal = 1

[State 3000,EnvColor]
type = EnvColor
trigger1 = 1
value = 0, 0, 0
time = 1
under = 1

[State 180, 2]
type = PlaySnd
trigger1 = Time = 0
value = 1,17

[State -2,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoBG
flag2 = NoFG
flag3 = nobardisplay

[State 3000,Explod]
type = Explod
trigger1 = Time = 0
anim = 2291
ID = 2291
pos = 0,0
postype = P1
sprpriority = 4
supermove = 1
ownpal = 0
bindtime = -1
persistent = 0
Removetime = 27
pausemovetime = 99999999999999
supermovetime = 99999999999999

[State 10010,DestroySelf]
type = DestroySelf
trigger1 = Time = 30

;==========================================================================
;    King Of Figthers 2002 Unlimited Match HSDM Fondo y Broken Glass
;==========================================================================
;--------------------------------------HSDM 2002 UM------------------------
[Statedef 40001]
anim = 9999

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noBG
flag2 = noFG

[State 40001, Tile #1-7]
type = Explod
triggerall = !numexplod(15600)
trigger1 = !time
anim = 15600
ID = 15600
pos = 0,0
postype = left  ;p2,front,back,left,right
removetime = 10
pausemovetime = -1
supermovetime = -1
scale = 1,1
sprpriority = -20
ownpal = 1
ignorehitpause = 1
bindtime = -1
persistent = 0

[State 40001, Tile #1-7]
type = Explod
triggerall = !numexplod(15601) < 2
trigger1 = !time
trigger2 = (time%10) = 0
anim = 15600
ID = 15601
pos = 320,0
postype = left  ;p2,front,back,left,right
removetime = 20
pausemovetime = -1
supermovetime = -1
scale = 1,1
sprpriority = -20
ownpal = 1
ignorehitpause = 1
bindtime = -1

[State 40001, Tile #2-6]
type = Explod
triggerall = !numexplod(15610)
trigger1 = !time
anim = 15601
ID = 15610
pos = 0,0
postype = left  ;p2,front,back,left,right
removetime = 20
pausemovetime = -1
supermovetime = -1
scale = 1,1
sprpriority = -20
ownpal = 1
ignorehitpause = 1
persistent = 0
bindtime = -1

[State 40001, Tile #2-6]
type = Explod
triggerall = !numexplod(15611) < 2
trigger1 = !time
trigger2 = (time%20) = 0
anim = 15601
ID = 15611
pos = 320,0
postype = left  ;p2,front,back,left,right
removetime = 40
pausemovetime = -1
supermovetime = -1
scale = 1,1
sprpriority = -20
ownpal = 1
ignorehitpause = 1
bindtime = -1

[State 40001, Tile #3-5]
type = Explod
triggerall = !numexplod(15620)
trigger1 = !time
anim = 15602
ID = 15620
pos = 0,0
postype = left  ;p2,front,back,left,right
removetime = 40
pausemovetime = -1
supermovetime = -1
scale = 1,1
sprpriority = -20
ownpal = 1
ignorehitpause = 1
persistent = 0
bindtime = -1

[State 40001, Tile #3-5]
type = Explod
triggerall = !numexplod(15621) < 2
trigger1 = !time
trigger2 = (time%40) = 0
anim = 15602
ID = 15621
pos = 320,0
postype = left  ;p2,front,back,left,right
removetime = 80
pausemovetime = -1
supermovetime = -1
scale = 1,1
sprpriority = -20
ownpal = 1
ignorehitpause = 1
bindtime = -1

[State 40001, Tile #4]
type = Explod
triggerall = !numexplod(15630)
trigger1 = !time
anim = 15603
ID = 15630
pos = 0,0
postype = left  ;p2,front,back,left,right
removetime = 80
pausemovetime = -1
supermovetime = -1
scale = 1,1
sprpriority = -20
ownpal = 1
ignorehitpause = 1
persistent = 0
bindtime = -1

[State 40001, Tile #4]
type = Explod
triggerall = !numexplod(15631) < 2
trigger1 = !time
trigger2 = (time%80) = 0
anim = 15603
ID = 15631
pos = 320,0
postype = left  ;p2,front,back,left,right
removetime = 160
pausemovetime = -1
supermovetime = -1
scale = 1,1
sprpriority = -20
ownpal = 1
ignorehitpause = 1
bindtime = -1

;----------Aqui cambias a broken glass tiempo-------------

[State 40001, Glass Break]
type = ChangeState
trigger1 = parent, stateno != [3500,3502] ; Aqui La Primera Y Animacion Final Del Ataque
trigger2 = Parent,Stateno = 3500 && Parent,Time >= 200 ;Aqui Regulas EL Tiempo De La Primera Animacion (Esto Sera Lo Que Demora EL fondo Verde Antes De Convertirse A Broken Glass
trigger3 = Parent,Stateno = 3502 && Parent,Time >= 8 ;Aqui Regulas El Tiempo Del Broken (Se Paciente No De La Primera Vez Saldra Ve Regulandole Hasta Que El Se Rompa En El Ultimo Hit)
value = stateno+1

;----------Aqui regulas el tiempo-------------

;kof 2002 um part2
[Statedef 40002]
anim = 9999

[State 40002, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 15600
[State 40002, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 15601
[State 40002, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 15610
[State 40002, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 15611
[State 40002, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 15620
[State 40002, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 15621
[State 40002, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 15630
[State 40002, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 15631

[State 40002, PlaySnd]
type = PlaySnd
trigger1 = !time
value = 9900,0  ; Grupo Y Sonido Del SND Del Broken
volume = 255 ;Volumen Del Broken

[State 40002, PlaySnd]
type = PlaySnd
trigger1 = !time
value = 9900,0  ; Grupo Y Sonido Del SND Del Broken
volume = 255 ;Volumen Del Broken

[State 40002, PlaySnd]
type = PlaySnd
trigger1 = !time
value = 9900,0  ; Grupo Y Sonido Del SND Del Broken
volume = 255 ;Volumen Del Broken

[State 40001, Glass Break]
type = Explod
triggerall = !numexplod(15640)
trigger1 = !time
anim = 15604
ID = 15640
pos = 0,0
postype = left  ;p2,front,back,left,right
pausemovetime = -1
supermovetime = -1
removetime = -2
scale = 1,1
sprpriority = -20
ownpal = 1
bindtime = -1
ignorehitpause = 1

[State 40001, DestroySelf]
type = DestroySelf
trigger1 = time = 1

;--------------------------------------------------------------------------
;==========================================================================
;    King Of Figthers 2002 Unlimited Match HSDM Fondo y Broken Glass
;==========================================================================

;--------------------------[2002 UM MAX2 PORTRAIT]------------------------------
[Statedef 40003]
anim = 9999

[State 40003, VarSet]
type = VarSet
triggerall = enemy, numhelper(40003)
triggerall = !enemy, numhelper(40004)
trigger1 = enemy, authorname = "Vans"
trigger2 = enemy, authorname = "K.O.D"
trigger3 = enemy, authorname = "K.O.D & Vans"
trigger4 = enemy, authorname = "OrochiKOF97"
trigger5 = enemy, authorname = "Dark Saviour"
trigger6 = enemy, authorname = "Kung Fu Man"
trigger7 = enemy, authorname = "KoopaKoot"
trigger8 = enemy, authorname = "Anjel"
trigger9 = enemy, authorname = "Vans & Kung Fu Man"
var(0) = 1

[State 40003, VarSet]
type = VarSet
triggerall = teamside = 2
triggerall = enemy, numhelper(40004)
trigger1 = enemy, authorname = "Vans"
trigger2 = enemy, authorname = "K.O.D"
trigger3 = enemy, authorname = "K.O.D & Vans"
trigger4 = enemy, authorname = "OrochiKOF97"
trigger5 = enemy, authorname = "Dark Saviour"
trigger6 = enemy, authorname = "Kung Fu Man"
trigger7 = enemy, authorname = "KoopaKoot"
trigger8 = enemy, authorname = "Anjel"
trigger9 = enemy, authorname = "Vans & Kung Fu Man"
var(0) = 1

[State 40001, P1 BG]
type = Explod
triggerall = !numexplod(15650)
triggerall = teamside = 1
trigger1 = !time
anim = 15605
ID = 15650
pos = 0,abs((240*var(0))-81)
postype = left  ;p2,front,back,left,right
pausemovetime = -1
supermovetime = -1
removetime = -2
bindtime = -1
scale = 1,1
sprpriority = -20
ownpal = 1
ignorehitpause = 1

[State 40001, P2 BG]
type = Explod
triggerall = !numexplod(15651)
triggerall = teamside = 2
trigger1 = !time
anim = 15606
ID = 15651
pos = 0,abs((240*var(0))-81)
postype = right  ;p2,front,back,left,right
pausemovetime = -1
supermovetime = -1
removetime = -2
bindtime = -1
scale = 1,1
facing = -1
sprpriority = -20
ownpal = 1
ignorehitpause = 1

[State 40001, P1 PORTRAIT]
type = Explod
triggerall = !numexplod(15660)
triggerall = teamside = 1
trigger1 = !time
anim = 15607
ID = 15660
pos = 0,abs((240*var(0))-81)
postype = left  ;p2,front,back,left,right
pausemovetime = -1
supermovetime = -1
removetime = -2
bindtime = -1
scale = 1,1
sprpriority = -19
ownpal = 1
ignorehitpause = 1

[State 40001, P2 PORTRAIT]
type = Explod
triggerall = !numexplod(15661)
triggerall = teamside = 2
trigger1 = !time
anim = 15607
ID = 15661
pos = 0,abs((240*var(0))-81)
postype = right  ;p2,front,back,left,right
pausemovetime = -1
supermovetime = -1
removetime = -2
bindtime = -1
scale = 1,1
facing = -1
sprpriority = -19
ownpal = 1
ignorehitpause = 1

[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 2
ID = 15650
scale = 1,0.3
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 4
ID = 15650
scale = 1,0.54
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 6
ID = 15650
scale = 1,0.77
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 8
ID = 15650
scale = 1,1
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 56
ID = 15650
scale = 1,0.77
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 57
ID = 15650
scale = 1,0.54
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 58
ID = 15650
scale = 1,0.3
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 59
ID = 15650
scale = 1,1

[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 2
ID = 15651
scale = 1,0.3
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 4
ID = 15651
scale = 1,0.54
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 6
ID = 15651
scale = 1,0.77
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 8
ID = 15651
scale = 1,1
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 56
ID = 15651
scale = 1,0.77
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 57
ID = 15651
scale = 1,0.54
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 58
ID = 15651
scale = 1,0.3
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 59
ID = 15651
scale = 1,1

[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 2
ID = 15660
scale = 1,0.3
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 4
ID = 15660
scale = 1,0.54
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 6
ID = 15660
scale = 1,0.77
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 8
ID = 15660
scale = 1,1
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 56
ID = 15660
scale = 1,0.77
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 57
ID = 15660
scale = 1,0.54
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 58
ID = 15660
scale = 1,0.3
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 59
ID = 15660
scale = 1,1

[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 2
ID = 15661
scale = 1,0.3
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 4
ID = 15661
scale = 1,0.54
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 6
ID = 15661
scale = 1,0.77
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 8
ID = 15661
scale = 1,1
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 56
ID = 15661
scale = 1,0.77
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 57
ID = 15661
scale = 1,0.54
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 58
ID = 15661
scale = 1,0.3
[State 40003, ModifyExplod]
type = ModifyExplod
trigger1 = time = 59
ID = 15661
scale = 1,1

[State 40001, DestroySelf]
type = DestroySelf
trigger1 = time = 60

[Statedef 40004]
anim = 9999

[State 40001, DestroySelf]
type = DestroySelf
trigger1 = time = 1

;KILL CODES
--------------------
;K.O.SOUND 1
--------------------
[Statedef 1984]
type = S
movetype = I
physics = N
anim = 9741

;[State 1983, Pause]
;type = Pause
;trigger1 = !Time
;time = 40
;movetime = 40

;NO SOUND WIN & NO BARS
[State -2, AssertSpecial]
type = AssertSpecial
trigger1 = 1
trigger1=win&&matchover
flag = nomusic

[State 1984, LifeBar]
type = AssertSpecial
trigger1 = 1
flag = NoBarDisplay

[State 191, 1]
type = playsnd
trigger1 = p2life = 0
value = S99,0
persistent = 0
volume = 255
ignorehitpause = 1

[State 191, 1]
type = playsnd
trigger1 = p2life = 0
value = S99,0
persistent = 0
volume = 255
ignorehitpause = 1

[State 191, 1]
type = playsnd
trigger1 = p2life = 0
value = S99,0
persistent = 0
volume = 255
ignorehitpause = 1

[State 191, 1]
type = playsnd
trigger1 = p2life = 0
value = S99,0
persistent = 0
volume = 255
ignorehitpause = 1

[State -3,VarSet]
type = VarSet
trigger1 = WinKO
var(7) = 1
ignorehitpause = 1

--------------------
;K.O.SOUND 2
--------------------
[Statedef 1985]
type = S
movetype = I
physics = N
anim = 9741

;[State 1983, Pause]
;type = Pause
;trigger1 = !Time
;time = 40
;movetime = 40

;NO SOUND WIN & NO BARS
[State -2, AssertSpecial]
type = AssertSpecial
trigger1 = 1
trigger1=win&&matchover
flag = nomusic

[State 1984, LifeBar]
type = AssertSpecial
trigger1 = 1
flag = NoBarDisplay

[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow
flag2 = invisible

[state a]
type = bindtoroot
trigger1 = 1
pos = 0,0

[State 3040, 7];画面フラッシュ
type = EnvColor
trigger1 = time % 9 = 0
trigger1 = time <= 33
time = 6
value = 0,0,0
under = 1

[State 3040, 7];画面フラッシュ
type = EnvColor
trigger1 = time % 9 = 3
trigger1 = time <= 33
time = 6
value = 255,0,0
under = 1

[State 3040, 7];画面フラッシュ
type = EnvColor
trigger1 = time % 9 = 6
trigger1 = time <= 33
time = 6
value = 255,255,255
under = 1

[State 191, 1]
type = playsnd
trigger1 = p2life = 0
value = S99,0
persistent = 0
volume = 255
ignorehitpause = 1

[State 191, 1]
type = playsnd
trigger1 = p2life = 0
value = S99,0
persistent = 0
volume = 255
ignorehitpause = 1

[State 191, 1]
type = playsnd
trigger1 = p2life = 0
value = S99,0
persistent = 0
volume = 255
ignorehitpause = 1

[State 191, 1]
type = playsnd
trigger1 = p2life = 0
value = S99,0
persistent = 0
volume = 255
ignorehitpause = 1

[State -3,VarSet]
type = VarSet
trigger1 = WinKO
var(7) = 1
ignorehitpause = 1

;---------------------------------------------------------------------------
[Statedef -3]
;---------------------------------------------------------------------------

[State -3, Helper]
type = Helper
triggerall = WinKO && (NumHelper(1984) = 0)
trigger1 = stateno = [200,999]
helpertype = Normal
name = "KO"
id = 1984
pos = 0,0
postype = p1
facing = 0
stateno = 1984
keyctrl = 0
ownpal = 1
supermovetime = 1000
pausemovetime = 1000
ignorehitpause = 1

[State -3, Helper]
type = Helper
triggerall = WinKO && (NumHelper(1985) = 0)
trigger1 = projhittime(0) = 1
trigger2 = stateno = [1000,1999]
trigger3 = stateno = [2000,4999]
helpertype = Normal
name = "KO"
ID = 1985
stateno = 1985
pos = 0,0
postype = left
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 1000
pausemovetime = 1000
ignorehitpause = 1

;===============================================================================
; ------- Front corner fix --------
;===============================================================================
[State -3, CornerPush]
type = Width
trigger1 = Enemy, BackEdgeDist < 10
trigger2 = Enemy, FrontEdgeDist < 10
edge = 10

;===============================================================================
; ------- Front corner combo fix --------
;===============================================================================
;To prevent switching sides while making combos.
[State -2, Width]
type = Width
trigger1 = facing != enemynear, facing
trigger1 = movetype != H
edge = 8,0
ignorehitpause = 1

;---------------------------------------------------------------------------
;---------------------------------------------------------------------
;---------------------------------------------------------------------------
[State -1,Stand_RemoveExplod]
type = RemoveExplod
triggerall = NumExplod(2295)
trigger1 = StateNo != 3500
trigger2 = RoundState != 2
id = 2295

;---------------------------------------------------------------------
; 三角跳び
[State 40,VelSet]
type = VelSet
trigger1 = Time = 1
trigger1 = StateNo = 50
trigger1 = PrevStateNo = 53
x = const(velocity.jump.fwd.x)
y = Const(velocity.jump.y)

;---------------------------------------------------------------------
; Sound Fix
[State -3,PlaySnd]
type = PlaySnd
triggerall = Time = 1
trigger1 = StateNo = [200,220]
trigger2 = StateNo = [400,410]
trigger3 = StateNo = [600,615]
value = 2, 0

[State -3,PlaySnd]
type = PlaySnd
triggerall = Time = 1
trigger1 = StateNo = [230,245]
trigger2 = StateNo = [430,440]
trigger3 = StateNo = [630,645]
trigger4 = StateNo = [500,510]
value = 2, 1

[State -3,PlaySnd]
type = PlaySnd
triggerall = random < 333 && AnimElem = 2,=1
trigger1 = (StateNo = [200,205]) || (StateNo = [230,235])
trigger2 = StateNo = 400 || StateNo = 430 || StateNo = 600 || StateNo = 630
value = 0, 0
channel = 0

[State -3,PlaySnd]
type = PlaySnd
triggerall = random < 333
trigger1 = StateNo = 210 && AnimElem = 3,=1
trigger2 = (StateNo = 215 || StateNo = 220 || StateNo = 240 || StateNo = 410 || StateNo = 440) && AnimElem = 2,=1
trigger3 = ((StateNo = [610,615]) || (StateNo = [640,645])) && AnimElem = 2,=1
value = 0, 1
channel = 0

[State -3,PlaySnd]
type = PlaySnd
triggerall = random < 333 && AnimElem = 2,=1
trigger1 = StateNo = [500,510]
value = 0, 4
channel = 0

;---------------------------------------------------------------------
; ダッシュ音声消去
[State -3,PlaySnd]
type = Stopsnd
triggerall = StateNo != 100
trigger1 = StateNo != 3251 && StateNo != 3201
channel = 2

[State -3,PlaySnd]
type = Stopsnd
trigger1 = RoundState = 2
channel = 3

[State -3,PlaySnd]
type = Stopsnd
trigger1 = RoundState = 2
channel = 10

[State -3,PlaySnd]
type = Stopsnd
trigger1 = MoveType = H
channel = 4

[State -2,PlaySnd]
type = PlaySnd
triggerall = Time = 1 && Alive && Random < 333
triggerall = StateNo = 5000 || StateNo = 5010
trigger1 = Anim = 5000 || Anim = 5010 || Anim = 5020
value = 5000, 0
channel = 0

[State -2,PlaySnd]
type = PlaySnd
triggerall = Time = 1 && Alive && Random < 333
triggerall = StateNo = 5000 || StateNo = 5010
trigger1 = Anim = 5001 || Anim = 5011 || Anim = 5021
value = 5000, 10
channel = 0

[State -2,PlaySnd]
type = PlaySnd
triggerall = Time = 1 && Alive && Random < 333
triggerall = StateNo = 5000 || StateNo = 5010
trigger1 = Anim = 5002 || Anim = 5012 || Anim = 5022
value = 5000, 20
channel = 0

[State -2,PlaySnd]
type = PlaySND
triggerall = Alive && random < 500
trigger1 = StateNo = 5000 && Time = 1
trigger1 = GetHitVar(fall)
trigger2 = StateNo = 5020 && Time = 1
trigger3 = StateNo = 5071 && Time = 1
value = 5000, 30
channel = 0

[State -2,PlaySnd]
type = PlaySND
triggerall = Alive
trigger1 = StateNo = 11 && AnimElem = 3,=5
value = 5, 8
channel = 5

[State -3,PlaySnd]
type = Stopsnd
trigger1 = StateNo != 11
channel = 5

[State -3, Running Sound Stop]
type = StopSnd
trigger1 = stateno != 9000
channel = 9

[State -3, Charge Sound Stop]
type = StopSnd
trigger1 = Movetype = H
trigger2 = Movetype = A
trigger3 = stateno != 9000
channel = 11

;---------------------------------------------------------------------------
; ヒット数カウント
[State -2,2]
type = VarSet
trigger1 = NumTarget!
var(14) = 0

[State -2,2]
type = VarSet
trigger1 = var(15)!
trigger1 = NumTarget
trigger1 = HitPauseTime != 0
var(15) = 1
ignorehitpause = 1

[State -2,2]
type = Varadd
triggerall = NumTarget
trigger1 = var(15) = 1
trigger2 = ProjHitTime(3510) = 1
var(14) = 1
ignorehitpause = 1

[State -2,2]
type = VarSet
trigger1 = var(15) = 1
var(15) = -1
ignorehitpause = 1

[State -2,2]
type = VarSet
trigger1 = HitPauseTime = 0
var(15) = 0
ignorehitpause = 1

;---------------------------------------------------------------------------
; 飛び道具ヒット処理
[State -2,2]
type = VarSet
trigger1 = ProjHit3510=1
var(16) = 15

[State -2,2]
type = VarSet
trigger1 = NumTarget = 0
trigger1 = RoundState != 2
var(16) = 0

[State -2,2]
type = Varadd
trigger1 = var(16) >  0
trigger1 = NumTarget
trigger1 = Target,HitShakeOver
var(16) = -1
ignorehitpause = 1

[State -2,Envcolor]
type = Envcolor
trigger1 = var(16) = 15
value = 255,255,255
time = 0
under = 1
ignorehitpause = 1

[State 3005, Pause]
type = Pause
triggerall = gametime%2 = 1
trigger1 = NumTarget
trigger1 = Target,stateno = [5000,5500]
trigger1 = var(16) > 0
trigger1 = Target,HitShakeOver
trigger1 = RoundState = 2
time = 1
ignorehitpause = 1

;---------------------------------------------------------------------
; 相手位置
[State -2,2]
type = VarSet
trigger1 = NumTarget = 1
fvar(1) = Target,pos x

[State -2,2]
type = VarSet
trigger1 = NumTarget = 1
fvar(2) = Target,pos y


;------------------------------------------------------------
