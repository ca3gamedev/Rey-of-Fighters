;---------------------------------------------------------------------------
; Stand
[Statedef 0]
type = S
physics = S
velset = 0,0
anim = 0
sprpriority = 0

[State 0]
type = CtrlSet
trigger1 = PrevStateNo = 140
value = 1

[State 0]
type = VarSet
trigger1 = Time = 0
fvar(36) = 0

[State 0]
type = ChangeAnim
trigger1 = Anim != 0 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 0

[State 0]
type = Helper
triggerall = NumHelper(1) = 0
trigger1 = Time = 0
trigger2 = Anim = 5 && AnimTime = 0
trigger3 = (Anim = 0) && (AnimElem = 1, = 0)
name = "Ice"
ID = 1
pos = 0,0
postype = P1
stateno = 1
keyctrl = 0
ownpal = 1

;---------------------------------------------------------------------------
;
[Statedef 1]
type = S
physics = S
anim = 1
ctrl = 0
velset = 0,0,0
sprpriority = 1

[State 1]
type = Turn
trigger1 = P2Dist X < 0

[State 1]
type = BindToParent
trigger1 = 1
pos = 0,0

[State 1]
type = DestroySelf
trigger1 = Parent, StateNo != 0 && Parent, StateNo != 5900
trigger2 = Parent, MoveType = H
trigger3 = Parent, Anim = 5

;---------------------------------------------------------------------------
; Stand to Crouch
[Statedef 10]
type    = C
physics = C
anim = 10

[State 10]
type = VelMul
trigger1 = Time = 0
x = .75

[State 10]
type = ChangeState
trigger1 = AnimTime = 0
value = 11

;---------------------------------------------------------------------------
; Crouching
[Statedef 11]
type    = C
physics = C
anim = 11
sprpriority = 0

[State 11]
type = CtrlSet
trigger1 = PrevStateNo = 140
value = 1

[State 11]
type = ChangeAnim
trigger1 = Anim = 6 && AnimTime = 0
value = 11

;---------------------------------------------------------------------------
; Crouch to Stand
[Statedef 12]
type    = S
physics = S
anim = 12

[State 12]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; Walk
[Statedef 20]
type    = S
physics = S
sprpriority = 0

[State 20]
type = Width
trigger1 = 1
edge = 2,0

[State 20]
type = VelSet
trigger1 = Command = "HoldFwd"
x = const(Velocity.Walk.Fwd.X)

[State 20]
type = VelSet
trigger1 = Var(28) = 1
x = const(Velocity.Walk.Fwd.X)

[State 20]
type = VelSet
trigger1 = Command = "HoldBack"
x = const(Velocity.Walk.Back.X)

[State 20]
type = VelSet
trigger1 = Var(28) = -1
x = const(Velocity.Walk.Back.X)

[State 20]
type = ChangeAnim
triggerall = Vel X > 0
trigger1 = Anim != 20 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 20

[State 20]
type = ChangeAnim
triggerall = Vel X < 0
trigger1 = Anim != 21 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 21

;---------------------------------------------------------------------------
; Walk(AI)
[Statedef 21]
type    = S
physics = S
sprpriority = 0

[State 21]
type = CtrlSet
trigger1 = 1
value = 1

[State 21]
type = Width
trigger1 = 1
edge = 2,0

[State 21]
type = VelSet
trigger1 = 1
x = const(Velocity.Walk.Fwd.X)

[State 21]
type = ChangeAnim
triggerall = Vel X > 0
trigger1 = Anim != 20 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 20

[State 21]
type = ChangeState
trigger1 = P2BodyDist X < -30
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Walk(AI)
[Statedef 22]
type    = S
physics = S
sprpriority = 0

[State 22]
type = CtrlSet
trigger1 = 1
value = 1

[State 22]
type = Width
trigger1 = 1
edge = 2,0

[State 22]
type = VelSet
trigger1 = 1
x = const(Velocity.Walk.Back.X)

[State 22]
type = ChangeAnim
triggerall = Vel X < 0
trigger1 = Anim != 21 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 21

[State 22]
type = ChangeState
trigger1 = P2BodyDist X = [70,85]
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Walk(AI)
[Statedef 23]
type    = S
physics = S
sprpriority = 0

[State 23]
type = CtrlSet
trigger1 = 1
value = 0

[State 23]
type = Width
trigger1 = 1
edge = 2,0

[State 23]
type = VelSet
trigger1 = Time <= 6
x = -3.3

[State 23]
type = VelSet
trigger1 = Time = [7,9]
x = 3.3

[State 23]
type = ChangeAnim
triggerall = Var(59) = 1
triggerall = Vel X < 0
triggerall = Anim != 21
trigger1 = Time <= 6
value = 21

[State 23]
type = ChangeAnim
triggerall = Var(59) = 1
triggerall = Vel X > 0
triggerall = Anim != 20
trigger1 = Time = [7,9]
value = 20

[State 23]
type = ChangeState
triggerall = Var(30) > 2
trigger1 = Time = 10
value = 1201
ctrl = 0

[State 23]
type = ChangeState
triggerall = Var(30) = [1,2]
trigger1 = Time = 10
value = 1211
ctrl = 0

;---------------------------------------------------------------------------
; Walk(AI)
[Statedef 24]
type    = S
physics = S
sprpriority = 0

[State 24]
type = CtrlSet
trigger1 = 1
value = 0

[State 24]
type = Width
trigger1 = 1
edge = 2,0

[State 24]
type = VelSet
triggerall = Var(13) < 30
trigger1 = Var(4) < 60
x = -3.3

[State 24]
type = VelSet
triggerall = Var(13) < 30
trigger1 = Var(4) = [60,70]
x = 0

[State 24]
type = VelSet
triggerall = Var(13) < 30
trigger1 = Var(4) > 70
x = 3.3

[State 24]
type = ChangeAnim
triggerall = Var(59) = 1
triggerall = Vel X = 0
triggerall = Anim != 0
trigger1 = Var(4) = [60,70]
value = 0

[State 24]
type = ChangeAnim
triggerall = Var(59) = 1
triggerall = Vel X < 0
triggerall = Anim != 21
trigger1 = Var(4) < 60
value = 21

[State 24]
type = ChangeAnim
triggerall = Var(59) = 1
triggerall = Vel X > 0
triggerall = Anim != 20
trigger1 = Var(4) > 70
value = 20

[State 24]
type = ChangeState
triggerall = Var(30) = [1,3]
trigger1 = Var(13) >= 0;= [0,23]
value = 1201
ctrl = 0

[State 24]
type = ChangeState
triggerall = Var(30) > 10
trigger1 = Var(13) = 23
value = 1201
ctrl = 0

[State 24]
type = ChangeState
triggerall = Var(30) = [4,10]
trigger1 = Var(13) = 28
value = 1211
ctrl = 0

[State 24]
type = ChangeState
triggerall = Var(30) = 0
trigger1 = Var(13) = [23,28]
value = 1210
ctrl = 0

;---------------------------------------------------------------------------
; Walk(AI)
[Statedef 25]
type    = S
physics = S
sprpriority = 0

[State 25]
type = CtrlSet
trigger1 = 1
value = 0

[State 25]
type = Width
trigger1 = 1
edge = 2,0

[State 25]
type = VelSet
trigger1 = 1
x = 3.3

[State 25]
type = ChangeAnim
triggerall = Var(59) = 1
triggerall = Vel X > 0
triggerall = Anim != 20
trigger1 = Time <= 5
value = 20

[State 25]
type = ChangeState
trigger1 = Time = 6
value = 1400
ctrl = 0

;---------------------------------------------------------------------------
; Walk(AI)
[Statedef 26]
type    = S
physics = S
ctrl = 0
sprpriority = 0

[State 26]
type = CtrlSet
trigger1 = Time >= 10
value = 1

[State 26]
type = Width
trigger1 = 1
edge = 2,0

[State 26]
type = VelSet
trigger1 = 1
x = const(Velocity.Walk.Back.X)

[State 26]
type = ChangeAnim
triggerall = Var(59) = 1
triggerall = Vel X < 0
triggerall = Anim != 21
trigger1 = Time >= 0
value = 21

[State 26]
type = ChangeState
triggerall = Var(30) > 2
triggerall = P2BodyDist X < 40
trigger1 = Time = 4
value = 1301
ctrl = 0

[State 26]
type = ChangeState
triggerall = Var(30) = [1,2]
triggerall = P2BodyDist X < 65
triggerall = P2BodyDist Y < -30
trigger1 = Time = 5
value = 1211
ctrl = 0

[State 26]
type = ChangeState
triggerall = Var(30) = 0
triggerall = P2BodyDist X < 65
triggerall = P2BodyDist Y < -30
trigger1 = Time = 8
value = 1210
ctrl = 0

;---------------------------------------------------------------------------
; Walk(AI)
[Statedef 27]
type    = S
physics = S
sprpriority = 0

[State 27]
type = CtrlSet
trigger1 = 1
value = 0

[State 27]
type = Width
trigger1 = 1
edge = 2,0

[State 27]
type = VelSet
trigger1 = 1
x = const(Velocity.Walk.Back.X)

[State 27]
type = ChangeAnim
triggerall = Var(59) = 1
triggerall = Vel X < 0
trigger1 = Anim != 21
trigger1 = Time >= 0
value = 21

[State 27]
type = ChangeState
trigger1 = P2BodyDist Y = [-65,-60]
trigger1 = Time <= 2
value = 210
ctrl = 0

;---------------------------------------------------------------------------
; Walk(AI)
[Statedef 28]
type    = S
physics = S
sprpriority = 0

[State 28]
type = CtrlSet
trigger1 = 1
value = 0

[State 28]
type = Width
trigger1 = 1
edge = 2,0

[State 28]
type = VelSet
trigger1 = 1
x = 3.3

[State 28]
type = ChangeAnim
triggerall = Var(59) = 1
triggerall = Vel X > 0
triggerall = Anim != 20
trigger1 = Time <= 3
value = 20

[State 28]
type = ChangeState
trigger1 = Var(30) > 0
trigger1 = Time = 4
value = 1211
ctrl = 0

[State 28]
type = ChangeState
trigger1 = Var(30) = 0
trigger1 = Time = 4
value = 1210
ctrl = 0

;---------------------------------------------------------------------------
; Walk(AI)
[Statedef 29]
type    = S
physics = S
sprpriority = 0

[State 29]
type = CtrlSet
trigger1 = 1
value = 0

[State 29]
type = Width
trigger1 = 1
edge = 2,0

[State 29]
type = VelSet
trigger1 = P2BodyDist X < 10
x = -3.3

[State 29]
type = VelSet
trigger1 = P2BodyDist X = [10,55]
x = 0

[State 29]
type = VelSet
trigger1 = P2BodyDist X > 55
x = 3.3

[State 29]
type = ChangeAnim
triggerall = Var(59) = 1
triggerall = Vel X = 0
triggerall = Anim != 0
trigger1 = P2BodyDist X = [10,55]
value = 0

[State 29]
type = ChangeAnim
triggerall = Var(59) = 1
triggerall = Vel X < 0
triggerall = Anim != 21
trigger1 = P2BodyDist X < 10
value = 21

[State 29]
type = ChangeAnim
triggerall = Var(59) = 1
triggerall = Vel X > 0
triggerall = Anim != 20
trigger1 = P2BodyDist X > 55
value = 20

[State 24]
type = ChangeState
trigger1 = P2BodyDist X = [10,55]
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;
[Statedef 36]
type = S
physics = S
anim = 40
velset = 0,0
ctrl = 0
facep2 = 1

[State 36]
type = NotHitBy
trigger1 = Time = 0
value = ,NT,ST
time = 4

[State 36]
type = VelSet
trigger1 = AnimTime = 0
x = 3.6
y = -7.3

[State 36]
type = VelAdd
trigger1 = AnimTime = 0
y = .556

[State 36]
type = PlaySnd
trigger1 = AnimTime = 0
value = 6,0

[State 36]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
;
[Statedef 37]
type = S
physics = S
anim = 40
velset = 0,0
ctrl = 0
facep2 = 1

[State 37]
type = NotHitBy
trigger1 = Time = 0
value = ,NT,ST
time = 4

[State 37]
type = VelSet
trigger1 = AnimTime = 0
x = -3.6
y = -7.3

[State 37]
type = VelAdd
trigger1 = AnimTime = 0
y = .556

[State 37]
type = PlaySnd
trigger1 = AnimTime = 0
value = 6,0

[State 37]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
;
[Statedef 38]
type = S
physics = S
anim = 40
velset = 0,0
ctrl = 0
facep2 = 1

[State 38]
type = NotHitBy
trigger1 = Time = 0
value = ,NT,ST
time = 4

[State 38]
type = VelSet
trigger1 = AnimTime = 0
x = 0
y = -7.3

[State 38]
type = VelAdd
trigger1 = AnimTime = 0
y = .556

[State 38]
type = PlaySnd
trigger1 = AnimTime = 0
value = 6,0

[State 38]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
;
[Statedef 39]
type = S
physics = S
anim = 40
velset = 0,0
ctrl = 0
facep2 = 1

[State 39]
type = NotHitBy
trigger1 = Time = 0
value = ,NT,ST
time = 4

[State 39]
type = VelSet
trigger1 = AnimTime = 0
x = 5.38
y = -7.3

[State 39]
type = VelAdd
trigger1 = AnimTime = 0
y = .556

[State 39]
type = PlaySnd
trigger1 = AnimTime = 0
value = 6,0

[State 39]
type = PlaySnd
trigger1 = AnimTime = 0
value = 6,2

[State 39]
type = AfterImage
trigger1 = Time = 0
time = 7
length = 9
palbright = 0,0,0
palcontrast = 128,128,128
paladd = 0,0,0
palmul = 1,1,1
framegap = 3
trans = Add1

[State 39]
type = AfterImageTime
trigger1 = Time%2 = 0 && Time <= 7
time = 2

[State 39]
type = AfterImage
trigger1 = Time = 14
time = 0

[State 39]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
; Jump Start
[Statedef 40]
type    = S
physics = S
anim = 40
ctrl = 0

[State 40]
type = CtrlSet
trigger1 = Var(59) = 1
value = 1

[State 40]
type = NotHitBy
trigger1 = Time = 0
value = ,NT,ST
time = 4

[State 40]
type = AssertSpecial
trigger1 = 1
flag = NoStandGuard
flag2 = NoCrouchGuard
flag3 = NoAirGuard

[State 40]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 40]
type = MakeDust
trigger1 = Var(59) != 1
trigger1 = Time >= 0
pos = -30,0
spacing = 4

[State 40]
type = PlaySnd
trigger1 = AnimTime = 0
value = 6,0

[State 40]
type = Turn
trigger1 = Time = 0 && P2Dist X < 0
trigger1 = PrevStateNo != 100

[State 40]
type = VarSet
triggerall = !Var(59)
trigger1 = Time = 0
var(8) = 0

[State 40]
type = VarSet
triggerall = !Var(59)
trigger1 = Command = "HoldFwd"
trigger1 = Var(8) != 2
var(8) = 1

[State 40]
type = VarSet
triggerall = !Var(59)
trigger1 = PrevStateNo != 100
trigger1 = Command = "HoldBack"
trigger1 = Var(8) != -2
var(8) = -1

[State 40]
type = VarSet
triggerall = !Var(59)
triggerall = Time = 0
triggerall = Command = "HoldFwd"
trigger1 = Command = "LongJump"
trigger2 = PrevStateNo = 100
var(8) = 2

[State 40]
type = VarSet
triggerall = !Var(59)
trigger1 = Time = 0
trigger1 = Command = "HoldBack"
trigger1 = Command = "LongJump"
var(8) = -2

[State 40]
type = AfterImage
trigger1 = PrevStateNo = 100
trigger1 = SysVar(1) = 1
time = 15
length = 6
palbright = 0,0,0
palcontrast = 128,128,128
paladd = 0,0,0
palmul = 1,1,1
framegap = 4
trans = Add1

[State 40]
type = ChangeState
triggerall = Var(59) != 1
triggerall = AnimTime = 0
trigger1 = Var(8) != 0
trigger1 = Var(8) != 1
trigger1 = Var(8) != -1
trigger1 = Command = "HoldUp"
trigger2 = Command != "HoldUp"
value = 51

[State 40]
type = VelSet
trigger1 = AnimTime = 0
x = ifelse(var(8) = 0,const(Velocity.Jump.Neu.X),ifelse(var(8) > 0,const(Velocity.Jump.Fwd.X),const(Velocity.Jump.Back.X)))
y = const(Velocity.Jump.Y)

[State 40]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

[State 40]
type = ChangeState
trigger1 = Var(59) = 1
trigger1 = Time = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;
[Statedef 47]
type = S
physics = S
anim = 40
velset = 0,0
ctrl = 0
facep2 = 1

[State 47]
type = NotHitBy
trigger1 = Time = 0
value = ,NT,ST
time = 4

[State 47]
type = VelSet
trigger1 = AnimTime = 0
x = 0
y = -9.55

[State 47]
type = VelAdd
trigger1 = AnimTime = 0
y = .556

[State 47]
type = PlaySnd
trigger1 = AnimTime = 0
value = 6,0

[State 47]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
;
[Statedef 48]
type = S
physics = S
anim = 40
velset = 0,0
ctrl = 0
facep2 = 1

[State 48]
type = NotHitBy
trigger1 = Time = 0
value = ,NT,ST
time = 4

[State 48]
type = VelSet
trigger1 = AnimTime = 0
x = 3.6
y = -9.55

[State 48]
type = VelAdd
trigger1 = AnimTime = 0
y = .556

[State 48]
type = PlaySnd
trigger1 = AnimTime = 0
value = 6,0

[State 48]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
;
[Statedef 49]
type = S
physics = S
anim = 40
velset = 0,0
ctrl = 0
facep2 = 1

[State 49]
type = NotHitBy
trigger1 = Time = 0
value = ,NT,ST
time = 4

[State 49]
type = VelSet
trigger1 = AnimTime = 0
x = 5.08
y = -9.55

[State 49]
type = VelAdd
trigger1 = AnimTime = 0
y = .556

[State 49]
type = PlaySnd
trigger1 = AnimTime = 0
value = 6,0

[State 49]
type = PlaySnd
trigger1 = AnimTime = 0
value = 6,2

[State 49]
type = AfterImage
trigger1 = Time = 0
time = 7
length = 9
palbright = 0,0,0
palcontrast = 128,128,128
paladd = 0,0,0
palmul = 1,1,1
framegap = 3
trans = Add1

[State 49]
type = AfterImageTime
trigger1 = Time%2 = 0 && Time <= 7
time = 2

[State 49]
type = AfterImage
trigger1 = Time = 14
time = 0

[State 49]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
; Jump Up
[Statedef 50]
type    = A
physics = A

[State 50]
type = Width
trigger1 = 1
edge = 2,0

[State 50]
type = AssertSpecial
trigger1 = 1
flag = NoStandGuard
flag2 = NoCrouchGuard
flag3 = NoAirGuard

[State 50]
type = ChangeAnim
triggerall = Anim != 41 && Anim != 42 && Anim != 43 && Anim != 52
trigger1 = Time = 0
value = ifelse((vel X) = 0,41,ifelse((vel X) > 0,42,43))

[State 50]
type = ChangeAnim
triggerall = Anim != 41 && Anim != 42 && Anim != 43 && Anim != 52
trigger1 = Vel Y > -4
trigger1 = SelfAnimExist(Anim+3)
persistent = 0
value = anim+3

[State 50]
type = ChangeState
triggerall = Var(59) = 1
trigger1 = Time = 0
trigger1 = Vel X > 0
trigger1 = P2StateNo = [1260,1263]
value = 710

[State 50]
type = ChangeState
triggerall = Var(59) = 1
trigger1 = Time = 0
trigger1 = Vel X < 0
trigger1 = P2BodyDist X >= 90
trigger1 = !NumProjID(1650)
value = 1610

[State 50]
type = ChangeState
triggerall = Var(59) = 1
triggerall = P2Name = "Kula_Fliz" || P4Name = "Kula_Fliz"
triggerall = P2StateNo != 1600
trigger1 = Time = 0
trigger1 = Vel X <= 0
value = 610

[State 50]
type = ChangeState
triggerall = Var(59) = 1
triggerall = P2MoveType != A
trigger1 = Time = 0
trigger1 = Vel X <= 0
value = 610

;---------------------------------------------------------------------------
; Jump Up (short)
[Statedef 51]
type    = A
physics = N
velset = 0,-7.4
ctrl = 1

[State 51]
type = Width
trigger1 = 1
edge = 2,0

[State 51]
type = VelAdd
trigger1 = 1
y = .556

[State 51]
type = AssertSpecial
trigger1 = 1
flag = NoStandGuard
flag2 = NoCrouchGuard
flag3 = NoAirGuard

[State 51]
type = PlaySnd
triggerall = Time = 0
trigger1 = Var(8) = -2
trigger2 = Var(8) = 2
value = 6,2

[State 51]
type = AfterImage
triggerall = Time = 0
trigger1 = Var(8) = -2
trigger2 = Var(8) = 2
time = 7
length = 9
palbright = 0,0,0
palcontrast = 128,128,128
paladd = 0,0,0
palmul = 1,1,1
framegap = 3
trans = Add1

[State 51]
type = AfterImageTime
triggerall = Time%2 = 0 && Time <= 7
trigger1 = Var(8) = -2
trigger2 = Var(8) = 2
time = 2

[State 51]
type = AfterImage
triggerall = Time = 14
trigger1 = Var(8) = -2
trigger2 = Var(8) = 2
time = 0

[State 51]
type = VelSet
trigger1 = Time = 0
trigger1 = Var(8) = 1
x = 3.6

[State 51]
type = VelSet
trigger1 = Time = 0
trigger1 = Var(8) = 2
x = 5.38

[State 51]
type = VelSet
trigger1 = Time = 0
trigger1 = Var(8) = -1
x = -3.6

[State 51]
type = VelSet
trigger1 = Time = 0
trigger1 = Var(8) = -2
x = -5.38

[State 51]
type = ChangeState
trigger1 = Time = 0
trigger1 = Vel X = 0
trigger1 = Command = "HoldUp"
value = 55

[State 51]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = Vel X = 0
trigger1 = Command != "HoldUp"
value = 51

[State 51]
type = ChangeState
trigger1 = Time = 0
trigger1 = Vel X > 0
trigger1 = Command = "HoldUp"
value = 55

[State 51]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = Vel X > 0
trigger1 = Command != "HoldUp"
value = 52

[State 51]
type = ChangeState
trigger1 = Time = 0
trigger1 = Vel X < 0
trigger1 = Command = "HoldUp"
value = 55

[State 51]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = Vel X < 0
trigger1 = Command != "HoldUp"
value = 53

[State 51]
type = Null
trigger1 = Anim = 51
trigger1 = Time >= 2
y = 0.02

[State 51]
type = Null
trigger1 = Time >= 4
y = 0.14

[State 51]
type = ChangeState
trigger1 = Pos Y >= -8 && Vel Y > 0
value = 52

;---------------------------------------------------------------------------
; Jump Up (short)
[Statedef 55]
type    = A
physics = A
velset = 0,-9
ctrl = 1

[State 55]
type = Width
trigger1 = 1
edge = 2,0

[State 55]
type = PlaySnd
triggerall = Time = 0
trigger1 = Var(28) = -2
trigger2 = Var(28) = 2
value = 6,2

[State 55]
type = AssertSpecial
trigger1 = 1
flag = NoStandGuard
flag2 = NoCrouchGuard
flag3 = NoAirGuard

[State 55]
type = ChangeAnim
triggerall = Var(59)
trigger1 = Time = 0
trigger1 = Vel X = 0
value = 51

[State 55]
type = ChangeAnim
triggerall = Var(59)
trigger1 = Time = 0
trigger1 = Vel X > 0
value = 51

[State 55]
type = ChangeAnim
triggerall = Var(59)
trigger1 = Time = 0
trigger1 = Vel X < 0
value = 51

[State 55]
type = AfterImage
triggerall = Time = 0
trigger1 = Var(8) = -2
trigger2 = Var(8) = 2
trigger3 = Var(28) = -2
trigger4 = Var(28) = 2
time = 7
length = 9
palbright = 0,0,0
palcontrast = 128,128,128
paladd = 0,0,0
palmul = 1,1,1
framegap = 3
trans = Add1

[State 55]
type = AfterImageTime
trigger1 = Time%2 = 0 && Time <= 7
time = 2

[State 55]
type = AfterImage
trigger1 = Time = 14
time = 0

[State 55]
type = VelSet
trigger1 = Time = 0
trigger1 = Var(8) = 1
x = 5.08

[State 55]
type = VelSet
triggerall = Time = 0
trigger1 = Var(8) = 2
trigger2 = Var(28) = 2
x = 5.08

[State 55]
type = VelSet
trigger1 = Time = 0
trigger1 = Var(8) = -1
x = -5.08

[State 55]
type = VelSet
triggerall = Time = 0
trigger1 = Var(8) = -2
trigger2 = Var(28) = -2
x = -5.08

[State 55]
type = ChangeAnim
triggerall = !Var(59)
trigger1 = Time = 0
trigger1 = Vel X = 0
trigger1 = Command = "HoldUp"
value = 41

[State 55]
type = ChangeAnim
triggerall = !Var(59)
trigger1 = Time = 0
trigger1 = Vel X = 0
trigger1 = Command != "HoldUp"
value = 51

[State 55]
type = ChangeAnim
triggerall = !Var(59)
trigger1 = Time = 0
trigger1 = Vel X > 0
trigger1 = Command = "HoldUp"
value = 42

[State 55]
type = ChangeAnim
triggerall = !Var(59)
trigger1 = Time = 0
trigger1 = Vel X > 0
trigger1 = Command != "HoldUp"
value = 51

[State 55]
type = ChangeAnim
triggerall = !Var(59)
trigger1 = Time = 0
trigger1 = Vel X < 0
trigger1 = Command = "HoldUp"
value = 43

[State 55]
type = ChangeAnim
triggerall = !Var(59)
trigger1 = Time = 0
trigger1 = Vel X < 0
trigger1 = Command != "HoldUp"
value = 51

[State 55]
type = Null
trigger1 = Anim = 51
trigger1 = Time >= 2
y = 0.02

[State 55]
type = Null
trigger1 = Time >= 4
y = 0.14

;---------------------------------------------------------------------------
; Jump Up (short) AI
[Statedef 56]
type    = A
physics = A
velset = 0,-9
ctrl = 1

[State 56]
type = Width
trigger1 = 1
edge = 2,0

[State 56]
type = AssertSpecial
trigger1 = 1
flag = NoStandGuard
flag2 = NoCrouchGuard
flag3 = NoAirGuard

[State 56]
type = ChangeAnim
trigger1 = Time = 0
value = 41

[State 56]
type = PlaySnd
trigger1 = Time = 0
value = 6,2

[State 56]
type = AfterImage
trigger1 = Time = 0
time = 7
length = 9
palbright = 0,0,0
palcontrast = 128,128,128
paladd = 0,0,0
palmul = 1,1,1
framegap = 3
trans = Add1

[State 56]
type = AfterImageTime
trigger1 = Time%2 = 0 && Time <= 7
time = 2

[State 56]
type = AfterImage
trigger1 = Time = 14
time = 0

[State 56]
type = VelSet
trigger1 = Time = 0
x = 5.08

[State 56]
type = ChangeState
triggerall = Var(59) = 1
triggerall = Var(30) = 0
triggerall = Time >= 3
triggerall = Power >= 1000
triggerall = P2BodyDist X < 50
triggerall = Vel X > 0
trigger1 = P2StateNo = [6210,6213]
trigger2 = P2StateNo = 825
value = 3305

[State 56]
type = ChangeState
triggerall = Var(59) = 1
triggerall = Var(30) > 0
triggerall = Time >= 3
triggerall = P2BodyDist X < 50
triggerall = Vel X > 0
trigger1 = P2StateNo = [6210,6213]
trigger2 = P2StateNo = 825
value = 3306

;---------------------------------------------------------------------------
; Jump Up (short) AI
[Statedef 57]
type    = A
physics = A
velset = 0,-9
ctrl = 1

[State 57]
type = Width
trigger1 = 1
edge = 2,0

[State 57]
type = AssertSpecial
trigger1 = 1
flag = NoStandGuard
flag2 = NoCrouchGuard
flag3 = NoAirGuard

[State 57]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = Vel X > 0
value = 41

[State 57]
type = PlaySnd
trigger1 = Time = 0
value = 6,2

[State 57]
type = AfterImage
trigger1 = Time = 0
time = 7
length = 9
palbright = 0,0,0
palcontrast = 128,128,128
paladd = 0,0,0
palmul = 1,1,1
framegap = 3
trans = Add1

[State 57]
type = AfterImageTime
trigger1 = Time%2 = 0 && Time <= 7
time = 2

[State 57]
type = AfterImage
trigger1 = Time = 14
time = 0

[State 57]
type = VelSet
trigger1 = Time = 0
x = 5.08

[State 57]
type = ChangeState
triggerall = Var(59) = 1
triggerall = P2MoveType = H
trigger1 = Time = 0
trigger1 = Vel X > 0
value = 640

;---------------------------------------------------------------------------
; Jump Land
[Statedef 52]
type     = S
movetype = I
physics  = S
anim = 47
ctrl = 0
velset = 0,0

[State 52]
type = NotHitBy
trigger1 = Time = 0
value = ,NT,ST
time = 4

[State 52]
type = AssertSpecial
trigger1 = 1
flag = NoStandGuard
flag2 = NoCrouchGuard
flag3 = NoAirGuard

[State 52]
type = VarSet
trigger1 = Time = 0
var(8) = 0

[State 52]
type = VarSet
trigger1 = Time = 0
var(28) = 0

[State 52]
type = CtrlSet
trigger1 = Time = 0
value = 1

[State 52]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 52]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52]
type = PlaySnd
trigger1 = Time = 0
value = 6,1

[State 52]
type = MakeDust
trigger1 = Time >= 0
pos = -30,0
spacing = 4

[State 52]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;
[Statedef 58]
type = S
physics = S
anim = 40
velset = 0,0
ctrl = 0
facep2 = 1

[State 58]
type = NotHitBy
trigger1 = Time = 0
value = ,NT,ST
time = 4

[State 58]
type = VelSet
trigger1 = AnimTime = 0
x = 3.6
y = -9.55

[State 58]
type = VelAdd
trigger1 = AnimTime = 0
y = .556

[State 58]
type = PlaySnd
trigger1 = AnimTime = 0
value = 6,0

[State 58]
type = ChangeState
trigger1 = AnimTime = 0
value = 68
ctrl = 1

;---------------------------------------------------------------------------
;
[Statedef 59]
type = S
physics = S
anim = 40
velset = 0,0
ctrl = 0
facep2 = 1

[State 59]
type = NotHitBy
trigger1 = Time = 0
value = ,NT,ST
time = 4

[State 59]
type = VelSet
trigger1 = AnimTime = 0
x = 5.08
y = -9.55

[State 59]
type = VelAdd
trigger1 = AnimTime = 0
y = .556

[State 59]
type = PlaySnd
trigger1 = AnimTime = 0
value = 6,0

[State 59]
type = PlaySnd
trigger1 = AnimTime = 0
value = 6,2

[State 59]
type = AfterImage
trigger1 = Time = 0
time = 7
length = 9
palbright = 0,0,0
palcontrast = 128,128,128
paladd = 0,0,0
palmul = 1,1,1
framegap = 3
trans = Add1

[State 59]
type = AfterImageTime
trigger1 = Time%2 = 0 && Time <= 7
time = 2

[State 59]
type = AfterImage
trigger1 = Time = 14
time = 0

[State 59]
type = ChangeState
trigger1 = AnimTime = 0
value = 69
ctrl = 1

;---------------------------------------------------------------------------
; Jump Up (short) AI
[Statedef 68]
type    = A
physics = A
velset = 0,-9
anim = 41
ctrl = 1

[State 68]
type = Width
trigger1 = 1
edge = 2,0

[State 68]
type = AssertSpecial
trigger1 = 1
flag = NoStandGuard
flag2 = NoCrouchGuard
flag3 = NoAirGuard

[State 68]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = Vel X > 0
value = 41

[State 68]
type = AfterImage
trigger1 = Time = 14
time = 0

[State 68]
type = VelSet
trigger1 = Time = 0
x = 5.08

[State 68]
type = ChangeState
;triggerall = Var(59) = 1
;triggerall = P2MoveType = H
trigger1 = Time = 21
trigger1 = Vel X > 0
value = 640

;---------------------------------------------------------------------------
; Jump Up (short) AI
[Statedef 69]
type    = A
physics = A
velset = 0,-9
anim = 41
ctrl = 1

[State 69]
type = Width
trigger1 = 1
edge = 2,0

[State 69]
type = AssertSpecial
trigger1 = 1
flag = NoStandGuard
flag2 = NoCrouchGuard
flag3 = NoAirGuard

[State 69]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = Vel X > 0
value = 41

[State 69]
type = PlaySnd
trigger1 = Time = 0
value = 6,2

[State 69]
type = AfterImage
trigger1 = Time = 0
time = 7
length = 9
palbright = 0,0,0
palcontrast = 128,128,128
paladd = 0,0,0
palmul = 1,1,1
framegap = 3
trans = Add1

[State 69]
type = AfterImageTime
trigger1 = Time%2 = 0 && Time <= 7
time = 2

[State 69]
type = AfterImage
trigger1 = Time = 14
time = 0

[State 69]
type = VelSet
trigger1 = Time = 0
x = 5.08

[State 69]
type = ChangeState
;triggerall = Var(59) = 1
;triggerall = P2MoveType = H
trigger1 = Time = 21
trigger1 = Vel X > 0
value = 640

;------------------------------------------------------------------------
; AB Fwd
[Statedef 80]
type = S
movetype = I
physics = S
ctrl = 0
anim = 80
velset = 0,0
poweradd = 0
sprpriority = -2
facep2 = 1

[State 80]
type = Width
trigger1 = 1
edge = 2,0

[State 80]
type = PosAdd
trigger1 = Time = [8,25]
x = 5

[State 80]
type = PlayerPush
trigger1 = 1
value = 0

[State 80]
type = PlaySnd
trigger1 = Time = 0
value = 0,0

[State 80]
type = NotHitBy
trigger1 = Time = 0
time = 25
value = SCA

[State 80]
type = HitBy
trigger1 = Time = 0
value = SCA,NT,ST,HT
time = 25

[State 80]
type = AfterImage
trigger1 = Time = 0
time = 13
length = 9
palbright = 0,0,0
palcontrast = 128,128,128
paladd = 0,0,0
palmul = 1,1,1
framegap = 3
trans = Add1

[State 80]
type = AfterImageTime
trigger1 = Time%2 = 0 && Time <= 12
time = 2

[State 80]
type = VarSet
trigger1 = Time = 0
var(28) = 0

[State 80]
type = VarSet
triggerall = Time > 20
trigger1 = Command = "a+y"
var(28) = 5

[State 80]
type = VarSet
triggerall = Time > 20
trigger1 = Command = "Recovery" && !Command = "HoldBack"
var(28) = 4

[State 80]
type = VarSet
triggerall = Time > 20
trigger1 = Command = "FF"
var(28) = 3

[State 80]
type = VarSet
triggerall = Time > 10
triggerall = Facing*Enemy,Facing = -1
trigger1 = Command = "LongJumpFwd"
var(28) = 2

[State 80]
type = VarSet
triggerall = Time > 10
triggerall = Facing*Enemy,Facing = -1
trigger1 = Command = "LongJumpBack"
var(28) = -2

[State 80]
type = VarSet
triggerall = Time > 20
trigger1 = Command = "BB"
var(28) = -3

[State 80]
type = VarSet
triggerall = Time > 20
trigger1 = Command = "Recovery" && Command = "HoldBack"
var(28) = -4

[State 80]
type = VarSet
trigger1 = Time = 0
var(14) = 0

[State 80]
type = VarSet
triggerall = Time > 20
trigger1 = IfElse(FVar(5) = 0,Command = "Critical_Ice",Command = "Critical_Ice-R")
var(14) = -3
ignorehitpause = 1

[State 80]
type = VarSet
trigger1 = Time > 20
trigger1 = IfElse(FVar(5) = 0,Command = "Sliding_Kick",Command = "Sliding_Kick-R")
var(14) = -2

[State 80]
type = VarSet
trigger1 = Time > 20
trigger1 = IfElse(FVar(5) = 0,Command = "One_Inch",Command = "One_Inch-R")
var(14) = -1

[State 80]
type = VarSet
trigger1 = Time > 15
trigger1 = IfElse(FVar(5) = 0,Command = "Diamond_Breath_A",Command = "Diamond_Breath_A-R")
var(14) = 1

[State 80]
type = VarSet
trigger1 = Time > 15
trigger1 = IfElse(FVar(5) = 0,Command = "Diamond_Breath_C",Command = "Diamond_Breath_C-R")
var(14) = 2

[State 80]
type = VarSet
trigger1 = Time > 10
trigger1 = IfElse(FVar(5) = 0,Command = "Crow_Bites_A",Command = "Crow_Bites_A-R")
var(14) = 3

[State 80]
type = VarSet
trigger1 = Time > 10
trigger1 = IfElse(FVar(5) = 0,Command = "Crow_Bites_C",Command = "Crow_Bites_C-R")
var(14) = 4

[State 80]
type = VarSet
trigger1 = Time > 15
trigger1 = IfElse(FVar(5) = 0,Command = "Counter_Shell",Command = "Counter_Shell-R")
var(14) = 5

[State 80]
type = VarSet
trigger1 = Time > 15
trigger1 = IfElse(FVar(5) = 0,Command = "Ray_Spin_B",Command = "Ray_Spin_B-R")
var(14) = 6

[State 80]
type = VarSet
trigger1 = Time > 15
trigger1 = IfElse(FVar(5) = 0,Command = "Ray_Spin_D",Command = "Ray_Spin_D-R")
var(14) = 7

[State 80]
type = VarSet
trigger1 = Time > 5
trigger1 = IfElse(FVar(5) = 0,Command = "Diamond_Edge",Command = "Diamond_Edge-R")
var(14) = 8

[State 80]
type = VarSet
trigger1 = Time > 15
trigger1 = IfElse(FVar(5) = 0,Command = "Freeze_Execution",Command = "Freeze_Execution-R")
var(14) = 9

[State 80]
type = VarSet
trigger1 = Time > 15
trigger1 = IfElse(FVar(5) = 0,Command = "MAX2",Command = "MAX2-R")
var(14) = 10

[State 80]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(30) = 0
triggerall = AnimTime = 0
triggerall = Power >= 1000
trigger1 = Var(28) = 5
value = 2500

[State 80]
type = ChangeState
triggerall = Var(59) != 1
triggerall = AnimTime = 0
trigger1 = Var(28) = 4
value = 80

[State 80]
type = ChangeState
triggerall = Var(59) != 1
triggerall = AnimTime = 0
trigger1 = Var(28) = 3
value = 100

[State 80]
type = ChangeState
triggerall = Var(59) != 1
triggerall = AnimTime = 0
trigger1 = Var(28) = 2
trigger2 = Var(28) = -2
value = 55

[State 80]
type = ChangeState
triggerall = Var(59) != 1
triggerall = AnimTime = 0
trigger1 = Var(28) = -3
value = 105

[State 80]
type = ChangeState
triggerall = Var(59) != 1
triggerall = AnimTime = 0
trigger1 = Var(28) = -4
value = 90

[State 80]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = -3
trigger1 = AnimTime = 0
value = 270
ignorehitpause = 1

[State 80]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = -2
trigger1 = AnimTime = 0
value = 260

[State 80]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = -1
trigger1 = AnimTime = 0
value = 220

[State 80]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 1
trigger1 = AnimTime = 0
value = 1000

[State 80]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 2
trigger1 = AnimTime = 0
value = 1100

[State 80]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 3
trigger1 = AnimTime = 0
value = 1200

[State 80]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 4
trigger1 = AnimTime = 0
value = 1210

[State 80]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 5
trigger1 = AnimTime = 0
value = 1300

[State 80]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 6
trigger1 = AnimTime = 0
value = 1400

[State 80]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 7
trigger1 = AnimTime = 0
value = 1410

[State 80]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(30) = 0
triggerall = Var(14) = 8
triggerall = Power >= 1000
trigger1 = AnimTime = 0
value = 3000

[State 80]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(30) > 0
triggerall = Var(14) = 8
trigger1 = AnimTime = 0
value = 3000

[State 80]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = [1,2]
triggerall = Var(30) = 0
triggerall = Var(14) = 9
triggerall = Power >= 3000
trigger1 = AnimTime = 0
value = 3500

[State 80]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(30) > 0
triggerall = Var(14) = 9
triggerall = Power >= 1000
trigger1 = AnimTime = 0
value = 3500

[State 80]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 2
triggerall = Var(30) = 0
triggerall = Var(14) = 10
triggerall = Power >= 3000
trigger1 = AnimTime = 0
value = 3900

[State 80]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 1
triggerall = Var(30) = 0
triggerall = Var(14) = 10
triggerall = Power >= 3000
triggerall = Life <= 360
trigger1 = AnimTime = 0
value = 3900

[State 80]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 0
triggerall = Var(30) > 0
triggerall = Var(14) = 10
triggerall = Power >= 1000
triggerall = Life <= 320
trigger1 = AnimTime = 0
value = 3900

[State 80]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 2
triggerall = Var(30) > 0
triggerall = Var(14) = 10
triggerall = Power >= 1000
trigger1 = AnimTime = 0
value = 3900

[State 80]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 1
triggerall = Var(30) > 0
triggerall = Var(14) = 10
triggerall = Power >= 1000
triggerall = Life <= 360
trigger1 = AnimTime = 0
value = 3900

[State 80]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------------------------------------------
; AB Fwd (running)
[Statedef 81]
type = S
movetype = I
physics = S
ctrl = 0
anim = 80
velset = 0,0
poweradd = 0
sprpriority = -2

[State 81]
type = Width
trigger1 = 1
edge = 2,0

[State 81]
type = PosAdd
trigger1 = Time = [8,25]
x = 7

[State 81]
type = PlayerPush
trigger1 = 1
value = 0

[State 81]
type = PlaySnd
trigger1 = Time = 0
value = 0,0

[State 81]
type = NotHitBy
trigger1 = Time = 0
time = 25
value = SCA

[State 81]
type = HitBy
trigger1 = Time = 0
value = SCA,NT,ST,HT
time = 25

[State 81]
type = AfterImage
trigger1 = Time = 0
time = 13
length = 9
palbright = 0,0,0
palcontrast = 128,128,128
paladd = 0,0,0
palmul = 1,1,1
framegap = 3
trans = Add1

[State 81]
type = AfterImageTime
trigger1 = Time%2 = 0 && Time <= 12
time = 2

[State 81]
type = VarSet
trigger1 = Time = 0
var(28) = 0

[State 81]
type = VarSet
triggerall = Time > 20
trigger1 = Command = "a+y"
var(28) = 5

[State 81]
type = VarSet
triggerall = Time > 20
trigger1 = Command = "Recovery" && !Command = "HoldBack"
var(28) = 4

[State 81]
type = VarSet
triggerall = Time > 20
trigger1 = Command = "FF"
var(28) = 3

[State 81]
type = VarSet
triggerall = Time > 10
triggerall = Facing*Enemy,Facing = -1
trigger1 = Command = "LongJumpFwd"
var(28) = 2

[State 81]
type = VarSet
triggerall = Time > 10
triggerall = Facing*Enemy,Facing = -1
trigger1 = Command = "LongJumpBack"
var(28) = -2

[State 81]
type = VarSet
triggerall = Time > 20
trigger1 = Command = "BB"
var(28) = -3

[State 81]
type = VarSet
triggerall = Time > 20
trigger1 = Command = "Recovery" && Command = "HoldBack"
var(28) = -4

[State 81]
type = VarSet
trigger1 = Time = 0
var(14) = 0

[State 81]
type = VarSet
triggerall = Time > 20
trigger1 = IfElse(FVar(5) = 0,Command = "Critical_Ice",Command = "Critical_Ice-R")
var(14) = -3
ignorehitpause = 1

[State 81]
type = VarSet
trigger1 = Time > 20
trigger1 = IfElse(FVar(5) = 0,Command = "Sliding_Kick",Command = "Sliding_Kick-R")
var(14) = -2

[State 81]
type = VarSet
trigger1 = Time > 20
trigger1 = IfElse(FVar(5) = 0,Command = "One_Inch",Command = "One_Inch-R")
var(14) = -1

[State 81]
type = VarSet
trigger1 = Time > 15
trigger1 = IfElse(FVar(5) = 0,Command = "Diamond_Breath_A",Command = "Diamond_Breath_A-R")
var(14) = 1

[State 81]
type = VarSet
trigger1 = Time > 15
trigger1 = IfElse(FVar(5) = 0,Command = "Diamond_Breath_C",Command = "Diamond_Breath_C-R")
var(14) = 2

[State 81]
type = VarSet
trigger1 = Time > 10
trigger1 = IfElse(FVar(5) = 0,Command = "Crow_Bites_A",Command = "Crow_Bites_A-R")
var(14) = 3

[State 81]
type = VarSet
trigger1 = Time > 10
trigger1 = IfElse(FVar(5) = 0,Command = "Crow_Bites_C",Command = "Crow_Bites_C-R")
var(14) = 4

[State 81]
type = VarSet
trigger1 = Time > 15
trigger1 = IfElse(FVar(5) = 0,Command = "Counter_Shell",Command = "Counter_Shell-R")
var(14) = 5

[State 81]
type = VarSet
trigger1 = Time > 15
trigger1 = IfElse(FVar(5) = 0,Command = "Ray_Spin_B",Command = "Ray_Spin_B-R")
var(14) = 6

[State 81]
type = VarSet
trigger1 = Time > 15
trigger1 = IfElse(FVar(5) = 0,Command = "Ray_Spin_D",Command = "Ray_Spin_D-R")
var(14) = 7

[State 81]
type = VarSet
trigger1 = Time > 5
trigger1 = IfElse(FVar(5) = 0,Command = "Diamond_Edge",Command = "Diamond_Edge-R")
var(14) = 8

[State 81]
type = VarSet
trigger1 = Time > 15
trigger1 = IfElse(FVar(5) = 0,Command = "Freeze_Execution",Command = "Freeze_Execution-R")
var(14) = 9

[State 81]
type = VarSet
trigger1 = Time > 15
trigger1 = IfElse(FVar(5) = 0,Command = "MAX2",Command = "MAX2-R")
var(14) = 10

[State 81]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(30) = 0
triggerall = AnimTime = 0
triggerall = Power >= 1000
trigger1 = Var(28) = 5
value = 2500

[State 81]
type = ChangeState
triggerall = Var(59) != 1
triggerall = AnimTime = 0
trigger1 = Var(28) = 4
value = 80

[State 81]
type = ChangeState
triggerall = Var(59) != 1
triggerall = AnimTime = 0
trigger1 = Var(28) = 3
value = 100

[State 81]
type = ChangeState
triggerall = Var(59) != 1
triggerall = AnimTime = 0
trigger1 = Var(28) = 2
trigger2 = Var(28) = -2
value = 55

[State 81]
type = ChangeState
triggerall = Var(59) != 1
triggerall = AnimTime = 0
trigger1 = Var(28) = -3
value = 105

[State 81]
type = ChangeState
triggerall = Var(59) != 1
triggerall = AnimTime = 0
trigger1 = Var(28) = -4
value = 90

[State 81]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = -3
trigger1 = AnimTime = 0
value = 270
ignorehitpause = 1

[State 81]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = -2
trigger1 = AnimTime = 0
value = 260

[State 81]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = -1
trigger1 = AnimTime = 0
value = 220

[State 81]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 1
trigger1 = AnimTime = 0
value = 1000

[State 81]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 2
trigger1 = AnimTime = 0
value = 1100

[State 81]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 3
trigger1 = AnimTime = 0
value = 1200

[State 81]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 4
trigger1 = AnimTime = 0
value = 1210

[State 81]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 5
trigger1 = AnimTime = 0
value = 1300

[State 81]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 6
trigger1 = AnimTime = 0
value = 1400

[State 81]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 7
trigger1 = AnimTime = 0
value = 1410

[State 81]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(30) = 0
triggerall = Var(14) = 8
triggerall = Power >= 1000
trigger1 = AnimTime = 0
value = 3000

[State 81]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(30) > 0
triggerall = Var(14) = 8
trigger1 = AnimTime = 0
value = 3000

[State 81]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = [1,2]
triggerall = Var(30) = 0
triggerall = Var(14) = 9
triggerall = Power >= 3000
trigger1 = AnimTime = 0
value = 3500

[State 81]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(30) > 0
triggerall = Var(14) = 9
triggerall = Power >= 1000
trigger1 = AnimTime = 0
value = 3500

[State 81]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 2
triggerall = Var(30) = 0
triggerall = Var(14) = 10
triggerall = Power >= 3000
trigger1 = AnimTime = 0
value = 3900

[State 81]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 1
triggerall = Var(30) = 0
triggerall = Var(14) = 10
triggerall = Power >= 3000
triggerall = Life <= 360
trigger1 = AnimTime = 0
value = 3900

[State 81]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 0
triggerall = Var(30) > 0
triggerall = Var(14) = 10
triggerall = Power >= 1000
triggerall = Life <= 320
trigger1 = AnimTime = 0
value = 3900

[State 81]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 2
triggerall = Var(30) > 0
triggerall = Var(14) = 10
triggerall = Power >= 1000
trigger1 = AnimTime = 0
value = 3900

[State 81]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 1
triggerall = Var(30) > 0
triggerall = Var(14) = 10
triggerall = Power >= 1000
triggerall = Life <= 360
trigger1 = AnimTime = 0
value = 3900

[State 81]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------------------------------------------
; AB Fwd (cancel)
[Statedef 85]
type = S
movetype = I
physics = S
ctrl = 0
anim = 85
velset = 0,0
poweradd = -1000
sprpriority = -2
facep2 = 1

[State 85]
type = Width
trigger1 = 1
edge = 2,0

[State 85]
type = Explod
trigger1 = Time = 0
anim = 143
ID = 725
sprpriority = 3
postype = P1
pos = 0,0
bindtime = -1
removeongethit = 1
ignorehitpause = 0
ownpal = 1

[State 85]
type = PosAdd
trigger1 = Time = [12,29]
x = 5

[State 85]
type = PlaySnd
trigger1 = Time = 0
value = 0,0

[State 85]
type = NotHitBy
trigger1 = 1
value = SCA

[State 85]
type = PlayerPush
trigger1 = 1
value = 0

[State 85]
type = AfterImage
trigger1 = Time = 0
time = 32
length = 8
palcolor = 256
palinvertall = 0
palbright = 20,20,30
palcontrast = 100,100,220
palpostbright = 0,0,0
paladd = 10,10,45
palmul = .65,.65,.85
timegap = 1
framegap = 2
trans = Add1

[State 85]
type = AfterImagetime
trigger1 = Time%2 = 0 && Time <= 31
time = 2

[State 85]
type = VarSet
trigger1 = Time = 0
var(28) = 0

[State 85]
type = VarSet
triggerall = Time > 20
trigger1 = Command = "a+y"
var(28) = 5

[State 85]
type = VarSet
triggerall = Time > 20
trigger1 = Command = "Recovery" && !Command = "HoldBack"
var(28) = 4

[State 85]
type = VarSet
triggerall = Time > 20
trigger1 = Command = "FF"
var(28) = 3

[State 85]
type = VarSet
triggerall = Time > 10
triggerall = Facing*Enemy,Facing = -1
trigger1 = Command = "LongJumpFwd"
var(28) = 2

[State 85]
type = VarSet
triggerall = Time > 10
triggerall = Facing*Enemy,Facing = -1
trigger1 = Command = "LongJumpBack"
var(28) = -2

[State 85]
type = VarSet
triggerall = Time > 20
trigger1 = Command = "BB"
var(28) = -3

[State 85]
type = VarSet
triggerall = Time > 20
trigger1 = Command = "Recovery" && Command = "HoldBack"
var(28) = -4

[State 85]
type = VarSet
trigger1 = Time = 0
var(14) = 0

[State 85]
type = VarSet
triggerall = Time > 20
trigger1 = IfElse(FVar(5) = 0,Command = "Critical_Ice",Command = "Critical_Ice-R")
var(14) = -3
ignorehitpause = 1

[State 85]
type = VarSet
trigger1 = Time > 20
trigger1 = IfElse(FVar(5) = 0,Command = "Sliding_Kick",Command = "Sliding_Kick-R")
var(14) = -2

[State 85]
type = VarSet
trigger1 = Time > 20
trigger1 = IfElse(FVar(5) = 0,Command = "One_Inch",Command = "One_Inch-R")
var(14) = -1

[State 85]
type = VarSet
trigger1 = Time > 15
trigger1 = IfElse(FVar(5) = 0,Command = "Diamond_Breath_A",Command = "Diamond_Breath_A-R")
var(14) = 1

[State 85]
type = VarSet
trigger1 = Time > 15
trigger1 = IfElse(FVar(5) = 0,Command = "Diamond_Breath_C",Command = "Diamond_Breath_C-R")
var(14) = 2

[State 85]
type = VarSet
trigger1 = Time > 10
trigger1 = IfElse(FVar(5) = 0,Command = "Crow_Bites_A",Command = "Crow_Bites_A-R")
var(14) = 3

[State 85]
type = VarSet
trigger1 = Time > 10
trigger1 = IfElse(FVar(5) = 0,Command = "Crow_Bites_C",Command = "Crow_Bites_C-R")
var(14) = 4

[State 85]
type = VarSet
trigger1 = Time > 15
trigger1 = IfElse(FVar(5) = 0,Command = "Counter_Shell",Command = "Counter_Shell-R")
var(14) = 5

[State 85]
type = VarSet
trigger1 = Time > 15
trigger1 = IfElse(FVar(5) = 0,Command = "Ray_Spin_B",Command = "Ray_Spin_B-R")
var(14) = 6

[State 85]
type = VarSet
trigger1 = Time > 15
trigger1 = IfElse(FVar(5) = 0,Command = "Ray_Spin_D",Command = "Ray_Spin_D-R")
var(14) = 7

[State 85]
type = VarSet
trigger1 = Time > 5
trigger1 = IfElse(FVar(5) = 0,Command = "Diamond_Edge",Command = "Diamond_Edge-R")
var(14) = 8

[State 85]
type = VarSet
trigger1 = Time > 15
trigger1 = IfElse(FVar(5) = 0,Command = "Freeze_Execution",Command = "Freeze_Execution-R")
var(14) = 9

[State 85]
type = VarSet
trigger1 = Time > 15
trigger1 = IfElse(FVar(5) = 0,Command = "MAX2",Command = "MAX2-R")
var(14) = 10

[State 85]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(30) = 0
triggerall = AnimTime = 0
triggerall = Power >= 1000
trigger1 = Var(28) = 5
value = 2500

[State 85]
type = ChangeState
triggerall = Var(59) != 1
triggerall = AnimTime = 0
trigger1 = Var(28) = 4
value = 80

[State 85]
type = ChangeState
triggerall = Var(59) != 1
triggerall = AnimTime = 0
trigger1 = Var(28) = 3
value = 100

[State 85]
type = ChangeState
triggerall = Var(59) != 1
triggerall = AnimTime = 0
trigger1 = Var(28) = 2
trigger2 = Var(28) = -2
value = 55

[State 85]
type = ChangeState
triggerall = Var(59) != 1
triggerall = AnimTime = 0
trigger1 = Var(28) = -3
value = 105

[State 85]
type = ChangeState
triggerall = Var(59) != 1
triggerall = AnimTime = 0
trigger1 = Var(28) = -4
value = 90

[State 85]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = -3
trigger1 = AnimTime = 0
value = 270
ignorehitpause = 1

[State 85]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = -2
trigger1 = AnimTime = 0
value = 260

[State 85]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = -1
trigger1 = AnimTime = 0
value = 220

[State 85]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 1
trigger1 = AnimTime = 0
value = 1000

[State 85]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 2
trigger1 = AnimTime = 0
value = 1100

[State 85]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 3
trigger1 = AnimTime = 0
value = 1200

[State 85]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 4
trigger1 = AnimTime = 0
value = 1210

[State 85]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 5
trigger1 = AnimTime = 0
value = 1300

[State 85]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 6
trigger1 = AnimTime = 0
value = 1400

[State 85]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 7
trigger1 = AnimTime = 0
value = 1410

[State 85]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(30) = 0
triggerall = Var(14) = 8
triggerall = Power >= 1000
trigger1 = AnimTime = 0
value = 3000

[State 85]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(30) > 0
triggerall = Var(14) = 8
trigger1 = AnimTime = 0
value = 3000

[State 85]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = [1,2]
triggerall = Var(30) = 0
triggerall = Var(14) = 9
triggerall = Power >= 3000
trigger1 = AnimTime = 0
value = 3500

[State 85]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(30) > 0
triggerall = Var(14) = 9
triggerall = Power >= 1000
trigger1 = AnimTime = 0
value = 3500

[State 85]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 2
triggerall = Var(30) = 0
triggerall = Var(14) = 10
triggerall = Power >= 3000
trigger1 = AnimTime = 0
value = 3900

[State 85]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 1
triggerall = Var(30) = 0
triggerall = Var(14) = 10
triggerall = Power >= 3000
triggerall = Life <= 360
trigger1 = AnimTime = 0
value = 3900

[State 85]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 0
triggerall = Var(30) > 0
triggerall = Var(14) = 10
triggerall = Power >= 1000
triggerall = Life <= 320
trigger1 = AnimTime = 0
value = 3900

[State 85]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 2
triggerall = Var(30) > 0
triggerall = Var(14) = 10
triggerall = Power >= 1000
trigger1 = AnimTime = 0
value = 3900

[State 85]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 1
triggerall = Var(30) > 0
triggerall = Var(14) = 10
triggerall = Power >= 1000
triggerall = Life <= 360
trigger1 = AnimTime = 0
value = 3900

[State 85]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------------------------------------------
; AB Back
[Statedef 90]
type = S
movetype = I
physics = S
ctrl = 0
anim = 90
velset = 0,0
poweradd = 0
sprpriority = -2
facep2 = 1

[State 90]
type = Width
trigger1 = 1
edge = 2,0

[State 90]
type = PosAdd
trigger1 = Time = [8,25]
x = -5

[State 90]
type = PlayerPush
trigger1 = 1
value = 0

[State 90]
type = PlaySnd
trigger1 = Time = 0
value = 0,0

[State 90]
type = NotHitBy
trigger1 = Time = 0
time = 25
value = SCA

[State 90]
type = HitBy
trigger1 = Time = 0
value = SCA,NT,ST,HT
time = 25

[State 90]
type = AfterImage
trigger1 = Time = 0
time = 13
length = 9
palbright = 0,0,0
palcontrast = 128,128,128
paladd = 0,0,0
palmul = 1,1,1
framegap = 3
trans = Add1

[State 90]
type = AfterImageTime
trigger1 = Time%2 = 0 && Time <= 12
time = 2

[State 90]
type = VarSet
trigger1 = Time = 0
var(28) = 0

[State 90]
type = VarSet
triggerall = Time > 20
trigger1 = Command = "a+y"
var(28) = 5

[State 90]
type = VarSet
triggerall = Time > 20
trigger1 = Command = "Recovery" && !Command = "HoldBack"
var(28) = 4

[State 90]
type = VarSet
triggerall = Time > 20
trigger1 = Command = "FF"
var(28) = 3

[State 90]
type = VarSet
triggerall = Time > 10
triggerall = Facing*Enemy,Facing = -1
trigger1 = Command = "LongJumpFwd"
var(28) = 2

[State 90]
type = VarSet
triggerall = Time > 10
triggerall = Facing*Enemy,Facing = -1
trigger1 = Command = "LongJumpBack"
var(28) = -2

[State 90]
type = VarSet
triggerall = Time > 20
trigger1 = Command = "BB"
var(28) = -3

[State 90]
type = VarSet
triggerall = Time > 20
trigger1 = Command = "Recovery" && Command = "HoldBack"
var(28) = -4

[State 90]
type = VarSet
trigger1 = Time = 0
var(14) = 0

[State 90]
type = VarSet
triggerall = Time > 20
trigger1 = IfElse(FVar(5) = 0,Command = "Critical_Ice",Command = "Critical_Ice-R")
var(14) = -3
ignorehitpause = 1

[State 90]
type = VarSet
trigger1 = Time > 20
trigger1 = IfElse(FVar(5) = 0,Command = "Sliding_Kick",Command = "Sliding_Kick-R")
var(14) = -2

[State 90]
type = VarSet
trigger1 = Time > 20
trigger1 = IfElse(FVar(5) = 0,Command = "One_Inch",Command = "One_Inch-R")
var(14) = -1

[State 90]
type = VarSet
trigger1 = Time > 15
trigger1 = IfElse(FVar(5) = 0,Command = "Diamond_Breath_A",Command = "Diamond_Breath_A-R")
var(14) = 1

[State 90]
type = VarSet
trigger1 = Time > 15
trigger1 = IfElse(FVar(5) = 0,Command = "Diamond_Breath_C",Command = "Diamond_Breath_C-R")
var(14) = 2

[State 90]
type = VarSet
trigger1 = Time > 10
trigger1 = IfElse(FVar(5) = 0,Command = "Crow_Bites_A",Command = "Crow_Bites_A-R")
var(14) = 3

[State 90]
type = VarSet
trigger1 = Time > 10
trigger1 = IfElse(FVar(5) = 0,Command = "Crow_Bites_C",Command = "Crow_Bites_C-R")
var(14) = 4

[State 90]
type = VarSet
trigger1 = Time > 15
trigger1 = IfElse(FVar(5) = 0,Command = "Counter_Shell",Command = "Counter_Shell-R")
var(14) = 5

[State 90]
type = VarSet
trigger1 = Time > 15
trigger1 = IfElse(FVar(5) = 0,Command = "Ray_Spin_B",Command = "Ray_Spin_B-R")
var(14) = 6

[State 90]
type = VarSet
trigger1 = Time > 15
trigger1 = IfElse(FVar(5) = 0,Command = "Ray_Spin_D",Command = "Ray_Spin_D-R")
var(14) = 7

[State 90]
type = VarSet
trigger1 = Time > 5
trigger1 = IfElse(FVar(5) = 0,Command = "Diamond_Edge",Command = "Diamond_Edge-R")
var(14) = 8

[State 90]
type = VarSet
trigger1 = Time > 15
trigger1 = IfElse(FVar(5) = 0,Command = "Freeze_Execution",Command = "Freeze_Execution-R")
var(14) = 9

[State 90]
type = VarSet
trigger1 = Time > 15
trigger1 = IfElse(FVar(5) = 0,Command = "MAX2",Command = "MAX2-R")
var(14) = 10

[State 90]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(30) = 0
triggerall = AnimTime = 0
triggerall = Power >= 1000
trigger1 = Var(28) = 5
value = 2500

[State 90]
type = ChangeState
triggerall = Var(59) != 1
triggerall = AnimTime = 0
trigger1 = Var(28) = 4
value = 80

[State 90]
type = ChangeState
triggerall = Var(59) != 1
triggerall = AnimTime = 0
trigger1 = Var(28) = 3
value = 100

[State 90]
type = ChangeState
triggerall = Var(59) != 1
triggerall = AnimTime = 0
trigger1 = Var(28) = 2
trigger2 = Var(28) = -2
value = 55

[State 90]
type = ChangeState
triggerall = Var(59) != 1
triggerall = AnimTime = 0
trigger1 = Var(28) = -3
value = 105

[State 90]
type = ChangeState
triggerall = Var(59) != 1
triggerall = AnimTime = 0
trigger1 = Var(28) = -4
value = 90

[State 90]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = -3
trigger1 = AnimTime = 0
value = 270
ignorehitpause = 1

[State 90]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = -2
trigger1 = AnimTime = 0
value = 260

[State 90]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = -1
trigger1 = AnimTime = 0
value = 220

[State 90]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 1
trigger1 = AnimTime = 0
value = 1000

[State 90]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 2
trigger1 = AnimTime = 0
value = 1100

[State 90]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 3
trigger1 = AnimTime = 0
value = 1200

[State 90]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 4
trigger1 = AnimTime = 0
value = 1210

[State 90]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 5
trigger1 = AnimTime = 0
value = 1300

[State 90]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 6
trigger1 = AnimTime = 0
value = 1400

[State 90]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 7
trigger1 = AnimTime = 0
value = 1410

[State 90]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(30) = 0
triggerall = Var(14) = 8
triggerall = Power >= 1000
trigger1 = AnimTime = 0
value = 3000

[State 90]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(30) > 0
triggerall = Var(14) = 8
trigger1 = AnimTime = 0
value = 3000

[State 90]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = [1,2]
triggerall = Var(30) = 0
triggerall = Var(14) = 9
triggerall = Power >= 3000
trigger1 = AnimTime = 0
value = 3500

[State 90]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(30) > 0
triggerall = Var(14) = 9
triggerall = Power >= 1000
trigger1 = AnimTime = 0
value = 3500

[State 90]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 2
triggerall = Var(30) = 0
triggerall = Var(14) = 10
triggerall = Power >= 3000
trigger1 = AnimTime = 0
value = 3900

[State 90]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 1
triggerall = Var(30) = 0
triggerall = Var(14) = 10
triggerall = Power >= 3000
triggerall = Life <= 360
trigger1 = AnimTime = 0
value = 3900

[State 90]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 0
triggerall = Var(30) > 0
triggerall = Var(14) = 10
triggerall = Power >= 1000
triggerall = Life <= 320
trigger1 = AnimTime = 0
value = 3900

[State 90]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 2
triggerall = Var(30) > 0
triggerall = Var(14) = 10
triggerall = Power >= 1000
trigger1 = AnimTime = 0
value = 3900

[State 90]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 1
triggerall = Var(30) > 0
triggerall = Var(14) = 10
triggerall = Power >= 1000
triggerall = Life <= 360
trigger1 = AnimTime = 0
value = 3900

[State 90]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------------------------------------------
; AB Back (cancel)
[Statedef 95]
type = S
movetype = I
physics = N
ctrl = 0
anim = 95
velset = 0,0
poweradd = -1000
sprpriority = -2
facep2 = 1

[State 95]
type = Width
trigger1 = 1
edge = 2,0

[State 95]
type = Explod
trigger1 = Time = 0
anim = 143
ID = 725
sprpriority = 3
postype = P1
pos = 0,0
bindtime = -1
removeongethit = 1
ignorehitpause = 0
ownpal = 1

[State 95]
type = PosAdd
trigger1 = Time = [12,29]
x = -5

[State 95]
type = PlaySnd
trigger1 = Time = 0
value = 0,0

[State 95]
type = NotHitBy
trigger1 = 1
value = SCA

[State 95]
type = PlayerPush
trigger1 = 1
value = 0

[State 95]
type = AfterImage
trigger1 = Time = 0
time = 32
length = 8
palcolor = 256
palinvertall = 0
palbright = 20,20,30
palcontrast = 100,100,220
palpostbright = 0,0,0
paladd = 10,10,45
palmul = .65,.65,.85
timegap = 1
framegap = 2
trans = Add1

[State 95]
type = AfterImagetime
trigger1 = Time%2 = 0 && Time <= 31
time = 2

[State 95]
type = VarSet
trigger1 = Time = 0
var(28) = 0

[State 95]
type = VarSet
triggerall = Time > 20
trigger1 = Command = "a+y"
var(28) = 5

[State 95]
type = VarSet
triggerall = Time > 20
trigger1 = Command = "Recovery" && !Command = "HoldBack"
var(28) = 4

[State 95]
type = VarSet
triggerall = Time > 20
trigger1 = Command = "FF"
var(28) = 3

[State 95]
type = VarSet
triggerall = Time > 10
triggerall = Facing*Enemy,Facing = -1
trigger1 = Command = "LongJumpFwd"
var(28) = 2

[State 95]
type = VarSet
triggerall = Time > 10
triggerall = Facing*Enemy,Facing = -1
trigger1 = Command = "LongJumpBack"
var(28) = -2

[State 95]
type = VarSet
triggerall = Time > 20
trigger1 = Command = "BB"
var(28) = -3

[State 95]
type = VarSet
triggerall = Time > 20
trigger1 = Command = "Recovery" && Command = "HoldBack"
var(28) = -4

[State 95]
type = VarSet
trigger1 = Time = 0
var(14) = 0

[State 95]
type = VarSet
triggerall = Time > 20
trigger1 = IfElse(FVar(5) = 0,Command = "Critical_Ice",Command = "Critical_Ice-R")
var(14) = -3
ignorehitpause = 1

[State 95]
type = VarSet
trigger1 = Time > 20
trigger1 = IfElse(FVar(5) = 0,Command = "Sliding_Kick",Command = "Sliding_Kick-R")
var(14) = -2

[State 95]
type = VarSet
trigger1 = Time > 20
trigger1 = IfElse(FVar(5) = 0,Command = "One_Inch",Command = "One_Inch-R")
var(14) = -1

[State 95]
type = VarSet
trigger1 = Time > 15
trigger1 = IfElse(FVar(5) = 0,Command = "Diamond_Breath_A",Command = "Diamond_Breath_A-R")
var(14) = 1

[State 95]
type = VarSet
trigger1 = Time > 15
trigger1 = IfElse(FVar(5) = 0,Command = "Diamond_Breath_C",Command = "Diamond_Breath_C-R")
var(14) = 2

[State 95]
type = VarSet
trigger1 = Time > 10
trigger1 = IfElse(FVar(5) = 0,Command = "Crow_Bites_A",Command = "Crow_Bites_A-R")
var(14) = 3

[State 95]
type = VarSet
trigger1 = Time > 10
trigger1 = IfElse(FVar(5) = 0,Command = "Crow_Bites_C",Command = "Crow_Bites_C-R")
var(14) = 4

[State 95]
type = VarSet
trigger1 = Time > 15
trigger1 = IfElse(FVar(5) = 0,Command = "Counter_Shell",Command = "Counter_Shell-R")
var(14) = 5

[State 95]
type = VarSet
trigger1 = Time > 15
trigger1 = IfElse(FVar(5) = 0,Command = "Ray_Spin_B",Command = "Ray_Spin_B-R")
var(14) = 6

[State 95]
type = VarSet
trigger1 = Time > 15
trigger1 = IfElse(FVar(5) = 0,Command = "Ray_Spin_D",Command = "Ray_Spin_D-R")
var(14) = 7

[State 95]
type = VarSet
trigger1 = Time > 5
trigger1 = IfElse(FVar(5) = 0,Command = "Diamond_Edge",Command = "Diamond_Edge-R")
var(14) = 8

[State 95]
type = VarSet
trigger1 = Time > 15
trigger1 = IfElse(FVar(5) = 0,Command = "Freeze_Execution",Command = "Freeze_Execution-R")
var(14) = 9

[State 95]
type = VarSet
trigger1 = Time > 15
trigger1 = IfElse(FVar(5) = 0,Command = "MAX2",Command = "MAX2-R")
var(14) = 10

[State 95]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(30) = 0
triggerall = AnimTime = 0
triggerall = Power >= 1000
trigger1 = Var(28) = 5
value = 2500

[State 95]
type = ChangeState
triggerall = Var(59) != 1
triggerall = AnimTime = 0
trigger1 = Var(28) = 4
value = 80

[State 95]
type = ChangeState
triggerall = Var(59) != 1
triggerall = AnimTime = 0
trigger1 = Var(28) = 3
value = 100

[State 95]
type = ChangeState
triggerall = Var(59) != 1
triggerall = AnimTime = 0
trigger1 = Var(28) = 2
trigger2 = Var(28) = -2
value = 55

[State 95]
type = ChangeState
triggerall = Var(59) != 1
triggerall = AnimTime = 0
trigger1 = Var(28) = -3
value = 105

[State 95]
type = ChangeState
triggerall = Var(59) != 1
triggerall = AnimTime = 0
trigger1 = Var(28) = -4
value = 90

[State 95]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = -3
trigger1 = AnimTime = 0
value = 270
ignorehitpause = 1

[State 95]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = -2
trigger1 = AnimTime = 0
value = 260

[State 95]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = -1
trigger1 = AnimTime = 0
value = 220

[State 95]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 1
trigger1 = AnimTime = 0
value = 1000

[State 95]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 2
trigger1 = AnimTime = 0
value = 1100

[State 95]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 3
trigger1 = AnimTime = 0
value = 1200

[State 95]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 4
trigger1 = AnimTime = 0
value = 1210

[State 95]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 5
trigger1 = AnimTime = 0
value = 1300

[State 95]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 6
trigger1 = AnimTime = 0
value = 1400

[State 95]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 7
trigger1 = AnimTime = 0
value = 1410

[State 95]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(30) = 0
triggerall = Var(14) = 8
triggerall = Power >= 1000
trigger1 = AnimTime = 0
value = 3000

[State 95]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(30) > 0
triggerall = Var(14) = 8
trigger1 = AnimTime = 0
value = 3000

[State 95]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = [1,2]
triggerall = Var(30) = 0
triggerall = Var(14) = 9
triggerall = Power >= 3000
trigger1 = AnimTime = 0
value = 3500

[State 95]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(30) > 0
triggerall = Var(14) = 9
triggerall = Power >= 1000
trigger1 = AnimTime = 0
value = 3500

[State 95]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 2
triggerall = Var(30) = 0
triggerall = Var(14) = 10
triggerall = Power >= 3000
trigger1 = AnimTime = 0
value = 3900

[State 95]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 1
triggerall = Var(30) = 0
triggerall = Var(14) = 10
triggerall = Power >= 3000
triggerall = Life <= 360
trigger1 = AnimTime = 0
value = 3900

[State 95]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 0
triggerall = Var(30) > 0
triggerall = Var(14) = 10
triggerall = Power >= 1000
triggerall = Life <= 320
trigger1 = AnimTime = 0
value = 3900

[State 95]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 2
triggerall = Var(30) > 0
triggerall = Var(14) = 10
triggerall = Power >= 1000
trigger1 = AnimTime = 0
value = 3900

[State 95]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 1
triggerall = Var(30) > 0
triggerall = Var(14) = 10
triggerall = Power >= 1000
triggerall = Life <= 360
trigger1 = AnimTime = 0
value = 3900

[State 95]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------
; RUN_FWD(AI)
[Statedef 97]
type    = S
physics = S
anim = 100
ctrl = 0

[State 97]
type = Width
trigger1 = 1
edge = 10,0

[State 97]
type = PlaySnd
trigger1 = AnimElem = 2
value = 8,11
loop = 1
channel = 9

[State 97]
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 97]
type = MakeDust
trigger1 = Time >= 0
pos = -30,0
spacing = 20

[State 97]
type = PosAdd
trigger1 = AnimElemTime(2) >= 0
x = const(Velocity.Run.Fwd.X)

[State 97]
type = ChangeState
trigger1 = Enemy,Vel Y > 0
trigger1 = Time >= 15
trigger1 = P2BodyDist X = [-30,65]
trigger1 = P2BodyDist Y = [-65,-25]
value = 1210
ctrl = 0

;---------------------------------------------------------------------
; RUN_FWD(AI)
[Statedef 98]
type    = S
physics = S
anim = 100
ctrl = 0

[State 98]
type = Width
trigger1 = 1
edge = 10,0

[State 98]
type = PlaySnd
trigger1 = AnimElem = 2
value = 8,11
loop = 1
channel = 9

[State 98]
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 98]
type = MakeDust
trigger1 = Time >= 0
pos = -30,0
spacing = 20

[State 98]
type = PosAdd
trigger1 = AnimElemTime(2) >= 0
x = const(Velocity.Run.Fwd.X)

[State 98]
type = ChangeState
triggerall = P2StateType != A
triggerall = Time >= 23
triggerall = Enemy,AnimTime = -4
trigger1 = P2BodyDist X = [-10,25]
value = 210
ctrl = 0

[State 98]
type = ChangeState
triggerall = P2StateType != A
triggerall = Time >= 23
triggerall = Enemy,AnimTime = -4
trigger1 = P2BodyDist X > 25
value = 235
ctrl = 0

[State 98]
type = CtrlSet
trigger1 = P2StateType = A
value = 1

;---------------------------------------------------------------------
; RUN_FWD(AI)
[Statedef 99]
type    = S
physics = S
anim = 100
ctrl = 0

[State 99]
type = Width
trigger1 = 1
edge = 10,0

[State 99]
type = PlaySnd
trigger1 = AnimElem = 2
value = 8,11
loop = 1
channel = 9

[State 99]
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 99]
type = MakeDust
trigger1 = Time >= 0
pos = -30,0
spacing = 20

[State 99]
type = PosAdd
trigger1 = AnimElemTime(2) >= 0
x = const(Velocity.Run.Fwd.X)

[State 99]
type = ChangeState
trigger1 = P2BodyDist X = [60,70]
trigger2 = P2StateType = L
value = 101
ctrl = 0

;---------------------------------------------------------------------
; RUN_FWD
[Statedef 100]
type    = S
physics = S
anim = 100
ctrl = 0
facep2 = 1

[State 100]
type = Width
trigger1 = 1
edge = 10,0

[State 100]
type = PlaySnd
trigger1 = AnimElem = 2
value = 8,11
loop = 1
channel = 2

[State 100]
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100]
type = MakeDust
trigger1 = Time >= 0
pos = -30,0
spacing = 20

[State 100]
type = PosAdd
trigger1 = AnimElemTime(2) >= 0
x = const(Velocity.Run.Fwd.X)

[State 100]
type = ChangeState
trigger1 = Var(59) != 1
trigger1 = AnimElemTime(2) >= 0
trigger1 = Command = "HoldFwd" && Command = "HoldUp"
value = 40
ctrl = 0

[State 100]
type = ChangeState
trigger1 = Var(59) != 1
trigger1 = AnimElemTime(2) >= 0
trigger1 = Command != "HoldFwd" && Time >= 13
value = 101
ctrl = 0

[State 100]
type = ChangeState
triggerall = Var(59) = 1
triggerall = AnimElemTime(2) >= 0
triggerall = Time >= 13
trigger1 = P2BodyDist X <= IfElse(P2StateType = L,60,20)
trigger2 = Facing*Enemy,Facing = 1
trigger2 = Enemy,Ctrl
trigger2 = P2BodyDist X > 60
value = 101
ctrl = 0

;---------------------------------------------------------------------
;
[Statedef 101]
type    = S
physics = S
ctrl = 1
anim = 101

[State 101]
type = Width
trigger1 = 1
edge = 2,0

[State 101]
type = VelSet
trigger1 = Time = 0
x = 0

[State 101]
type = MakeDust
trigger1 = Time >= 0
pos = -30,0
spacing = 20

[State 101]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------
; RUN_FWD(AI)
[Statedef 102]
type    = S
physics = S
anim = 100
ctrl = 0

[State 102]
type = Width
trigger1 = 1
edge = 10,0

[State 102]
type = PlaySnd
trigger1 = AnimElem = 2
value = 8,11
loop = 1
channel = 9

[State 102]
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 102]
type = MakeDust
trigger1 = Time >= 0
pos = -30,0
spacing = 20

[State 102]
type = PosAdd
trigger1 = AnimElemTime(2) >= 0
x = const(Velocity.Run.Fwd.X)

[State 102]
type = ChangeState
triggerall = Var(49) = 0
triggerall = P2StateType != A
trigger1 = Time >= 15
trigger1 = P2BodyDist X <= 20
value = 210
ctrl = 0

[State 102]
type = ChangeState
triggerall = Var(49) = 1
triggerall = Power >= 1000
triggerall = P2Life > 250
triggerall = P2StateType != A
trigger1 = Time >= 14
trigger1 = P2BodyDist X <= 20
value = 210
ctrl = 0

[State 102]
type = ChangeState
triggerall = Var(49) = 1
triggerall = P2StateType != A
trigger1 = Time >= 14
value = 430
ctrl = 0

[State 102]
type = ChangeState
triggerall = Var(49) = 2
triggerall = P2StateType = S
triggerall = Time >= 14
trigger1 = P2BodyDist X < 15
value = 430
ctrl = 0

[State 102]
type = ChangeState
triggerall = Var(49) = 2
triggerall = P2StateType = S
triggerall = Time = [7,13]
trigger1 = P2BodyDist X = [15,25]
value = 206
ctrl = 0

[State 102]
type = ChangeState
triggerall = Var(49) = 2
triggerall = P2StateType = C
trigger1 = Time >= 14
value = 430
ctrl = 0

;---------------------------------------------------------------------
; RUN_FWD(AI)
[Statedef 103]
type    = S
physics = S
anim = 100
ctrl = 0

[State 103]
type = Width
trigger1 = 1
edge = 10,0

[State 103]
type = PlaySnd
trigger1 = AnimElem = 2
value = 8,11
loop = 1
channel = 9

[State 103]
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 103]
type = MakeDust
trigger1 = Time >= 0
pos = -30,0
spacing = 20

[State 103]
type = PosAdd
trigger1 = AnimElemTime(2) >= 0
x = const(Velocity.Run.Fwd.X)

[State 103]
type = ChangeState
trigger1 = Enemy,Vel Y > 0
trigger1 = Time >= 17
trigger1 = P2BodyDist X = [-30,45]
trigger1 = P2BodyDist Y = [-65,-45]
value = 1201
ctrl = 0

[State 103]
type = ChangeState
trigger1 = Var(59) = 1
trigger1 = AnimElemTime(2) >= 0
trigger1 = Time >= 22
value = 101
ctrl = 0

;---------------------------------------------------------------------
; RUN_FWD(AI)
[Statedef 104]
type    = S
physics = S
anim = 100
ctrl = 0

[State 104]
type = Width
trigger1 = 1
edge = 10,0

[State 104]
type = PlaySnd
trigger1 = AnimElem = 2
value = 8,11
loop = 1
channel = 9

[State 104]
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 104]
type = MakeDust
trigger1 = Time >= 0
pos = -30,0
spacing = 20

[State 104]
type = PosAdd
trigger1 = AnimElemTime(2) >= 0
x = const(Velocity.Run.Fwd.X)

[State 104]
type = ChangeState
;triggerall = Var(49) = 2
triggerall = Time >= 7
trigger1 = P2BodyDist X = [15,40]
value = 430
ctrl = 0

[State 104]
type = ChangeState
;triggerall = Var(49) = 2
triggerall = Time >= 7
trigger1 = P2BodyDist X = [41,55]
value = 235
ctrl = 0

[State 104]
type = ChangeState
;triggerall = Var(49) = 2
triggerall = Time >= 8
trigger1 = P2BodyDist X > 55
value = 1210
ctrl = 0

;---------------------------------------------------------------------
; RUN_BACK
[Statedef 105]
type = S
movetype = I
physics = S
anim = 105
ctrl = 0
velset = 0,0
facep2 = 1

[State 105]
type = StateTypeSet
trigger1 = AnimElem = 2
statetype = A
physics = N

[State 105]
type = VelSet
trigger1 = AnimElem = 2
x = -5.64
y = -4.2

[State 105]
type = VelAdd
trigger1 = AnimElemTime(2) > 0
y = .62

[State 105]
type = PlaySnd
trigger1 = AnimElem = 2
value = 6,4

[State 105]
type = VarSet
trigger1 = Time = 0
var(28) = 0

[State 105]
type = VarSet
triggerall = Time > 5
trigger1 = Command = "a+y"
var(28) = 5

[State 105]
type = VarSet
triggerall = Time > 5
trigger1 = Command = "Recovery" && !Command = "HoldBack"
var(28) = 4

[State 105]
type = VarSet
triggerall = Time > 5
trigger1 = Command = "FF"
var(28) = 3

[State 105]
type = VarSet
triggerall = Time > 0
triggerall = Facing*Enemy,Facing = -1
trigger1 = Command = "LongJumpFwd"
var(28) = 2

[State 105]
type = VarSet
triggerall = Time > 0
triggerall = Facing*Enemy,Facing = -1
trigger1 = Command = "LongJumpBack"
var(28) = -2

[State 105]
type = VarSet
triggerall = Time > 5
trigger1 = Command = "BB"
var(28) = -3

[State 105]
type = VarSet
triggerall = Time > 5
trigger1 = Command = "Recovery" && Command = "HoldBack"
var(28) = -4

[State 105]
type = VarSet
trigger1 = Time = 0
var(14) = 0

[State 105]
type = VarSet
trigger1 = Time > 5
trigger1 = IfElse(FVar(5) = 0,Command = "Critical_Ice",Command = "Critical_Ice-R")
var(14) = -3

[State 105]
type = VarSet
trigger1 = Time > 5
trigger1 = IfElse(FVar(5) = 0,Command = "Sliding_Kick",Command = "Sliding_Kick-R")
var(14) = -2

[State 105]
type = VarSet
trigger1 = Time > 5
trigger1 = IfElse(FVar(5) = 0,Command = "One_Inch",Command = "One_Inch-R")
var(14) = -1

[State 105]
type = VarSet
trigger1 = Time > 0
trigger1 = IfElse(FVar(5) = 0,Command = "Diamond_Breath_A",Command = "Diamond_Breath_A-R")
var(14) = 1

[State 105]
type = VarSet
trigger1 = Time > 0
trigger1 = IfElse(FVar(5) = 0,Command = "Diamond_Breath_C",Command = "Diamond_Breath_C-R")
var(14) = 2

[State 105]
type = VarSet
trigger1 = Time > 0
trigger1 = IfElse(FVar(5) = 0,Command = "Crow_Bites_A",Command = "Crow_Bites_A-R")
var(14) = 3

[State 105]
type = VarSet
trigger1 = Time > 0
trigger1 = IfElse(FVar(5) = 0,Command = "Crow_Bites_C",Command = "Crow_Bites_C-R")
var(14) = 4

[State 105]
type = VarSet
trigger1 = Time > 0
trigger1 = IfElse(FVar(5) = 0,Command = "Counter_Shell",Command = "Counter_Shell-R")
var(14) = 5

[State 105]
type = VarSet
trigger1 = Time > 0
trigger1 = IfElse(FVar(5) = 0,Command = "Ray_Spin_B",Command = "Ray_Spin_B-R")
var(14) = 6

[State 105]
type = VarSet
trigger1 = Time > 0
trigger1 = IfElse(FVar(5) = 0,Command = "Ray_Spin_D",Command = "Ray_Spin_D-R")
var(14) = 7

[State 105]
type = VarSet
trigger1 = Time > 0
trigger1 = IfElse(FVar(5) = 0,Command = "Diamond_Edge",Command = "Diamond_Edge-R")
var(14) = 8

[State 105]
type = VarSet
trigger1 = Time > 0
trigger1 = IfElse(FVar(5) = 0,Command = "Freeze_Execution",Command = "Freeze_Execution-R")
var(14) = 9

[State 105]
type = VarSet
trigger1 = Time > 0
trigger1 = IfElse(FVar(5) = 0,Command = "MAX2",Command = "MAX2-R")
var(14) = 10

[State 105]
type = ChangeState
trigger1 = Pos Y >= -6 && Vel Y > 0
value = 106

;---------------------------------------------------------------------------
; RUN_BACK2 (land)
[Statedef 106]
type = S
movetype = I
physics = S
anim = 106
ctrl = 0
velset = 0,0

[State 106]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 106]
type = PosSet
trigger1 = Time = 0
y = 0

[State 106]
type = MakeDust
trigger1 = Time >= 0
pos = -30,0

[State 106]
type = PlaySnd
trigger1 = Time = 0
value = 6,1

[State 106]
type = VarSet
trigger1 = Time = 0
var(28) = 0

[State 106]
type = VarSet
triggerall = Time > 0
trigger1 = Command = "Recovery" && !Command = "HoldBack"
var(28) = 4

[State 106]
type = VarSet
triggerall = Time > 0
trigger1 = Command = "FF"
var(28) = 3

[State 106]
type = VarSet
triggerall = Time > 0
triggerall = Facing*Enemy,Facing = -1
trigger1 = Command = "LongJumpFwd"
var(28) = 2

[State 106]
type = VarSet
triggerall = Time > 0
triggerall = Facing*Enemy,Facing = -1
trigger1 = Command = "LongJumpBack"
var(28) = -2

[State 106]
type = VarSet
triggerall = Time > 0
trigger1 = Command = "BB"
var(28) = -3

[State 106]
type = VarSet
triggerall = Time > 0
trigger1 = Command = "Recovery" && Command = "HoldBack"
var(28) = -4

[State 106]
type = VarSet
trigger1 = Time > 5
trigger1 = IfElse(FVar(5) = 0,Command = "Critical_Ice",Command = "Critical_Ice-R")
var(14) = -3

[State 106]
type = VarSet
trigger1 = Time > 5
trigger1 = IfElse(FVar(5) = 0,Command = "Sliding_Kick",Command = "Sliding_Kick-R")
var(14) = -2

[State 106]
type = VarSet
trigger1 = Time > 5
trigger1 = IfElse(FVar(5) = 0,Command = "One_Inch",Command = "One_Inch-R")
var(14) = -1

[State 106]
type = VarSet
trigger1 = Time > 0
trigger1 = IfElse(FVar(5) = 0,Command = "Diamond_Breath_A",Command = "Diamond_Breath_A-R")
var(14) = 1

[State 106]
type = VarSet
trigger1 = Time > 0
trigger1 = IfElse(FVar(5) = 0,Command = "Diamond_Breath_C",Command = "Diamond_Breath_C-R")
var(14) = 2

[State 106]
type = VarSet
trigger1 = Time > 0
trigger1 = IfElse(FVar(5) = 0,Command = "Crow_Bites_A",Command = "Crow_Bites_A-R")
var(14) = 3

[State 106]
type = VarSet
trigger1 = Time > 0
trigger1 = IfElse(FVar(5) = 0,Command = "Crow_Bites_C",Command = "Crow_Bites_C-R")
var(14) = 4

[State 106]
type = VarSet
trigger1 = Time > 0
trigger1 = IfElse(FVar(5) = 0,Command = "Counter_Shell",Command = "Counter_Shell-R")
var(14) = 5

[State 106]
type = VarSet
trigger1 = Time > 0
trigger1 = IfElse(FVar(5) = 0,Command = "Ray_Spin_B",Command = "Ray_Spin_B-R")
var(14) = 6

[State 106]
type = VarSet
trigger1 = Time > 0
trigger1 = IfElse(FVar(5) = 0,Command = "Ray_Spin_D",Command = "Ray_Spin_D-R")
var(14) = 7

[State 106]
type = VarSet
trigger1 = Time > 0
trigger1 = IfElse(FVar(5) = 0,Command = "Diamond_Edge",Command = "Diamond_Edge-R")
var(14) = 8

[State 106]
type = VarSet
trigger1 = Time > 0
trigger1 = IfElse(FVar(5) = 0,Command = "Freeze_Execution",Command = "Freeze_Execution-R")
var(14) = 9

[State 106]
type = VarSet
trigger1 = Time > 0
trigger1 = IfElse(FVar(5) = 0,Command = "MAX2",Command = "MAX2-R")
var(14) = 10

[State 106]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(30) = 0
triggerall = AnimTime = 0
triggerall = Power >= 1000
trigger1 = Var(28) = 5
value = 2500

[State 106]
type = ChangeState
triggerall = Var(59) != 1
triggerall = AnimTime = 0
trigger1 = Var(28) = 4
value = 80

[State 106]
type = ChangeState
triggerall = Var(59) != 1
triggerall = AnimTime = 0
trigger1 = Var(28) = 3
value = 100

[State 106]
type = ChangeState
triggerall = Var(59) != 1
triggerall = AnimTime = 0
trigger1 = Var(28) = 2
trigger2 = Var(28) = -2
value = 55

[State 106]
type = ChangeState
triggerall = Var(59) != 1
triggerall = AnimTime = 0
trigger1 = Var(28) = -3
value = 105

[State 106]
type = ChangeState
triggerall = Var(59) != 1
triggerall = AnimTime = 0
trigger1 = Var(28) = -4
value = 90

[State 106]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = -3
trigger1 = AnimTime = 0
value = 270

[State 106]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = -2
trigger1 = AnimTime = 0
value = 260

[State 106]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = -1
trigger1 = AnimTime = 0
value = 220

[State 106]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 1
trigger1 = AnimTime = 0
value = 1000

[State 106]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 2
trigger1 = AnimTime = 0
value = 1100

[State 106]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 3
trigger1 = AnimTime = 0
value = 1200

[State 106]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 4
trigger1 = AnimTime = 0
value = 1210

[State 106]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 5
trigger1 = AnimTime = 0
value = 1300

[State 106]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 6
trigger1 = AnimTime = 0
value = 1400

[State 106]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 7
trigger1 = AnimTime = 0
value = 1410

[State 106]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(30) = 0
triggerall = Var(14) = 8
triggerall = Power >= 1000
trigger1 = AnimTime = 0
value = 3000

[State 106]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(30) > 0
triggerall = Var(14) = 8
trigger1 = AnimTime = 0
value = 3000

[State 106]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = [1,2]
triggerall = Var(30) = 0
triggerall = Var(14) = 9
triggerall = Power >= 3000
trigger1 = AnimTime = 0
value = 3500

[State 106]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(30) > 0
triggerall = Var(14) = 9
triggerall = Power >= 1000
trigger1 = AnimTime = 0
value = 3500

[State 106]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 2
triggerall = Var(30) = 0
triggerall = Var(14) = 10
triggerall = Power >= 3000
trigger1 = AnimTime = 0
value = 3900

[State 106]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 1
triggerall = Var(30) = 0
triggerall = Var(14) = 10
triggerall = Power >= 3000
triggerall = Life <= 360
trigger1 = AnimTime = 0
value = 3900

[State 106]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 0
triggerall = Var(30) > 0
triggerall = Var(14) = 10
triggerall = Power >= 1000
triggerall = Life <= 320
trigger1 = AnimTime = 0
value = 3900

[State 106]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 2
triggerall = Var(30) > 0
triggerall = Var(14) = 10
triggerall = Power >= 1000
trigger1 = AnimTime = 0
value = 3900

[State 106]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 1
triggerall = Var(30) > 0
triggerall = Var(14) = 10
triggerall = Power >= 1000
triggerall = Life <= 360
trigger1 = AnimTime = 0
value = 3900

[State 106]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------
; RUN_FWD(AI)
[Statedef 107]
type    = S
physics = S
anim = 100
ctrl = 0

[State 107]
type = Width
trigger1 = 1
edge = 10,0

[State 107]
type = PlaySnd
trigger1 = AnimElem = 2
value = 8,11
loop = 1
channel = 9

[State 107]
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 107]
type = MakeDust
trigger1 = Time >= 0
pos = -30,0
spacing = 20

[State 107]
type = PosAdd
trigger1 = AnimElemTime(2) >= 0
x = const(Velocity.Run.Fwd.X)

[State 107]
type = ChangeState
triggerall = Var(30) > 2
trigger1 = Time = 10
value = 1201
ctrl = 0

[State 107]
type = ChangeState
triggerall = Var(30) = [1,2]
trigger1 = Time = 10
value = 1211
ctrl = 0

;---------------------------------------------------------------------
; RUN_FWD(AI)
[Statedef 108]
type    = S
physics = S
anim = 100
ctrl = 0

[State 108]
type = Width
trigger1 = 1
edge = 10,0

[State 108]
type = PlaySnd
trigger1 = AnimElem = 2
value = 8,11
loop = 1
channel = 9

[State 108]
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 108]
type = MakeDust
trigger1 = Time >= 0
pos = -30,0
spacing = 20

[State 108]
type = PosAdd
trigger1 = AnimElemTime(2) >= 0
x = const(Velocity.Run.Fwd.X)

[State 108]
type = ChangeState
triggerall = Time >= 3
trigger1 = P2BodyDist X = [-20,60]
trigger1 = P2BodyDist Y = [-65,-25]
value = 1210
ctrl = 0

[State 108]
type = ChangeState
trigger1 = P2MoveType != H
value = 22
ctrl = 1

;---------------------------------------------------------------------
; RUN_FWD(AI)
[Statedef 109]
type    = S
physics = S
anim = 100
ctrl = 0

[State 109]
type = Width
trigger1 = 1
edge = 10,0

[State 109]
type = PlaySnd
trigger1 = Anim = 100
trigger1 = Time = 4
value = 8,11
channel = 9

[State 109]
type = StopSnd
trigger1 = Anim != 100
channel = 9

[State 109]
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 109]
type = MakeDust
trigger1 = Time >= 0
trigger1 = Vel X > 0
pos = -30,0
spacing = 20

[State 109]
type = PosAdd
trigger1 = AnimElemTime(2) >= 0
trigger1 = Var(4) > 70
x = const(Velocity.Run.Fwd.X)

[State 109]
type = VelSet
triggerall = Var(13) < 30
trigger1 = Var(4) = [60,70]
x = 0

[State 109]
type = ChangeAnim
triggerall = Var(59) = 1
triggerall = Vel X = 0
triggerall = Anim != 0
trigger1 = Var(4) = [60,70]
value = 0

[State 109]
type = ChangeState
triggerall = Var(30) > 10
trigger1 = Var(13) = 23
value = 1201
ctrl = 0

[State 109]
type = ChangeState
triggerall = Var(30) = [1,10]
trigger1 = Var(13) = 28
value = 1211
ctrl = 0

[State 109]
type = ChangeState
triggerall = Var(30) = 0
trigger1 = Var(13) = [23,28]
value = 1210
ctrl = 0

;---------------------------------------------------------------------------
; GUARD (start)
[Statedef 120]
type = U
physics = U
ctrl = 1
sprpriority = -1

[State 120]
type = VarSet
trigger1 = Time = 0
var(3) = 0

[State 120]
type = ChangeAnim
trigger1 = Time = 0
value = 120+(StateType = C)+(StateType = A)*2

[State 120]
type = ChangeState
trigger1 = (Anim = 120 || Anim = 125) && (Command = "HoldDown")
value = 131

[State 120]
type = ChangeState
trigger1 = (Anim = 121 || Anim = 126) && (Command != "HoldDown")
value = 130

[State 120]
type = StateTypeSet
trigger1 = Time = 0 && StateType = S
physics = S

[State 120]
type = StateTypeSet
trigger1 = Time = 0 && StateType = C
physics = C

[State 120]
type = StateTypeSet
trigger1 = Time = 0 && StateType = A
physics = A

[State 120]
type = ChangeState
trigger1 = P2MoveType != A
value = 130+(StateType = C)+(StateType = A)*2

[State 120]
type = StateTypeSet
triggerall = Var(59) = 1
triggerall = StateType != A
;triggerall = FVar(28) != 2
trigger1 = EnemyNear,StateType = C
trigger2 = EnemyNear,StateType = S
trigger2 = EnemyNear,Time < 8
;trigger2 = !Enemy,NumProj
;trigger3 = EnemyNear,Statetype = S
trigger3 = Enemy,NumProj
trigger3 = Random = [0,499]
;trigger4 = FVar(28) = 1
statetype = C
physics = C

[State 120]
type = StateTypeSet
triggerall = Var(59) = 1
triggerall = StateType != A
;triggerall = FVar(28) != 1
trigger1 = EnemyNear,StateType = A
trigger2 = EnemyNear,StateType = S
trigger2 = EnemyNear,Time >= 8
trigger2 = Random = [0,249]
;trigger2 = !Enemy,NumProj
;trigger3 = EnemyNear,Statetype = S
trigger3 = Enemy,NumProj
trigger3 = Random = [0,499]
;trigger3 = FVar(28) = 2
statetype = S
physics = S

[State 120]
type = ChangeState
triggerall = Var(59) = 1
triggerall = P2MoveType = A
trigger1 = P2StateType != C
value = 130

[State 120]
type = ChangeState
triggerall = Var(59) = 1
triggerall = P2MoveType = A
trigger1 = P2StateType = C
value = 131

;---------------------------------------------------------------------------
; STAND GUARD (guarding)
[Statedef 130]
type    = S
physics = S
ctrl = 1
sprpriority = -1

[State 130]
type = ChangeAnim
trigger1 = Anim != 130
value = 130
persistent = 0

[State 130]
type = VelSet
trigger1 = Time = GetHitVar(SlideTime)
trigger2 = HitOver
x = 0

[State 130]
type = ChangeState
trigger1 = Var(59) = 0
trigger1 = Command = "HoldDown"
value = 131

[State 130]
type = ChangeState
triggerall = Var(59) = 1
triggerall = StateType != A
;triggerall = FVar(28) != 2
trigger1 = EnemyNear,StateType = C
trigger2 = EnemyNear,StateType = S
trigger2 = EnemyNear,Time < 8
;trigger2 = !Enemy,NumProj
trigger3 = EnemyNear,Statetype = S
trigger3 = Enemy,NumProj
;trigger4 = FVar(28) = 1
value = 131

[State 130]
type = ChangeState
trigger1 = P2MoveType != A
trigger1 = EnemyNear,NumProj + Enemy,NumProj = 0
value = 140

;---------------------------------------------------------------------------
; CROUCH GUARD (guarding)
[Statedef 131]
type    = C
physics = C
ctrl = 1

[State 131]
type = ChangeAnim
trigger1 = Anim != 131
value = 131
persistent = 0

[State 131]
type = VelSet
trigger1 = Time = GetHitVar(SlideTime)
trigger2 = HitOver
x = 0

[State 131]
type = ChangeState
trigger1 = Var(59) = 0
trigger1 = Command != "HoldDown"
value = 130

[State 131]
type = ChangeState
triggerall = Var(59) = 1
triggerall = StateType != A
;triggerall = FVar(28) != 1
trigger1 = EnemyNear,StateType = A
trigger2 = EnemyNear,StateType = S
trigger2 = EnemyNear,Time >= 8
trigger2 = Random = [0,249]
;trigger2 = !Enemy,NumProj
;trigger3 = FVar(28) = 2
value = 130

[State 131]
type = ChangeState
trigger1 = P2MoveType != A
trigger1 = EnemyNear,NumProj + Enemy,NumProj = 0
value = 140

;---------------------------------------------------------------------------
; AIR GUARD (guarding)
[Statedef 132]
type    = A
physics = N
ctrl = 1

[State 132]
type = ChangeAnim
trigger1 = Anim != 132
value = 132

[State 132]
type = VelAdd
trigger1 = 1
y = const(Movement.Yaccel)

[State 132]
type = VarSet
trigger1 = 1
sysvar(0) = (Pos Y >= 0) && (Vel Y > 0)

[State 132]
type = VelSet
trigger1 = SysVar(0)
y = 0

[State 132]
type = PosSet
trigger1 = SysVar(0)
y = 0

[State 132]
type = ChangeState
trigger1 = SysVar(0)
trigger1 = Command != "HoldBack"
value = 52

[State 132]
type = ChangeState
trigger1 = SysVar(0)
value = 130

;---------------------------------------------------------------------------
; GUARD (end)
[Statedef 140]
type = U
physics = U
ctrl = 1

[State 140]
type = StateTypeSet
triggerall = Var(59) = 1
triggerall = StateType != A
;triggerall = FVar(28) != 2
trigger1 = EnemyNear,StateType = C
trigger2 = EnemyNear,StateType = S
trigger2 = EnemyNear,Time < 8
;trigger2 = !Enemy,NumProj
;trigger3 = EnemyNear,Statetype = S
trigger3 = Enemy,NumProj
trigger3 = Random = [0,499]
;trigger4 = FVar(28) = 1
statetype = C
physics = C

[State 140]
type = StateTypeSet
triggerall = Var(59) = 1
triggerall = StateType != A
;triggerall = FVar(28) != 1
trigger1 = EnemyNear,StateType = A
trigger2 = EnemyNear,StateType = S
trigger2 = EnemyNear,Time >= 8
trigger2 = Random = [0,249]
;trigger2 = !Enemy,NumProj
;trigger3 = EnemyNear,Statetype = S
trigger3 = Enemy,NumProj
trigger3 = Random = [0,499]
;trigger3 = FVar(28) = 2
statetype = S
physics = S

[State 140]
type = ChangeAnim
trigger1 = Time = 0
value = 140+(StateType = C) + (StateType = A)*2

[State 140]
type = StateTypeSet
trigger1 = Time = 0 && StateType = S
physics = S

[State 140]
type = StateTypeSet
trigger1 = Time = 0 && StateType = C
physics = C

[State 140]
type = StateTypeSet
trigger1 = Time = 0 && StateType = A
physics = A

[State 140]
type = StateTypeSet
trigger1 = StateType = S && Command = "HoldDown"
statetype = C
physics = C

[State 140]
type = StateTypeSet
trigger1 = StateType = C && Command != "HoldDown"
statetype = S
physics = S

;---------------------------------------------------------------------------
; SGUARDHIT (shaking)
[Statedef 150]
type    = S
movetype= H
physics = N
velset = 0,0
ctrl = 0

[State 150]
type = PlaySnd
trigger1 = Time = 0
value = 8,1
ignorehitpause = 1
persistent = 0

[State 150]
type = ChangeAnim
trigger1 = Anim != 150
value = 150
persistent = 0

[State 150]
type = VarSet
trigger1 = Command = "CD"
var(3) = 1
ignorehitpause = 1

[State 150]
type = VarSet
trigger1 = Command = "Recovery" && !Command = "HoldBack"
var(3) = 2
ignorehitpause = 1

[State 150]
type = VarSet
trigger1 = Command = "Recovery" && Command = "HoldBack"
var(3) = 3
ignorehitpause = 1

[State 150]
type = ChangeState
triggerall = Var(59) != 1
trigger1 = HitShakeOver && Power >= 1000 && Var(3) = 1
value = 720
ignorehitpause = 1

[State 150]
type = ChangeState
triggerall = Var(59) = 1
triggerall = HitShakeOver
triggerall = EnemyNear,NumProj + Enemy,NumProj = 0
triggerall = P2BodyDist X = [0,60]
trigger1 = Power >= 1000
trigger1 = P2Life < 40
trigger2 = Power >= 1000
trigger2 = Life = [0,20]
trigger3 = Var(49) = 2
trigger3 = Power >= 3000
trigger3 = P2Life > 300
trigger3 = P2MoveType = A
trigger3 = P2StateNo = [1000,1999]
trigger4 = Power >= 1000
trigger4 = Life < P2Life
trigger4 = Random = [0,100]
trigger5 = Enemy,StateNo = Var(36)
trigger5 = Life < P2Life
trigger5 = Random = [0,249]
trigger6 = Enemy,StateNo = Var(37)
trigger6 = Life < P2Life
trigger6 = Random = [0,249]
trigger7 = Enemy,StateNo = Var(38)
trigger7 = Life < P2Life
trigger7 = Random = [0,249]
value = 720
ignorehitpause = 1

[State 150]
type = ChangeState
triggerall = Var(59) != 1
trigger1 = HitShakeOver && Power >= 1000 && Var(3) = 2
value = 85
ignorehitpause = 1

[State 150]
type = ChangeState
triggerall = Var(59) = 1
triggerall = HitShakeOver && Power >= 1000
triggerall = P2StateType != A
triggerall = !Enemy,Ctrl
triggerall = P2MoveType = A
triggerall = Enemy,AnimTime <= -40
;triggerall = (P2BodyDist X = [26,154]) || Var(14) < 65
trigger1 = Power >= 1000
trigger1 = P2Life < 40
trigger2 = Power >= 1000
trigger2 = Life = [0,20]
trigger3 = Power >= 1000
trigger3 = Life < P2Life
trigger3 = Random = [0,249]
trigger4 = Enemy,StateNo = Var(36)
trigger4 = Life < P2Life
trigger4 = Random = [0,249]
trigger5 = Enemy,StateNo = Var(37)
trigger5 = Life < P2Life
trigger5 = Random = [0,249]
trigger6 = Enemy,StateNo = Var(38)
trigger6 = Life < P2Life
trigger6 = Random = [0,249]
value = 85
ignorehitpause = 1

[State 150]
type = ChangeState
triggerall = Var(59) = 1
triggerall = HitShakeOver && Power >= 1000
triggerall = P2StateType != A
triggerall = P2MoveType = A
triggerall = P2BodyDist X >= 26
trigger1 = Random = [0,249]
value = 85
ignorehitpause = 1

[State 150]
type = ChangeState
triggerall = Var(59) != 1
trigger1 = HitShakeOver && Power >= 1000 && Var(3) = 3
value = 95
ignorehitpause = 1

[State 150]
type = ChangeState
trigger1 = HitShakeOver
value = 151+2*(Command = "HoldDown")

[State 150]
type = StateTypeSet
triggerall = Var(59) = 1
triggerall = StateType != A
;triggerall = FVar(28) != 2
trigger1 = EnemyNear,StateType = C
trigger2 = EnemyNear,StateType = S
trigger2 = EnemyNear,Time < 8
;trigger2 = !Enemy,NumProj
;trigger3 = EnemyNear,Statetype = S
trigger3 = Enemy,NumProj
trigger3 = Random = [0,499]
;trigger4 = FVar(28) = 1
statetype = C
physics = C

[State 150]
type = StateTypeSet
triggerall = Var(59) = 1
triggerall = StateType != A
;triggerall = FVar(28) != 1
trigger1 = EnemyNear,StateType = A
trigger2 = EnemyNear,StateType = S
trigger2 = EnemyNear,Time >= 8
trigger2 = Random = [0,249]
;trigger2 = !Enemy,NumProj
;trigger3 = EnemyNear,Statetype = S
trigger3 = Enemy,NumProj
trigger3 = Random = [0,499]
;trigger3 = FVar(28) = 2
statetype = S
physics = S

[State 150]
type = StateTypeSet
triggerall = Var(59) != 1
trigger1 = StateType = S && Command = "HoldDown"
statetype = C
physics = C

[State 150]
type = StateTypeSet
triggerall = Var(59) != 1
trigger1 = StateType = C && Command != "HoldDown"
statetype = S
physics = S

;---------------------------------------------------------------------------
; SGUARDHIT2 (knocked back)
[Statedef 151]
type    = S
movetype= H
physics = S
ctrl = 0

[State 151]
type = ChangeAnim
trigger1 = Var(59) = 0
trigger1 = Command != "HoldDown"
trigger1 = Anim != 150
value = 150
persistent = 1

[State 151]
type = ChangeAnim
trigger1 = Var(59) = 0
trigger1 = Command = "HoldDown"
trigger1 = Anim != 151
value = 151
persistent = 1

[State 151]
type = ChangeAnim
trigger1 = Var(59) = 1
trigger1 = StateType = C
value = 151
persistent = 1

[State 151]
type = StateTypeSet
triggerall = Var(59) = 1
triggerall = StateType != A
trigger1 = Enemy,StateType = C
trigger2 = P2Name = "Rockula" || P4Name = "Rockula"
trigger2 = P2StateNo = 230 || P2StateNo = 240
trigger3 = P2Name = "Kula_Claire" || P4Name = "Kula_Claire"
trigger3 = P2StateNo = 230 || P2StateNo = 700 || P2StateNo = 720
trigger4 = P2Name = "Huriken" || P4Name = "Huriken"
trigger4 = P2StateNo = 230
statetype = C
physics = C
persistent = 1

[State 151]
type = StateTypeSet
triggerall = Var(59) = 1
triggerall = StateType != A
trigger1 = Enemy,StateType = A
statetype = S
physics = S
persistent = 1

[State 151]
type = StateTypeSet
triggerall = Var(59) = 1
triggerall = StateType != A
;triggerall = FVar(28) != 2
trigger1 = EnemyNear,StateType = C
trigger2 = EnemyNear,StateType = S
trigger2 = EnemyNear,Time < 8
;trigger2 = !Enemy,NumProj
;trigger3 = EnemyNear,Statetype = S
trigger3 = Enemy,NumProj
trigger3 = Random = [0,499]
;trigger4 = FVar(28) = 1
statetype = C
physics = C

[State 151]
type = StateTypeSet
triggerall = Var(59) = 1
triggerall = StateType != A
;triggerall = FVar(28) != 1
trigger1 = EnemyNear,StateType = A
trigger2 = EnemyNear,StateType = S
trigger2 = EnemyNear,Time >= 8
trigger2 = Random = [0,249]
;trigger2 = !Enemy,NumProj
;trigger3 = EnemyNear,Statetype = S
trigger3 = Enemy,NumProj
trigger3 = Random = [0,499]
;trigger3 = FVar(28) = 2
statetype = S
physics = S

[State 151]
type = StateTypeSet
triggerall = Var(59) != 1
trigger1 = Time = 0 && StateType = S
trigger2 = Command != "HoldDown"
physics = S
persistent = 1

[State 151]
type = StateTypeSet
triggerall = Var(59) != 1
trigger1 = Time = 0 && StateType = C
trigger2 = Command = "HoldDown"
physics = C
persistent = 1

[State 151]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 151]
type = VelSet
trigger1 = Time = GetHitVar(SlideTime)
trigger2 = HitOver
x = 0

[State 151]
type = CtrlSet
trigger1 = Time = GetHitVar(CtrlTime)
value = 1

[State 151]
type = VarSet
trigger1 = Time = 0
var(28) = 0

[State 151]
type = VarSet
triggerall = IfElse(GetHitVar(SlideTime) <= 10,Time > 0,Time > GetHitVar(SlideTime)-10)
trigger1 = Command = "a+y"
var(28) = 5

[State 151]
type = VarSet
triggerall = IfElse(GetHitVar(SlideTime) <= 10,Time > 0,Time > GetHitVar(SlideTime)-10)
trigger1 = P2Dist X >= 0
trigger1 = Command = "Recovery" && !Command = "HoldBack"
trigger2 = P2Dist X < 0
trigger2 = Command = "Recovery" && !Command = "HoldFwd"
var(28) = 4

[State 151]
type = VarSet
triggerall = IfElse(GetHitVar(SlideTime) <= 10,Time > 0,Time > GetHitVar(SlideTime)-10)
trigger1 = IfElse(FVar(5) = 0,Command = "FF",Command = "BB")
var(28) = 3

[State 151]
type = VarSet
triggerall = IfElse(GetHitVar(SlideTime) <= 10,Time > 0,Time > GetHitVar(SlideTime)-10)
trigger1 = IfElse(FVar(5) = 0,Command = "BB",Command = "FF")
var(28) = -3

[State 151]
type = VarSet
triggerall = IfElse(GetHitVar(SlideTime) <= 10,Time > 0,Time > GetHitVar(SlideTime)-10)
trigger1 = P2Dist X >= 0
trigger1 = Command = "Recovery" && Command = "HoldBack"
trigger2 = P2Dist X < 0
trigger2 = Command = "Recovery" && Command = "HoldFwd"
var(28) = -4

[State 151]
type = VarSet
trigger1 = Time = 0
var(14) = 0

[State 151]
type = VarSet
triggerall = IfElse(GetHitVar(SlideTime) <= 10,Time > 0,Time > GetHitVar(SlideTime)-10)
trigger1 = IfElse(FVar(5) = 0,Command = "Critical_Ice",Command = "Critical_Ice-R")
var(14) = -3
ignorehitpause = 1

[State 151]
type = VarSet
trigger1 = IfElse(GetHitVar(SlideTime) <= 10,Time > 0,Time > GetHitVar(SlideTime)-10)
trigger1 = IfElse(FVar(5) = 0,Command = "Sliding_Kick",Command = "Sliding_Kick-R")
var(14) = -2

[State 151]
type = VarSet
trigger1 = IfElse(GetHitVar(SlideTime) <= 10,Time > 0,Time > GetHitVar(SlideTime)-10)
trigger1 = IfElse(FVar(5) = 0,Command = "One_Inch",Command = "One_Inch-R")
var(14) = -1

[State 151]
type = VarSet
triggerall = IfElse(GetHitVar(SlideTime) <= 20,Time > 0,Time > GetHitVar(SlideTime)-20)
trigger1 = IfElse(FVar(5) = 0,Command = "Diamond_Breath_A",Command = "Diamond_Breath_A-R")
var(14) = 1
ignorehitpause = 1

[State 151]
type = VarSet
trigger1 = IfElse(GetHitVar(SlideTime) <= 20,Time > 0,Time > GetHitVar(SlideTime)-20)
trigger1 = IfElse(FVar(5) = 0,Command = "Diamond_Breath_C",Command = "Diamond_Breath_C-R")
var(14) = 2

[State 151]
type = VarSet
trigger1 = IfElse(GetHitVar(SlideTime) <= 25,Time > 0,Time > GetHitVar(SlideTime)-25)
trigger1 = IfElse(FVar(5) = 0,Command = "Crow_Bites_A",Command = "Crow_Bites_A-R")
var(14) = 3

[State 151]
type = VarSet
trigger1 = IfElse(GetHitVar(SlideTime) <= 25,Time > 0,Time > GetHitVar(SlideTime)-25)
trigger1 = IfElse(FVar(5) = 0,Command = "Crow_Bites_C",Command = "Crow_Bites_C-R")
var(14) = 4

[State 151]
type = VarSet
trigger1 = IfElse(GetHitVar(SlideTime) <= 20,Time > 0,Time > GetHitVar(SlideTime)-20)
trigger1 = IfElse(FVar(5) = 0,Command = "Counter_Shell",Command = "Counter_Shell-R")
var(14) = 5

[State 151]
type = VarSet
trigger1 = IfElse(GetHitVar(SlideTime) <= 20,Time > 0,Time > GetHitVar(SlideTime)-20)
trigger1 = IfElse(FVar(5) = 0,Command = "Ray_Spin_B",Command = "Ray_Spin_B-R")
var(14) = 6

[State 151]
type = VarSet
trigger1 = IfElse(GetHitVar(SlideTime) <= 20,Time > 0,Time > GetHitVar(SlideTime)-20)
trigger1 = IfElse(FVar(5) = 0,Command = "Ray_Spin_D",Command = "Ray_Spin_D-R")
var(14) = 7

[State 151]
type = VarSet
trigger1 = IfElse(GetHitVar(SlideTime) <= 30,Time > 0,Time > GetHitVar(SlideTime)-30)
trigger1 = IfElse(FVar(5) = 0,Command = "Diamond_Edge",Command = "Diamond_Edge-R")
var(14) = 8

[State 151]
type = VarSet
trigger1 = IfElse(GetHitVar(SlideTime) <= 40,Time > 0,Time > GetHitVar(SlideTime)-40)
trigger1 = IfElse(FVar(5) = 0,Command = "Freeze_Execution",Command = "Freeze_Execution-R")
var(14) = 9

[State 151]
type = VarSet
trigger1 = IfElse(GetHitVar(SlideTime) <= 30,Time > 0,Time > GetHitVar(SlideTime)-30)
trigger1 = IfElse(FVar(5) = 0,Command = "MAX2",Command = "MAX2-R")
var(14) = 10

[State 151]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(30) = 0
triggerall = Time = GetHitVar(SlideTime)
triggerall = Power >= 1000
trigger1 = Var(28) = 5
value = 2500

[State 151]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Time = GetHitVar(SlideTime)
trigger1 = Var(28) = 4
value = 80

[State 151]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Time = GetHitVar(SlideTime)
trigger1 = Var(28) = 3
value = 100

[State 151]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Time = GetHitVar(SlideTime)
trigger1 = Var(28) = -3
value = 105

[State 151]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Time = GetHitVar(SlideTime)
trigger1 = Var(28) = -4
value = 90

[State 151]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = -3
trigger1 = Time = GetHitVar(SlideTime)
value = 270
ignorehitpause = 1

[State 151]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = -2
trigger1 = Time = GetHitVar(SlideTime)
value = 260

[State 151]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = -1
trigger1 = Time = GetHitVar(SlideTime)
value = 220

[State 151]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 1
trigger1 = Time = GetHitVar(SlideTime)
value = 1000
ignorehitpause = 1

[State 151]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 2
trigger1 = Time = GetHitVar(SlideTime)
value = 1100

[State 151]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 3
trigger1 = Time = GetHitVar(SlideTime)
value = 1200

[State 151]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 4
trigger1 = Time = GetHitVar(SlideTime)
value = 1210

[State 151]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 5
trigger1 = Time = GetHitVar(SlideTime)
value = 1300

[State 151]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 6
trigger1 = Time = GetHitVar(SlideTime)
value = 1400

[State 151]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 7
trigger1 = Time = GetHitVar(SlideTime)
value = 1410

[State 151]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(30) = 0
triggerall = Var(14) = 8
triggerall = Power >= 1000
trigger1 = Time = GetHitVar(SlideTime)
value = 3000

[State 151]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(30) > 0
triggerall = Var(14) = 8
trigger1 = Time = GetHitVar(SlideTime)
value = 3000

[State 151]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = [1,2]
triggerall = Var(30) = 0
triggerall = Var(14) = 9
triggerall = Power >= 3000
trigger1 = Time = GetHitVar(SlideTime)
value = 3500

[State 151]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(30) > 0
triggerall = Var(14) = 9
triggerall = Power >= 1000
trigger1 = Time = GetHitVar(SlideTime)
value = 3500

[State 151]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 2
triggerall = Var(30) = 0
triggerall = Var(14) = 10
triggerall = Power >= 3000
trigger1 = Time = GetHitVar(SlideTime)
value = 3900

[State 151]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 1
triggerall = Var(30) = 0
triggerall = Var(14) = 10
triggerall = Power >= 3000
triggerall = Life <= 360
trigger1 = Time = GetHitVar(SlideTime)
value = 3900

[State 151]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 0
triggerall = Var(30) > 0
triggerall = Var(14) = 10
triggerall = Power >= 1000
triggerall = Life <= 320
trigger1 = Time = GetHitVar(SlideTime)
value = 3900

[State 151]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 2
triggerall = Var(30) > 0
triggerall = Var(14) = 10
triggerall = Power >= 1000
trigger1 = Time = GetHitVar(SlideTime)
value = 3900

[State 151]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 1
triggerall = Var(30) > 0
triggerall = Var(14) = 10
triggerall = Power >= 1000
triggerall = Life <= 360
trigger1 = Time = GetHitVar(SlideTime)
value = 3900

[State 151]
type = ChangeState
trigger1 = HitOver
value = 130
ctrl = 1

;---------------------------------------------------------------------------
; CGUARDHIT (shaking)
[Statedef 152]
type    = C
movetype= H
physics = N
velset = 0,0
ctrl = 0

[State 152]
type = PlaySnd
trigger1 = Time = 0
value = 8,1
ignorehitpause = 1
persistent = 0

[State 152]
type = ChangeAnim
trigger1 = Command = "HoldDown"
trigger1 = Anim != 151
value = 151
persistent = 0

[State 152]
type = VarSet
trigger1 = Command = "CD"
var(3) = 1
ignorehitpause = 1

[State 152]
type = VarSet
trigger1 = Command = "Recovery" && !Command = "HoldBack"
var(3) = 2
ignorehitpause = 1

[State 152]
type = VarSet
trigger1 = Command = "Recovery" && Command = "HoldBack"
var(3) = 3
ignorehitpause = 1

[State 152]
type = ChangeState
triggerall = Var(59) != 1
trigger1 = HitShakeOver && Power >= 1000 && Var(3) = 1
value = 720
ignorehitpause = 1

[State 152]
type = ChangeState
triggerall = Var(59) = 1
triggerall = HitShakeOver
triggerall = EnemyNear,NumProj + Enemy,NumProj = 0
triggerall = P2BodyDist X = [0,60]
trigger1 = Power >= 1000
trigger1 = P2Life < 40
trigger2 = Power >= 1000
trigger2 = Life = [0,20]
trigger3 = Var(49) = 2
trigger3 = Power >= 3000
trigger3 = P2Life > 300
trigger3 = P2MoveType = A
trigger3 = P2StateNo = [1000,1999]
trigger4 = Power >= 1000
trigger4 = Life < P2Life
trigger4 = Random = [0,100]
trigger5 = Enemy,StateNo = Var(36)
trigger5 = Life < P2Life
trigger5 = Random = [0,249]
trigger6 = Enemy,StateNo = Var(37)
trigger6 = Life < P2Life
trigger6 = Random = [0,249]
trigger7 = Enemy,StateNo = Var(38)
trigger7 = Life < P2Life
trigger7 = Random = [0,249]
value = 720
ignorehitpause = 1

[State 152]
type = ChangeState
triggerall = Var(59) != 1
trigger1 = HitShakeOver && Power >= 1000 && Var(3) = 2
value = 85
ignorehitpause = 1

[State 152]
type = ChangeState
triggerall = Var(59) = 1
triggerall = HitShakeOver && Power >= 1000
triggerall = P2StateType != A
triggerall = !Enemy,Ctrl
triggerall = P2MoveType = A
triggerall = Enemy,AnimTime <= -40
;triggerall = (P2BodyDist X = [26,154]) || Var(14) < 65
trigger1 = Power >= 1000
trigger1 = P2Life < 40
trigger2 = Power >= 1000
trigger2 = Life = [0,20]
trigger3 = Power >= 1000
trigger3 = Life < P2Life
trigger3 = Random = [0,249]
trigger4 = Enemy,StateNo = Var(36)
trigger4 = Life < P2Life
trigger4 = Random = [0,249]
trigger5 = Enemy,StateNo = Var(37)
trigger5 = Life < P2Life
trigger5 = Random = [0,249]
trigger6 = Enemy,StateNo = Var(38)
trigger6 = Life < P2Life
trigger6 = Random = [0,249]
value = 85
ignorehitpause = 1

[State 152]
type = ChangeState
triggerall = Var(59) = 1
triggerall = HitShakeOver && Power >= 1000
triggerall = P2StateType != A
triggerall = P2MoveType = A
triggerall = P2BodyDist X >= 26
trigger1 = Random = [0,249]
value = 85
ignorehitpause = 1

[State 152]
type = ChangeState
triggerall = Var(59) != 1
trigger1 = HitShakeOver && Power >= 1000 && Var(3) = 3
value = 95
ignorehitpause = 1

[State 152]
type = ChangeState
trigger1 = HitShakeOver
value = 151+2*(Command = "HoldDown")

[State 152]
type = StateTypeSet
triggerall = Var(59) = 1
triggerall = StateType != A
;triggerall = FVar(28) != 2
trigger1 = EnemyNear,StateType = C
trigger2 = EnemyNear,StateType = S
trigger2 = EnemyNear,Time < 8
;trigger2 = !Enemy,NumProj
;trigger3 = EnemyNear,Statetype = S
trigger3 = Enemy,NumProj
trigger3 = Random = [0,499]
;trigger4 = FVar(28) = 1
statetype = C
physics = C

[State 152]
type = StateTypeSet
triggerall = Var(59) = 1
triggerall = StateType != A
;triggerall = FVar(28) != 1
trigger1 = EnemyNear,StateType = A
trigger2 = EnemyNear,StateType = S
trigger2 = EnemyNear,Time >= 8
trigger2 = Random = [0,249]
;trigger2 = !Enemy,NumProj
;trigger3 = EnemyNear,Statetype = S
trigger3 = Enemy,NumProj
trigger3 = Random = [0,499]
;trigger3 = FVar(28) = 2
statetype = S
physics = S

[State 152]
type = StateTypeSet
triggerall = Var(59) != 1
trigger1 = StateType = S && Command = "HoldDown"
statetype = C
physics = C

[State 152]
type = StateTypeSet
triggerall = Var(59) != 1
trigger1 = StateType = C && Command != "HoldDown"
statetype = S
physics = S

;---------------------------------------------------------------------------
; CGUARDHIT2 (knocked back)
[Statedef 153]
type    = C
movetype= H
physics = C
ctrl = 0

[State 153]
type = ChangeAnim
trigger1 = Anim != 151
value = 151
persistent = 1

[State 153]
type = ChangeAnim
trigger1 = Var(59) = 0
trigger1 = Command != "HoldDown"
trigger1 = Anim != 150
value = 150
persistent = 1

[State 153]
type = ChangeAnim
trigger1 = Var(59) = 1
trigger1 = StateType != C
value = 150

[State 153]
type = StateTypeSet
triggerall = Var(59) = 1
triggerall = StateType != A
trigger1 = Enemy,StateType = C
trigger2 = P2Name = "Rockula" || P4Name = "Rockula"
trigger2 = P2StateNo = 230 || P2StateNo = 240
trigger3 = P2Name = "Kula_Claire" || P4Name = "Kula_Claire"
trigger3 = P2StateNo = 230 || P2StateNo = 700 || P2StateNo = 720
trigger4 = P2Name = "Huriken" || P4Name = "Huriken"
trigger4 = P2StateNo = 230
statetype = C
physics = C
persistent = 1

[State 153]
type = StateTypeSet
triggerall = Var(59) = 1
triggerall = StateType != A
trigger1 = Enemy,StateType = A
statetype = S
physics = S
persistent = 1

[State 153]
type = StateTypeSet
triggerall = Var(59) = 1
triggerall = StateType != A
;triggerall = FVar(28) != 2
trigger1 = EnemyNear,StateType = C
trigger2 = EnemyNear,StateType = S
trigger2 = EnemyNear,Time < 8
;trigger2 = !Enemy,NumProj
;trigger3 = EnemyNear,Statetype = S
trigger3 = Enemy,NumProj
trigger3 = Random = [0,499]
;trigger4 = FVar(28) = 1
statetype = C
physics = C
persistent = 1

[State 153]
type = StateTypeSet
triggerall = Var(59) = 1
triggerall = StateType != A
;triggerall = FVar(28) != 1
trigger1 = EnemyNear,StateType = A
trigger2 = EnemyNear,StateType = S
trigger2 = EnemyNear,Time >= 8
trigger2 = Random = [0,249]
;trigger2 = !Enemy,NumProj
;trigger3 = EnemyNear,Statetype = S
trigger3 = Enemy,NumProj
trigger3 = Random = [0,499]
;trigger3 = FVar(28) = 2
statetype = S
physics = S
persistent = 1

[State 153]
type = StateTypeSet
triggerall = Var(59) != 1
trigger1 = Time = 0 && StateType = S
trigger2 = Command != "HoldDown"
physics = S
persistent = 1

[State 153]
type = StateTypeSet
triggerall = Var(59) != 1
trigger1 = Time = 0 && StateType = C
trigger2 = Command = "HoldDown"
physics = C
persistent = 1

[State 153]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 153]
type = VelSet
trigger1 = Time = GetHitVar(SlideTime)
trigger2 = HitOver
x = 0

[State 153]
type = CtrlSet
trigger1 = Time = GetHitVar(CtrlTime)
value = 1

[State 153]
type = VarSet
trigger1 = Time = 0
var(28) = 0

[State 153]
type = VarSet
triggerall = IfElse(GetHitVar(SlideTime) <= 10,Time > 0,Time > GetHitVar(SlideTime)-10)
trigger1 = Command = "a+y"
var(28) = 5

[State 153]
type = VarSet
triggerall = IfElse(GetHitVar(SlideTime) <= 10,Time > 0,Time > GetHitVar(SlideTime)-10)
trigger1 = P2Dist X >= 0
trigger1 = Command = "Recovery" && !Command = "HoldBack"
trigger2 = P2Dist X < 0
trigger2 = Command = "Recovery" && !Command = "HoldFwd"
var(28) = 4

[State 153]
type = VarSet
triggerall = IfElse(GetHitVar(SlideTime) <= 10,Time > 0,Time > GetHitVar(SlideTime)-10)
trigger1 = IfElse(FVar(5) = 0,Command = "FF",Command = "BB")
var(28) = 3

[State 153]
type = VarSet
triggerall = IfElse(GetHitVar(SlideTime) <= 10,Time > 0,Time > GetHitVar(SlideTime)-10)
trigger1 = IfElse(FVar(5) = 0,Command = "BB",Command = "FF")
var(28) = -3

[State 153]
type = VarSet
triggerall = IfElse(GetHitVar(SlideTime) <= 10,Time > 0,Time > GetHitVar(SlideTime)-10)
trigger1 = P2Dist X >= 0
trigger1 = Command = "Recovery" && Command = "HoldBack"
trigger2 = P2Dist X < 0
trigger2 = Command = "Recovery" && Command = "HoldFwd"
var(28) = -4

[State 153]
type = VarSet
trigger1 = Time = 0
var(14) = 0

[State 153]
type = VarSet
triggerall = IfElse(GetHitVar(SlideTime) <= 10,Time > 0,Time > GetHitVar(SlideTime)-10)
trigger1 = IfElse(FVar(5) = 0,Command = "Critical_Ice",Command = "Critical_Ice-R")
var(14) = -3
ignorehitpause = 1

[State 153]
type = VarSet
trigger1 = IfElse(GetHitVar(SlideTime) <= 10,Time > 0,Time > GetHitVar(SlideTime)-10)
trigger1 = IfElse(FVar(5) = 0,Command = "Sliding_Kick",Command = "Sliding_Kick-R")
var(14) = -2

[State 153]
type = VarSet
trigger1 = IfElse(GetHitVar(SlideTime) <= 10,Time > 0,Time > GetHitVar(SlideTime)-10)
trigger1 = IfElse(FVar(5) = 0,Command = "One_Inch",Command = "One_Inch-R")
var(14) = -1

[State 153]
type = VarSet
triggerall = IfElse(GetHitVar(SlideTime) <= 20,Time > 0,Time > GetHitVar(SlideTime)-20)
trigger1 = IfElse(FVar(5) = 0,Command = "Diamond_Breath_A",Command = "Diamond_Breath_A-R")
var(14) = 1
ignorehitpause = 1

[State 153]
type = VarSet
trigger1 = IfElse(GetHitVar(SlideTime) <= 20,Time > 0,Time > GetHitVar(SlideTime)-20)
trigger1 = IfElse(FVar(5) = 0,Command = "Diamond_Breath_C",Command = "Diamond_Breath_C-R")
var(14) = 2

[State 153]
type = VarSet
trigger1 = IfElse(GetHitVar(SlideTime) <= 25,Time > 0,Time > GetHitVar(SlideTime)-25)
trigger1 = IfElse(FVar(5) = 0,Command = "Crow_Bites_A",Command = "Crow_Bites_A-R")
var(14) = 3

[State 153]
type = VarSet
trigger1 = IfElse(GetHitVar(SlideTime) <= 25,Time > 0,Time > GetHitVar(SlideTime)-25)
trigger1 = IfElse(FVar(5) = 0,Command = "Crow_Bites_C",Command = "Crow_Bites_C-R")
var(14) = 4

[State 153]
type = VarSet
trigger1 = IfElse(GetHitVar(SlideTime) <= 20,Time > 0,Time > GetHitVar(SlideTime)-20)
trigger1 = IfElse(FVar(5) = 0,Command = "Counter_Shell",Command = "Counter_Shell-R")
var(14) = 5

[State 153]
type = VarSet
trigger1 = IfElse(GetHitVar(SlideTime) <= 20,Time > 0,Time > GetHitVar(SlideTime)-20)
trigger1 = IfElse(FVar(5) = 0,Command = "Ray_Spin_B",Command = "Ray_Spin_B-R")
var(14) = 6

[State 153]
type = VarSet
trigger1 = IfElse(GetHitVar(SlideTime) <= 20,Time > 0,Time > GetHitVar(SlideTime)-20)
trigger1 = IfElse(FVar(5) = 0,Command = "Ray_Spin_D",Command = "Ray_Spin_D-R")
var(14) = 7

[State 153]
type = VarSet
trigger1 = IfElse(GetHitVar(SlideTime) <= 30,Time > 0,Time > GetHitVar(SlideTime)-30)
trigger1 = IfElse(FVar(5) = 0,Command = "Diamond_Edge",Command = "Diamond_Edge-R")
var(14) = 8

[State 153]
type = VarSet
trigger1 = IfElse(GetHitVar(SlideTime) <= 40,Time > 0,Time > GetHitVar(SlideTime)-40)
trigger1 = IfElse(FVar(5) = 0,Command = "Freeze_Execution",Command = "Freeze_Execution-R")
var(14) = 9

[State 153]
type = VarSet
trigger1 = IfElse(GetHitVar(SlideTime) <= 30,Time > 0,Time > GetHitVar(SlideTime)-30)
trigger1 = IfElse(FVar(5) = 0,Command = "MAX2",Command = "MAX2-R")
var(14) = 10

[State 153]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(30) = 0
triggerall = Time = GetHitVar(SlideTime)
triggerall = Power >= 1000
trigger1 = Var(28) = 5
value = 2500

[State 153]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Time = GetHitVar(SlideTime)
trigger1 = Var(28) = 4
value = 80

[State 153]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Time = GetHitVar(SlideTime)
trigger1 = Var(28) = 3
value = 100

[State 153]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Time = GetHitVar(SlideTime)
trigger1 = Var(28) = -3
value = 105

[State 153]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Time = GetHitVar(SlideTime)
trigger1 = Var(28) = -4
value = 90

[State 153]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = -3
trigger1 = Time = GetHitVar(SlideTime)
value = 270
ignorehitpause = 1

[State 153]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = -2
trigger1 = Time = GetHitVar(SlideTime)
value = 260

[State 153]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = -1
trigger1 = Time = GetHitVar(SlideTime)
value = 220

[State 153]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 1
trigger1 = Time = GetHitVar(SlideTime)
value = 1000
ignorehitpause = 1

[State 153]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 2
trigger1 = Time = GetHitVar(SlideTime)
value = 1100

[State 153]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 3
trigger1 = Time = GetHitVar(SlideTime)
value = 1200

[State 153]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 4
trigger1 = Time = GetHitVar(SlideTime)
value = 1210

[State 153]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 5
trigger1 = Time = GetHitVar(SlideTime)
value = 1300

[State 153]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 6
trigger1 = Time = GetHitVar(SlideTime)
value = 1400

[State 153]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 7
trigger1 = Time = GetHitVar(SlideTime)
value = 1410

[State 153]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(30) = 0
triggerall = Var(14) = 8
triggerall = Power >= 1000
trigger1 = Time = GetHitVar(SlideTime)
value = 3000

[State 153]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(30) > 0
triggerall = Var(14) = 8
trigger1 = Time = GetHitVar(SlideTime)
value = 3000

[State 153]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = [1,2]
triggerall = Var(30) = 0
triggerall = Var(14) = 9
triggerall = Power >= 3000
trigger1 = Time = GetHitVar(SlideTime)
value = 3500

[State 153]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(30) > 0
triggerall = Var(14) = 9
triggerall = Power >= 1000
trigger1 = Time = GetHitVar(SlideTime)
value = 3500

[State 153]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 2
triggerall = Var(30) = 0
triggerall = Var(14) = 10
triggerall = Power >= 3000
trigger1 = Time = GetHitVar(SlideTime)
value = 3900

[State 153]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 1
triggerall = Var(30) = 0
triggerall = Var(14) = 10
triggerall = Power >= 3000
triggerall = Life <= 360
trigger1 = Time = GetHitVar(SlideTime)
value = 3900

[State 153]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 0
triggerall = Var(30) > 0
triggerall = Var(14) = 10
triggerall = Power >= 1000
triggerall = Life <= 320
trigger1 = Time = GetHitVar(SlideTime)
value = 3900

[State 153]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 2
triggerall = Var(30) > 0
triggerall = Var(14) = 10
triggerall = Power >= 1000
trigger1 = Time = GetHitVar(SlideTime)
value = 3900

[State 153]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 1
triggerall = Var(30) > 0
triggerall = Var(14) = 10
triggerall = Power >= 1000
triggerall = Life <= 360
trigger1 = Time = GetHitVar(SlideTime)
value = 3900

[State 153]
type = ChangeState
trigger1 = HitOver
value = 131
ctrl = 1

;---------------------------------------------------------------------------
; AGUARDHIT (shaking)
[Statedef 154]
type    = A
movetype= H
physics = N
velset = 0,0

[State 154]
type = ChangeAnim
trigger1 = 1
value = 152

[State 154]
type = ChangeState
trigger1 = HitShakeOver
value = 155

[State 154]
type = ForceFeedback
trigger1 = Time = 0
waveform = Square
time = 4

;---------------------------------------------------------------------------
; AGUARDHIT2 (knocked away)
[Statedef 155]
type    = A
movetype= H
physics = N
anim = 152

[State 155]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 155]
type = VelAdd
trigger1 = 1
y = const(Movement.Yaccel)

[State 155]
type = CtrlSet
trigger1 = Time = GetHitVar(CtrlTime)
value = 1

[State 155]
type = VarSet
trigger1 = 1
sysvar(0) = (Pos Y >= 0) && (Vel Y > 0)

[State 155]
type = VelSet
trigger1 = SysVar(0)
y = 0

[State 155]
type = PosSet
trigger1 = SysVar(0)
y = 0

[State 155]
type = ChangeState
trigger1 = SysVar(0)
trigger1 = Command = "HoldBack"
trigger1 = InGuardDist
value = 130

[State 155]
type = ChangeState
trigger1 = SysVar(0)
value = 52

;---------------------------------------------------------------------------
; LOSE (Time over)
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 170]
type = PlaySnd
trigger1 = Time = 4
value = 6,6

[State 170]
type = Explod
trigger1 = Time = 4
anim = 171
ID = 171
sprpriority = 0
postype = P1
pos = 0,0
bindtime = -1
removeongethit = 1
ignorehitpause = 1
removetime = -1
shadow = 10,10,10

[State 170]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; DRAWGAME (Time over)
[Statedef 175]
type = S
ctrl = 0
velset = 0,0

[State 175]
type = ChangeState
trigger1 = Time = 0
trigger1 = !SelfAnimExist(175)
value = 170

[State 175]
type = ChangeAnim
trigger1 = Time = 0
value = 175

[State 175]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Win state decider
[Statedef 180]
type = S

[State 180]
type = ChangeState
triggerall = MatchOver
triggerall = Enemy,StateNo = 5155
;triggerall = Enemy,AnimTime = 2-Ceil((P2BodyDist X - 53)/7)
trigger1 = P2Name = "K-Core" || P4Name = "K-Core"
value = 185

[State 180]
type = ChangeState
trigger1 = Var(49) = [0,1]
trigger1 = Time = 1 && !MatchOver
value = ifelse((random = [0,499]),181,182)

[State 180]
type = ChangeState
trigger1 = Var(49) = 2
trigger1 = Time = 1 && !MatchOver
value = ifelse((random = [0,333]),181,ifelse((random = [0,499]),182,184))

[State 180]
type = ChangeState
trigger1 = Time = 20 && MatchOver
trigger1 = P2Name != "K-Core" && P4Name != "K-Core"
value = 183

;---------------------------------------------------------------------------
; Win pose 1
[Statedef 181]
type = S
ctrl = 0
anim = 181
velset = 0,0
sprpriority = 3

[State 181]
type = PlaySnd
trigger1 = Time = 3
value = 6,6

[State 181]
type = PlaySnd
trigger1 = AnimElem = 3
value = 3,0

[State 181]
type = PlaySnd
trigger1 = AnimElem = 4
value = 3,1

[State 181]
type = AssertSpecial
trigger1 = Time = [0,200]
flag = RoundNotOver

[State 181]
type = Explod
trigger1 = Time = 3
anim = 180
ID = 180
sprpriority = 2
postype = P1
pos = 0,0
bindtime = -1
removeongethit = 1
ignorehitpause = 0
removetime = -1
shadow = 10,10,10

[State 181]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Win pose 2
[Statedef 182]
type = S
ctrl = 0
anim = 182
velset = 0,0

[State 182]
type = AssertSpecial
trigger1 = Time = [0,200]
flag = RoundNotOver

[State 182]
type = PlaySnd
trigger1 = AnimElem = 13
value = 3,2

[State 182]
type = Explod
trigger1 = AnimElem = 7
anim = 183
ID = 183
sprpriority = 3
postype = P1
pos = 0,0
bindtime = -1
removeongethit = 1
ignorehitpause = 0
shadow = 10,10,10

[State 182]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Win pose(MatchOver)
[Statedef 183]
type = S
ctrl = 0
anim = 182
velset = 0,0

[State 183]
type = PlaySnd
trigger1 = AnimElem = 13
value = 3,2

[State 183]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 183]
type = AssertSpecial
trigger1 = Time = [0,200]
flag = RoundNotOver

[State 183]
type = AssertSpecial
trigger1 = Time >= 180
flag = NoBarDisplay

[State 183]
type = Helper
triggerall = Var(49) = 0
triggerall = MatchOver
triggerall = Time = 180
trigger1 = TeamMode = Single || TeamMode = Turns
trigger2 = TeamMode = Simul
trigger2 = NumPartner
trigger2 = ID < Partner,ID || Partner,Alive = 0
ID = 7900
name = "Winner"
sprpriority = 1
pos = 0,0
postype = P1
stateno = 7900
helpertype = Normal
pausemovetime = 999999
keyctrl = 1
ownpal = 1

[State 183]
type = Helper
triggerall = Var(58) = 0
triggerall = Var(49) != 0
triggerall = MatchOver
triggerall = Time = 180
trigger1 = TeamMode = Single || TeamMode = Turns
trigger2 = TeamMode = Simul
trigger2 = NumPartner
trigger2 = ID < Partner,ID || Partner,Alive = 0
ID = 8500
name = "Winner"
sprpriority = 1
pos = 0,0
postype = P1
stateno = 8500
helpertype = Normal
pausemovetime = 999999
keyctrl = 1
ownpal = 1

[State 183]
type = Helper
triggerall = Var(58) = 1
triggerall = Var(49) != 0
triggerall = MatchOver
triggerall = Time = 180
trigger1 = TeamMode = Single || TeamMode = Turns
trigger2 = TeamMode = Simul
trigger2 = NumPartner
trigger2 = ID < Partner,ID || Partner,Alive = 0
ID = 8501
name = "Winner"
sprpriority = 1
pos = 0,0
postype = P1
stateno = 8501
helpertype = Normal
pausemovetime = 999999
keyctrl = 1
ownpal = 1

;---------------------------------------------------------------------------
; Win pose 3 VS K' (2000)
[Statedef 184]
type = S
ctrl = 0
anim = 184
velset = 0,0

[State 184]
type = AssertSpecial
trigger1 = Time = [0,360]
flag = RoundNotOver

[State 184]
type = PlaySnd
trigger1 = AnimElem = 9
value = 3,9

[State 184]
type = PlaySnd
trigger1 = AnimElem = 12
value = 3,12

[State 184]
type = PlaySnd
trigger1 = AnimElemTime(15) = 25
value = 3,10

[State 184]
type = PlaySnd
trigger1 = AnimElem = 16
value = 3,11

[State 184]
type = Explod
trigger1 = AnimElem = 7
anim = 185
ID = 185
sprpriority = 3
postype = P1
pos = 0,0
bindtime = -1
removeongethit = 1
ignorehitpause = 0
removetime = -1

[State 184]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; INTRO (Candy)
[Statedef 186]
type = S
ctrl = 0
anim = 186
velset = 0,0
sprpriority = 2

[State 186]
type = AssertSpecial
trigger1 = Time = [0,250]
flag = Intro

[State 186]
type = PlaySnd
trigger1 = AnimElemTime(7) = 35
value = 3,13

[State 186]
type = Explod
trigger1 = Time = 0
anim = 187
ID = 187
sprpriority = 3
postype = P1
pos = 0,0
bindtime = -1
removeongethit = 1
ignorehitpause = 0
persistent = 1
shadow = 10,10,10

[State 186]
type = Explod
trigger1 = Time = 31
anim = 188
ID = 188
sprpriority = 1
postype = P1
pos = 32,-106

[State 186]
type = Explod
trigger1 = Time = 31
anim = 188
ID = 188
sprpriority = 1
postype = P1
pos = 48,-106

[State 186]
type = Explod
trigger1 = Time = 38
anim = 188
ID = 188
sprpriority = 1
postype = P1
pos = 32,-98

[State 186]
type = Explod
trigger1 = Time = 38
anim = 188
ID = 188
sprpriority = 1
postype = P1
pos = 48,-98

[State 186]
type = Explod
trigger1 = Time = 44
anim = 188
ID = 188
sprpriority = 1
postype = P1
pos = 32,-90

[State 186]
type = Explod
trigger1 = Time = 44
anim = 188
ID = 188
sprpriority = 1
postype = P1
pos = 48,-90

[State 186]
type = Explod
trigger1 = Time = 50
anim = 188
ID = 188
sprpriority = 1
postype = P1
pos = 30,-82

[State 186]
type = Explod
trigger1 = Time = 50
anim = 188
ID = 188
sprpriority = 1
postype = P1
pos = 43,-82

[State 186]
type = Explod
trigger1 = Time = 50
anim = 188
ID = 188
sprpriority = 1
postype = P1
pos = 54,-82

[State 186]
type = Explod
trigger1 = Time = 56
anim = 188
ID = 188
sprpriority = 1
postype = P1
pos = 26,-74

[State 186]
type = Explod
trigger1 = Time = 56
anim = 188
ID = 188
sprpriority = 1
postype = P1
pos = 43,-74

[State 186]
type = Explod
trigger1 = Time = 56
anim = 188
ID = 188
sprpriority = 1
postype = P1
pos = 56,-74

[State 186]
type = Explod
trigger1 = Time = 63
anim = 188
ID = 188
sprpriority = 1
postype = P1
pos = 26,-66

[State 186]
type = Explod
trigger1 = Time = 63
anim = 188
ID = 188
sprpriority = 1
postype = P1
pos = 43,-66

[State 186]
type = Explod
trigger1 = Time = 63
anim = 188
ID = 188
sprpriority = 1
postype = P1
pos = 56,-66

[State 186]
type = Explod
trigger1 = Time = 70
anim = 188
ID = 188
sprpriority = 1
postype = P1
pos = 26,-58

[State 186]
type = Explod
trigger1 = Time = 70
anim = 188
ID = 188
sprpriority = 1
postype = P1
pos = 43,-58

[State 186]
type = Explod
trigger1 = Time = 70
anim = 188
ID = 188
sprpriority = 1
postype = P1
pos = 57,-58

[State 186]
type = Explod
trigger1 = Time = 77
anim = 188
ID = 188
sprpriority = 1
postype = P1
pos = 26,-50

[State 186]
type = Explod
trigger1 = Time = 77
anim = 188
ID = 188
sprpriority = 1
postype = P1
pos = 43,-50

[State 186]
type = Explod
trigger1 = Time = 77
anim = 188
ID = 188
sprpriority = 1
postype = P1
pos = 60,-50

[State 186]
type = Explod
trigger1 = Time = 84
anim = 188
ID = 188
sprpriority = 1
postype = P1
pos = 36,-42

[State 186]
type = Explod
trigger1 = Time = 84
anim = 188
ID = 188
sprpriority = 1
postype = P1
pos = 50,-42

[State 186]
type = Explod
trigger1 = Time = 91
anim = 188
ID = 188
sprpriority = 1
postype = P1
pos = 33,-34

[State 186]
type = Explod
trigger1 = Time = 91
anim = 188
ID = 188
sprpriority = 1
postype = P1
pos = 51,-34

[State 186]
type = Explod
trigger1 = Time = 98
anim = 188
ID = 188
sprpriority = 1
postype = P1
pos = 32,-26

[State 186]
type = Explod
trigger1 = Time = 98
anim = 188
ID = 188
sprpriority = 1
postype = P1
pos = 51,-26

[State 186]
type = Explod
trigger1 = Time = 105
anim = 188
ID = 188
sprpriority = 1
postype = P1
pos = 30,-16

[State 186]
type = Explod
trigger1 = Time = 105
anim = 188
ID = 188
sprpriority = 1
postype = P1
pos = 51,-16

[State 186]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; Win(K-Core)
[Statedef 185]
type    = S
physics = S
anim = 0
ctrl = 1

[State 185]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 185]
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 185]
type = VelSet
trigger1 = Anim = 21
x = const(Velocity.Walk.Back.X)

[State 185]
type = ChangeAnim
trigger1 = Anim != 21
trigger1 = P2BodyDist X <= 90
value = 21

[State 185]
type = VelSet
trigger1 = Anim = 0
x = 0

[State 185]
type = ChangeAnim
trigger1 = Anim != 0
trigger1 = P2BodyDist X > 90
value = 0

[State 185]
type = ChangeState
triggerall = Facing*Enemy,Facing = -1
triggerall = Enemy,StateNo = 5155
triggerall = P2BodyDist X >= 120
triggerall = Enemy,AnimTime >= 1-Ceil((P2BodyDist X - 30)/7)
trigger1 = Time >= 0
value = 187
ctrl = 0

[State 185]
type = ChangeState
triggerall = Facing*Enemy,Facing = -1
triggerall = Enemy,StateNo = 5155
triggerall = P2BodyDist X < 120
triggerall = Enemy,AnimTime >= 1-Ceil((P2BodyDist X - 30)/3)
trigger1 = Time >= 0
value = 189
ctrl = 0

[State 185]
type = ChangeState
triggerall = Facing*Enemy,Facing = 1
triggerall = Enemy,StateNo = 5155
triggerall = Enemy,AnimTime >= -7-Ceil((P2BodyDist X + 30)/7)
trigger1 = Time >= 0
value = 187
ctrl = 0

;---------------------------------------------------------------------------
; Win(K-Core)
[Statedef 187]
type    = S
physics = S
anim = 100
ctrl = 0

[State 187]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 187]
type = PlaySnd
trigger1 = AnimElem = 1
trigger2 = AnimElem = 6
value = 8,11
channel = 2

[State 187]
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 187]
type = MakeDust
trigger1 = Time >= 0
pos = -30,0
spacing = 20

[State 187]
type = PosAdd
trigger1 = Time >= 0
x = const(Velocity.Run.Fwd.X)

[State 187]
type = ChangeState
triggerall = Facing*Enemy,Facing = -1
trigger1 = P2BodyDist X = [23,30]
trigger1 = Time >= 1
value = 188
ctrl = 0

[State 187]
type = ChangeState
triggerall = Facing*Enemy,Facing = 1
trigger1 = P2BodyDist X = [-60,-53]
trigger1 = Time >= 1
value = 188
ctrl = 0

;---------------------------------------------------------------------------
; Win pose
[Statedef 188]
type = S
ctrl = 0
anim = 175
velset = 0,0
facep2 = 1

[State 188]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3,1

[State 188]
type = PlaySnd
trigger1 = AnimElem = 13
value = 3,12

[State 188]
type = PlaySnd
trigger1 = AnimElem = 14
value = 10,1

[State 188]
type = PlaySnd
trigger1 = AnimElem = 21
value = 10,3

[State 188]
type = AssertSpecial
trigger1 = Time = [0,400]
flag = RoundNotOver

[State 188]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 188]
type = PosSet
trigger1 = Time = 0
trigger1 = Facing = -1
x = Enemy,Pos X + 53
y = Enemy,Pos Y - 4

[State 188]
type = PosSet
trigger1 = Time = 0
trigger1 = Facing = 1
x = Enemy,Pos X - 53
y = Enemy,Pos Y - 4

;---------------------------------------------------------------------------
; Win(K-Core)
[Statedef 189]
type    = S
physics = S
anim = 20
ctrl = 0

[State 189]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 189]
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 189]
type = PosAdd
trigger1 = Time >= 0
x = const(Velocity.Walk.Fwd.X)

[State 189]
type = ChangeState
triggerall = Facing*Enemy,Facing = -1
trigger1 = P2BodyDist X = [23,30]
trigger1 = Time >= 1
value = 188
ctrl = 0

;---------------------------------------------------------------------------
; PREINTRO
[Statedef 190]
type = S

[State 190]
type = VarSet
trigger1 = 1
var(32) = 0

[State 190]
type = ChangeState
triggerall = Time = 0
trigger1 = P2Name = "K-Core" || P4Name = "K-Core"
value = 196

[State 190]
type = ChangeState
triggerall = Time = 0
trigger1 = P2Name = "K'" || P4Name = "K'"
trigger2 = P2Name = "Foxy" || P4Name = "Foxy"
trigger3 = P2Name = "Angel" || P4Name = "Angel"
trigger4 = P2Name = "Nameless" || P4Name = "Nameless"
trigger5 = P2Name = "Sweet_Kula" || P4Name = "Sweet_Kula"
value = 192

[State 190]
type = ChangeState
triggerall = Time = 0
trigger1 = P2Name = "Maxima" || P4Name = "Maxima"
trigger1 = Var(49) != 1
trigger2 = P2Name = "Whip" || P4Name = "Whip"
trigger3 = P2Name = "Krizalid" || P4Name = "Krizalid"
trigger4 = P2Name = "Zero" || P4Name = "Zero"
trigger5 = P2Name = "Original-Zero" || P4Name = "Original-Zero"
trigger6 = P2Name = "Original Zero" || P4Name = "Original Zero"
trigger7 = P2Name = "Igniz" || P4Name = "Igniz"
value = 193

[State 190]
type = ChangeState
triggerall = Time = 0
trigger1 = P2Name = "Maxima" || P4Name = "Maxima"
trigger1 = Var(49) = 1
value = 194

[State 190]
type = ChangeState
trigger1 = Time = 0
value = 191

;---------------------------------------------------------------------------
; INTRO
[Statedef 191]
type = S
ctrl = 0
anim = 190
velset = 0,0

[State 191]
type = ChangeAnim
trigger1 = RoundState = 0
value = 190

[State 191]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 191]
type = PlaySnd
trigger1 = AnimElem = 2
value = 8,0

[State 191]
type = PlaySnd
trigger1 = AnimElem = 7 || AnimElem = 13
value = 6,6

[State 191]
type = PlaySnd
trigger1 = AnimElem = 11
value = 3,3+ifelse((p2name = "K9999" || p4name = "K9999"),16,0)

[State 191]
type = PlaySnd
trigger1 = AnimElemTime(12) = 70
value = 3,18+ifelse((p2name = "K9999" || p4name = "K9999"),0,999)

[State 191]
type = SprPriority
trigger1 = 1
value = 2

[State 191]
type = Explod
trigger1 = AnimElem = 2
anim = 189
ID = 189
sprpriority = 3
postype = P1
pos = 0,0
bindTime = -1
removeongethit = 1
ignorehitpause = 0
shadow = 10,10,10

[State 191]
type = Explod
trigger1 = AnimElem = 7
anim = 191
ID = 191
sprpriority = 1
postype = P1
pos = 0,0
bindTime = -1
removeongethit = 1
ignorehitpause = 0
shadow = 10,10,10

[State 191]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; INTRO VS K'
[Statedef 192]
type = S
ctrl = 0
anim = 192
velset = 0,0

[State 192]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 192]
type = PlaySnd
trigger1 = AnimElem = 17 || AnimElemTime(20) = 24
value = 6,6

[State 192]
type = PlaySnd
triggerall = Var(49) = 1
trigger1 = AnimElem = 19
value = 3,16

[State 192]
type = Explod
trigger1 = AnimElem = 17
anim = 193
ID = 193
sprpriority = 4
postype = P1
pos = 0,0
bindTime = -1
removeongethit = 1
ignorehitpause = 0
persistent = 1
shadow = 10,10,10

[State 192]
type = Explod
trigger1 = AnimElem = 19
anim = 194
ID = 194
sprpriority = 5
postype = P1
pos = 0,0
bindTime = -1
removeongethit = 1
ignorehitpause = 0
persistent = 1
shadow = 10,10,10

[State 192]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; INTRO VS Whip
[Statedef 193]
type = S
ctrl = 0
anim = 196
velset = 0,0

[State 193]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 193]
type = PlaySnd
trigger1 = AnimElem = 5
value = 3,7

[State 193]
type = PlaySnd
trigger1 = AnimElemTime(5) = 1
value = 3,8

[State 193]
type = PlaySnd
trigger1 = AnimElem = 8
value = 6,6

[State 193]
type = SprPriority
trigger1 = AnimElem = 4
value = 4

[State 193]
type = Explod
trigger1 = Time = 0
anim = 197
ID = 197
sprpriority = 1
postype = P1
pos = 0,0
bindTime = -1
removeongethit = 1
ignorehitpause = 0
persistent = 1
shadow = 10,10,10

[State 193]
type = Explod
trigger1 = Time = 0
anim = 198
ID = 198
sprpriority = 3
postype = P1
pos = 0,0
bindTime = -1
removeongethit = 1
ignorehitpause = 0
persistent = 1
shadow = 10,10,10

[State 193]
type = Explod
trigger1 = AnimElemTime(10) = 3
anim = 199
ID = 199
sprpriority = 5
postype = P1
pos = 0,0
bindTime = -1
removeongethit = 1
ignorehitpause = 0
persistent = 1

[State 193]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; INTRO VS Maxima(02UM)
[Statedef 194]
type = S
ctrl = 0
anim = 179
velset = 0,0

[State 194]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 194]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3,20

[State 194]
type = PlaySnd
trigger1 = AnimElem = 10
value = 3,21

[State 194]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; Taunt
[Statedef 195]
type = S
movetype = I
physics = S
anim = 195
velset = 0,0
ctrl = 0
sprpriority = 2

[State 195]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3,20

[State 195]
type = PlaySnd
trigger1 = AnimElem = 10
value = 3,21

[State 195]
type = CtrlSet
trigger1 = Time = 33
value = 1

[State 195]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; INTRO (Kula)(K-Core)
[Statedef 196]
type = S
ctrl = 0
anim = 176
velset = 0,0

[State 196]
type = ChangeAnim
trigger1 = RoundState = 0
value = 176

[State 196]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 196]
type = Explod
trigger1 = AnimElem = 14
anim = 177
ID = 177
pos = 0,0
postype = P1
sprpriority = 0
bindtime = 1
ownpal = 1
ignorehitpause = 1

[State 196]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0,5

[State 196]
type = PlaySnd
trigger1 = AnimElem = 13
value = 3,4

[State 196]
type = PlaySnd
trigger1 = AnimElem = 19
value = 3,1

[State 196]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; HITG_SHAKE
[Statedef 5000]
type    = S
movetype= H
physics = N
velset = 0,0

[State 5000]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(AnimType) != [3,5]
value = ifelse((gethitvar(GroundType) = 1),5000,5010) + gethitvar(AnimType)

[State 5000]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(AnimType) = [3,5]
value = 5030+(ifelse(gethitvar(YVel)<-11,1,0))+ifelse((gethitvar(YVel)>-11 && gethitvar(YVel)<0) && gethitvar(GroundType)= 2,4,0)

[State 5000]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(AnimType) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(AnimType)))
value = (5047 + gethitvar(AnimType))+(ifelse(gethitvar(AnimType)=4 && gethitvar(YVel)<-11,4,0))+ifelse(gethitvar(AnimType)=5 && P2StateNo>=3000,5,0)

[State 5000]
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5000]
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(YVel) != 0 || GetHitVar(Fall)
trigger2 = Pos Y != 0
statetype = A

[State 5000]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(YVel) = 0 && !GetHitVar(Fall)
value = 5001

[State 5000]
type = ChangeState
trigger1 = HitShakeOver
value = 5030

[State 5000]
type = ForceFeedBack
trigger1 = Anim = 5000
trigger2 = Anim = 5010
persistent = 0
time = 6
waveform = Square

[State 5000]
type = ForceFeedBack
trigger1 = Anim = 5001
trigger2 = Anim = 5011
persistent = 0
time = 8
waveform = SineSquare
ampl = 110,-1,-.3

[State 5000]
type = ForceFeedBack
trigger1 = Anim = 5012
trigger2 = Anim = 5002
trigger3 = Anim = 5030
persistent = 0
time = 15
waveform = SineSquare
ampl = 140

;---------------------------------------------------------------------------
; HITG_SLIDE
[Statedef 5001]
type    = S
movetype= H
physics = S

[State 5001]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5001]
type = ChangeAnim
trigger1 = AnimTime = 0
value = 5005 + gethitvar(AnimType) + (gethitvar(GroundType)=2)*10

[State 5001]
type = VelMul
trigger1 = Time >= GetHitVar(SlideTime)
x = .6

[State 5001]
type = VelSet
trigger1 = HitOver
x = 0

[State 5001]
type = DefenceMulSet
trigger1 = HitOver
value = 1

[State 5001]
type = NotHitBy
trigger1 = HitOver
value = ,NT,ST
time = 10

[State 5001]
type = VarSet
trigger1 = Time = 0
var(28) = 0

[State 5001]
type = VarSet
triggerall = IfElse(GetHitVar(SlideTime) <= 10,Time > 0,Time > GetHitVar(SlideTime)-10)
trigger1 = Command = "a+y"
var(28) = 5

[State 5001]
type = VarSet
triggerall = IfElse(GetHitVar(SlideTime) <= 10,Time > 0,Time > GetHitVar(SlideTime)-10)
trigger1 = P2Dist X >= 0
trigger1 = Command = "Recovery" && !Command = "HoldBack"
trigger2 = P2Dist X < 0
trigger2 = Command = "Recovery" && !Command = "HoldFwd"
var(28) = 4

[State 5001]
type = VarSet
triggerall = IfElse(GetHitVar(SlideTime) <= 10,Time > 0,Time > GetHitVar(SlideTime)-10)
trigger1 = IfElse(FVar(5) = 0,Command = "FF",Command = "BB")
var(28) = 3

[State 5001]
type = VarSet
triggerall = IfElse(GetHitVar(SlideTime) <= 10,Time > 0,Time > GetHitVar(SlideTime)-10)
trigger1 = IfElse(FVar(5) = 0,Command = "BB",Command = "FF")
var(28) = -3

[State 5001]
type = VarSet
triggerall = IfElse(GetHitVar(SlideTime) <= 10,Time > 0,Time > GetHitVar(SlideTime)-10)
trigger1 = P2Dist X >= 0
trigger1 = Command = "Recovery" && Command = "HoldBack"
trigger2 = P2Dist X < 0
trigger2 = Command = "Recovery" && Command = "HoldFwd"
var(28) = -4

[State 5001]
type = VarSet
trigger1 = Time = 0
var(14) = 0

[State 5001]
type = VarSet
triggerall = IfElse(GetHitVar(SlideTime) <= 10,Time > 0,Time > GetHitVar(SlideTime)-10)
trigger1 = IfElse(FVar(5) = 0,Command = "Critical_Ice",Command = "Critical_Ice-R")
var(14) = -3
ignorehitpause = 1

[State 5001]
type = VarSet
trigger1 = IfElse(GetHitVar(SlideTime) <= 10,Time > 0,Time > GetHitVar(SlideTime)-10)
trigger1 = IfElse(FVar(5) = 0,Command = "Sliding_Kick",Command = "Sliding_Kick-R")
var(14) = -2

[State 5001]
type = VarSet
trigger1 = IfElse(GetHitVar(SlideTime) <= 10,Time > 0,Time > GetHitVar(SlideTime)-10)
trigger1 = IfElse(FVar(5) = 0,Command = "One_Inch",Command = "One_Inch-R")
var(14) = -1

[State 5001]
type = VarSet
triggerall = IfElse(GetHitVar(SlideTime) <= 20,Time > 0,Time > GetHitVar(SlideTime)-20)
trigger1 = IfElse(FVar(5) = 0,Command = "Diamond_Breath_A",Command = "Diamond_Breath_A-R")
var(14) = 1
ignorehitpause = 1

[State 5001]
type = VarSet
trigger1 = IfElse(GetHitVar(SlideTime) <= 20,Time > 0,Time > GetHitVar(SlideTime)-20)
trigger1 = IfElse(FVar(5) = 0,Command = "Diamond_Breath_C",Command = "Diamond_Breath_C-R")
var(14) = 2

[State 5001]
type = VarSet
trigger1 = IfElse(GetHitVar(SlideTime) <= 25,Time > 0,Time > GetHitVar(SlideTime)-25)
trigger1 = IfElse(FVar(5) = 0,Command = "Crow_Bites_A",Command = "Crow_Bites_A-R")
var(14) = 3

[State 5001]
type = VarSet
trigger1 = IfElse(GetHitVar(SlideTime) <= 25,Time > 0,Time > GetHitVar(SlideTime)-25)
trigger1 = IfElse(FVar(5) = 0,Command = "Crow_Bites_C",Command = "Crow_Bites_C-R")
var(14) = 4

[State 5001]
type = VarSet
trigger1 = IfElse(GetHitVar(SlideTime) <= 20,Time > 0,Time > GetHitVar(SlideTime)-20)
trigger1 = IfElse(FVar(5) = 0,Command = "Counter_Shell",Command = "Counter_Shell-R")
var(14) = 5

[State 5001]
type = VarSet
trigger1 = IfElse(GetHitVar(SlideTime) <= 20,Time > 0,Time > GetHitVar(SlideTime)-20)
trigger1 = IfElse(FVar(5) = 0,Command = "Ray_Spin_B",Command = "Ray_Spin_B-R")
var(14) = 6

[State 5001]
type = VarSet
trigger1 = IfElse(GetHitVar(SlideTime) <= 20,Time > 0,Time > GetHitVar(SlideTime)-20)
trigger1 = IfElse(FVar(5) = 0,Command = "Ray_Spin_D",Command = "Ray_Spin_D-R")
var(14) = 7

[State 5001]
type = VarSet
trigger1 = IfElse(GetHitVar(SlideTime) <= 30,Time > 0,Time > GetHitVar(SlideTime)-30)
trigger1 = IfElse(FVar(5) = 0,Command = "Diamond_Edge",Command = "Diamond_Edge-R")
var(14) = 8

[State 5001]
type = VarSet
trigger1 = IfElse(GetHitVar(SlideTime) <= 20,Time > 0,Time > GetHitVar(SlideTime)-20)
trigger1 = IfElse(FVar(5) = 0,Command = "Freeze_Execution",Command = "Freeze_Execution-R")
var(14) = 9

[State 5001]
type = VarSet
trigger1 = IfElse(GetHitVar(SlideTime) <= 20,Time > 0,Time > GetHitVar(SlideTime)-20)
trigger1 = IfElse(FVar(5) = 0,Command = "MAX2",Command = "MAX2-R")
var(14) = 10

[State 5001]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(30) = 0
triggerall = Time = GetHitVar(SlideTime)
triggerall = Power >= 1000
trigger1 = Var(28) = 5
value = 2500

[State 5001]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Time = GetHitVar(SlideTime)
trigger1 = Var(28) = 4
value = 80

[State 5001]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Time = GetHitVar(SlideTime)
trigger1 = Var(28) = 3
value = 100

[State 5001]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Time = GetHitVar(SlideTime)
trigger1 = Var(28) = -3
value = 105

[State 5001]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Time = GetHitVar(SlideTime)
trigger1 = Var(28) = -4
value = 90

[State 5001]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = -3
trigger1 = Time = GetHitVar(SlideTime)
value = 270
ignorehitpause = 1

[State 5001]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = -2
trigger1 = Time = GetHitVar(SlideTime)
value = 260

[State 5001]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = -1
trigger1 = Time = GetHitVar(SlideTime)
value = 220

[State 5001]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 1
trigger1 = Time = GetHitVar(SlideTime)
value = 1000
ignorehitpause = 1

[State 5001]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 2
trigger1 = Time = GetHitVar(SlideTime)
value = 1100

[State 5001]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 3
trigger1 = Time = GetHitVar(SlideTime)
value = 1200

[State 5001]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 4
trigger1 = Time = GetHitVar(SlideTime)
value = 1210

[State 5001]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 5
trigger1 = Time = GetHitVar(SlideTime)
value = 1300

[State 5001]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 6
trigger1 = Time = GetHitVar(SlideTime)
value = 1400

[State 5001]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 7
trigger1 = Time = GetHitVar(SlideTime)
value = 1410

[State 5001]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(30) = 0
triggerall = Var(14) = 8
triggerall = Power >= 1000
trigger1 = Time = GetHitVar(SlideTime)
value = 3000

[State 5001]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(30) > 0
triggerall = Var(14) = 8
trigger1 = Time = GetHitVar(SlideTime)
value = 3000

[State 5001]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = [1,2]
triggerall = Var(30) = 0
triggerall = Var(14) = 9
triggerall = Power >= 3000
trigger1 = Time = GetHitVar(SlideTime)
value = 3500

[State 5001]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(30) > 0
triggerall = Var(14) = 9
triggerall = Power >= 1000
trigger1 = Time = GetHitVar(SlideTime)
value = 3500

[State 5001]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 2
triggerall = Var(30) = 0
triggerall = Var(14) = 10
triggerall = Power >= 3000
trigger1 = Time = GetHitVar(SlideTime)
value = 3900

[State 5001]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 1
triggerall = Var(30) = 0
triggerall = Var(14) = 10
triggerall = Power >= 3000
triggerall = Life <= 360
trigger1 = Time = GetHitVar(SlideTime)
value = 3900

[State 5001]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 0
triggerall = Var(30) > 0
triggerall = Var(14) = 10
triggerall = Power >= 1000
triggerall = Life <= 320
trigger1 = Time = GetHitVar(SlideTime)
value = 3900

[State 5001]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 2
triggerall = Var(30) > 0
triggerall = Var(14) = 10
triggerall = Power >= 1000
trigger1 = Time = GetHitVar(SlideTime)
value = 3900

[State 5001]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 1
triggerall = Var(30) > 0
triggerall = Var(14) = 10
triggerall = Power >= 1000
triggerall = Life <= 360
trigger1 = Time = GetHitVar(SlideTime)
value = 3900

[State 5001]
type = ChangeState
trigger1 = HitOver
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; HITC_SHAKE
[Statedef 5010]
type    = C
movetype= H
physics = N
velset = 0,0

[State 5010]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(AnimType) != [3,5]
value = 5020+gethitvar(AnimType)

[State 5010]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(AnimType) = [3,5]
value = 5030

[State 5010]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(AnimType) = [4,5]) && (SelfAnimExist(5047+GetHitVar(AnimType)))
value = 5047+gethitvar(AnimType)

[State 5010]
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5010]
type = StateTypeSet
triggerall = Time = 0
trigger1 = GetHitVar(YVel) != 0 || GetHitVar(Fall)
trigger2 = Pos Y != 0
statetype = A

[State 5010]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(YVel) = 0 && !GetHitVar(Fall)
value = 5011

[State 5010]
type = ChangeState
trigger1 = HitShakeOver
value = 5030

[State 5010]
type = ForceFeedBack
trigger1 = Anim = 5020
persistent = 0
time = 6
waveform = Square

[State 5010]
type = ForceFeedBack
trigger1 = Anim = 5021
persistent = 0
time = 8
waveform = SineSquare
ampl = 110,-1,-.3

[State 5010]
type = ForceFeedBack
trigger1 = Anim = 5022
persistent = 0
time = 15
waveform = SineSquare
ampl = 140

;---------------------------------------------------------------------------
; HITC_SLIDE
[Statedef 5011]
type    = C
movetype= H
physics = S

[State 5011]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5011]
type = ChangeAnim
trigger1 = AnimTime = 0
value = 5025 + gethitvar(AnimType)

[State 5011]
type = VelMul
trigger1 = Time >= GetHitVar(SlideTime)
x = .6

[State 5011]
type = VelSet
trigger1 = HitOver
x = 0

[State 5011]
type = DefenceMulSet
trigger1 = HitOver
value = 1

[State 5011]
type = NotHitBy
trigger1 = HitOver
value = ,NT,ST
time = 10

[State 5011]
type = VarSet
trigger1 = Time = 0
var(28) = 0

[State 5011]
type = VarSet
triggerall = IfElse(GetHitVar(SlideTime) <= 10,Time > 0,Time > GetHitVar(SlideTime)-10)
trigger1 = Command = "a+y"
var(28) = 5

[State 5011]
type = VarSet
triggerall = IfElse(GetHitVar(SlideTime) <= 10,Time > 0,Time > GetHitVar(SlideTime)-10)
trigger1 = P2Dist X >= 0
trigger1 = Command = "Recovery" && !Command = "HoldBack"
trigger2 = P2Dist X < 0
trigger2 = Command = "Recovery" && !Command = "HoldFwd"
var(28) = 4

[State 5011]
type = VarSet
triggerall = IfElse(GetHitVar(SlideTime) <= 10,Time > 0,Time > GetHitVar(SlideTime)-10)
trigger1 = IfElse(FVar(5) = 0,Command = "FF",Command = "BB")
var(28) = 3

[State 5011]
type = VarSet
triggerall = IfElse(GetHitVar(SlideTime) <= 10,Time > 0,Time > GetHitVar(SlideTime)-10)
trigger1 = IfElse(FVar(5) = 0,Command = "BB",Command = "FF")
var(28) = -3

[State 5011]
type = VarSet
triggerall = IfElse(GetHitVar(SlideTime) <= 10,Time > 0,Time > GetHitVar(SlideTime)-10)
trigger1 = P2Dist X >= 0
trigger1 = Command = "Recovery" && Command = "HoldBack"
trigger2 = P2Dist X < 0
trigger2 = Command = "Recovery" && Command = "HoldFwd"
var(28) = -4

[State 5011]
type = VarSet
trigger1 = Time = 0
var(14) = 0

[State 5011]
type = VarSet
triggerall = IfElse(GetHitVar(SlideTime) <= 10,Time > 0,Time > GetHitVar(SlideTime)-10)
trigger1 = IfElse(FVar(5) = 0,Command = "Critical_Ice",Command = "Critical_Ice-R")
var(14) = -3
ignorehitpause = 1

[State 5011]
type = VarSet
trigger1 = IfElse(GetHitVar(SlideTime) <= 10,Time > 0,Time > GetHitVar(SlideTime)-10)
trigger1 = IfElse(FVar(5) = 0,Command = "Sliding_Kick",Command = "Sliding_Kick-R")
var(14) = -2

[State 5011]
type = VarSet
trigger1 = IfElse(GetHitVar(SlideTime) <= 10,Time > 0,Time > GetHitVar(SlideTime)-10)
trigger1 = IfElse(FVar(5) = 0,Command = "One_Inch",Command = "One_Inch-R")
var(14) = -1

[State 5011]
type = VarSet
triggerall = IfElse(GetHitVar(SlideTime) <= 20,Time > 0,Time > GetHitVar(SlideTime)-20)
trigger1 = IfElse(FVar(5) = 0,Command = "Diamond_Breath_A",Command = "Diamond_Breath_A-R")
var(14) = 1
ignorehitpause = 1

[State 5011]
type = VarSet
trigger1 = IfElse(GetHitVar(SlideTime) <= 20,Time > 0,Time > GetHitVar(SlideTime)-20)
trigger1 = IfElse(FVar(5) = 0,Command = "Diamond_Breath_C",Command = "Diamond_Breath_C-R")
var(14) = 2

[State 5011]
type = VarSet
trigger1 = IfElse(GetHitVar(SlideTime) <= 25,Time > 0,Time > GetHitVar(SlideTime)-25)
trigger1 = IfElse(FVar(5) = 0,Command = "Crow_Bites_A",Command = "Crow_Bites_A-R")
var(14) = 3

[State 5011]
type = VarSet
trigger1 = IfElse(GetHitVar(SlideTime) <= 25,Time > 0,Time > GetHitVar(SlideTime)-25)
trigger1 = IfElse(FVar(5) = 0,Command = "Crow_Bites_C",Command = "Crow_Bites_C-R")
var(14) = 4

[State 5011]
type = VarSet
trigger1 = IfElse(GetHitVar(SlideTime) <= 20,Time > 0,Time > GetHitVar(SlideTime)-20)
trigger1 = IfElse(FVar(5) = 0,Command = "Counter_Shell",Command = "Counter_Shell-R")
var(14) = 5

[State 5011]
type = VarSet
trigger1 = IfElse(GetHitVar(SlideTime) <= 20,Time > 0,Time > GetHitVar(SlideTime)-20)
trigger1 = IfElse(FVar(5) = 0,Command = "Ray_Spin_B",Command = "Ray_Spin_B-R")
var(14) = 6

[State 5011]
type = VarSet
trigger1 = IfElse(GetHitVar(SlideTime) <= 20,Time > 0,Time > GetHitVar(SlideTime)-20)
trigger1 = IfElse(FVar(5) = 0,Command = "Ray_Spin_D",Command = "Ray_Spin_D-R")
var(14) = 7

[State 5011]
type = VarSet
trigger1 = IfElse(GetHitVar(SlideTime) <= 30,Time > 0,Time > GetHitVar(SlideTime)-30)
trigger1 = IfElse(FVar(5) = 0,Command = "Diamond_Edge",Command = "Diamond_Edge-R")
var(14) = 8

[State 5011]
type = VarSet
trigger1 = IfElse(GetHitVar(SlideTime) <= 20,Time > 0,Time > GetHitVar(SlideTime)-20)
trigger1 = IfElse(FVar(5) = 0,Command = "Freeze_Execution",Command = "Freeze_Execution-R")
var(14) = 9

[State 5011]
type = VarSet
trigger1 = IfElse(GetHitVar(SlideTime) <= 20,Time > 0,Time > GetHitVar(SlideTime)-20)
trigger1 = IfElse(FVar(5) = 0,Command = "MAX2",Command = "MAX2-R")
var(14) = 10

[State 5011]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(30) = 0
triggerall = Time = GetHitVar(SlideTime)
triggerall = Power >= 1000
trigger1 = Var(28) = 5
value = 2500

[State 5011]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Time = GetHitVar(SlideTime)
trigger1 = Var(28) = 4
value = 80

[State 5011]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Time = GetHitVar(SlideTime)
trigger1 = Var(28) = 3
value = 100

[State 5011]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Time = GetHitVar(SlideTime)
trigger1 = Var(28) = -3
value = 105

[State 5011]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Time = GetHitVar(SlideTime)
trigger1 = Var(28) = -4
value = 90

[State 5011]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = -3
trigger1 = Time = GetHitVar(SlideTime)
value = 270
ignorehitpause = 1

[State 5011]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = -2
trigger1 = Time = GetHitVar(SlideTime)
value = 260

[State 5011]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = -1
trigger1 = Time = GetHitVar(SlideTime)
value = 220

[State 5011]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 1
trigger1 = Time = GetHitVar(SlideTime)
value = 1000
ignorehitpause = 1

[State 5011]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 2
trigger1 = Time = GetHitVar(SlideTime)
value = 1100

[State 5011]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 3
trigger1 = Time = GetHitVar(SlideTime)
value = 1200

[State 5011]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 4
trigger1 = Time = GetHitVar(SlideTime)
value = 1210

[State 5011]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 5
trigger1 = Time = GetHitVar(SlideTime)
value = 1300

[State 5011]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 6
trigger1 = Time = GetHitVar(SlideTime)
value = 1400

[State 5011]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 7
trigger1 = Time = GetHitVar(SlideTime)
value = 1410

[State 5011]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(30) = 0
triggerall = Var(14) = 8
triggerall = Power >= 1000
trigger1 = Time = GetHitVar(SlideTime)
value = 3000

[State 5011]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(30) > 0
triggerall = Var(14) = 8
trigger1 = Time = GetHitVar(SlideTime)
value = 3000

[State 5011]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = [1,2]
triggerall = Var(30) = 0
triggerall = Var(14) = 9
triggerall = Power >= 3000
trigger1 = Time = GetHitVar(SlideTime)
value = 3500

[State 5011]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(30) > 0
triggerall = Var(14) = 9
triggerall = Power >= 1000
trigger1 = Time = GetHitVar(SlideTime)
value = 3500

[State 5011]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 2
triggerall = Var(30) = 0
triggerall = Var(14) = 10
triggerall = Power >= 3000
trigger1 = Time = GetHitVar(SlideTime)
value = 3900

[State 5011]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 1
triggerall = Var(30) = 0
triggerall = Var(14) = 10
triggerall = Power >= 3000
triggerall = Life <= 360
trigger1 = Time = GetHitVar(SlideTime)
value = 3900

[State 5011]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 0
triggerall = Var(30) > 0
triggerall = Var(14) = 10
triggerall = Power >= 1000
triggerall = Life <= 320
trigger1 = Time = GetHitVar(SlideTime)
value = 3900

[State 5011]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 2
triggerall = Var(30) > 0
triggerall = Var(14) = 10
triggerall = Power >= 1000
trigger1 = Time = GetHitVar(SlideTime)
value = 3900

[State 5011]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 1
triggerall = Var(30) > 0
triggerall = Var(14) = 10
triggerall = Power >= 1000
triggerall = Life <= 360
trigger1 = Time = GetHitVar(SlideTime)
value = 3900

[State 5011]
type = ChangeState
trigger1 = HitOver
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; HITA_SHAKE
[Statedef 5020]
type    = A
movetype= H
physics = N
velset = 0,0

[State 5020]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(AnimType) != [3,5]
value = ifelse((gethitvar(AirType) = 1),5000,5010)+gethitvar(AnimType)

[State 5020]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(AnimType) = [3,5]
value = ifelse(gethitvar(YVel) < 0,5030+(ifelse(gethitvar(YVel) < -11,1,0)),5058)+ifelse((gethitvar(YVel) > -11 && gethitvar(YVel) < 0) && gethitvar(GroundType)= 2,4,0)

[State 5020]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(AnimType) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(AnimType)))
value = (5047+gethitvar(AnimType))+(ifelse(gethitvar(AnimType) = 4 && gethitvar(YVel) < -11,4,0))+ifelse(gethitvar(AnimType) = 5 && P2StateNo >= 3000,5,0)

[State 5020]
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5020]
type = VarSet
trigger1 = ((P2StateNo = [200,219]) || (P2StateNo = [230,249]) || (P2StateNo = 270) || (P2StateNo = [400,439]) || (P2StateNo = [600,649])) && Time = 0
var(21) = 1

[State 5020]
type = ChangeState
trigger1 = RoundState = 2
trigger1 = HitShakeOver && Var(21) = 1
value = 5040

[State 5020]
type = ChangeState
trigger1 = HitShakeOver
value = 5030

[State 5020]
type = ForceFeedBack
trigger1 = Anim = 5000
trigger2 = Anim = 5010
persistent = 0
time = 6
waveform = Square

[State 5020]
type = ForceFeedBack
trigger1 = Anim = 5001
trigger2 = Anim = 5011
persistent = 0
time = 8
waveform = SineSquare
ampl = 110,-1,-.3

[State 5020]
type = ForceFeedBack
trigger1 = Anim = 5012
trigger2 = Anim = 5002
trigger3 = Anim = 5030
trigger4 = Anim = [5051,5059]
persistent = 0
time = 15
waveform = SineSquare
ampl = 140

;---------------------------------------------------------------------------
; HITA_SHAKE
[Statedef 5021]
type    = A
movetype= H
physics = N
velset = 0,0

[State 5021]
type = ChangeAnim2
trigger1 = Time = 0
trigger1 = GetHitVar(AnimType) != [3,5]
value = ifelse((gethitvar(AirType) = 1),5000,5010)+gethitvar(AnimType)

[State 5021]
type = ChangeAnim2
trigger1 = Time = 0
trigger1 = GetHitVar(AnimType) = [3,5]
value = ifelse(gethitvar(YVel) < 0,5030+(ifelse(gethitvar(YVel) < -11,1,0)),5058)+ifelse((gethitvar(YVel) > -11 && gethitvar(YVel) < 0) && gethitvar(GroundType)= 2,4,0)

[State 5021]
type = ChangeAnim2
trigger1 = Time = 0
trigger1 = (GetHitVar(AnimType) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(AnimType)))
value = (5047+gethitvar(AnimType))+(ifelse(gethitvar(AnimType) = 4 && gethitvar(YVel) < -11,4,0))+ifelse(gethitvar(AnimType) = 5 && P2StateNo >= 3000,5,0)

[State 5021]
type = ChangeAnim2
trigger1 = Time > 0
value = anim

[State 5021]
type = ChangeState
trigger1 = HitShakeOver && Alive
value = 5041

[State 5021]
type = SelfState
trigger1 = HitShakeOver && !Alive
value = 5030

[State 5021]
type = ForceFeedBack
trigger1 = Anim = 5000
trigger2 = Anim = 5010
persistent = 0
time = 6
waveform = Square

[State 5021]
type = ForceFeedBack
trigger1 = Anim = 5001
trigger2 = Anim = 5011
persistent = 0
time = 8
waveform = SineSquare
ampl = 110,-1,-.3

[State 5021]
type = ForceFeedBack
trigger1 = Anim = 5012
trigger2 = Anim = 5002
trigger3 = Anim = 5030
trigger4 = Anim = [5051,5059]
persistent = 0
time = 15
waveform = SineSquare
ampl = 140

;---------------------------------------------------------------------------
; HITA_UP (initial going up)
[Statedef 5030]
type    = A
movetype= H
physics = N
ctrl = 0

[State 5030]
type = VarSet
trigger1 = Anim = 5058
fvar(36) = 1

[State 5030]
type = VarSet
trigger1 = Anim != 5058
fvar(36) = 0

[State 5030]
type = VelAdd
trigger1 = 1
y = gethitvar(Yaccel)

[State 5030]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 5030]
type = ChangeState
triggerall = !HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0
trigger2 = Pos Y >= 10
value = 5040

[State 5030]
type = ChangeState
triggerall = HitFall
triggerall = AnimTime = 0
trigger1 = HitOver
trigger2 = Vel Y > 0
trigger2 = Pos Y >= 10
value = 5050

[State 5030]
type = ChangeState
trigger1 = AnimTime = 0
value = 5035

[State 5030]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 5100

;---------------------------------------------------------------------------
; HITA_UP_T (transition)
[Statedef 5035]
type    = A
movetype= H
physics = N

[State 5035]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5035)
trigger1 = Anim != [5051,5059]
trigger1 = Anim != 5090
value = 5035

[State 5035]
type = VelAdd
trigger1 = 1
y = gethitvar(Yaccel)

[State 5035]
type = ChangeState
triggerall = !HitFall
trigger1 = HitOver
trigger2 = AnimTime = 0
trigger3 = Vel Y > 0
trigger3 = Pos Y >= 10
trigger4 = Time = 0
trigger4 = Anim != 5035
value = 5040

[State 5035]
type = ChangeState
triggerall = HitFall
trigger1 = HitOver
trigger2 = AnimTime = 0
trigger3 = Vel Y > 0
trigger3 = Pos Y >= 10
trigger4 = Time = 0
trigger4 = Anim != 5035
value = 5050

;---------------------------------------------------------------------------
; HITA_RECOV (recovering in air, not falling)
[Statedef 5040]
type    = A
movetype= H
physics = N

[State 5040]
type = Width
trigger1 = 1
edge = 0,-2

[State 5040]
type = VarSet
trigger1 = Time = 0
var(21) = 0

[State 5040]
type = NotHitBy
trigger1 = Time = 13
value = SCA
time = -1

[State 5040]
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim != 5040
trigger2 = Time = 0
trigger2 = Anim != 5035
value = 5040

[State 5040]
type = StateTypeSet
trigger1 = HitOver
movetype = I

[State 5040]
type = VelSet
trigger1 = Time = 0
x = ifelse(p2dist X >= 0,-3.84,3.84)
y = -7.3

[State 5040]
type = VelAdd
trigger1 = 1
y = 0.523

[State 5040]
type = VarSet
trigger1 = Time = 0
var(28) = 0

[State 5040]
type = VarSet
triggerall = Time > 10
trigger1 = Command = "a+y"
var(28) = 5

[State 5040]
type = VarSet
triggerall = Time > 10
trigger1 = Command = "Recovery" && !Command = "HoldBack"
var(28) = 4

[State 5040]
type = VarSet
triggerall = Time > 10
trigger1 = Command = "FF"
var(28) = 3

[State 5040]
type = VarSet
triggerall = Time > 0
triggerall = Facing*Enemy,Facing = -1
trigger1 = Command = "LongJumpFwd"
var(28) = 2

[State 5040]
type = VarSet
triggerall = Time > 0
triggerall = Facing*Enemy,Facing = -1
trigger1 = Command = "LongJumpBack"
var(28) = -2

[State 5040]
type = VarSet
triggerall = Time > 10
trigger1 = Command = "BB"
var(28) = -3

[State 5040]
type = VarSet
triggerall = Time > 10
trigger1 = Command = "Recovery" && Command = "HoldBack"
var(28) = -4

[State 5040]
type = VarSet
trigger1 = Time = 0
var(14) = 0

[State 5040]
type = VarSet
trigger1 = Time > 10
trigger1 = IfElse(FVar(5) = 0,Command = "Critical_Ice",Command = "Critical_Ice-R")
var(14) = -3

[State 5040]
type = VarSet
trigger1 = Time > 10
trigger1 = IfElse(FVar(5) = 0,Command = "Sliding_Kick",Command = "Sliding_Kick-R")
var(14) = -2

[State 5040]
type = VarSet
trigger1 = Time > 10
trigger1 = IfElse(FVar(5) = 0,Command = "One_Inch",Command = "One_Inch-R")
var(14) = -1

[State 5040]
type = VarSet
trigger1 = Time > 5
trigger1 = IfElse(FVar(5) = 0,Command = "Diamond_Breath_A",Command = "Diamond_Breath_A-R")
var(14) = 1

[State 5040]
type = VarSet
trigger1 = Time > 5
trigger1 = IfElse(FVar(5) = 0,Command = "Diamond_Breath_C",Command = "Diamond_Breath_C-R")
var(14) = 2

[State 5040]
type = VarSet
trigger1 = Time > 0
trigger1 = IfElse(FVar(5) = 0,Command = "Crow_Bites_A",Command = "Crow_Bites_A-R")
var(14) = 3

[State 5040]
type = VarSet
trigger1 = Time > 0
trigger1 = IfElse(FVar(5) = 0,Command = "Crow_Bites_C",Command = "Crow_Bites_C-R")
var(14) = 4

[State 5040]
type = VarSet
trigger1 = Time > 5
trigger1 = IfElse(FVar(5) = 0,Command = "Counter_Shell",Command = "Counter_Shell-R")
var(14) = 5

[State 5040]
type = VarSet
trigger1 = Time > 5
trigger1 = IfElse(FVar(5) = 0,Command = "Ray_Spin_B",Command = "Ray_Spin_B-R")
var(14) = 6

[State 5040]
type = VarSet
trigger1 = Time > 5
trigger1 = IfElse(FVar(5) = 0,Command = "Ray_Spin_D",Command = "Ray_Spin_D-R")
var(14) = 7

[State 5040]
type = VarSet
trigger1 = Time > 0
trigger1 = IfElse(FVar(5) = 0,Command = "Diamond_Edge",Command = "Diamond_Edge-R")
var(14) = 8

[State 5040]
type = VarSet
trigger1 = Time > 0
trigger1 = IfElse(FVar(5) = 0,Command = "Freeze_Execution",Command = "Freeze_Execution-R")
var(14) = 9

[State 5040]
type = VarSet
trigger1 = Time > 0
trigger1 = IfElse(FVar(5) = 0,Command = "MAX2",Command = "MAX2-R")
var(14) = 10

[State 5040]
type = ChangeState
trigger1 = !Alive
value = 5050

[State 5040]
type = ChangeState
trigger1 = Pos Y >= -12 && Vel Y > 0
value = 5045

;---------------------------------------------------------------------------
; HITA_RECOV (recovering in air, not falling)
[Statedef 5041]
type    = A
movetype= H
physics = N

[State 5041]
type = Width
trigger1 = 1
edge = 0,-2

[State 5041]
type = NotHitBy
trigger1 = Time = 13
value = SCA
time = -1

[State 5041]
type = ChangeAnim2
trigger1 = AnimTime = 0
trigger1 = Anim != 5040
trigger2 = Time = 0
trigger2 = Anim != 5035
value = 5040

[State 5041]
type = StateTypeSet
trigger1 = HitOver
movetype = I

[State 5041]
type = VelSet
trigger1 = Time = 0
x = ifelse(p2dist X >= 0,-3.84,3.84)
y = -7.3

[State 5041]
type = VelAdd
trigger1 = 1
y = 0.523

[State 5041]
type = ChangeState
trigger1 = !Alive
value = 5050

[State 5041]
type = ChangeState
trigger1 = Pos Y >= -12 && Vel Y > 0
value = 5046

;---------------------------------------------------------------------------
;
[Statedef 5045]
type    = S
physics = S
anim = 47
ctrl = 0
velset = 0,0

[State 5045]
type = CtrlSet
trigger1 = Time = 1
value = 1

[State 5045]
type = VarSet
trigger1 = Time = 0
var(28) = 0

[State 5045]
type = VarSet
triggerall = Time >= 0
triggerall = Facing*Enemy,Facing = 1
trigger1 = Command = "HoldFwd"
var(28) = 1

[State 5045]
type = VarSet
triggerall = Time >= 0
triggerall = Facing*Enemy,Facing = 1
trigger1 = Command = "HoldBack"
var(28) = -1

[State 5045]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Time = 1
trigger1 = Var(28) = -1
trigger2 = Var(28) = 1
value = 20

[State 5045]
type = NotHitBy
trigger1 = 1
value = SCA

[State 5045]
type = NotHitBy
trigger1 = AnimTime = 0
value = ,NT,ST
time = 10

[State 5045]
type = NotHitBy
trigger1 = AnimTime = 0
value2 = SCA
time = 1

[State 5045]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 5045]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5045]
type = PlaySnd
trigger1 = Time = 0
value = 6,1

[State 5045]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(30) = 0
triggerall = Time = 1
triggerall = Power >= 1000
trigger1 = Var(28) = 5
value = 2500

[State 5045]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Time = 1
trigger1 = Var(28) = 4
value = 80

[State 5045]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Time = 1
trigger1 = Var(28) = 3
value = 100

[State 5045]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Time = 1
trigger1 = Var(28) = 2
trigger2 = Var(28) = -2
value = 55

[State 5045]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Time = 1
trigger1 = Var(28) = -3
value = 105

[State 5045]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Time = 1
trigger1 = Var(28) = -4
value = 90

[State 5045]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = -1
trigger1 = Time = 1
value = 220

[State 5045]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = -3
trigger1 = Time = 1
value = 270

[State 5045]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = -2
trigger1 = Time = 1
value = 260

[State 5045]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = -1
trigger1 = Time = 1
value = 220

[State 5045]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 1
trigger1 = Time = 1
value = 1000

[State 5045]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 2
trigger1 = Time = 1
value = 1100

[State 5045]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 3
trigger1 = Time = 1
value = 1200

[State 5045]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 4
trigger1 = Time = 1
value = 1210

[State 5045]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 5
trigger1 = Time = 1
value = 1300

[State 5045]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 6
trigger1 = Time = 1
value = 1400

[State 5045]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 7
trigger1 = Time = 1
value = 1410

[State 5045]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(30) = 0
triggerall = Var(14) = 8
triggerall = Power >= 1000
trigger1 = Time = 1
value = 3000

[State 5045]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(30) > 0
triggerall = Var(14) = 8
trigger1 = Time = 1
value = 3000

[State 5045]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = [1,2]
triggerall = Var(30) = 0
triggerall = Var(14) = 9
triggerall = Power >= 3000
trigger1 = Time = 1
value = 3500

[State 5045]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(30) > 0
triggerall = Var(14) = 9
triggerall = Power >= 1000
trigger1 = Time = 1
value = 3500

[State 5045]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 2
triggerall = Var(30) = 0
triggerall = Var(14) = 10
triggerall = Power >= 3000
trigger1 = Time = 1
value = 3900

[State 5045]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 1
triggerall = Var(30) = 0
triggerall = Var(14) = 10
triggerall = Power >= 3000
triggerall = Life <= 360
trigger1 = Time = 1
value = 3900

[State 5045]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 0
triggerall = Var(30) > 0
triggerall = Var(14) = 10
triggerall = Power >= 1000
triggerall = Life <= 320
trigger1 = Time = 1
value = 3900

[State 5045]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 2
triggerall = Var(30) > 0
triggerall = Var(14) = 10
triggerall = Power >= 1000
trigger1 = Time = 1
value = 3900

[State 5045]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 1
triggerall = Var(30) > 0
triggerall = Var(14) = 10
triggerall = Power >= 1000
triggerall = Life <= 360
trigger1 = Time = 1
value = 3900

[State 5045]
type = ChangeState
trigger1 = Var(59) = 1
trigger1 = Time = 1
value = 120
ctrl = 1

[State 5045]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;
[Statedef 5046]
type    = S
physics = S
anim = 47
ctrl = 0
velset = 0,0

[State 5046]
type = CtrlSet
trigger1 = Time = 1
value = 1

[State 5046]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 1

[State 5046]
type = NotHitBy
trigger1 = AnimTime = 0
value = ,NT,ST
time = 10

[State 5046]
type = VelSet
trigger1 = Time = 0
x = 0
y = 0

[State 5046]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5046]
type = SelfState
trigger1 = Time >= 1
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; HITA_FALL (knocked up, falling)
[Statedef 5050]
type    = A
movetype= H
physics = N

[State 5050]
type = Width
trigger1 = 1
edge = 0,-2

[State 5050]
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0
trigger2 = Anim != 5035
trigger2 = (Anim != [5051,5059]) && (Anim != [5061,5069])
trigger2 = Anim != 5090
value = 5050+(ifelse(anim = 5031,6,0))+ifelse((gethitvar(YVel) > -11 && gethitvar(YVel) < 0) && gethitvar(GroundType) = 2,4,0)

[State 5050]
type = ChangeAnim
trigger1 = Anim = [5050,5059]
trigger1 = SelfAnimExist(Anim+10)
value = anim+10
persistent = 0

[State 5050]
type = VelAdd
trigger1 = 1
y = gethitvar(Yaccel)

[State 5050]
type = VarSet
trigger1 = Time = 0
var(3) = 0
ignorehitpause = 1

[State 5050]
type = VarSet
triggerall = Alive && Vel Y > 0 && Pos Y >= -60
trigger1 = Command = "Recovery"
var(3) = 1
ignorehitpause = 1

[State 5050]
type = SelfState
trigger1 = Pos Y >= -12 && Vel Y > 0
triggerall = GetHitVar(YVel) < -1
triggerall = Var(59) != 1
trigger1 = Var(3) = 1
value = 5200

[State 5050]
type = ChangeState
trigger1 = Pos Y >= -12 && Vel Y > 0
value = 5100

;---------------------------------------------------------------------------
; HIT_TRIP (shaking)
[Statedef 5070]
type    = A
movetype= H
physics = N
velset = 0,0

[State 5070]
type = ChangeAnim
trigger1 = 1
value = 5070

[State 5070]
type = ChangeState
trigger1 = HitShakeOver
value = 5071

[State 5070]
type = NotHitBy
trigger1 = 1
value = SCA

[State 5070]
type = ForceFeedBack
trigger1 = Time = 0
time = 12
waveform = SineSquare
ampl = 140

;---------------------------------------------------------------------------
; HIT_TRIP2 (fall through air)
[Statedef 5071]
type    = A
movetype= H
physics = N

[State 5071]
type = Width
trigger1 = 1
edge = 0,-2

[State 5071]
type = NotHitBy
trigger1 = 1
value = SCA

[State 5071]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 5071]
type = VelAdd
trigger1 = 1
y = gethitvar(Yaccel)

[State 5071]
type = VarSet
trigger1 = Time = 0
var(3) = 0
ignorehitpause = 1

[State 5071]
type = VarSet
triggerall = Alive && Vel Y > 0 && Pos Y >= -60
trigger1 = Command = "Recovery"
var(3) = 1
ignorehitpause = 1

[State 5071]
type = SelfState
triggerall = Var(59) != 1
trigger1 = Pos Y >= -12 && Vel Y > 0
trigger1 = Var(3) = 1
value = 5200

[State 5071]
type = ChangeState
trigger1 = Pos Y >= -12 && Vel Y > 0
value = 5100

;---------------------------------------------------------------------------
; HITL_SHAKE
[Statedef 5080]
type    = L
movetype= H
physics = N
velset = 0,0

[State 5080]
type = VarSet
trigger1 = Time = 0
sysvar(2) = ifelse(gethitvar(YVel) = 0,5080,5090)

[State 5080]
type = VarAdd
trigger1 = Time = 0
trigger1 = (Anim = [5081,5089]) || (Anim = [5111,5119])
trigger1 = SelfAnimExist(SysVar(2)+(Anim%10))
sysvar(2) = anim % 10

[State 5080]
type = VarSet
trigger1 = Time = 0
trigger1 = SysVar(2) = 5090
trigger1 = !SelfAnimExist(5090)
sysvar(2) = 5030

[State 5080]
type = ChangeAnim
trigger1 = 1
value = sysvar(2)

[State 5080]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(YVel) = 0
value = 5081

[State 5080]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(YVel) != 0
value = 5030

;---------------------------------------------------------------------------
; HITL_SLIDE
[Statedef 5081]
type    = L
movetype= H
physics = C

[State 5081]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5081]
type = VelSet
trigger1 = HitOver
x = 0

[State 5081]
type = VarSet
trigger1 = Time = 0
sysvar(0) = 1

[State 5081]
type = ChangeState
trigger1 = HitOver
value = 5110

;---------------------------------------------------------------------------
; HIT_BOUNCE (hit ground)
[Statedef 5100]
type    = L
movetype= H
physics = N

[State 5100]
type = Width
trigger1 = 1
edge = 0,-2

[State 5100]
type = NotHitBy
trigger1 = 1
value = SC,NA,SA,HA,NP,SP,HP

[State 5100]
type = HitBy
trigger1 = 1
value = SCA,HT

[State 5100]
type = VelSet
trigger1 = Time = 0
trigger1 = GetHitVar(Fall.YVel) = 0
trigger1 = Vel X > 1
x = 1

[State 5100]
type = FallEnvShake
trigger1 = Time = 0

[State 5100]
type = VarSet
trigger1 = Time = 0
sysvar(1) = floor(vel Y)

[State 5100]
type = ChangeAnim
triggerall = Time = 0
trigger1 = (Anim != [5051,5059]) && (Anim != [5061,5069])
trigger2 = !SelfAnimExist(5100+(Anim%10))
value = 5100+ifelse(anim = 5065 || anim = 5067,(anim%2),0)+ifelse(anim = 5058 && p2stateno < 2999,4,ifelse(anim = 5058 && p2stateno > 2999,1,0))+ifelse(anim = 5976,3,0)

[State 5100]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (Anim = [5051,5059]) || (Anim = [5061,5069])
trigger1 = SelfAnimExist(5100+(Anim%10))
value = 5100+((anim != 5062 && anim != 5054) && anim%10)

[State 5100]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5100]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5100]
type = VelMul
trigger1 = Time = 0
x = 0.75

[State 5100]
type = MakeDust
trigger1 = Time >= 0
pos = -30,0
spacing = 10

[State 5100]
type = ChangeState
trigger1 = Time = 0
trigger1 = GetHitVar(Fall.YVel) = 0
value = 5110

[State 5100]
type = GameMakeAnim
trigger1 = Time = 1
value = 60+(sysvar(1) > 5)+(sysvar(1) > 14)
pos = 0,0
under = sysvar(1) <= 14

[State 5100]
type = HitFallDamage
trigger1 = Time = 3

[State 5100]
type = PlaySnd
trigger1 = Time = 1
value = F7,(sysvar(1) > 5)+(sysvar(1) > 14)

[State 5100]
type = PlaySnd
trigger1 = Time = 0
value = 10,ifelse((random = [0,499]),3,4)

[State 5100]
type = PosFreeze
trigger1 = 1

[State 5100]
type = ChangeState
trigger1 = AnimTime = 0
value = 5101

[State 5100]
type = ForceFeedBack
trigger1 = Time = 0
waveform = SineSquare
ampl = 128,-3,-.2,.005
time = 20

;---------------------------------------------------------------------------
; HIT_BOUNCE (hit ground)
[Statedef 5102]
type    = L
movetype= H
physics = N

[State 5102]
type = Width
trigger1 = 1
edge = 0,-2

[State 5102]
type = VelSet
trigger1 = Time = 0
trigger1 = GetHitVar(Fall.YVel) = 0
trigger1 = Vel X > 1
x = 1

[State 5102]
type = FallEnvShake
trigger1 = Time = 0

[State 5102]
type = VarSet
trigger1 = Time = 0
sysvar(1) = floor(vel Y)

[State 5102]
type = ChangeAnim
triggerall = Time = 0
trigger1 = (Anim != [5051,5059]) && (Anim != [5061,5069])
trigger2 = !SelfAnimExist(5100+(Anim%10))
value = 5100+ifelse(anim = 5065 || anim = 5067,(anim%2),0)+ifelse(anim = 5058 && p2stateno < 2999,4,ifelse(anim = 5058 && p2stateno > 2999,1,0))+ifelse(anim = 5976,3,0)

[State 5102]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (Anim = [5051,5059]) || (Anim = [5061,5069])
trigger1 = SelfAnimExist(5100+(Anim%10))
value = 5100+((anim != 5062 && anim != 5054) && anim%10)

[State 5102]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5102]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5102]
type = VelMul
trigger1 = Time = 0
x = 0.75

[State 5102]
type = MakeDust
trigger1 = Time >= 0
pos = -30,0
spacing = 10

[State 5102]
type = SelfState
trigger1 = Time = 0
trigger1 = GetHitVar(Fall.YVel) = 0
value = 5110

[State 5102]
type = GameMakeAnim
trigger1 = Time = 1
value = 60+(sysvar(1) > 5)+(sysvar(1) > 14)
pos = 0,0
under = sysvar(1) <= 14

[State 5102]
type = HitFallDamage
trigger1 = Time = 3

[State 5102]
type = PlaySnd
trigger1 = Time = 1
value = F7,(sysvar(1) > 5)+(sysvar(1) > 14)

[State 5102]
type = PosFreeze
trigger1 = 1

[State 5102]
type = SelfState
trigger1 = AnimTime = 0
value = 5101

[State 5102]
type = ForceFeedBack
trigger1 = Time = 0
waveform = SineSquare
ampl = 128,-3,-.2,.005
time = 20

;---------------------------------------------------------------------------
; HIT_BOUNCE (bounce into air)
[Statedef 5101]
type    = L
movetype= H
physics = N

[State 5101]
type = Width
trigger1 = 1
edge = 0,-2

[State 5101]
type = NotHitBy
trigger1 = 1
value = SC,NA,SA,HA,NP,SP,HP

[State 5101]
type = HitBy
trigger1 = 1
value = SCA,HT

[State 5101]
type = ChangeAnim
triggerall = Time = 0
trigger1 = Anim != [5101,5109]
trigger2 = !SelfAnimExist(5160+(Anim%10))
value = 5160+ifelse(anim = 5103,816,0)

[State 5101]
type = ChangeAnim
triggerall = Time = 0
trigger1 = Anim = [5101,5109]
trigger1 = SelfAnimExist(5160+(Anim%10))
value = 5160+(anim%10)

[State 5101]
type = HitFallVel
trigger1 = Time = 0

[State 5101]
type = VelSet
triggerall = FVar(36) = 1
triggerall = HitVel X > 0
trigger1 = Time = 0
x = 1.5
y = -7.2

[State 5101]
type = VelSet
triggerall = FVar(36) = 1
triggerall = HitVel X < 0
trigger1 = Time = 0
x = -1.5
y = -7.2

[State 5101]
type = VelAdd
trigger1 = 1
y = .6

[State 5101]
type = ChangeState
trigger1 = Pos Y >= -8 && Vel Y > 0
value = 5110

;---------------------------------------------------------------------------
; HIT_LIEDOWN
[Statedef 5110]
type    = L
movetype= H
physics = N

[State 5110]
type = Width
trigger1 = 1
edge = 0,-2

[State 5110]
type = ChangeAnim
triggerall = PrevStateNo = 227
trigger1 = P2Name = "Sweet_Kula" || P4Name = "Sweet_Kula"
trigger2 = P2Name = "Kula_Claire" || P4Name = "Kula_Claire"
value = 5111

[State 5110]
type = MakeDust
trigger1 = Time >= 0
pos = -30,0
spacing = 20

[State 5110]
type = FallEnvShake
trigger1 = Time = 0

[State 5110]
type = ChangeAnim
persistent = 0
trigger1 = SelfAnimExist(5110+(Anim%10))
trigger1 = Anim = [5081,5089]
value = 5110+(anim%10)

[State 5110]
type = ChangeAnim
triggerall = Time = 0
triggerall = Anim != [5110,5119]
trigger1 = Anim != [5161,5169]
trigger2 = !SelfAnimExist(5170+(Anim%10))
value = 5170+ifelse(anim = 5976,1,0)

[State 5110]
type = ChangeAnim
triggerall = Time = 0
triggerall = Anim != [5110,5119]
trigger1 = Anim = [5161,5169]
trigger1 = SelfAnimExist(5170+(Anim%10))
value = 5170+(anim%10)

[State 5110]
type = HitFallDamage
trigger1 = Time = 0

[State 5110]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5110]
type = VelSet
trigger1 = 1
x = 0

[State 5110]
type = VarSet
trigger1 = Time = 0
trigger1 = GetHitVar(Fall.YVel) != 0
sysvar(1) = floor(vel Y)

[State 5110]
type = PlaySnd
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = F7,(sysvar(1) > 5)+(sysvar(1) > 14)

[State 5110]
type = GameMakeAnim
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = 60+(sysvar(1) > 5)+(sysvar(1) > 14)
pos = 0,0
under = sysvar(1) <= 14

[State 5110]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5110]
type = ChangeAnim
persistent = 0
triggerall = Anim = [5171,5179]
triggerall = SelfAnimExist(5110+(Anim%10))
trigger1 = AnimTime = 0
trigger2 = SysVar(0)
value = 5110+(anim%10)

[State 5110]
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111,5119]
trigger1 = AnimTime = 0
trigger2 = SysVar(0)
value = 5110

[State 5110]
type = ChangeState
triggerall = !Alive
trigger1 = AnimTime = 0
trigger2 = SysVar(0)
trigger3 = Anim = [5110,5119]
value = 5150

[State 5110]
type = VarSet
trigger1 = SysVar(0)
trigger1 = Time = 0
sysvar(0) = 0

[State 5110]
type = VelMul
trigger1 = 1
x = 0.85

[State 5110]
type = ForceFeedBack
trigger1 = Alive
trigger1 = Time = 0
time = 8
ampl = 240
waveform = Sine

[State 5110]
type = ForceFeedBack
trigger1 = !Alive
trigger1 = Time = 0
ampl = 200,7,-.467
time = 30
waveform = Sine

[State 5110]
type = ChangeState
triggerall = AnimTime = 0
trigger1 = GetHitVar(XVel) = -6.34
trigger1 = GetHitVar(YVel) = -9.3
trigger2 = GetHitVar(XVel) = 6.34
trigger2 = GetHitVar(YVel) = -9.3
value = 5970

;---------------------------------------------------------------------------
; HIT_BOUNCE (bounce into air)
[Statedef 5970]
type    = L
movetype= H
physics = N
anim = 5976

[State 5970]
type = Width
trigger1 = 1
edge = 0,-2

[State 5970]
type = HitFallVel
trigger1 = Time = 0

[State 5970]
type = VelSet
triggerall = Facing*Enemy,Facing = -1
trigger1 = Time = 0
x = -4
y = -3

[State 5970]
type = VelSet
triggerall = Facing*Enemy,Facing = 1
trigger1 = Time = 0
x = 4
y = -3

[State 5970]
type = VelAdd
trigger1 = 1
y = .6

[State 5970]
type = ChangeState
trigger1 = Pos Y >= -4 && Vel Y > 0
value = 5980

;---------------------------------------------------------------------------
; HIT_LIEDOWN
[Statedef 5980]
type    = L
movetype= H
physics = N
anim = 5980

[State 5980]
type = Width
trigger1 = 1
edge = 0,-2

[State 5980]
type = FallEnvShake
trigger1 = Time = 0

[State 5980]
type = HitFallDamage
trigger1 = Time = 0

[State 5980]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5980]
type = VelSet
trigger1 = 1
x = 0

[State 5980]
type = VarSet
trigger1 = Time = 0
trigger1 = GetHitVar(Fall.YVel) != 0
sysvar(1) = floor(vel Y)

[State 5980]
type = PlaySnd
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = F7,(sysvar(1) > 5)+(sysvar(1) > 14)

[State 5980]
type = GameMakeAnim
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = 60+(sysvar(1) > 5)+(sysvar(1) > 14)
pos = 0,0
under = sysvar(1) <= 14

[State 5980]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5980]
type = ChangeState
trigger1 = AnimTime = 0
value = 5120

;---------------------------------------------------------------------------
; HIT_GETUP
[Statedef 5120]
type    = L
movetype= I
physics = N

[State 5120]
type = Width
trigger1 = Time = [0,18]
edge = 0,-2

[State 5120]
type = ChangeAnim
triggerall = Time = 0
trigger1 = Anim != [5111,5119]
trigger2 = !SelfAnimExist(5120+(Anim%10))
value = 5120

[State 5120]
type = ChangeAnim
triggerall = Time = 0
trigger1 = Anim = [5111,5119]
trigger1 = SelfAnimExist(5120+(Anim%10))
value = 5120+(anim%10)

[State 5120]
type = VelSet
trigger1 = Time = 0
x = 0

[State 5120]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 5120]
type = HitFallSet
trigger1 = AnimTime = 0
value = 1

[State 5120]
type = NotHitBy
trigger1 = AnimTime = 0
value = ,NT,ST
time = 10

[State 5120]
type = NotHitBy
trigger1 = AnimTime = 0
value2 = SCA
time = 1

[State 5120]
type = VarSet
trigger1 = Time = 0
var(28) = 0

[State 5120]
type = VarSet
triggerall = Time > 10
trigger1 = Command = "a+y"
var(28) = 5

[State 5120]
type = VarSet
triggerall = Time > 10
trigger1 = Command = "Recovery" && !Command = "HoldBack"
var(28) = 4

[State 5120]
type = VarSet
triggerall = Time > 10
trigger1 = Command = "FF"
var(28) = 3

[State 5120]
type = VarSet
triggerall = Time > 0
triggerall = Facing*Enemy,Facing = -1
trigger1 = Command = "LongJumpFwd"
var(28) = 2

[State 5120]
type = VarSet
triggerall = Time > 0
triggerall = Facing*Enemy,Facing = -1
trigger1 = Command = "LongJumpBack"
var(28) = -2

[State 5120]
type = VarSet
triggerall = Time > 10
trigger1 = Command = "BB"
var(28) = -3

[State 5120]
type = VarSet
triggerall = Time > 10
trigger1 = Command = "Recovery" && Command = "HoldBack"
var(28) = -4

[State 5120]
type = VarSet
trigger1 = Time = 0
var(14) = 0

[State 5120]
type = VarSet
trigger1 = Time > 10
trigger1 = IfElse(FVar(5) = 0,Command = "Critical_Ice",Command = "Critical_Ice-R")
var(14) = -3

[State 5120]
type = VarSet
trigger1 = Time > 10
trigger1 = IfElse(FVar(5) = 0,Command = "Sliding_Kick",Command = "Sliding_Kick-R")
var(14) = -2

[State 5120]
type = VarSet
trigger1 = Time > 10
trigger1 = IfElse(FVar(5) = 0,Command = "One_Inch",Command = "One_Inch-R")
var(14) = -1

[State 5120]
type = VarSet
trigger1 = Time > 5
trigger1 = IfElse(FVar(5) = 0,Command = "Diamond_Breath_A",Command = "Diamond_Breath_A-R")
var(14) = 1

[State 5120]
type = VarSet
trigger1 = Time > 5
trigger1 = IfElse(FVar(5) = 0,Command = "Diamond_Breath_C",Command = "Diamond_Breath_C-R")
var(14) = 2

[State 5120]
type = VarSet
trigger1 = Time > 0
trigger1 = IfElse(FVar(5) = 0,Command = "Crow_Bites_A",Command = "Crow_Bites_A-R")
var(14) = 3

[State 5120]
type = VarSet
trigger1 = Time > 0
trigger1 = IfElse(FVar(5) = 0,Command = "Crow_Bites_C",Command = "Crow_Bites_C-R")
var(14) = 4

[State 5120]
type = VarSet
trigger1 = Time > 5
trigger1 = IfElse(FVar(5) = 0,Command = "Counter_Shell",Command = "Counter_Shell-R")
var(14) = 5

[State 5120]
type = VarSet
trigger1 = Time > 5
trigger1 = IfElse(FVar(5) = 0,Command = "Ray_Spin_B",Command = "Ray_Spin_B-R")
var(14) = 6

[State 5120]
type = VarSet
trigger1 = Time > 5
trigger1 = IfElse(FVar(5) = 0,Command = "Ray_Spin_D",Command = "Ray_Spin_D-R")
var(14) = 7

[State 5120]
type = VarSet
trigger1 = Time > 0
trigger1 = IfElse(FVar(5) = 0,Command = "Diamond_Edge",Command = "Diamond_Edge-R")
var(14) = 8

[State 5120]
type = VarSet
trigger1 = Time > 0
trigger1 = IfElse(FVar(5) = 0,Command = "Freeze_Execution",Command = "Freeze_Execution-R")
var(14) = 9

[State 5120]
type = VarSet
trigger1 = Time > 0
trigger1 = IfElse(FVar(5) = 0,Command = "MAX2",Command = "MAX2-R")
var(14) = 10

[State 5120]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(30) = 0
triggerall = AnimTime = 0
triggerall = Power >= 1000
trigger1 = Var(28) = 5
value = 2500

[State 5120]
type = ChangeState
triggerall = Var(59) != 1
triggerall = AnimTime = 0
trigger1 = Var(28) = 4
value = 80

[State 5120]
type = ChangeState
triggerall = Var(59) != 1
triggerall = AnimTime = 0
trigger1 = Var(28) = 3
value = 100

[State 5120]
type = ChangeState
triggerall = Var(59) != 1
triggerall = AnimTime = 0
trigger1 = Var(28) = 2
trigger2 = Var(28) = -2
value = 55

[State 5120]
type = ChangeState
triggerall = Var(59) != 1
triggerall = AnimTime = 0
trigger1 = Var(28) = -3
value = 105

[State 5120]
type = ChangeState
triggerall = Var(59) != 1
triggerall = AnimTime = 0
trigger1 = Var(28) = -4
value = 90

[State 5120]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = -3
trigger1 = AnimTime = 0
value = 270

[State 5120]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = -2
trigger1 = AnimTime = 0
value = 260

[State 5120]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = -1
trigger1 = AnimTime = 0
value = 220

[State 5120]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 1
trigger1 = AnimTime = 0
value = 1000

[State 5120]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 2
trigger1 = AnimTime = 0
value = 1100

[State 5120]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 3
trigger1 = AnimTime = 0
value = 1200

[State 5120]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 4
trigger1 = AnimTime = 0
value = 1210

[State 5120]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 5
trigger1 = AnimTime = 0
value = 1300

[State 5120]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 6
trigger1 = AnimTime = 0
value = 1400

[State 5120]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 7
trigger1 = AnimTime = 0
value = 1410

[State 5120]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(30) = 0
triggerall = Var(14) = 8
triggerall = Power >= 1000
trigger1 = AnimTime = 0
value = 3000

[State 5120]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(30) > 0
triggerall = Var(14) = 8
trigger1 = AnimTime = 0
value = 3000

[State 5120]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = [1,2]
triggerall = Var(30) = 0
triggerall = Var(14) = 9
triggerall = Power >= 3000
trigger1 = AnimTime = 0
value = 3500

[State 5120]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(30) > 0
triggerall = Var(14) = 9
triggerall = Power >= 1000
trigger1 = AnimTime = 0
value = 3500

[State 5120]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 2
triggerall = Var(30) = 0
triggerall = Var(14) = 10
triggerall = Power >= 3000
trigger1 = AnimTime = 0
value = 3900

[State 5120]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 1
triggerall = Var(30) = 0
triggerall = Var(14) = 10
triggerall = Power >= 3000
triggerall = Life <= 360
trigger1 = AnimTime = 0
value = 3900

[State 5120]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 0
triggerall = Var(30) > 0
triggerall = Var(14) = 10
triggerall = Power >= 1000
triggerall = Life <= 320
trigger1 = AnimTime = 0
value = 3900

[State 5120]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 2
triggerall = Var(30) > 0
triggerall = Var(14) = 10
triggerall = Power >= 1000
trigger1 = AnimTime = 0
value = 3900

[State 5120]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 1
triggerall = Var(30) > 0
triggerall = Var(14) = 10
triggerall = Power >= 1000
triggerall = Life <= 360
trigger1 = AnimTime = 0
value = 3900

[State 5120]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; HIT_LIEDEAD
[Statedef 5150]
type    = L
movetype= H
physics = N
sprpriority = -3

[State 5150]
type = Width
trigger1 = 1
edge = 0,-2

[State 5150]
type = ChangeAnim
triggerall = 1
triggerall = P2Name = "K-Core" || P4Name = "K-Core"
trigger1 = PrevStateNo = 303
value = 5111

[State 5150]
type = ChangeAnim
triggerall = 1
triggerall = P2Name = "K-Core" || P4Name = "K-Core"
trigger1 = PrevStateNo = 892
value = 5111

[State 5150]
type = ChangeAnim
triggerall = 1
trigger1 = PrevStateNo = 3093
value = 5111

[State 5150]
type = ChangeAnim
triggerall = 1
trigger1 = PrevStateNo = 6010
value = 5111

[State 5150]
type = ChangeState
triggerall = Enemy,MatchOver
triggerall = P2Name = "K-Core" || P4Name = "K-Core"
trigger1 = Time = 20
value = 5155

[State 5150]
type = ChangeAnim
triggerall = Time = 0
triggerall = SelfAnimExist(5140)
trigger1 = (Anim != [5111,5119]) && (Anim != [5171,5179])
trigger2 = !SelfAnimExist(5140+(Anim%10))
value = 5140

[State 5150]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (Anim = [5111,5119]) || (Anim = [5171,5179])
trigger1 = SelfAnimExist(5140+(Anim%10))
value = 5140+(anim%10)

[State 5150]
type = ChangeAnim
persistent = 0
trigger1 = MatchOver = 1
trigger1 = Anim = [5140,5149]
trigger1 = SelfAnimExist(anim+10)
value = anim+10

[State 5150]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = Anim != [5140,5159]
trigger1 = Anim != [5110,5119]
value = 5110

[State 5150]
type = VelMul
trigger1 = 1
x = 0.85

[State 5150]
type = VelSet
trigger1 = Vel X < .05
persistent = 0
x = 0

[State 5150]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; Lose(K-Core)
[Statedef 5155]
type = S
ctrl = 0
anim = 5115
velset = 0,0
facep2 = 1

[State 5155]
type = PosAdd
trigger1 = Time = 0
trigger1 = FrontEdgeDist <= 30
x = -31

[State 5155]
type = PosAdd
trigger1 = Time = 0
trigger1 = BackEdgeDist <= 30
x = 31

[State 5155]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 5155]
type = ChangeState
trigger1 = Enemy,Time = 12
trigger1 = Enemy,StateNo = 187
value = 5156

;---------------------------------------------------------------------------
; Lose(K-Core)
[Statedef 5156]
type = S
ctrl = 0
anim = 5116
velset = 0,0

[State 5156]
type = Null;PlaySnd
trigger1 = AnimElem = 2
value = 10,0

[State 5156]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; HIT_FALLRECOVER (still falling)
[Statedef 5200]
type = S
movetype = I
physics = S
anim = 5200
poweradd = 0
sprpriority = 2
facep2 = 1

[State 5200]
type = Width
trigger1 = 1
edge = 0,-2

[State 5200]
type = VarSet
trigger1 = AnimTime = 0
var(3) = 0

[State 5200]
type = SprPriority
trigger1 = Time = 0
value = -2

[State 5200]
type = NotHitBy
trigger1 = 1
value = SCA

[State 5200]
type = PlaySnd
trigger1 = Time = 0
value = 3,17

[State 5200]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5200]
type = PosSet
trigger1 = Time >= 0
y = 0

[State 5200]
type = PosAdd
trigger1 = Time = 0
x = -10

[State 5200]
type = PosAdd
trigger1 = Time = 1
x = -8

[State 5200]
type = PosAdd
trigger1 = Time = [2,3]
x = -6

[State 5200]
type = PosAdd
trigger1 = Time = 4
x = -4

[State 5200]
type = PosAdd
trigger1 = Time = [5,6]
x = -3

[State 5200]
type = PosAdd
trigger1 = Time = [7,9]
x = -2

[State 5200]
type = PosAdd
trigger1 = Time = [10,12]
trigger2 = Time = 14
trigger3 = Time = 16
trigger4 = Time = 20
x = -1

[State 5200]
type = NotHitBy
trigger1 = AnimTime = 0
value = ,NT,ST
time = 5

[State 5200]
type = VarSet
trigger1 = Time = 0
var(28) = 0

[State 5200]
type = VarSet
triggerall = Time > 10
trigger1 = Command = "a+y"
var(28) = 5

[State 5200]
type = VarSet
triggerall = Time > 10
trigger1 = Command = "Recovery" && !Command = "HoldBack"
var(28) = 4

[State 5200]
type = VarSet
triggerall = Time > 10
trigger1 = Command = "FF"
var(28) = 3

[State 5200]
type = VarSet
triggerall = Time > 0
triggerall = Facing*Enemy,Facing = -1
trigger1 = Command = "LongJumpFwd"
var(28) = 2

[State 5200]
type = VarSet
triggerall = Time > 0
triggerall = Facing*Enemy,Facing = -1
trigger1 = Command = "LongJumpBack"
var(28) = -2

[State 5200]
type = VarSet
triggerall = Time > 10
trigger1 = Command = "BB"
var(28) = -3

[State 5200]
type = VarSet
triggerall = Time > 10
trigger1 = Command = "Recovery" && Command = "HoldBack"
var(28) = -4

[State 5200]
type = VarSet
trigger1 = Time = 0
var(14) = 0

[State 5200]
type = VarSet
trigger1 = Time > 10
trigger1 = IfElse(FVar(5) = 0,Command = "Critical_Ice",Command = "Critical_Ice-R")
var(14) = -3

[State 5200]
type = VarSet
trigger1 = Time > 10
trigger1 = IfElse(FVar(5) = 0,Command = "Sliding_Kick",Command = "Sliding_Kick-R")
var(14) = -2

[State 5200]
type = VarSet
trigger1 = Time > 10
trigger1 = IfElse(FVar(5) = 0,Command = "One_Inch",Command = "One_Inch-R")
var(14) = -1

[State 5200]
type = VarSet
trigger1 = Time > 5
trigger1 = IfElse(FVar(5) = 0,Command = "Diamond_Breath_A",Command = "Diamond_Breath_A-R")
var(14) = 1

[State 5200]
type = VarSet
trigger1 = Time > 5
trigger1 = IfElse(FVar(5) = 0,Command = "Diamond_Breath_C",Command = "Diamond_Breath_C-R")
var(14) = 2

[State 5200]
type = VarSet
trigger1 = Time > 0
trigger1 = IfElse(FVar(5) = 0,Command = "Crow_Bites_A",Command = "Crow_Bites_A-R")
var(14) = 3

[State 5200]
type = VarSet
trigger1 = Time > 0
trigger1 = IfElse(FVar(5) = 0,Command = "Crow_Bites_C",Command = "Crow_Bites_C-R")
var(14) = 4

[State 5200]
type = VarSet
trigger1 = Time > 5
trigger1 = IfElse(FVar(5) = 0,Command = "Counter_Shell",Command = "Counter_Shell-R")
var(14) = 5

[State 5200]
type = VarSet
trigger1 = Time > 5
trigger1 = IfElse(FVar(5) = 0,Command = "Ray_Spin_B",Command = "Ray_Spin_B-R")
var(14) = 6

[State 5200]
type = VarSet
trigger1 = Time > 5
trigger1 = IfElse(FVar(5) = 0,Command = "Ray_Spin_D",Command = "Ray_Spin_D-R")
var(14) = 7

[State 5200]
type = VarSet
trigger1 = Time > 0
trigger1 = IfElse(FVar(5) = 0,Command = "Diamond_Edge",Command = "Diamond_Edge-R")
var(14) = 8

[State 5200]
type = VarSet
trigger1 = Time > 0
trigger1 = IfElse(FVar(5) = 0,Command = "Freeze_Execution",Command = "Freeze_Execution-R")
var(14) = 9

[State 5200]
type = VarSet
trigger1 = Time > 0
trigger1 = IfElse(FVar(5) = 0,Command = "MAX2",Command = "MAX2-R")
var(14) = 10

[State 5200]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(30) = 0
triggerall = Time = 24
triggerall = Power >= 1000
trigger1 = Var(28) = 5
value = 2500

[State 5200]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Time = 24
trigger1 = Var(28) = 4
value = 80

[State 5200]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Time = 24
trigger1 = Var(28) = 3
value = 100

[State 5200]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Time = 24
trigger1 = Var(28) = 2
trigger2 = Var(28) = -2
value = 55

[State 5200]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Time = 24
trigger1 = Var(28) = -3
value = 105

[State 5200]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Time = 24
trigger1 = Var(28) = -4
value = 90

[State 5200]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = -3
trigger1 = Time = 24
value = 270

[State 5200]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = -2
trigger1 = Time = 24
value = 260

[State 5200]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = -1
trigger1 = Time = 24
value = 220

[State 5200]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 1
trigger1 = Time = 24
value = 1000

[State 5200]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 2
trigger1 = Time = 24
value = 1100

[State 5200]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 3
trigger1 = Time = 24
value = 1200

[State 5200]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 4
trigger1 = Time = 24
value = 1210

[State 5200]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 5
trigger1 = Time = 24
value = 1300

[State 5200]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 6
trigger1 = Time = 24
value = 1400

[State 5200]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 7
trigger1 = Time = 24
value = 1410

[State 5200]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(30) = 0
triggerall = Var(14) = 8
triggerall = Power >= 1000
trigger1 = Time = 24
value = 3000

[State 5200]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(30) > 0
triggerall = Var(14) = 8
trigger1 = Time = 24
value = 3000

[State 5200]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = [1,2]
triggerall = Var(30) = 0
triggerall = Var(14) = 9
triggerall = Power >= 3000
trigger1 = Time = 24
value = 3500

[State 5200]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(30) > 0
triggerall = Var(14) = 9
triggerall = Power >= 1000
trigger1 = Time = 24
value = 3500

[State 5200]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 2
triggerall = Var(30) = 0
triggerall = Var(14) = 10
triggerall = Power >= 3000
trigger1 = Time = 24
value = 3900

[State 5200]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 1
triggerall = Var(30) = 0
triggerall = Var(14) = 10
triggerall = Power >= 3000
triggerall = Life <= 360
trigger1 = Time = 24
value = 3900

[State 5200]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 0
triggerall = Var(30) > 0
triggerall = Var(14) = 10
triggerall = Power >= 1000
triggerall = Life <= 320
trigger1 = Time = 24
value = 3900

[State 5200]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 2
triggerall = Var(30) > 0
triggerall = Var(14) = 10
triggerall = Power >= 1000
trigger1 = Time = 24
value = 3900

[State 5200]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 1
triggerall = Var(30) > 0
triggerall = Var(14) = 10
triggerall = Power >= 1000
triggerall = Life <= 360
trigger1 = Time = 24
value = 3900

[State 5200]
type = CtrlSet
trigger1 = Time = 24
value = 1

[State 5200]
type = ChangeState
trigger1 = Var(59) = 1
trigger1 = Time = 24
value = 120
ctrl = 1

[State 5200]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; HIT_FALLRECOVER (still falling)
[Statedef 5201]
type = S
movetype = I
physics = S
anim = 5200
poweradd = 0
sprpriority = 2
facep2 = 1

[State 5201]
type = SprPriority
trigger1 = Time = 0
value = -2

[State 5201]
type = NotHitBy
trigger1 = 1
value = SCA

[State 5201]
type = PlaySnd
trigger1 = Time = 0
value = 3,17

[State 5201]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5201]
type = PosSet
trigger1 = Time >= 0
y = 0

[State 5201]
type = PosAdd
trigger1 = Time = 0
x = -10

[State 5201]
type = PosAdd
trigger1 = Time = 1
x = -8

[State 5201]
type = PosAdd
trigger1 = Time = [2,3]
x = -6

[State 5201]
type = PosAdd
trigger1 = Time = 4
x = -4

[State 5201]
type = PosAdd
trigger1 = Time = [5,6]
x = -3

[State 5201]
type = PosAdd
trigger1 = Time = [7,9]
x = -2

[State 5201]
type = PosAdd
trigger1 = Time = [10,12]
trigger2 = Time = 14
trigger3 = Time = 16
trigger4 = Time = 20
x = -1

[State 5201]
type = VarSet
trigger1 = Time = 0
var(14) = 0

[State 5201]
type = VarSet
trigger1 = Time > 10
trigger1 = IfElse(FVar(5) = 0,Command = "Critical_Ice",Command = "Critical_Ice-R")
var(14) = -3

[State 5201]
type = VarSet
trigger1 = Time > 10
trigger1 = IfElse(FVar(5) = 0,Command = "Sliding_Kick",Command = "Sliding_Kick-R")
var(14) = -2

[State 5201]
type = VarSet
trigger1 = Time > 10
trigger1 = IfElse(FVar(5) = 0,Command = "One_Inch",Command = "One_Inch-R")
var(14) = -1

[State 5201]
type = VarSet
trigger1 = Time > 5
trigger1 = IfElse(FVar(5) = 0,Command = "Diamond_Breath_A",Command = "Diamond_Breath_A-R")
var(14) = 1

[State 5201]
type = VarSet
trigger1 = Time > 5
trigger1 = IfElse(FVar(5) = 0,Command = "Diamond_Breath_C",Command = "Diamond_Breath_C-R")
var(14) = 2

[State 5201]
type = VarSet
trigger1 = Time > 0
trigger1 = IfElse(FVar(5) = 0,Command = "Crow_Bites_A",Command = "Crow_Bites_A-R")
var(14) = 3

[State 5201]
type = VarSet
trigger1 = Time > 0
trigger1 = IfElse(FVar(5) = 0,Command = "Crow_Bites_C",Command = "Crow_Bites_C-R")
var(14) = 4

[State 5201]
type = VarSet
trigger1 = Time > 5
trigger1 = IfElse(FVar(5) = 0,Command = "Counter_Shell",Command = "Counter_Shell-R")
var(14) = 5

[State 5201]
type = VarSet
trigger1 = Time > 5
trigger1 = IfElse(FVar(5) = 0,Command = "Ray_Spin_B",Command = "Ray_Spin_B-R")
var(14) = 6

[State 5201]
type = VarSet
trigger1 = Time > 5
trigger1 = IfElse(FVar(5) = 0,Command = "Ray_Spin_D",Command = "Ray_Spin_D-R")
var(14) = 7

[State 5201]
type = VarSet
trigger1 = Time > 0
trigger1 = IfElse(FVar(5) = 0,Command = "Diamond_Edge",Command = "Diamond_Edge-R")
var(14) = 8

[State 5201]
type = VarSet
trigger1 = Time > 0
trigger1 = IfElse(FVar(5) = 0,Command = "Freeze_Execution",Command = "Freeze_Execution-R")
var(14) = 9

[State 5201]
type = VarSet
trigger1 = Time > 0
trigger1 = IfElse(FVar(5) = 0,Command = "MAX2",Command = "MAX2-R")
var(14) = 10

[State 5201]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = -3
trigger1 = AnimTime = 0
value = 270

[State 5201]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = -2
trigger1 = AnimTime = 0
value = 260

[State 5201]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = -1
trigger1 = AnimTime = 0
value = 220

[State 5201]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 1
trigger1 = AnimTime = 0
value = 1000

[State 5201]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 2
trigger1 = AnimTime = 0
value = 1100

[State 5201]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 3
trigger1 = AnimTime = 0
value = 1200

[State 5201]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 4
trigger1 = AnimTime = 0
value = 1210

[State 5201]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 5
trigger1 = AnimTime = 0
value = 1300

[State 5201]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 6
trigger1 = AnimTime = 0
value = 1400

[State 5201]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(14) = 7
trigger1 = AnimTime = 0
value = 1410

[State 5201]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(30) = 0
triggerall = Var(14) = 8
triggerall = Power >= 1000
trigger1 = AnimTime = 0
value = 3000

[State 5201]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(30) > 0
triggerall = Var(14) = 8
trigger1 = AnimTime = 0
value = 3000

[State 5201]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = [1,2]
triggerall = Var(30) = 0
triggerall = Var(14) = 9
triggerall = Power >= 3000
trigger1 = AnimTime = 0
value = 3500

[State 5201]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(30) > 0
triggerall = Var(14) = 9
triggerall = Power >= 1000
trigger1 = AnimTime = 0
value = 3500

[State 5201]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 2
triggerall = Var(30) = 0
triggerall = Var(14) = 10
triggerall = Power >= 3000
trigger1 = AnimTime = 0
value = 3900

[State 5201]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 1
triggerall = Var(30) = 0
triggerall = Var(14) = 10
triggerall = Power >= 3000
triggerall = Life <= 360
trigger1 = AnimTime = 0
value = 3900

[State 5201]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 0
triggerall = Var(30) > 0
triggerall = Var(14) = 10
triggerall = Power >= 1000
triggerall = Life <= 320
trigger1 = AnimTime = 0
value = 3900

[State 5201]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 2
triggerall = Var(30) > 0
triggerall = Var(14) = 10
triggerall = Power >= 1000
trigger1 = AnimTime = 0
value = 3900

[State 5201]
type = ChangeState
triggerall = Var(59) != 1
triggerall = Var(49) = 1
triggerall = Var(30) > 0
triggerall = Var(14) = 10
triggerall = Power >= 1000
triggerall = Life <= 360
trigger1 = AnimTime = 0
value = 3900

[State 5201]
type = ChangeState
trigger1 = Var(59) = 1
trigger1 = AnimTime = 0
value = 120
ctrl = 1

[State 5201]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Continue?
[Statedef 5500]
type = S
ctrl = 0
anim = 5300
velset = 0,0

[State 5500]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5500)
value = 5500

;---------------------------------------------------------------------------
; Initialize (at the start of the round)
[Statedef 5900]
type = S

[State 5900]
type = VarRangeSet
trigger1 = RoundsExisted = 0
value = 0

[State 5900]
type = VarRangeSet
trigger1 = RoundsExisted = 0
fvalue = 0

[State 5900]
type = Helper
triggerall = NumHelper(1) = 0
trigger1 = RoundNo != 1
name = "Ice"
ID = 1
pos = 0,0
postype = P1
stateno = 1
keyctrl = 0
ownpal = 1

[State 5900]
type = ChangeState
trigger1 = RoundNo = 1
value = 190

[State 5900]
type = ChangeState
triggerall = RoundsExisted = 0
triggerall = TeamMode = Turns
trigger1 = RoundNo >= 1
value = 186

[State 5900]
type = VarSet
triggerall = RoundsExisted = 0
trigger1 = RoundNo >= 1
var(30) = 0

[State 5900]
type = VarSet
triggerall = RoundsExisted = 0
triggerall = TeamMode = Turns
trigger1 = RoundNo >= 1
var(32) = 0

[State 5900]
type = VarSet
triggerall = RoundsExisted = 0
triggerall = TeamMode = Turns
trigger1 = RoundNo >= 1
var(33) = 0

[State 5900]
type = VarSet
triggerall = RoundsExisted = 0
triggerall = TeamMode = Turns
trigger1 = RoundNo >= 1
var(34) = 0

[State 5900]
type = VarSet
triggerall = RoundsExisted = 0
triggerall = TeamMode = Turns
trigger1 = RoundNo >= 1
var(36) = 0

[State 5900]
type = VarSet
triggerall = RoundsExisted = 0
triggerall = TeamMode = Turns
trigger1 = RoundNo >= 1
var(37) = 0

[State 5900]
type = VarSet
triggerall = RoundsExisted = 0
triggerall = TeamMode = Turns
trigger1 = RoundNo >= 1
var(38) = 0

[State 5900]
type = VarSet
triggerall = RoundsExisted = 0
triggerall = TeamMode = Turns
trigger1 = RoundNo >= 1
var(43) = 0

[State 5900]
type = VarSet
triggerall = RoundsExisted = 0
triggerall = TeamMode = Turns
trigger1 = RoundNo >= 1
var(44) = 0

[State 5900]
type = VarSet
triggerall = RoundsExisted = 0
triggerall = TeamMode = Turns
trigger1 = RoundNo >= 1
var(45) = 0

[State 5900]
type = VarSet
triggerall = RoundsExisted = 0
triggerall = TeamMode = Turns
trigger1 = RoundNo >= 1
var(46) = 0

[State 5900]
type = VarSet
triggerall = RoundsExisted = 0
triggerall = TeamMode = Turns
trigger1 = RoundNo >= 1
var(47) = 0

[State 5900]
type = VarSet
triggerall = RoundsExisted = 0
triggerall = TeamMode = Turns
trigger1 = RoundNo >= 1
var(48) = 0

[State 5900]
type = VarSet
triggerall = RoundsExisted = 0
triggerall = TeamMode = Turns
trigger1 = RoundNo >= 1
var(51) = 0

[State 5900]
type = VarSet
triggerall = RoundsExisted = 0
triggerall = TeamMode = Turns
trigger1 = RoundNo >= 1
var(52) = 0

[State 5900]
type = VarSet
triggerall = RoundsExisted = 0
triggerall = TeamMode = Turns
trigger1 = RoundNo >= 1
var(53) = 0

[State 5900]
type = VarSet
triggerall = RoundsExisted = 0
triggerall = TeamMode = Turns
trigger1 = RoundNo >= 1
var(54) = 0

[State 5900]
type = VarSet
triggerall = RoundsExisted = 0
triggerall = TeamMode = Turns
trigger1 = RoundNo >= 1
var(55) = 0

[State 5900]
type = VarSet
triggerall = RoundsExisted = 0
triggerall = TeamMode = Turns
trigger1 = RoundNo >= 1
var(56) = 0

[State 5900]
type = VarSet
trigger1 = 1
var(58) = 0

;---------------------------------------------------------------------------------------
; Guarding KO
[Statedef 6010]
type = S
physics = S
poweradd = 0
sprpriority = 8
velset = 0,0
ctrl = 0
facep2 = 1

[State 6010]
type = Width
trigger1 = 1
edge = 0,-2

[State 6010]
type = NotHitBy
trigger1 = 1
value = SCA

[State 6010]
type = PosAdd
trigger1 = Time = 0
x = -5

[State 6010]
type = PosAdd
trigger1 = Time = 1
x = -4

[State 6010]
type = PosAdd
trigger1 = Time = 2
x = -3

[State 6010]
type = PosAdd
trigger1 = Time = 3
x = -2

[State 6010]
type = PosAdd
trigger1 = Time = 4
x = -1

[State 6010]
type = PosAdd
trigger1 = AnimTime = 0
x = 30

[State 6010]
type = ChangeAnim
trigger1 = Time = 0
triggerall = NumHelper(6969) = 0
value = 6010

[State 6010]
type = PalFX
trigger1 = Time = 0
time = 0

[State 6010]
type = ChangeState
trigger1 = Pos Y != 0
value = 5000

[State 6010]
type = ChangeState
trigger1 = AnimTime = 0
value = 5150

;---------------------------------------------------------------------------
;  1
[Statedef 6100]
type    = A
movetype= H
physics = N
velset = 0,0

[State 6100]
type = StopSnd
trigger1 = 1
channel = 4

[State 6100]
type = ChangeAnim
trigger1 = Enemy,Var(31) = 1
trigger1 = Time = 0
trigger1 = GetHitVar(AnimType) != [3,5]
value = ifelse((gethitvar(AirType) = 1),5000,5010)+gethitvar(AnimType)

[State 6100]
type = ChangeAnim
trigger1 = Enemy,Var(31) = 1
trigger1 = Time = 0
trigger1 = GetHitVar(AnimType) = [3,5]
value = ifelse(gethitvar(YVel) < 0,5030+(ifelse(gethitvar(YVel) < -11,1,0)),5058)+ifelse((gethitvar(YVel) > -11 && gethitvar(YVel) < 0) && gethitvar(GroundType)= 2,4,0)

[State 6100]
type = ChangeAnim
trigger1 = Enemy,Var(31) = 1
trigger1 = Time = 0
trigger1 = (GetHitVar(AnimType) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(AnimType)))
value = (5047+gethitvar(AnimType))+(ifelse(gethitvar(AnimType) = 4 && gethitvar(YVel) < -11,4,0))+ifelse(gethitvar(AnimType) = 5 && P2StateNo >= 3000,5,0)

[State 6100]
type = ChangeAnim2
trigger1 = Enemy,Var(31) != 1
trigger1 = Time = 0
trigger1 = GetHitVar(AnimType) != [3,5]
value = ifelse((gethitvar(AirType) = 1),5000,5010)+gethitvar(AnimType)

[State 6100]
type = ChangeAnim2
trigger1 = Enemy,Var(31) != 1
trigger1 = Time = 0
trigger1 = GetHitVar(AnimType) = [3,5]
value = ifelse(gethitvar(YVel) < 0,5030+(ifelse(gethitvar(YVel) < -11,1,0)),5058)+ifelse((gethitvar(YVel) > -11 && gethitvar(YVel) < 0) && gethitvar(GroundType)= 2,4,0)

[State 6100]
type = ChangeAnim2
trigger1 = Enemy,Var(31) != 1
trigger1 = Time = 0
trigger1 = (GetHitVar(AnimType) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(AnimType)))
value = (5047+gethitvar(AnimType))+(ifelse(gethitvar(AnimType) = 4 && gethitvar(YVel) < -11,4,0))+ifelse(gethitvar(AnimType) = 5 && P2StateNo >= 3000,5,0)

[State 6100]
type = ChangeAnim
trigger1 = Enemy,Var(31) = 1
trigger1 = Time > 0
value = anim

[State 6100]
type = ChangeAnim2
trigger1 = Enemy,Var(31) != 1
trigger1 = Time > 0
value = 5030

[State 6100]
type = ChangeState
trigger1 = HitShakeOver
value = 6101

[State 6100]
type = ForceFeedBack
trigger1 = Anim = 5000
trigger2 = Anim = 5010
persistent = 0
time = 6
waveform = Square

[State 6100]
type = ForceFeedBack
trigger1 = Anim = 5001
trigger2 = Anim = 5011
persistent = 0
time = 8
waveform = SineSquare
ampl = 110,-1,-.3

[State 6100]
type = ForceFeedBack
trigger1 = Anim = 5012
trigger2 = Anim = 5002
trigger3 = Anim = 5030
trigger4 = Anim = [5051,5059]
persistent = 0
time = 15
waveform = SineSquare
ampl = 140

;---------------------------------------------------------------------------
; HITA_UP (initial going up)
[Statedef 6101]
type    = A
movetype= H
physics = N
ctrl = 0

[State 6101]
type = VelAdd
trigger1 = 1
y = 0.523

[State 6101]
type = VelSet
triggerall = Facing*Enemy,Facing = -1
trigger1 = Time = 0
x = -4.64
y = -8.09

[State 6101]
type = VelSet
triggerall = Facing*Enemy,Facing = 1
trigger1 = Time = 0
x = 4.64
y = -8.09

[State 6101]
type = ChangeState
trigger1 = HitOver
trigger2 = Vel Y > 0
trigger2 = Pos Y >= 0
value = 6103

[State 6101]
type = ChangeState
trigger1 = AnimTime = 0
value = 6102

;---------------------------------------------------------------------------
; HITA_UP_T (transition)
[Statedef 6102]
type    = A
movetype= H
physics = N

[State 6102]
type = ChangeAnim
triggerall = Enemy,Var(31) = 1
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0
trigger2 = Anim != 5035
trigger2 = (Anim != [5051,5059]) && (Anim != [5061,5069])
trigger2 = Anim != 5090
value = 5050+(ifelse(anim = 5031,6,0))+ifelse((gethitvar(YVel) > -11 && gethitvar(YVel) < 0) && gethitvar(GroundType) = 2,4,0)

[State 6102]
type = ChangeAnim
triggerall = Enemy,Var(31) = 1
trigger1 = Anim = [5050,5059]
trigger1 = SelfAnimExist(Anim+10)
value = anim+10
persistent = 0

[State 6102]
type = ChangeAnim2
triggerall = Enemy,Var(31) != 1
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0
trigger2 = Anim != 5035
trigger2 = (Anim != [5051,5059]) && (Anim != [5061,5069])
trigger2 = Anim != 5090
value = 5054

[State 6102]
type = ChangeAnim2
triggerall = Enemy,Var(31) != 1
trigger1 = Anim = [5050,5059]
trigger1 = SelfAnimExist(Anim+10)
value = anim+10
persistent = 0

[State 6102]
type = VelAdd
trigger1 = 1
y = gethitvar(Yaccel)

[State 6102]
type = ChangeState
trigger1 = HitOver
trigger2 = AnimTime = 0
trigger3 = Vel Y > 0
trigger3 = Pos Y >= 0
trigger4 = Time = 0
trigger4 = Anim != 5035
value = 6103

;---------------------------------------------------------------------------
; HITA_FALL (knocked up, falling)
[Statedef 6103]
type    = A
movetype= H
physics = N

[State 6103]
type = ChangeAnim
triggerall = Enemy,Var(31) = 1
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0
trigger2 = Anim != 5035
trigger2 = (Anim != [5051,5059]) && (Anim != [5061,5069])
trigger2 = Anim != 5090
value = 5050

[State 6103]
type = ChangeAnim
triggerall = Enemy,Var(31) = 1
trigger1 = Anim = [5050,5059]
trigger1 = Vel Y >= IfElse(Anim = 5050,1,-2)
trigger1 = SelfAnimExist(Anim+10)
value = anim+10
persistent = 0

[State 6103]
type = ChangeAnim2
triggerall = Enemy,Var(31) != 1
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0
trigger2 = Anim != 5035
trigger2 = (Anim != [5051,5059]) && (Anim != [5061,5069])
trigger2 = Anim != 5090
value = 5050

[State 6103]
type = ChangeAnim2
triggerall = Enemy,Var(31) != 1
trigger1 = Anim = [5050,5059]
trigger1 = Vel Y >= IfElse(Anim = 5050,1,-2)
trigger1 = SelfAnimExist(Anim+10)
value = anim+10
persistent = 0

[State 6103]
type = VelAdd
trigger1 = 1
y = gethitvar(Yaccel)

[State 6103]
type = VarSet
triggerall = AuthorName = "German"
trigger1 = Time = 0
var(2) = 0
ignorehitpause = 1

[State 6103]
type = VarSet
triggerall = AuthorName = "German"
triggerall = Alive && Vel Y > 0 && Pos Y >= -60
trigger1 = Var(59) = 0
trigger1 = Command = "Recovery"
trigger2 = Var(59) = 1
var(2) = 1
ignorehitpause = 1

[State 6103]
type = SelfState
triggerall = AuthorName = "German"
triggerall = Pos Y >= -12 && Vel Y > 0
triggerall = GetHitVar(YVel) < -1
triggerall = Alive
trigger1 = Var(59) = 0
trigger1 = Var(2) = 1
trigger2 = Var(59) = 1
value = 5200

[State 6103]
type = SelfState
trigger1 = Pos Y >= -12 && Vel Y > 0
value = 5100

;---------------------------------------------------------------------------
;  2
[Statedef 6110]
type    = A
movetype= H
physics = N
velset = 0,0

[State 6110]
type = StopSnd
trigger1 = 1
channel = 4

[State 6110]
type = ChangeAnim
trigger1 = Enemy,Var(31) = 1
trigger1 = Time = 0
trigger1 = GetHitVar(AnimType) != [3,5]
value = ifelse((gethitvar(AirType) = 1),5000,5010)+gethitvar(AnimType)

[State 6110]
type = ChangeAnim
trigger1 = Enemy,Var(31) = 1
trigger1 = Time = 0
trigger1 = GetHitVar(AnimType) = [3,5]
value = ifelse(gethitvar(YVel) < 0,5030+(ifelse(gethitvar(YVel) < -11,1,0)),5058)+ifelse((gethitvar(YVel) > -11 && gethitvar(YVel) < 0) && gethitvar(GroundType)= 2,4,0)

[State 6110]
type = ChangeAnim
trigger1 = Enemy,Var(31) = 1
trigger1 = Time = 0
trigger1 = (GetHitVar(AnimType) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(AnimType)))
value = (5047+gethitvar(AnimType))+(ifelse(gethitvar(AnimType) = 4 && gethitvar(YVel) < -11,4,0))+ifelse(gethitvar(AnimType) = 5 && P2StateNo >= 3000,5,0)

[State 6110]
type = ChangeAnim2
trigger1 = Enemy,Var(31) != 1
trigger1 = Time = 0
trigger1 = GetHitVar(AnimType) != [3,5]
value = ifelse((gethitvar(AirType) = 1),5000,5010)+gethitvar(AnimType)

[State 6110]
type = ChangeAnim2
trigger1 = Enemy,Var(31) != 1
trigger1 = Time = 0
trigger1 = GetHitVar(AnimType) = [3,5]
value = ifelse(gethitvar(YVel) < 0,5030+(ifelse(gethitvar(YVel) < -11,1,0)),5058)+ifelse((gethitvar(YVel) > -11 && gethitvar(YVel) < 0) && gethitvar(GroundType)= 2,4,0)

[State 6110]
type = ChangeAnim2
trigger1 = Enemy,Var(31) != 1
trigger1 = Time = 0
trigger1 = (GetHitVar(AnimType) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(AnimType)))
value = (5047+gethitvar(AnimType))+(ifelse(gethitvar(AnimType) = 4 && gethitvar(YVel) < -11,4,0))+ifelse(gethitvar(AnimType) = 5 && P2StateNo >= 3000,5,0)

[State 6110]
type = ChangeAnim
trigger1 = Enemy,Var(31) = 1
trigger1 = Time > 0
value = anim

[State 6110]
type = ChangeAnim2
trigger1 = Enemy,Var(31) != 1
trigger1 = Time > 0
value = 5030

[State 6110]
type = ChangeState
trigger1 = HitShakeOver
value = 6111

[State 6110]
type = ForceFeedBack
trigger1 = Anim = 5000
trigger2 = Anim = 5010
persistent = 0
time = 6
waveform = Square

[State 6110]
type = ForceFeedBack
trigger1 = Anim = 5001
trigger2 = Anim = 5011
persistent = 0
time = 8
waveform = SineSquare
ampl = 110,-1,-.3

[State 6110]
type = ForceFeedBack
trigger1 = Anim = 5012
trigger2 = Anim = 5002
trigger3 = Anim = 5030
trigger4 = Anim = [5051,5059]
persistent = 0
time = 15
waveform = SineSquare
ampl = 140

;---------------------------------------------------------------------------
; HITA_UP (initial going up)
[Statedef 6111]
type    = A
movetype= H
physics = N
ctrl = 0

[State 6111]
type = VelAdd
trigger1 = 1
y = 0.523

[State 6111]
type = VelSet
triggerall = Facing*Enemy,Facing = -1
trigger1 = Time = 0
x = -6.98
y = -8.09

[State 6111]
type = VelSet
triggerall = Facing*Enemy,Facing = 1
trigger1 = Time = 0
x = 6.98
y = -8.09

[State 6111]
type = ChangeState
trigger1 = HitOver
trigger2 = Vel Y > 0
trigger2 = Pos Y >= 0
value = 6113

[State 6111]
type = ChangeState
trigger1 = AnimTime = 0
value = 6112

;---------------------------------------------------------------------------
; HITA_UP_T (transition)
[Statedef 6112]
type    = A
movetype= H
physics = N

[State 6112]
type = ChangeAnim
triggerall = Enemy,Var(31) = 1
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0
trigger2 = Anim != 5035
trigger2 = (Anim != [5051,5059]) && (Anim != [5061,5069])
trigger2 = Anim != 5090
value = 5050+(ifelse(anim = 5031,6,0))+ifelse((gethitvar(YVel) > -11 && gethitvar(YVel) < 0) && gethitvar(GroundType) = 2,4,0)

[State 6112]
type = ChangeAnim
triggerall = Enemy,Var(31) = 1
trigger1 = Anim = [5050,5059]
trigger1 = SelfAnimExist(Anim+10)
value = anim+10
persistent = 0

[State 6112]
type = ChangeAnim2
triggerall = Enemy,Var(31) != 1
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0
trigger2 = Anim != 5035
trigger2 = (Anim != [5051,5059]) && (Anim != [5061,5069])
trigger2 = Anim != 5090
value = 5054

[State 6112]
type = ChangeAnim2
triggerall = Enemy,Var(31) != 1
trigger1 = Anim = [5050,5059]
trigger1 = SelfAnimExist(Anim+10)
value = anim+10
persistent = 0

[State 6112]
type = VelAdd
trigger1 = 1
y = gethitvar(Yaccel)

[State 6112]
type = ChangeState
trigger1 = HitOver
trigger2 = AnimTime = 0
trigger3 = Vel Y > 0
trigger3 = Pos Y >= 0
trigger4 = Time = 0
trigger4 = Anim != 5035
value = 6113

;---------------------------------------------------------------------------
; HITA_FALL (knocked up, falling)
[Statedef 6113]
type    = A
movetype= H
physics = N

[State 6113]
type = ChangeAnim
triggerall = Enemy,Var(31) = 1
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0
trigger2 = Anim != 5035
trigger2 = (Anim != [5051,5059]) && (Anim != [5061,5069])
trigger2 = Anim != 5090
value = 5050

[State 6113]
type = ChangeAnim
triggerall = Enemy,Var(31) = 1
trigger1 = Anim = [5050,5059]
trigger1 = Vel Y >= IfElse(Anim = 5050,1,-2)
trigger1 = SelfAnimExist(Anim+10)
value = anim+10
persistent = 0

[State 6113]
type = ChangeAnim2
triggerall = Enemy,Var(31) != 1
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0
trigger2 = Anim != 5035
trigger2 = (Anim != [5051,5059]) && (Anim != [5061,5069])
trigger2 = Anim != 5090
value = 5050

[State 6113]
type = ChangeAnim2
triggerall = Enemy,Var(31) != 1
trigger1 = Anim = [5050,5059]
trigger1 = Vel Y >= IfElse(Anim = 5050,1,-2)
trigger1 = SelfAnimExist(Anim+10)
value = anim+10
persistent = 0

[State 6113]
type = VelAdd
trigger1 = 1
y = gethitvar(Yaccel)

[State 6113]
type = VarSet
triggerall = AuthorName = "German"
trigger1 = Time = 0
var(2) = 0
ignorehitpause = 1

[State 6113]
type = VarSet
triggerall = AuthorName = "German"
triggerall = Alive && Vel Y > 0 && Pos Y >= -60
trigger1 = Var(59) = 0
trigger1 = Command = "Recovery"
trigger2 = Var(59) = 1
var(2) = 1
ignorehitpause = 1

[State 6113]
type = SelfState
triggerall = AuthorName = "German"
triggerall = Pos Y >= -12 && Vel Y > 0
triggerall = GetHitVar(YVel) < -1
triggerall = Alive
trigger1 = Var(59) = 0
trigger1 = Var(2) = 1
trigger2 = Var(59) = 1
value = 5200

[State 6113]
type = SelfState
trigger1 = Pos Y >= -12 && Vel Y > 0
value = 5100

;---------------------------------------------------------------------------
;  3
[Statedef 6150]
type    = A
movetype= H
physics = N
velset = 0,0

[State 6150]
type = StopSnd
trigger1 = 1
channel = 4

[State 6150]
type = ChangeAnim
triggerall = Enemy,Var(31) = 1
trigger1 = Time = 0
trigger1 = GetHitVar(AnimType) != [3,5]
value = ifelse((gethitvar(AirType) = 1),5000,5010)+gethitvar(AnimType)

[State 6150]
type = ChangeAnim
triggerall = Enemy,Var(31) = 1
trigger1 = Time = 0
trigger1 = GetHitVar(AnimType) = [3,5]
value = ifelse(gethitvar(YVel) < 0,5030+(ifelse(gethitvar(YVel) < -11,1,0)),5058)+ifelse((gethitvar(YVel) > -11 && gethitvar(YVel) < 0) && gethitvar(GroundType)= 2,4,0)

[State 6150]
type = ChangeAnim
triggerall = Enemy,Var(31) = 1
trigger1 = Time = 0
trigger1 = (GetHitVar(AnimType) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(AnimType)))
value = (5047+gethitvar(AnimType))+(ifelse(gethitvar(AnimType) = 4 && gethitvar(YVel) < -11,4,0))+ifelse(gethitvar(AnimType) = 5 && P2StateNo >= 3000,5,0)

[State 6150]
type = ChangeAnim2
triggerall = Enemy,Var(31) != 1
trigger1 = Time = 0
trigger1 = GetHitVar(AnimType) != [3,5]
value = ifelse((gethitvar(AirType) = 1),5000,5010)+gethitvar(AnimType)

[State 6150]
type = ChangeAnim2
triggerall = Enemy,Var(31) != 1
trigger1 = Time = 0
trigger1 = GetHitVar(AnimType) = [3,5]
value = ifelse(gethitvar(YVel) < 0,5030+(ifelse(gethitvar(YVel) < -11,1,0)),5058)+ifelse((gethitvar(YVel) > -11 && gethitvar(YVel) < 0) && gethitvar(GroundType)= 2,4,0)

[State 6150]
type = ChangeAnim2
triggerall = Enemy,Var(31) != 1
trigger1 = Time = 0
trigger1 = GetHitVar(AnimType) = [4,5]
value = (5047+gethitvar(AnimType))+(ifelse(gethitvar(AnimType) = 4 && gethitvar(YVel) < -11,4,0))+ifelse(gethitvar(AnimType) = 5 && P2StateNo >= 3000,5,0)

[State 6150]
type = ChangeAnim
trigger1 = Enemy,Var(31) = 1
trigger1 = Time > 0
value = anim

[State 6150]
type = ChangeAnim2
trigger1 = Enemy,Var(31) != 1
trigger1 = Time > 0
value = 5030

[State 6150]
type = ChangeState
trigger1 = HitShakeOver
value = 6151

[State 6150]
type = ForceFeedBack
trigger1 = Anim = 5000
trigger2 = Anim = 5010
persistent = 0
time = 6
waveform = Square

[State 6150]
type = ForceFeedBack
trigger1 = Anim = 5001
trigger2 = Anim = 5011
persistent = 0
time = 8
waveform = SineSquare
ampl = 110,-1,-.3

[State 6150]
type = ForceFeedBack
trigger1 = Anim = 5012
trigger2 = Anim = 5002
trigger3 = Anim = 5030
trigger4 = Anim = [5051,5059]
persistent = 0
time = 15
waveform = SineSquare
ampl = 140

;---------------------------------------------------------------------------
; HITA_UP (initial going up)
[Statedef 6151]
type    = A
movetype= H
physics = N
ctrl = 0

[State 6151]
type = VelAdd
trigger1 = 1
y = 0.523

[State 6151]
type = VelSet
triggerall = Facing*Enemy,Facing = -1
trigger1 = Time = 0
x = -2.29
y = -11.46

[State 6151]
type = VelSet
triggerall = Facing*Enemy,Facing = 1
trigger1 = Time = 0
x = 2.29
y = -11.46

[State 6151]
type = ChangeState
trigger1 = HitOver
trigger2 = Vel Y > 0
trigger2 = Pos Y >= 0
value = 6153

[State 6151]
type = ChangeState
trigger1 = AnimTime = 0
value = 6152

;---------------------------------------------------------------------------
; HITA_UP_T (transition)
[Statedef 6152]
type    = A
movetype= H
physics = N

[State 6152]
type = ChangeAnim
triggerall = Enemy,Var(31) = 1
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0
trigger2 = Anim != 5035
trigger2 = (Anim != [5051,5059]) && (Anim != [5061,5069])
trigger2 = Anim != 5090
value = 5050+(ifelse(anim = 5031,6,0))+ifelse((gethitvar(YVel) > -11 && gethitvar(YVel) < 0) && gethitvar(GroundType) = 2,4,0)

[State 6152]
type = ChangeAnim
triggerall = Enemy,Var(31) = 1
trigger1 = Anim = [5050,5059]
trigger1 = SelfAnimExist(Anim+10)
value = anim+10
persistent = 0

[State 6152]
type = ChangeAnim2
triggerall = Enemy,Var(31) != 1
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0
trigger2 = Anim != 5035
trigger2 = (Anim != [5051,5059]) && (Anim != [5061,5069])
trigger2 = Anim != 5090
value = 5054

[State 6152]
type = ChangeAnim2
triggerall = Enemy,Var(31) != 1
trigger1 = Anim = [5050,5059]
trigger1 = SelfAnimExist(Anim+10)
value = anim+10
persistent = 0

[State 6152]
type = VelAdd
trigger1 = 1
y = gethitvar(Yaccel)

[State 6152]
type = ChangeState
trigger1 = HitOver
trigger2 = AnimTime = 0
trigger3 = Vel Y > 0
trigger3 = Pos Y >= 0
trigger4 = Time = 0
trigger4 = Anim != 5035
value = 6153

;---------------------------------------------------------------------------
; HITA_FALL (knocked up, falling)
[Statedef 6153]
type    = A
movetype= H
physics = N

[State 6153]
type = ChangeAnim
triggerall = Enemy,Var(31) = 1
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0
trigger2 = Anim != 5035
trigger2 = (Anim != [5051,5059]) && (Anim != [5061,5069])
trigger2 = Anim != 5090
value = 5050

[State 6153]
type = ChangeAnim
triggerall = Enemy,Var(31) = 1
trigger1 = Anim = [5050,5059]
trigger1 = Vel Y >= IfElse(Anim = 5050,1,-2)
trigger1 = SelfAnimExist(Anim+10)
value = anim+10
persistent = 0

[State 6153]
type = ChangeAnim2
triggerall = Enemy,Var(31) != 1
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0
trigger2 = Anim != 5035
trigger2 = (Anim != [5051,5059]) && (Anim != [5061,5069])
trigger2 = Anim != 5090
value = 5050

[State 6153]
type = ChangeAnim2
triggerall = Enemy,Var(31) != 1
trigger1 = Anim = [5050,5059]
trigger1 = Vel Y >= IfElse(Anim = 5050,1,-2)
trigger1 = SelfAnimExist(Anim+10)
value = anim+10
persistent = 0

[State 6153]
type = VelAdd
trigger1 = 1
y = gethitvar(Yaccel)

[State 6153]
type = VarSet
triggerall = AuthorName = "German"
trigger1 = Time = 0
var(2) = 0
ignorehitpause = 1

[State 6153]
type = VarSet
triggerall = AuthorName = "German"
triggerall = Alive && Vel Y > 0 && Pos Y >= -60
trigger1 = Var(59) = 0
trigger1 = Command = "Recovery"
trigger2 = Var(59) = 1
var(2) = 1
ignorehitpause = 1

[State 6153]
type = SelfState
triggerall = AuthorName = "German"
triggerall = Pos Y >= -12 && Vel Y > 0
triggerall = GetHitVar(YVel) < -1
triggerall = Alive
trigger1 = Var(59) = 0
trigger1 = Var(2) = 1
trigger2 = Var(59) = 1
value = 5200

[State 6153]
type = SelfState
trigger1 = Pos Y >= -12 && Vel Y > 0
value = 5100

;---------------------------------------------------------------------------
;  4
[Statedef 6160]
type    = A
movetype= H
physics = N
velset = 0,0

[State 6160]
type = StopSnd
trigger1 = 1
channel = 4

[State 6160]
type = ChangeAnim
triggerall = Enemy,Var(31) = 1
trigger1 = Time = 0
trigger1 = GetHitVar(AnimType) != [3,5]
value = ifelse((gethitvar(AirType) = 1),5000,5010)+gethitvar(AnimType)

[State 6160]
type = ChangeAnim
triggerall = Enemy,Var(31) = 1
trigger1 = Time = 0
trigger1 = GetHitVar(AnimType) = [3,5]
value = ifelse(gethitvar(YVel) < 0,5030+(ifelse(gethitvar(YVel) < -11,1,0)),5058)+ifelse((gethitvar(YVel) > -11 && gethitvar(YVel) < 0) && gethitvar(GroundType)= 2,4,0)

[State 6160]
type = ChangeAnim
triggerall = Enemy,Var(31) = 1
trigger1 = Time = 0
trigger1 = (GetHitVar(AnimType) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(AnimType)))
value = (5047+gethitvar(AnimType))+(ifelse(gethitvar(AnimType) = 4 && gethitvar(YVel) < -11,4,0))+ifelse(gethitvar(AnimType) = 5 && P2StateNo >= 3000,5,0)

[State 6160]
type = ChangeAnim2
triggerall = Enemy,Var(31) != 1
trigger1 = Time = 0
trigger1 = GetHitVar(AnimType) != [3,5]
value = ifelse((gethitvar(AirType) = 1),5000,5010)+gethitvar(AnimType)

[State 6160]
type = ChangeAnim2
triggerall = Enemy,Var(31) != 1
trigger1 = Time = 0
trigger1 = GetHitVar(AnimType) = [3,5]
value = ifelse(gethitvar(YVel) < 0,5030+(ifelse(gethitvar(YVel) < -11,1,0)),5058)+ifelse((gethitvar(YVel) > -11 && gethitvar(YVel) < 0) && gethitvar(GroundType)= 2,4,0)

[State 6160]
type = ChangeAnim2
triggerall = Enemy,Var(31) != 1
trigger1 = Time = 0
trigger1 = GetHitVar(AnimType) = [4,5]
value = (5047+gethitvar(AnimType))+(ifelse(gethitvar(AnimType) = 4 && gethitvar(YVel) < -11,4,0))+ifelse(gethitvar(AnimType) = 5 && P2StateNo >= 3000,5,0)

[State 6160]
type = ChangeAnim
trigger1 = Enemy,Var(31) = 1
trigger1 = Time > 0
value = anim

[State 6160]
type = ChangeAnim2
trigger1 = Enemy,Var(31) != 1
trigger1 = Time > 0
value = 5030

[State 6160]
type = ChangeState
trigger1 = HitShakeOver
value = 6161

[State 6160]
type = ForceFeedBack
trigger1 = Anim = 5000
trigger2 = Anim = 5010
persistent = 0
time = 6
waveform = Square

[State 6160]
type = ForceFeedBack
trigger1 = Anim = 5001
trigger2 = Anim = 5011
persistent = 0
time = 8
waveform = SineSquare
ampl = 110,-1,-.3

[State 6160]
type = ForceFeedBack
trigger1 = Anim = 5012
trigger2 = Anim = 5002
trigger3 = Anim = 5030
trigger4 = Anim = [5051,5059]
persistent = 0
time = 15
waveform = SineSquare
ampl = 140

;---------------------------------------------------------------------------
; HITA_UP (initial going up)
[Statedef 6161]
type    = A
movetype= H
physics = N
ctrl = 0

[State 6161]
type = VelAdd
trigger1 = 1
y = 0.523

[State 6161]
type = VelSet
trigger1 = Time = 0
x = 0
y = -11.46

[State 6161]
type = ChangeState
trigger1 = HitOver
trigger2 = Vel Y > 0
trigger2 = Pos Y >= 0
value = 6163

[State 6161]
type = ChangeState
trigger1 = AnimTime = 0
value = 6162

;---------------------------------------------------------------------------
; HITA_UP_T (transition)
[Statedef 6162]
type    = A
movetype= H
physics = N

[State 6162]
type = ChangeAnim
triggerall = Enemy,Var(31) = 1
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0
trigger2 = Anim != 5035
trigger2 = (Anim != [5051,5059]) && (Anim != [5061,5069])
trigger2 = Anim != 5090
value = 5050+(ifelse(anim = 5031,6,0))+ifelse((gethitvar(YVel) > -11 && gethitvar(YVel) < 0) && gethitvar(GroundType) = 2,4,0)

[State 6162]
type = ChangeAnim
triggerall = Enemy,Var(31) = 1
trigger1 = Anim = [5050,5059]
trigger1 = SelfAnimExist(Anim+10)
value = anim+10
persistent = 0

[State 6162]
type = ChangeAnim2
triggerall = Enemy,Var(31) != 1
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0
trigger2 = Anim != 5035
trigger2 = (Anim != [5051,5059]) && (Anim != [5061,5069])
trigger2 = Anim != 5090
value = 5054

[State 6162]
type = ChangeAnim2
triggerall = Enemy,Var(31) != 1
trigger1 = Anim = [5050,5059]
trigger1 = SelfAnimExist(Anim+10)
value = anim+10
persistent = 0

[State 6162]
type = VelAdd
trigger1 = 1
y = gethitvar(Yaccel)

[State 6162]
type = ChangeState
trigger1 = HitOver
trigger2 = AnimTime = 0
trigger3 = Vel Y > 0
trigger3 = Pos Y >= 0
trigger4 = Time = 0
trigger4 = Anim != 5035
value = 6163

;---------------------------------------------------------------------------
; HITA_FALL (knocked up, falling)
[Statedef 6163]
type    = A
movetype= H
physics = N

[State 6163]
type = ChangeAnim
triggerall = Enemy,Var(31) = 1
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0
trigger2 = Anim != 5035
trigger2 = (Anim != [5051,5059]) && (Anim != [5061,5069])
trigger2 = Anim != 5090
value = 5050

[State 6163]
type = ChangeAnim
triggerall = Enemy,Var(31) = 1
trigger1 = Anim = [5050,5059]
trigger1 = Vel Y >= IfElse(Anim = 5050,1,-2)
trigger1 = SelfAnimExist(Anim+10)
value = anim+10
persistent = 0

[State 6163]
type = ChangeAnim2
triggerall = Enemy,Var(31) != 1
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0
trigger2 = Anim != 5035
trigger2 = (Anim != [5051,5059]) && (Anim != [5061,5069])
trigger2 = Anim != 5090
value = 5050

[State 6163]
type = ChangeAnim2
triggerall = Enemy,Var(31) != 1
trigger1 = Anim = [5050,5059]
trigger1 = Vel Y >= IfElse(Anim = 5050,1,-2)
trigger1 = SelfAnimExist(Anim+10)
value = anim+10
persistent = 0

[State 6163]
type = VelAdd
trigger1 = 1
y = gethitvar(Yaccel)

[State 6163]
type = VarSet
triggerall = AuthorName = "German"
trigger1 = Time = 0
var(2) = 0
ignorehitpause = 1

[State 6163]
type = VarSet
triggerall = AuthorName = "German"
triggerall = Alive && Vel Y > 0 && Pos Y >= -60
trigger1 = Var(59) = 0
trigger1 = Command = "Recovery"
trigger2 = Var(59) = 1
var(2) = 1
ignorehitpause = 1

[State 6163]
type = SelfState
triggerall = AuthorName = "German"
triggerall = Pos Y >= -12 && Vel Y > 0
triggerall = GetHitVar(YVel) < -1
triggerall = Alive
trigger1 = Var(59) = 0
trigger1 = Var(2) = 1
trigger2 = Var(59) = 1
value = 5200

[State 6163]
type = SelfState
trigger1 = Pos Y >= -12 && Vel Y > 0
value = 5100

;---------------------------------------------------------------------------
;  5
[Statedef 6200]
type    = A
movetype= H
physics = N
velset = 0,0

[State 6200]
type = StopSnd
trigger1 = 1
channel = 4

[State 6200]
type = ChangeAnim
trigger1 = Enemy,Var(31) = 1
trigger1 = Time = 0
trigger1 = GetHitVar(AnimType) != [3,5]
value = ifelse((gethitvar(AirType) = 1),5000,5010)+gethitvar(AnimType)

[State 6200]
type = ChangeAnim
trigger1 = Enemy,Var(31) = 1
trigger1 = Time = 0
trigger1 = GetHitVar(AnimType) = [3,5]
value = ifelse(gethitvar(YVel) < 0,5030+(ifelse(gethitvar(YVel) < -11,1,0)),5058)+ifelse((gethitvar(YVel) > -11 && gethitvar(YVel) < 0) && gethitvar(GroundType)= 2,4,0)

[State 6200]
type = ChangeAnim
trigger1 = Enemy,Var(31) = 1
trigger1 = Time = 0
trigger1 = (GetHitVar(AnimType) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(AnimType)))
value = (5047+gethitvar(AnimType))+(ifelse(gethitvar(AnimType) = 4 && gethitvar(YVel) < -11,4,0))+ifelse(gethitvar(AnimType) = 5 && P2StateNo >= 3000,5,0)

[State 6200]
type = ChangeAnim2
trigger1 = Enemy,Var(31) != 1
trigger1 = Time = 0
trigger1 = GetHitVar(AnimType) != [3,5]
value = ifelse((gethitvar(AirType) = 1),5000,5010)+gethitvar(AnimType)

[State 6200]
type = ChangeAnim2
trigger1 = Enemy,Var(31) != 1
trigger1 = Time = 0
trigger1 = GetHitVar(AnimType) = [3,5]
value = ifelse(gethitvar(YVel) < 0,5030+(ifelse(gethitvar(YVel) < -11,1,0)),5058)+ifelse((gethitvar(YVel) > -11 && gethitvar(YVel) < 0) && gethitvar(GroundType)= 2,4,0)

[State 6200]
type = ChangeAnim2
trigger1 = Enemy,Var(31) != 1
trigger1 = Time = 0
trigger1 = (GetHitVar(AnimType) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(AnimType)))
value = (5047+gethitvar(AnimType))+(ifelse(gethitvar(AnimType) = 4 && gethitvar(YVel) < -11,4,0))+ifelse(gethitvar(AnimType) = 5 && P2StateNo >= 3000,5,0)

[State 6200]
type = ChangeAnim
trigger1 = Enemy,Var(31) = 1
trigger1 = Time > 0
value = anim

[State 6200]
type = ChangeAnim2
trigger1 = Enemy,Var(31) != 1
trigger1 = Time > 0
value = 5030

[State 6200]
type = ChangeState
trigger1 = HitShakeOver
value = 6201

[State 6200]
type = ForceFeedBack
trigger1 = Anim = 5000
trigger2 = Anim = 5010
persistent = 0
time = 6
waveform = Square

[State 6200]
type = ForceFeedBack
trigger1 = Anim = 5001
trigger2 = Anim = 5011
persistent = 0
time = 8
waveform = SineSquare
ampl = 110,-1,-.3

[State 6200]
type = ForceFeedBack
trigger1 = Anim = 5012
trigger2 = Anim = 5002
trigger3 = Anim = 5030
trigger4 = Anim = [5051,5059]
persistent = 0
time = 15
waveform = SineSquare
ampl = 140

;---------------------------------------------------------------------------
; HITA_UP (initial going up)
[Statedef 6201]
type    = A
movetype= H
physics = N
ctrl = 0

[State 6201]
type = VelAdd
trigger1 = 1
y = 0.523

[State 6201]
type = VelSet
triggerall = Facing*Enemy,Facing = -1
trigger1 = Time = 0
x = -6.34
y = -10.09

[State 6201]
type = VelSet
triggerall = Facing*Enemy,Facing = 1
trigger1 = Time = 0
x = 6.34
y = -10.09

[State 6201]
type = ChangeState
trigger1 = HitOver
trigger2 = Vel Y > 0
trigger2 = Pos Y >= 0
value = 6203

[State 6201]
type = ChangeState
trigger1 = AnimTime = 0
value = 6202

;---------------------------------------------------------------------------
; HITA_UP_T (transition)
[Statedef 6202]
type    = A
movetype= H
physics = N

[State 6202]
type = ChangeAnim
triggerall = Enemy,Var(31) = 1
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0
trigger2 = Anim != 5035
trigger2 = (Anim != [5051,5059]) && (Anim != [5061,5069])
trigger2 = Anim != 5090
value = 5050+(ifelse(anim = 5031,6,0))+ifelse((gethitvar(YVel) > -11 && gethitvar(YVel) < 0) && gethitvar(GroundType) = 2,4,0)

[State 6202]
type = ChangeAnim
triggerall = Enemy,Var(31) = 1
trigger1 = Anim = [5050,5059]
trigger1 = SelfAnimExist(Anim+10)
value = anim+10
persistent = 0

[State 6202]
type = ChangeAnim2
triggerall = Enemy,Var(31) != 1
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0
trigger2 = Anim != 5035
trigger2 = (Anim != [5051,5059]) && (Anim != [5061,5069])
trigger2 = Anim != 5090
value = 5054

[State 6202]
type = ChangeAnim2
triggerall = Enemy,Var(31) != 1
trigger1 = Anim = [5050,5059]
trigger1 = SelfAnimExist(Anim+10)
value = anim+10
persistent = 0

[State 6202]
type = VelAdd
trigger1 = 1
y = gethitvar(Yaccel)

[State 6202]
type = ChangeState
trigger1 = HitOver
trigger2 = AnimTime = 0
trigger3 = Vel Y > 0
trigger3 = Pos Y >= 0
trigger4 = Time = 0
trigger4 = Anim != 5035
value = 6203

;---------------------------------------------------------------------------
; HITA_FALL (knocked up, falling)
[Statedef 6203]
type    = A
movetype= H
physics = N

[State 6203]
type = ChangeAnim
triggerall = Enemy,Var(31) = 1
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0
trigger2 = Anim != 5035
trigger2 = (Anim != [5051,5059]) && (Anim != [5061,5069])
trigger2 = Anim != 5090
value = 5050

[State 6203]
type = ChangeAnim
triggerall = Enemy,Var(31) = 1
trigger1 = Anim = [5050,5059]
trigger1 = Vel Y >= IfElse(Anim = 5050,1,-2)
trigger1 = SelfAnimExist(Anim+10)
value = anim+10
persistent = 0

[State 6203]
type = ChangeAnim2
triggerall = Enemy,Var(31) != 1
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0
trigger2 = Anim != 5035
trigger2 = (Anim != [5051,5059]) && (Anim != [5061,5069])
trigger2 = Anim != 5090
value = 5050

[State 6203]
type = ChangeAnim2
triggerall = Enemy,Var(31) != 1
trigger1 = Anim = [5050,5059]
trigger1 = Vel Y >= IfElse(Anim = 5050,1,-2)
trigger1 = SelfAnimExist(Anim+10)
value = anim+10
persistent = 0

[State 6203]
type = VelAdd
trigger1 = 1
y = gethitvar(Yaccel)

[State 6203]
type = VarSet
triggerall = AuthorName = "German"
trigger1 = Time = 0
var(2) = 0
ignorehitpause = 1

[State 6203]
type = VarSet
triggerall = AuthorName = "German"
triggerall = Alive && Vel Y > 0 && Pos Y >= -60
trigger1 = Var(59) = 0
trigger1 = Command = "Recovery"
trigger2 = Var(59) = 1
var(2) = 1
ignorehitpause = 1

[State 6203]
type = SelfState
triggerall = AuthorName = "German"
triggerall = Pos Y >= -12 && Vel Y > 0
triggerall = GetHitVar(YVel) < -1
triggerall = Alive
trigger1 = Var(59) = 0
trigger1 = Var(2) = 1
trigger2 = Var(59) = 1
value = 5200

[State 6203]
type = SelfState
trigger1 = Pos Y >= -12 && Vel Y > 0
value = 5100

;---------------------------------------------------------------------------
;  6
[Statedef 6210]
type    = A
movetype= H
physics = N
velset = 0,0

[State 6210]
type = StopSnd
trigger1 = 1
channel = 4

[State 6210]
type = NotHitBy
trigger1 = 1
value = SC,NA,SA,HA,NP,SP,HP

[State 6210]
type = ChangeAnim
trigger1 = Enemy,Var(31) = 1
trigger1 = Time = 0
trigger1 = GetHitVar(AnimType) != [3,5]
value = ifelse((gethitvar(AirType) = 1),5000,5010)+gethitvar(AnimType)

[State 6210]
type = ChangeAnim
trigger1 = Enemy,Var(31) = 1
trigger1 = Time = 0
trigger1 = GetHitVar(AnimType) = [3,5]
value = ifelse(gethitvar(YVel) < 0,5030+(ifelse(gethitvar(YVel) < -11,1,0)),5058)+ifelse((gethitvar(YVel) > -11 && gethitvar(YVel) < 0) && gethitvar(GroundType)= 2,4,0)

[State 6210]
type = ChangeAnim
trigger1 = Enemy,Var(31) = 1
trigger1 = Time = 0
trigger1 = (GetHitVar(AnimType) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(AnimType)))
value = (5047+gethitvar(AnimType))+(ifelse(gethitvar(AnimType) = 4 && gethitvar(YVel) < -11,4,0))+ifelse(gethitvar(AnimType) = 5 && P2StateNo >= 3000,5,0)

[State 6210]
type = ChangeAnim2
trigger1 = Enemy,Var(31) != 1
trigger1 = Time = 0
trigger1 = GetHitVar(AnimType) != [3,5]
value = ifelse((gethitvar(AirType) = 1),5000,5010)+gethitvar(AnimType)

[State 6210]
type = ChangeAnim2
trigger1 = Enemy,Var(31) != 1
trigger1 = Time = 0
trigger1 = GetHitVar(AnimType) = [3,5]
value = ifelse(gethitvar(YVel) < 0,5030+(ifelse(gethitvar(YVel) < -11,1,0)),5058)+ifelse((gethitvar(YVel) > -11 && gethitvar(YVel) < 0) && gethitvar(GroundType)= 2,4,0)

[State 6210]
type = ChangeAnim2
trigger1 = Enemy,Var(31) != 1
trigger1 = Time = 0
trigger1 = (GetHitVar(AnimType) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(AnimType)))
value = (5047+gethitvar(AnimType))+(ifelse(gethitvar(AnimType) = 4 && gethitvar(YVel) < -11,4,0))+ifelse(gethitvar(AnimType) = 5 && P2StateNo >= 3000,5,0)

[State 6210]
type = ChangeAnim
trigger1 = Enemy,Var(31) = 1
trigger1 = Time > 0
value = anim

[State 6210]
type = ChangeAnim2
trigger1 = Enemy,Var(31) != 1
trigger1 = Time > 0
value = 5030

[State 6210]
type = ChangeState
trigger1 = HitShakeOver
value = 6211

[State 6210]
type = ForceFeedBack
trigger1 = Anim = 5000
trigger2 = Anim = 5010
persistent = 0
time = 6
waveform = Square

[State 6210]
type = ForceFeedBack
trigger1 = Anim = 5001
trigger2 = Anim = 5011
persistent = 0
time = 8
waveform = SineSquare
ampl = 110,-1,-.3

[State 6210]
type = ForceFeedBack
trigger1 = Anim = 5012
trigger2 = Anim = 5002
trigger3 = Anim = 5030
trigger4 = Anim = [5051,5059]
persistent = 0
time = 15
waveform = SineSquare
ampl = 140

;---------------------------------------------------------------------------
; HITA_UP (initial going up)
[Statedef 6211]
type    = A
movetype= H
physics = N
ctrl = 0

[State 6211]
type = VelAdd
trigger1 = 1
y = 0.523

[State 6211]
type = VelSet
triggerall = Facing*Enemy,Facing = -1
trigger1 = Time = 0
x = -6.34
y = -9.3

[State 6211]
type = VelSet
triggerall = Facing*Enemy,Facing = 1
trigger1 = Time = 0
x = 6.34
y = -9.3

[State 6211]
type = NotHitBy
trigger1 = 1
value = SC,NA,SA,HA,NP,SP,HP

[State 6211]
type = ChangeState
trigger1 = HitOver
trigger2 = Vel Y > 0
trigger2 = Pos Y >= 0
value = 6213

[State 6211]
type = ChangeState
trigger1 = AnimTime = 0
value = 6212

;---------------------------------------------------------------------------
; HITA_UP_T (transition)
[Statedef 6212]
type    = A
movetype= H
physics = N

[State 6212]
type = ChangeAnim
triggerall = Enemy,Var(31) = 1
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0
trigger2 = Anim != 5035
trigger2 = (Anim != [5051,5059]) && (Anim != [5061,5069])
trigger2 = Anim != 5090
value = 5050+(ifelse(anim = 5031,6,0))+ifelse((gethitvar(YVel) > -11 && gethitvar(YVel) < 0) && gethitvar(GroundType) = 2,4,0)

[State 6212]
type = ChangeAnim
triggerall = Enemy,Var(31) = 1
trigger1 = Anim = [5050,5059]
trigger1 = SelfAnimExist(Anim+10)
value = anim+10
persistent = 0

[State 6212]
type = ChangeAnim2
triggerall = Enemy,Var(31) != 1
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0
trigger2 = Anim != 5035
trigger2 = (Anim != [5051,5059]) && (Anim != [5061,5069])
trigger2 = Anim != 5090
value = 5054

[State 6212]
type = ChangeAnim2
triggerall = Enemy,Var(31) != 1
trigger1 = Anim = [5050,5059]
trigger1 = SelfAnimExist(Anim+10)
value = anim+10
persistent = 0

[State 6212]
type = VelAdd
trigger1 = 1
y = gethitvar(Yaccel)

[State 6212]
type = ChangeState
trigger1 = HitOver
trigger2 = AnimTime = 0
trigger3 = Vel Y > 0
trigger3 = Pos Y >= 0
trigger4 = Time = 0
trigger4 = Anim != 5035
value = 6213

;---------------------------------------------------------------------------
; HITA_FALL (knocked up, falling)
[Statedef 6213]
type    = A
movetype= H
physics = N

[State 6213]
type = ChangeAnim
triggerall = Enemy,Var(31) = 1
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0
trigger2 = Anim != 5035
trigger2 = (Anim != [5051,5059]) && (Anim != [5061,5069])
trigger2 = Anim != 5090
value = 5050

[State 6213]
type = ChangeAnim
triggerall = Enemy,Var(31) = 1
trigger1 = Anim = [5050,5059]
trigger1 = Vel Y >= IfElse(Anim = 5050,1,-2)
trigger1 = SelfAnimExist(Anim+10)
value = anim+10
persistent = 0

[State 6213]
type = ChangeAnim2
triggerall = Enemy,Var(31) != 1
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0
trigger2 = Anim != 5035
trigger2 = (Anim != [5051,5059]) && (Anim != [5061,5069])
trigger2 = Anim != 5090
value = 5050

[State 6213]
type = ChangeAnim2
triggerall = Enemy,Var(31) != 1
trigger1 = Anim = [5050,5059]
trigger1 = Vel Y >= IfElse(Anim = 5050,1,-2)
trigger1 = SelfAnimExist(Anim+10)
value = anim+10
persistent = 0

[State 6213]
type = VelAdd
trigger1 = 1
y = gethitvar(Yaccel)

[State 6213]
type = NotHitBy
trigger1 = 1
value = SC,NA,SA,HA,NP,SP,HP

[State 6213]
type = SelfState
trigger1 = Pos Y >= -12 && Vel Y > 0
value = 5100

;---------------------------------------------------------------------------
;  7
[Statedef 6250]
type    = A
movetype= H
physics = N
velset = 0,0

[State 6250]
type = StopSnd
trigger1 = 1
channel = 4

[State 6250]
type = ChangeAnim
triggerall = Enemy,Var(31) = 1
trigger1 = Time = 0
trigger1 = GetHitVar(AnimType) != [3,5]
value = ifelse((gethitvar(AirType) = 1),5000,5010)+gethitvar(AnimType)

[State 6250]
type = ChangeAnim
triggerall = Enemy,Var(31) = 1
trigger1 = Time = 0
trigger1 = GetHitVar(AnimType) = [3,5]
value = ifelse(gethitvar(YVel) < 0,5030+(ifelse(gethitvar(YVel) < -11,1,0)),5058)+ifelse((gethitvar(YVel) > -11 && gethitvar(YVel) < 0) && gethitvar(GroundType)= 2,4,0)

[State 6250]
type = ChangeAnim
triggerall = Enemy,Var(31) = 1
trigger1 = Time = 0
trigger1 = (GetHitVar(AnimType) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(AnimType)))
value = (5047+gethitvar(AnimType))+(ifelse(gethitvar(AnimType) = 4 && gethitvar(YVel) < -11,4,0))+ifelse(gethitvar(AnimType) = 5 && P2StateNo >= 3000,5,0)

[State 6250]
type = ChangeAnim2
triggerall = Enemy,Var(31) != 1
trigger1 = Time = 0
trigger1 = GetHitVar(AnimType) != [3,5]
value = ifelse((gethitvar(AirType) = 1),5000,5010)+gethitvar(AnimType)

[State 6250]
type = ChangeAnim2
triggerall = Enemy,Var(31) != 1
trigger1 = Time = 0
trigger1 = GetHitVar(AnimType) = [3,5]
value = ifelse(gethitvar(YVel) < 0,5030+(ifelse(gethitvar(YVel) < -11,1,0)),5058)+ifelse((gethitvar(YVel) > -11 && gethitvar(YVel) < 0) && gethitvar(GroundType)= 2,4,0)

[State 6250]
type = ChangeAnim2
triggerall = Enemy,Var(31) != 1
trigger1 = Time = 0
trigger1 = GetHitVar(AnimType) = [4,5]
value = (5047+gethitvar(AnimType))+(ifelse(gethitvar(AnimType) = 4 && gethitvar(YVel) < -11,4,0))+ifelse(gethitvar(AnimType) = 5 && P2StateNo >= 3000,5,0)

[State 6250]
type = ChangeAnim
trigger1 = Enemy,Var(31) = 1
trigger1 = Time > 0
value = anim

[State 6250]
type = ChangeAnim2
trigger1 = Enemy,Var(31) != 1
trigger1 = Time > 0
value = 5030

[State 6250]
type = ChangeState
trigger1 = HitShakeOver
value = 6151

[State 6250]
type = ForceFeedBack
trigger1 = Anim = 5000
trigger2 = Anim = 5010
persistent = 0
time = 6
waveform = Square

[State 6250]
type = ForceFeedBack
trigger1 = Anim = 5001
trigger2 = Anim = 5011
persistent = 0
time = 8
waveform = SineSquare
ampl = 110,-1,-.3

[State 6250]
type = ForceFeedBack
trigger1 = Anim = 5012
trigger2 = Anim = 5002
trigger3 = Anim = 5030
trigger4 = Anim = [5051,5059]
persistent = 0
time = 15
waveform = SineSquare
ampl = 140

;---------------------------------------------------------------------------
; HITA_UP (initial going up)
[Statedef 6251]
type    = A
movetype= H
physics = N
ctrl = 0

[State 6251]
type = VelAdd
trigger1 = 1
y = 0.523

[State 6251]
type = VelSet
triggerall = Facing*Enemy,Facing = -1
trigger1 = Time = 0
x = -6.34
y = -11.09

[State 6251]
type = VelSet
triggerall = Facing*Enemy,Facing = 1
trigger1 = Time = 0
x = 6.34
y = -11.09

[State 6251]
type = ChangeState
trigger1 = HitOver
trigger2 = Vel Y > 0
trigger2 = Pos Y >= 0
value = 6253

[State 6251]
type = ChangeState
trigger1 = AnimTime = 0
value = 6252

;---------------------------------------------------------------------------
; HITA_UP_T (transition)
[Statedef 6252]
type    = A
movetype= H
physics = N

[State 6252]
type = ChangeAnim
triggerall = Enemy,Var(31) = 1
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0
trigger2 = Anim != 5035
trigger2 = (Anim != [5051,5059]) && (Anim != [5061,5069])
trigger2 = Anim != 5090
value = 5050+(ifelse(anim = 5031,6,0))+ifelse((gethitvar(YVel) > -11 && gethitvar(YVel) < 0) && gethitvar(GroundType) = 2,4,0)

[State 6252]
type = ChangeAnim
triggerall = Enemy,Var(31) = 1
trigger1 = Anim = [5050,5059]
trigger1 = SelfAnimExist(Anim+10)
value = anim+10
persistent = 0

[State 6252]
type = ChangeAnim2
triggerall = Enemy,Var(31) != 1
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0
trigger2 = Anim != 5035
trigger2 = (Anim != [5051,5059]) && (Anim != [5061,5069])
trigger2 = Anim != 5090
value = 5054

[State 6252]
type = ChangeAnim2
triggerall = Enemy,Var(31) != 1
trigger1 = Anim = [5050,5059]
trigger1 = SelfAnimExist(Anim+10)
value = anim+10
persistent = 0

[State 6252]
type = VelAdd
trigger1 = 1
y = gethitvar(Yaccel)

[State 6252]
type = ChangeState
trigger1 = HitOver
trigger2 = AnimTime = 0
trigger3 = Vel Y > 0
trigger3 = Pos Y >= 0
trigger4 = Time = 0
trigger4 = Anim != 5035
value = 6253

;---------------------------------------------------------------------------
; HITA_FALL (knocked up, falling)
[Statedef 6253]
type    = A
movetype= H
physics = N

[State 6253]
type = ChangeAnim
triggerall = Enemy,Var(31) = 1
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0
trigger2 = Anim != 5035
trigger2 = (Anim != [5051,5059]) && (Anim != [5061,5069])
trigger2 = Anim != 5090
value = 5050

[State 6253]
type = ChangeAnim
triggerall = Enemy,Var(31) = 1
trigger1 = Anim = [5050,5059]
trigger1 = Vel Y >= IfElse(Anim = 5050,1,-2)
trigger1 = SelfAnimExist(Anim+10)
value = anim+10
persistent = 0

[State 6253]
type = ChangeAnim2
triggerall = Enemy,Var(31) != 1
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0
trigger2 = Anim != 5035
trigger2 = (Anim != [5051,5059]) && (Anim != [5061,5069])
trigger2 = Anim != 5090
value = 5050

[State 6253]
type = ChangeAnim2
triggerall = Enemy,Var(31) != 1
trigger1 = Anim = [5050,5059]
trigger1 = Vel Y >= IfElse(Anim = 5050,1,-2)
trigger1 = SelfAnimExist(Anim+10)
value = anim+10
persistent = 0

[State 6253]
type = VelAdd
trigger1 = 1
y = gethitvar(Yaccel)

[State 6253]
type = VarSet
triggerall = AuthorName = "German"
trigger1 = Time = 0
var(2) = 0
ignorehitpause = 1

[State 6253]
type = VarSet
triggerall = AuthorName = "German"
triggerall = Alive && Vel Y > 0 && Pos Y >= -60
trigger1 = Var(59) = 0
trigger1 = Command = "Recovery"
trigger2 = Var(59) = 1
var(2) = 1
ignorehitpause = 1

[State 6253]
type = SelfState
triggerall = AuthorName = "German"
triggerall = Pos Y >= -12 && Vel Y > 0
triggerall = GetHitVar(YVel) < -1
triggerall = Alive
trigger1 = Var(59) = 0
trigger1 = Var(2) = 1
trigger2 = Var(59) = 1
value = 5200

[State 6253]
type = SelfState
trigger1 = Pos Y >= -12 && Vel Y > 0
value = 5100

;---------------------------------------------------------------------------
;  8
[Statedef 6300]
type    = A
movetype= H
physics = N
velset = 0,0

[State 6300]
type = StopSnd
trigger1 = 1
channel = 4

[State 6300]
type = ChangeAnim
trigger1 = Enemy,Var(31) = 1
trigger1 = Time = 0
trigger1 = GetHitVar(AnimType) != [3,5]
value = ifelse((gethitvar(AirType) = 1),5000,5010)+gethitvar(AnimType)

[State 6300]
type = ChangeAnim
trigger1 = Enemy,Var(31) = 1
trigger1 = Time = 0
trigger1 = GetHitVar(AnimType) = [3,5]
value = ifelse(gethitvar(YVel) < 0,5030+(ifelse(gethitvar(YVel) < -11,1,0)),5058)+ifelse((gethitvar(YVel) > -11 && gethitvar(YVel) < 0) && gethitvar(GroundType)= 2,4,0)

[State 6300]
type = ChangeAnim
trigger1 = Enemy,Var(31) = 1
trigger1 = Time = 0
trigger1 = (GetHitVar(AnimType) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(AnimType)))
value = (5047+gethitvar(AnimType))+(ifelse(gethitvar(AnimType) = 4 && gethitvar(YVel) < -11,4,0))+ifelse(gethitvar(AnimType) = 5 && P2StateNo >= 3000,5,0)

[State 6300]
type = ChangeAnim2
trigger1 = Enemy,Var(31) != 1
trigger1 = Time = 0
trigger1 = GetHitVar(AnimType) != [3,5]
value = ifelse((gethitvar(AirType) = 1),5000,5010)+gethitvar(AnimType)

[State 6300]
type = ChangeAnim2
trigger1 = Enemy,Var(31) != 1
trigger1 = Time = 0
trigger1 = GetHitVar(AnimType) = [3,5]
value = ifelse(gethitvar(YVel) < 0,5030+(ifelse(gethitvar(YVel) < -11,1,0)),5058)+ifelse((gethitvar(YVel) > -11 && gethitvar(YVel) < 0) && gethitvar(GroundType)= 2,4,0)

[State 6300]
type = ChangeAnim2
trigger1 = Enemy,Var(31) != 1
trigger1 = Time = 0
trigger1 = (GetHitVar(AnimType) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(AnimType)))
value = (5047+gethitvar(AnimType))+(ifelse(gethitvar(AnimType) = 4 && gethitvar(YVel) < -11,4,0))+ifelse(gethitvar(AnimType) = 5 && P2StateNo >= 3000,5,0)

[State 6300]
type = ChangeAnim
trigger1 = Enemy,Var(31) = 1
trigger1 = Time > 0
value = anim

[State 6300]
type = ChangeAnim2
trigger1 = Enemy,Var(31) != 1
trigger1 = Time > 0
value = 5030

[State 6300]
type = ChangeState
trigger1 = HitShakeOver
value = 6301

[State 6300]
type = ForceFeedBack
trigger1 = Anim = 5000
trigger2 = Anim = 5010
persistent = 0
time = 6
waveform = Square

[State 6300]
type = ForceFeedBack
trigger1 = Anim = 5001
trigger2 = Anim = 5011
persistent = 0
time = 8
waveform = SineSquare
ampl = 110,-1,-.3

[State 6300]
type = ForceFeedBack
trigger1 = Anim = 5012
trigger2 = Anim = 5002
trigger3 = Anim = 5030
trigger4 = Anim = [5051,5059]
persistent = 0
time = 15
waveform = SineSquare
ampl = 140

;---------------------------------------------------------------------------
; HITA_UP (initial going up)
[Statedef 6301]
type    = A
movetype= H
physics = N
ctrl = 0

[State 6301]
type = VelAdd
trigger1 = 1
y = 0.523

[State 6301]
type = VelSet
triggerall = Facing*Enemy,Facing = -1
trigger1 = Time = 0
x = -4.64
y = 8.09

[State 6301]
type = VelSet
triggerall = Facing*Enemy,Facing = 1
trigger1 = Time = 0
x = 4.64
y = 8.09

[State 6301]
type = ChangeState
trigger1 = HitOver
trigger2 = Vel Y > 0
trigger2 = Pos Y >= 0
value = 6303

[State 6301]
type = ChangeState
trigger1 = AnimTime = 0
value = 6302

;---------------------------------------------------------------------------
; HITA_UP_T (transition)
[Statedef 6302]
type    = A
movetype= H
physics = N

[State 6302]
type = ChangeAnim
triggerall = Enemy,Var(31) = 1
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0
trigger2 = Anim != 5035
trigger2 = (Anim != [5051,5059]) && (Anim != [5061,5069])
trigger2 = Anim != 5090
value = 5050+(ifelse(anim = 5031,6,0))+ifelse((gethitvar(YVel) > -11 && gethitvar(YVel) < 0) && gethitvar(GroundType) = 2,4,0)

[State 6302]
type = ChangeAnim
triggerall = Enemy,Var(31) = 1
trigger1 = Anim = [5050,5059]
trigger1 = SelfAnimExist(Anim+10)
value = anim+10
persistent = 0

[State 6302]
type = ChangeAnim2
triggerall = Enemy,Var(31) != 1
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0
trigger2 = Anim != 5035
trigger2 = (Anim != [5051,5059]) && (Anim != [5061,5069])
trigger2 = Anim != 5090
value = 5054

[State 6302]
type = ChangeAnim2
triggerall = Enemy,Var(31) != 1
trigger1 = Anim = [5050,5059]
trigger1 = SelfAnimExist(Anim+10)
value = anim+10
persistent = 0

[State 6302]
type = VelAdd
trigger1 = 1
y = gethitvar(Yaccel)

[State 6302]
type = ChangeState
trigger1 = HitOver
trigger2 = AnimTime = 0
trigger3 = Vel Y > 0
trigger3 = Pos Y >= 0
trigger4 = Time = 0
trigger4 = Anim != 5035
value = 6303

;---------------------------------------------------------------------------
; HITA_FALL (knocked up, falling)
[Statedef 6303]
type    = A
movetype= H
physics = N

[State 6303]
type = ChangeAnim
triggerall = Enemy,Var(31) = 1
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0
trigger2 = Anim != 5035
trigger2 = (Anim != [5051,5059]) && (Anim != [5061,5069])
trigger2 = Anim != 5090
value = 5050

[State 6303]
type = ChangeAnim
triggerall = Enemy,Var(31) = 1
trigger1 = Anim = [5050,5059]
trigger1 = Vel Y >= IfElse(Anim = 5050,1,-2)
trigger1 = SelfAnimExist(Anim+10)
value = anim+10
persistent = 0

[State 6303]
type = ChangeAnim2
triggerall = Enemy,Var(31) != 1
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0
trigger2 = Anim != 5035
trigger2 = (Anim != [5051,5059]) && (Anim != [5061,5069])
trigger2 = Anim != 5090
value = 5050

[State 6303]
type = ChangeAnim2
triggerall = Enemy,Var(31) != 1
trigger1 = Anim = [5050,5059]
trigger1 = Vel Y >= IfElse(Anim = 5050,1,-2)
trigger1 = SelfAnimExist(Anim+10)
value = anim+10
persistent = 0

[State 6303]
type = VelAdd
trigger1 = 1
y = gethitvar(Yaccel)

[State 6303]
type = SelfState
trigger1 = Pos Y >= -12 && Vel Y > 0
value = 5100

